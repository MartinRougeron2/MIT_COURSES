<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 4: Privilege Separation | Lecture Videos | Computer Systems Security | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-858-computer-systems-security-fall-2014" name="WT.cg_n">
    <meta content="Lecture 4: Privilege Separation" name="WT.cg_s">
    <meta content="In this lecture, Professor Zeldovich introduces the concept of privilege separation in the context of system security." name="Description">
    <meta content="Zeldovich, Nickolai" name="Author">
    <meta content="6.858,privilege separation,virtual machine,ssh,OKWS,Unix,OKCupid,Computer Design and Engineering,Software Design and Engineering" name="keywords">
    <meta content="6.858 Computer Systems Security | Lecture 4: Privilege Separation" name="Search_Display">
    <meta content="Computer Design and Engineering" itemprop="about">
    <meta content="Software Design and Engineering" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-4-privilege-separation/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Computer Systems Security</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/video-lectures/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 4: Privilege Separation
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 4: Privilege Separation
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/readings/index.htm">
		                  Readings  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/video-lectures/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/labs/index.htm">
		                  Labs  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/exams/index.htm">
		                  Exams  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/final-project/index.htm">
		                  Final Project  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/related-resources/index.htm">
		                  Related Resources  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-4-privilege-separation/dNl22h1kW1k.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://itunes.apple.com/us/itunes-u/id1017908130">iTunes U</a> or the <a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec04_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/dNl22h1kW1k', 'youtube', '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-4-privilege-separation', 'https://img.youtube.com/vi/dNl22h1kW1k/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-4-privilege-separation/dNl22h1kW1k.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 662948, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/video-lectures/lecture-3-buffer-overflow-exploits-and-defenses/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/video-lectures/lecture-6-capabilities/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p><strong>Description:</strong> In this lecture, Professor Zeldovich introduces the concept of privilege separation in the context of system security.</p>
<p><strong>Instructor:</strong> Nickolai Zeldovich</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-1-introduction-threat-models/index.htm">
<img src="https://img.youtube.com/vi/GqmQg-cszw4/default.jpg" title="Lecture 1: Introduction, Threat Models" alt="Lecture 1: Introduction, Threat Models">
<p>Lecture 1: Introduction, Th...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-2-control-hijacking-attacks/index.htm">
<img src="https://img.youtube.com/vi/r4KjHEgg9Wg/default.jpg" title="Lecture 2: Control Hijacking Attacks" alt="Lecture 2: Control Hijacking Attacks">
<p>Lecture 2: Control Hijackin...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-3-buffer-overflow-exploits-and-defenses/index.htm">
<img src="https://img.youtube.com/vi/xSQxaie_h1o/default.jpg" title="Lecture 3: Buffer Overflow Exploits and Defenses" alt="Lecture 3: Buffer Overflow Exploits and Defenses">
<p>Lecture 3: Buffer Overflow ...</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/dNl22h1kW1k/default.jpg" title="Lecture 4: Privilege Separation" alt="Lecture 4: Privilege Separation">
<p>Lecture 4: Privilege Separa...</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-6-capabilities/index.htm">
<img src="https://img.youtube.com/vi/TQhmua7Z2cY/default.jpg" title="Lecture 6: Capabilities" alt="Lecture 6: Capabilities">
<p>Lecture 6: Capabilities</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-7-sandboxing-native-code/index.htm">
<img src="https://img.youtube.com/vi/I0Psvvky-44/default.jpg" title="Lecture 7: Sandboxing Native Code	" alt="Lecture 7: Sandboxing Native Code	">
<p>Lecture 7: Sandboxing Nativ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-8-web-security-model/index.htm">
<img src="https://img.youtube.com/vi/eRJ_r8WF1Y0/default.jpg" title="Lecture 8: Web Security Model" alt="Lecture 8: Web Security Model">
<p>Lecture 8: Web Security Model</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-9-securing-web-applications/index.htm">
<img src="https://img.youtube.com/vi/WlmKwIe9z1Q/default.jpg" title="Lecture 9: Securing Web Applications" alt="Lecture 9: Securing Web Applications">
<p>Lecture 9: Securing Web App...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-10-symbolic-execution/index.htm">
<img src="https://img.youtube.com/vi/yRVZPvHYHzw/default.jpg" title="Lecture 10: Symbolic Execution" alt="Lecture 10: Symbolic Execution">
<p>Lecture 10: Symbolic Execution</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-11-ur-web/index.htm">
<img src="https://img.youtube.com/vi/XMEFdofERLI/default.jpg" title="Lecture 11: Ur/Web" alt="Lecture 11: Ur/Web">
<p>Lecture 11: Ur/Web</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-12-network-security/index.htm">
<img src="https://img.youtube.com/vi/BZTWXl9QNK8/default.jpg" title="Lecture 12: Network Security" alt="Lecture 12: Network Security">
<p>Lecture 12: Network Security</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-13-network-protocols/index.htm">
<img src="https://img.youtube.com/vi/QOtA76ga_fY/default.jpg" title="Lecture 13: Network Protocols" alt="Lecture 13: Network Protocols">
<p>Lecture 13: Network Protocols</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-14-ssl-and-https/index.htm">
<img src="https://img.youtube.com/vi/q1OF_0ICt9A/default.jpg" title="Lecture 14: SSL and HTTPS" alt="Lecture 14: SSL and HTTPS">
<p>Lecture 14: SSL and HTTPS</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-15-medical-software/index.htm">
<img src="https://img.youtube.com/vi/bA3xCpYLA34/default.jpg" title="Lecture 15: Medical Software" alt="Lecture 15: Medical Software">
<p>Lecture 15: Medical Software</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-16-side-channel-attacks/index.htm">
<img src="https://img.youtube.com/vi/3v5Von-oNUg/default.jpg" title="Lecture 16: Side-Channel Attacks" alt="Lecture 16: Side-Channel Attacks">
<p>Lecture 16: Side-Channel At...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-17-user-authentication/index.htm">
<img src="https://img.youtube.com/vi/MT7X17ZRo1U/default.jpg" title="Lecture 17: User Authentication" alt="Lecture 17: User Authentication">
<p>Lecture 17: User Authentica...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-18-private-browsing/index.htm">
<img src="https://img.youtube.com/vi/YTWXAFJf8bw/default.jpg" title="Lecture 18: Private Browsing" alt="Lecture 18: Private Browsing">
<p>Lecture 18: Private Browsing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-19-anonymous-communication/index.htm">
<img src="https://img.youtube.com/vi/OgGTJIgNewE/default.jpg" title="Lecture 19: Anonymous Communication" alt="Lecture 19: Anonymous Communication">
<p>Lecture 19: Anonymous Commu...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-20-mobile-phone-security/index.htm">
<img src="https://img.youtube.com/vi/uT7BXusDgDM/default.jpg" title="Lecture 20: Mobile Phone Security" alt="Lecture 20: Mobile Phone Security">
<p>Lecture 20: Mobile Phone Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-21-data-tracking/index.htm">
<img src="https://img.youtube.com/vi/WG5UbMrUiLU/default.jpg" title="Lecture 21: Data Tracking" alt="Lecture 21: Data Tracking">
<p>Lecture 21: Data Tracking</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-22-guest-lecture-by-mit-is-t/index.htm">
<img src="https://img.youtube.com/vi/2PO8h1pVW50/default.jpg" title="Lecture 22: Guest Lecture by MIT IS&amp;T" alt="Lecture 22: Guest Lecture by MIT IS&amp;T">
<p>Lecture 22: Guest Lecture b...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-23-security-economics/index.htm">
<img src="https://img.youtube.com/vi/8PdnOZI7H5E/default.jpg" title="Lecture 23: Security Economics" alt="Lecture 23: Security Economics">
<p>Lecture 23: Security Economics</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/video-lectures/lecture-4-privilege-separation/dNl22h1kW1k.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="90">The</span> <span m="170">following</span> <span m="610">content</span> <span m="1120">is</span> <span m="1230">proved</span> <span m="1670">under</span> <span m="1940">a</span> <span m="1980">Creative</span> <span m="2430">Commons</span> <span m="2830">license.</span> <span m="3820">Your</span> <span m="3910">support</span> <span m="4420">will</span> <span m="4560">help</span> <span m="4820">MIT</span> <span m="5310">OpenCourseWare</span> <span m="6060">continue</span> <span m="6540">to</span> <span m="6680">offer</span> <span m="7000">high</span> <span m="7210">quality</span> <span m="7720">educational</span> <span m="8370">resources</span> <span m="8940">for</span> <span m="9080">free.</span> <span m="10150">To</span> <span m="10250">make</span> <span m="10340">a</span> <span m="10400">donation</span> <span m="11100">or</span> <span m="11340">to</span> <span m="11450">view</span> <span m="11660">additional</span> <span m="12070">materials</span> <span m="12700">from</span> <span m="12860">hundreds</span> <span m="13190">of</span> <span m="13300">MIT</span> <span m="13680">courses,</span> <span m="15000">visit</span> <span m="15160">MIT</span> <span m="15690">OpenCourseWare</span> <span m="16600">at</span> <span m="17260">ocw.mit.edu.</span> </p>
<p><span m="26740">PROFESSOR: Today</span> <span m="26970">we're</span> <span m="27080">going</span> <span m="27200">to</span> <span m="27330">talk</span> <span m="27540">about</span> <span m="27870">privilege</span> <span m="28210">separation,</span> <span m="28940">so</span> <span m="29570">we're</span> <span m="29940">done</span> <span m="30330">with</span> <span m="30400">buffer</span> <span m="31070">overflows</span> <span m="31500">at</span> <span m="31690">some</span> <span m="31930">level,</span> <span m="32409">but</span> <span m="32770">will</span> <span m="33360">keep</span> <span m="33670">coming</span> <span m="34060">back</span> <span m="34450">as</span> <span m="34750">being</span> <span m="35030">a</span> <span m="35090">problem</span> <span m="35550">that</span> <span m="35780">we</span> <span m="35840">want</span> <span m="35900">to</span> <span m="35990">deal</span> <span m="36210">with,</span> <span m="36370">so</span> <span m="36630">we'll</span> <span m="36890">not</span> <span m="36990">talk</span> <span m="37360">about</span> <span m="37570">the</span> <span m="37650">details</span> <span m="38060">of</span> <span m="38170">how</span> <span m="38520">to</span> <span m="38850">exploit</span> <span m="39180">them,</span> <span m="39510">now</span> <span m="39720">we'll</span> <span m="39850">switch</span> <span m="39980">more</span> <span m="40290">into</span> <span m="40930">mitigation,</span> <span m="41510">if</span> <span m="41630">you</span> <span m="41740">will,</span> <span m="42210">or</span> <span m="42770">prevention</span> <span m="43280">techniques</span> <span m="43740">of</span> <span m="43850">how</span> <span m="43990">do</span> <span m="44070">you</span> <span m="44150">design</span> <span m="44530">a</span> <span m="44590">system</span> <span m="45160">where</span> <span m="45860">buffer</span> <span m="46235">overflows</span> <span m="46610">aren't</span> <span m="46900">such</span> <span m="47280">a</span> <span m="47860">huge</span> <span m="48200">problem</span> <span m="48610">for</span> <span m="49000">you, perhaps,</span> <span m="49780">as</span> <span m="49910">well</span> <span m="50130">as</span> <span m="50210">other</span> <span m="51150">security</span> <span m="51490">vulnerabilities.</span> </p>
<p><span m="52730">So</span> <span m="53230">for</span> <span m="53560">today</span> <span m="53820">we're</span> <span m="53960">going</span> <span m="54060">to</span> <span m="54200">talk</span> <span m="54460">about</span> <span m="55060">privilege</span> <span m="55100">separation</span> <span m="56610">as</span> <span m="56720">a</span> <span m="56830">general</span> <span m="57130">purpose</span> <span m="57460">technique</span> <span m="58000">for</span> <span m="58280">how</span> <span m="58550">to</span> <span m="58640">build</span> <span m="59010">a</span> <span m="59240">more</span> <span m="59460">secure</span> <span m="59940">system,</span> <span m="61120">and</span> <span m="61810">the</span> <span m="61900">particular</span> <span m="62290">paper</span> <span m="62860">we</span> <span m="62990">assigned</span> <span m="63410">for</span> <span m="63500">you</span> <span m="63590">today</span> <span m="63830">is</span> <span m="64120">this</span> <span m="64370">web</span> <span m="64569">server</span> <span m="64950">called</span> <span m="65300">OKWS.</span> <span m="65489">It's</span> <span m="65640">not</span> <span m="65790">necessarily</span> <span m="68100">the</span> <span m="68180">biggest</span> <span m="68630">example</span> <span m="68970">of</span> <span m="69310">privilege</span> <span m="69610">separation</span> <span m="70040">on</span> <span m="70280">there,</span> <span m="70490">but</span> <span m="70740">it's</span> <span m="70810">a</span> <span m="70880">reasonably</span> <span m="71410">well</span> <span m="72410">described</span> <span m="72905">system</span> <span m="74240">that</span> <span m="74590">we</span> <span m="74680">can</span> <span m="74770">actually</span> <span m="74980">read</span> <span m="75290">and</span> <span m="75430">really</span> <span m="75610">understand</span> <span m="76030">how</span> <span m="76520">all</span> <span m="76570">the</span> <span m="76620">pieces</span> <span m="76670">work,</span> <span m="77025">and</span> <span m="77380">you</span> <span m="77790">should</span> <span m="78030">really</span> <span m="78280">think</span> <span m="78430">of</span> <span m="78530">it</span> <span m="78630">more</span> <span m="78870">as</span> <span m="78960">a</span> <span m="79090">case</span> <span m="79350">study</span> <span m="79610">of</span> <span m="79770">how</span> <span m="79880">to</span> <span m="79950">do</span> <span m="80450">privilege</span> <span m="80745">separation</span> <span m="81040">right.</span> <span m="82120">Not</span> <span m="82350">necessarily</span> <span m="82920">you</span> <span m="83070">should</span> <span m="83400">go</span> <span m="83490">and</span> <span m="83580">download</span> <span m="83670">OKWS</span> <span m="84650">to</span> <span m="84730">run</span> <span m="84920">your</span> <span m="85070">website</span> <span m="85540">right</span> <span m="85740">now.</span> </p>
<p><span m="87260">So</span> <span m="88130">before</span> <span m="88370">we</span> <span m="88510">dive</span> <span m="88730">into</span> <span m="88870">the</span> <span m="89010">details</span> <span m="89315">of</span> <span m="89620">OKWS</span> <span m="89690">and</span> <span m="90550">Unix</span> <span m="90690">permissions,</span> <span m="91205">let's</span> <span m="91530">just</span> <span m="92820">see</span> <span m="93010">what</span> <span m="93290">is</span> <span m="93730">privilege</span> <span m="93800">separation,</span> <span m="94300">why</span> <span m="94440">is</span> <span m="94580">it</span> <span m="94700">such</span> <span m="94910">a</span> <span m="95310">good</span> <span m="95540">idea?</span> <span m="97180">And</span> <span m="97300">then,</span> <span m="97640">last</span> <span m="98020">week's</span> <span m="98400">lecture,</span> <span m="98705">James</span> <span m="99330">showed</span> <span m="99640">you</span> <span m="99790">that</span> <span m="100020">if</span> <span m="100130">you</span> <span m="100260">write</span> <span m="100490">a</span> <span m="100570">program</span> <span m="100900">in</span> <span m="101010">C,</span> <span m="101400">then</span> <span m="101630">it's</span> <span m="101790">almost</span> <span m="102080">inevitable</span> <span m="102650">you'll</span> <span m="102820">have</span> <span m="103000">something</span> <span m="103420">bad</span> <span m="104480">go</span> <span m="104800">wrong</span> <span m="105120">in</span> <span m="105600">that</span> <span m="106080">program,</span> <span m="106395">and</span> <span m="106710">the</span> <span m="106820">problem,</span> <span m="107510">at</span> <span m="107760">some</span> <span m="108190">level</span> <span m="108280">is</span> <span m="108370">that</span> <span m="108890">if</span> <span m="109040">you</span> <span m="109140">have</span> <span m="109520">a</span> <span m="109880">large</span> <span m="110250">application</span> <span m="111710">and</span> <span m="112420">there's</span> <span m="112590">any</span> <span m="112760">kind</span> <span m="112970">of</span> <span m="113100">all</span> <span m="113250">vulnerability</span> <span m="113725">in</span> <span m="113962">this</span> <span m="114200">application,</span> <span m="115180">then</span> <span m="116340">adversaries</span> <span m="116590">can</span> <span m="116920">connect</span> <span m="117200">and</span> <span m="117480">send</span> <span m="117610">requests</span> <span m="118040">for</span> <span m="118120">this</span> <span m="118250">application,</span> <span m="119270">might</span> <span m="119460">be</span> <span m="119550">able</span> <span m="119760">to</span> <span m="119880">trick</span> <span m="120095">it</span> <span m="120310">into</span> <span m="120430">doing</span> <span m="120830">bad</span> <span m="121200">things.</span> <span m="121520">And</span> <span m="121590">the</span> <span m="121660">application</span> <span m="121980">is</span> <span m="122300">presumably</span> <span m="122760">privileged,</span> <span m="124170">meaning</span> <span m="124530">there</span> <span m="124820">is</span> <span m="125110">probably</span> <span m="125320">lots</span> <span m="125640">of</span> <span m="125870">data</span> <span m="126740">sitting</span> <span m="127200">behind</span> <span m="127570">the</span> <span m="127854">application</span> <span m="128139">that</span> <span m="128560">it</span> <span m="128860">can</span> <span m="128979">access</span> <span m="129759">and</span> <span m="130240">maybe</span> <span m="130729">delete</span> <span m="131110">files,</span> <span m="131680">like</span> <span m="131860">you</span> <span m="131970">guys</span> <span m="132170">are</span> <span m="132280">going</span> <span m="132540">in</span> <span m="132730">Lab</span> <span m="132920">I</span> <span m="133230">now,</span> <span m="133850">read</span> <span m="134203">sensitive</span> <span m="134910">data,</span> <span m="135510">install</span> <span m="135980">back</span> <span m="136235">doors.</span> </p>
<p><span m="138280">And</span> <span m="138770">the</span> <span m="138890">problem</span> <span m="139310">is</span> <span m="139430">that</span> <span m="139650">a</span> <span m="139940">vulnerability</span> <span m="140650">in</span> <span m="140750">this</span> <span m="140950">large</span> <span m="141220">application</span> <span m="142450">can</span> <span m="142730">allow</span> <span m="143210">it</span> <span m="143480">to</span> <span m="144620">modify</span> <span m="144940">any</span> <span m="145260">of</span> <span m="145670">this</span> <span m="145910">data,</span> <span m="146165">or</span> <span m="146420">basically</span> <span m="146520">exercise</span> <span m="147050">all</span> <span m="147410">of</span> <span m="147450">the</span> <span m="147490">privileges</span> <span m="148110">this</span> <span m="148270">application</span> <span m="148800">has,</span> <span m="149340">and</span> <span m="149675">it</span> <span m="150010">probably</span> <span m="150280">has</span> <span m="150450">lots</span> <span m="150605">of</span> <span m="150760">privileges,</span> <span m="151330">unless</span> <span m="151650">you're</span> <span m="151830">careful</span> <span m="152180">about</span> <span m="152580">it.</span> <span m="153850">And</span> <span m="154080">what</span> <span m="154240">privilege</span> <span m="154520">separation</span> <span m="155620">tries</span> <span m="156000">to</span> <span m="156120">do,</span> <span m="156610">and</span> <span m="156790">what</span> <span m="157110">we'll</span> <span m="157250">look</span> <span m="157425">at</span> <span m="157600">in</span> <span m="157740">this</span> <span m="158040">lecture,</span> <span m="158620">is</span> <span m="158840">to</span> <span m="158990">take</span> <span m="159175">the</span> <span m="159360">application</span> <span m="159750">and</span> <span m="160140">chop</span> <span m="160210">it</span> <span m="160280">up</span> <span m="160540">into</span> <span m="161100">different</span> <span m="161520">pieces</span> <span m="162340">and</span> <span m="162490">make</span> <span m="162700">sure</span> <span m="163300">that</span> <span m="163640">each</span> <span m="164200">piece</span> <span m="164500">has</span> <span m="165120">only</span> <span m="165630">the</span> <span m="165890">necessary</span> <span m="166650">privileges</span> <span m="167780">to</span> <span m="167920">do</span> <span m="168050">its</span> <span m="168270">job</span> <span m="168540">correctly.</span> </p>
<p><span m="170170">So</span> <span m="170270">you</span> <span m="170370">could</span> <span m="170640">imagine</span> <span m="171100">maybe</span> <span m="171600">all</span> <span m="171945">the</span> <span m="172290">privileges</span> <span m="172470">you</span> <span m="172795">care</span> <span m="172957">about</span> <span m="173120">are</span> <span m="173320">access</span> <span m="173520">to</span> <span m="173620">data</span> <span m="174070">in</span> <span m="174170">the</span> <span m="174250">back</span> <span m="174550">end,</span> <span m="175160">then</span> <span m="175465">all</span> <span m="175770">of</span> <span m="176030">this</span> <span m="176230">data,</span> <span m="176520">maybe</span> <span m="176665">you</span> <span m="176810">can</span> <span m="177600">slice</span> <span m="178060">it</span> <span m="178160">up</span> <span m="178310">in</span> <span m="178440">some</span> <span m="178680">way,</span> <span m="178980">give</span> <span m="179280">this</span> <span m="179470">access</span> <span m="179740">to</span> <span m="180010">this</span> <span m="180440">piece</span> <span m="180898">of</span> <span m="181356">data,</span> <span m="181814">this</span> <span m="182272">piece</span> <span m="182730">access</span> <span m="182990">to</span> <span m="183290">this</span> <span m="183366">piece</span> <span m="183443">of</span> <span m="183520">data,</span> <span m="183740">and</span> <span m="183880">so</span> <span m="184030">on.</span> <span m="186580">So</span> <span m="187500">then,</span> <span m="187865">if</span> <span m="188230">you</span> <span m="188550">find</span> <span m="188750">a</span> <span m="188850">bug</span> <span m="189135">here,</span> <span m="189420">then</span> <span m="189442">maybe</span> <span m="189465">this</span> <span m="189488">data</span> <span m="189511">is</span> <span m="189534">kind</span> <span m="189557">of</span> <span m="189580">compromised,</span> <span m="190680">but</span> <span m="190830">hopefully</span> <span m="191260">whatever</span> <span m="192000">slicing</span> <span m="192570">you've</span> <span m="192780">done</span> <span m="193070">is</span> <span m="193150">going</span> <span m="193245">to</span> <span m="193340">enforce</span> <span m="194400">the</span> <span m="194550">separation</span> <span m="195070">so</span> <span m="195280">that</span> <span m="195600">a</span> <span m="195920">vulnerability</span> <span m="196510">here</span> <span m="196830">doesn't</span> <span m="197070">allow</span> <span m="197130">the</span> <span m="197520">attacker</span> <span m="197920">to</span> <span m="198130">go</span> <span m="198600">and</span> <span m="199070">access</span> <span m="199540">these</span> <span m="199990">other</span> <span m="201140">pieces</span> <span m="201550">of</span> <span m="201660">data,</span> <span m="201970">or,</span> <span m="202340">more</span> <span m="202700">generally,</span> <span m="202950">other</span> <span m="203180">privileges</span> <span m="203540">of</span> <span m="203720">the</span> <span m="203900">application</span> <span m="204970">has</span> <span m="205170">access</span> <span m="205440">to.</span> </p>
<p><span m="206850">So</span> <span m="207060">this</span> <span m="207183">is</span> <span m="207306">the</span> <span m="207430">big</span> <span m="207630">idea</span> <span m="207870">behind</span> <span m="208155">privilege</span> <span m="208440">separation,</span> <span m="208885">and</span> <span m="209330">it's</span> <span m="210660">hugely</span> <span m="211160">powerful.</span> <span m="211590">It</span> <span m="211675">actually</span> <span m="211760">doesn't</span> <span m="212320">really</span> <span m="212890">rely</span> <span m="213460">on</span> <span m="213760">buffer</span> <span m="214050">overflows</span> <span m="214540">or</span> <span m="215040">other</span> <span m="215270">kinds</span> <span m="215490">of</span> <span m="215570">vulnerabilities</span> <span m="216270">being</span> <span m="216560">present.</span> <span m="216990">It's</span> <span m="217420">just</span> <span m="217590">a</span> <span m="217710">general</span> <span m="218380">architecture</span> <span m="219050">for</span> <span m="219250">making</span> <span m="219560">sure</span> <span m="219940">that</span> <span m="220680">vulnerabilities</span> <span m="221250">in</span> <span m="221320">one</span> <span m="221510">place</span> <span m="221810">don't</span> <span m="222400">affect</span> <span m="223200">as</span> <span m="223420">much</span> <span m="224230">as</span> <span m="224520">possible</span> <span m="225445">your</span> <span m="225790">system.</span> </p>
<p><span m="228140">This</span> <span m="228250">turns</span> <span m="228590">out</span> <span m="228890">to</span> <span m="229040">be</span> <span m="229190">used</span> <span m="229305">pretty</span> <span m="229420">widely.</span> <span m="230880">Virtual</span> <span m="231200">machines</span> <span m="231640">often</span> <span m="232075">are</span> <span m="232292">used</span> <span m="232510">for</span> <span m="233140">enforcing</span> <span m="233790">isolation</span> <span m="234165">within</span> <span m="234540">components.</span> <span m="235090">Maybe</span> <span m="235250">you'll</span> <span m="235540">take</span> <span m="235770">your</span> <span m="235900">large</span> <span m="236280">system</span> <span m="236470">and</span> <span m="236660">break</span> <span m="236900">it</span> <span m="236970">up</span> <span m="237110">into</span> <span m="237260">a</span> <span m="237300">bunch</span> <span m="237480">of</span> <span m="237640">DMs</span> <span m="238620">for</span> <span m="238860">isolation,</span> <span m="239245">but</span> <span m="239630">you</span> <span m="239860">could</span> <span m="240080">also</span> <span m="240320">use</span> <span m="240820">Unix</span> <span m="242192">to</span> <span m="242590">actually</span> <span m="242980">perform</span> <span m="243590">this</span> <span m="243790">isolation</span> <span m="244230">with</span> <span m="244670">slicing.</span> <span m="246170">And</span> <span m="246330">as</span> <span m="246780">we'll</span> <span m="246920">talk</span> <span m="247100">about</span> <span m="247360">in</span> <span m="247460">a</span> <span m="247560">second,</span> <span m="247950">Unix</span> <span m="248270">does</span> <span m="248500">provide</span> <span m="248720">you</span> <span m="248940">quite</span> <span m="249120">a</span> <span m="249270">number</span> <span m="249640">of</span> <span m="249680">mechanisms</span> <span m="250250">that</span> <span m="250420">OKWS</span> <span m="251720">does</span> <span m="251910">actually</span> <span m="252190">use</span> <span m="252530">to</span> <span m="252610">achieve</span> <span m="252940">privilege</span> <span m="253360">separation.</span> </p>
<p><span m="254800">And</span> <span m="254880">then</span> <span m="255010">many</span> <span m="255170">applications</span> <span m="255690">actually</span> <span m="255950">use</span> <span m="256089">privilege</span> <span m="256470">separation</span> <span m="256980">practice.</span> <span m="257350">You</span> <span m="257720">guys</span> <span m="258029">are</span> <span m="258360">probably</span> <span m="258620">using</span> <span m="258940">SSH</span> <span m="259649">quite</span> <span m="259899">often.</span> <span m="260630">That</span> <span m="261100">uses</span> <span m="261260">privilege</span> <span m="261779">separation</span> <span m="262064">in</span> <span m="262350">many</span> <span m="262640">of</span> <span m="262700">its</span> <span m="262850">components</span> <span m="263360">to</span> <span m="263440">make</span> <span m="263640">sure</span> <span m="264130">its</span> <span m="264460">keys</span> <span m="264850">are</span> <span m="265015">not</span> <span m="265180">leaked</span> <span m="265510">and</span> <span m="265580">the</span> <span m="265670">server</span> <span m="266000">doesn't</span> <span m="266260">get</span> <span m="266730">compromised</span> <span m="268190">or</span> <span m="268410">the</span> <span m="268650">effect</span> <span m="268965">of</span> <span m="269122">our</span> <span m="269280">server</span> <span m="269350">compromise</span> <span m="269810">is</span> <span m="270970">reduced.</span> <span m="272090">And</span> <span m="272800">perhaps</span> <span m="273170">more</span> <span m="273620">relevant</span> <span m="274090">to</span> <span m="274140">you</span> <span m="274250">guys,</span> <span m="274610">Chrome,</span> <span m="274935">the</span> <span m="275260">web</span> <span m="275635">browser,</span> <span m="276520">actually</span> <span m="276860">does</span> <span m="277070">privilege</span> <span m="277440">separation</span> <span m="277900">quite</span> <span m="278100">extensively</span> <span m="278630">as</span> <span m="278730">well.</span> <span m="279380">So</span> <span m="279560">that</span> <span m="279850">if</span> <span m="280110">there's</span> <span m="280300">a</span> <span m="280350">bug</span> <span m="280730">in</span> <span m="280870">Chrome's</span> <span m="281290">implementation,</span> <span m="282340">the</span> <span m="282650">adversary</span> <span m="283600">doesn't</span> <span m="283910">get</span> <span m="284190">full</span> <span m="284420">control</span> <span m="284770">of</span> <span m="284870">your</span> <span m="285000">computer,</span> <span m="285510">which</span> <span m="285560">is</span> <span m="285660">a</span> <span m="286350">great</span> <span m="286570">property</span> <span m="286860">to</span> <span m="287150">have.</span> </p>
<p><span m="289480">So</span> <span m="289690">that's</span> <span m="289780">just</span> <span m="289870">a</span> <span m="289990">very</span> <span m="290820">quick</span> <span m="291090">summary</span> <span m="291520">of</span> <span m="291830">what</span> <span m="292140">privilege</span> <span m="292425">separation</span> <span m="292710">is</span> <span m="293150">about</span> <span m="293610">and</span> <span m="293990">why</span> <span m="294137">maybe</span> <span m="294285">OKWS</span> <span m="294580">is</span> <span m="294750">an</span> <span m="294890">interesting</span> <span m="295150">case</span> <span m="295410">study.</span> <span m="295760">I</span> <span m="295980">guess</span> <span m="296385">we</span> <span m="296790">can</span> <span m="297230">add</span> <span m="297320">it</span> <span m="297410">to</span> <span m="297500">this</span> <span m="297590">list,</span> <span m="297970">but</span> <span m="298300">it</span> <span m="298570">is</span> <span m="298840">more</span> <span m="299130">of</span> <span m="299420">an</span> <span m="299745">illustrative</span> <span m="300680">example</span> <span m="301390">rather</span> <span m="301580">than</span> <span m="301860">an</span> <span m="302150">important</span> <span m="302550">piece</span> <span m="302850">of</span> <span m="303290">software</span> <span m="303660">in</span> <span m="304015">its</span> <span m="304370">own</span> <span m="304665">right.</span> <span m="304960">Make</span> <span m="305110">sense?</span> <span m="306380">Any</span> <span m="306670">questions</span> <span m="307470">before</span> <span m="307800">we</span> <span m="308070">dive</span> <span m="308280">in?</span> </p>
<p><span m="313410">All</span> <span m="313565">right.</span> <span m="313720">So</span> <span m="313765">OKWS,</span> <span m="313810">as</span> <span m="314125">I</span> <span m="314440">mentioned,</span> <span m="315570">it's</span> <span m="315810">going</span> <span m="316130">to</span> <span m="316450">use</span> <span m="316930">Unix</span> <span m="317820">permissions</span> <span m="318185">and</span> <span m="318550">sort</span> <span m="318610">of</span> <span m="318670">Unix</span> <span m="320220">mechanisms</span> <span m="320830">to</span> <span m="321340">achieve</span> <span m="321900">the</span> <span m="322000">separation</span> <span m="322740">between</span> <span m="323300">its</span> <span m="323370">different</span> <span m="323800">components.</span> <span m="324210">So</span> <span m="324620">as</span> <span m="324990">a</span> <span m="325020">result,</span> <span m="325072">it's</span> <span m="325124">going</span> <span m="325176">to</span> <span m="325228">be</span> <span m="325810">important</span> <span m="326280">for</span> <span m="326460">us</span> <span m="326650">to</span> <span m="326750">understand</span> <span m="327700">how</span> <span m="328620">Unix</span> <span m="329500">protection</span> <span m="329980">mechanisms</span> <span m="330470">work.</span> <span m="331700">And</span> <span m="333110">Unix</span> <span m="333520">isn't</span> <span m="333980">in</span> <span m="334190">some</span> <span m="334430">way</span> <span m="335095">crucial</span> <span m="335480">to</span> <span m="335550">OKWS</span> <span m="335740">at</span> <span m="336050">some</span> <span m="336320">level</span> <span m="336560">for</span> <span m="336720">privilege</span> <span m="337120">separation,</span> <span m="338330">but</span> <span m="339300">for</span> <span m="339510">any</span> <span m="340400">isolation</span> <span m="340715">mechanism</span> <span m="341430">you're</span> <span m="341590">going</span> <span m="341653">to</span> <span m="341716">use,</span> <span m="341780">whether</span> <span m="342070">it's</span> <span m="342360">Unix,</span> <span m="342500">uid,</span> <span m="343350">these</span> <span m="344170">other</span> <span m="344490">mechanisms,</span> <span m="345190">or</span> <span m="345410">virtual</span> <span m="345730">machines</span> <span m="346830">or</span> <span m="347180">containers</span> <span m="348050">or</span> <span m="348260">any</span> <span m="348420">other</span> <span m="348620">technology,</span> <span m="349480">it's</span> <span m="349610">really</span> <span m="349780">important</span> <span m="350160">to</span> <span m="350200">understand</span> <span m="350660">the</span> <span m="350770">details</span> <span m="351610">of</span> <span m="351970">how</span> <span m="352370">the</span> <span m="352670">isolation</span> <span m="353190">mechanism</span> <span m="353590">works,</span> <span m="354430">because</span> <span m="354775">there's</span> <span m="355120">a</span> <span m="355364">lot</span> <span m="355608">of</span> <span m="356096">tricky</span> <span m="356584">pieces</span> <span m="357072">to</span> <span m="357560">get</span> <span m="358050">right,</span> <span m="358090">because</span> <span m="358130">you're</span> <span m="358170">dealing</span> <span m="358210">with</span> <span m="358250">some</span> <span m="358290">attacker</span> <span m="358330">that</span> <span m="358370">can</span> <span m="358410">exploit</span> <span m="358845">any</span> <span m="359590">[INAUDIBLE].</span> </p>
<p><span m="360510">So</span> <span m="360710">as</span> <span m="360790">a</span> <span m="361140">result,</span> <span m="361290">we'll look</span> <span m="361540">at</span> <span m="361780">Unix</span> <span m="361860">in</span> <span m="362210">a</span> <span m="362415">fair</span> <span m="362620">amount</span> <span m="362860">of</span> <span m="362920">detail</span> <span m="363480">just</span> <span m="363670">to</span> <span m="364070">see</span> <span m="364270">what</span> <span m="364470">it's</span> <span m="364670">like,</span> <span m="364950">how</span> <span m="365400">should</span> <span m="365650">we</span> <span m="365990">approach</span> <span m="366560">thinking</span> <span m="366890">about</span> <span m="367490">a</span> <span m="367960">particular</span> <span m="368590">security</span> <span m="369030">mechanism.</span> <span m="370950">Let's</span> <span m="371420">look</span> <span m="371685">at</span> <span m="371950">Unix.</span> <span m="372120">So</span> <span m="372370">Unix</span> <span m="373140">historically--</span> <span m="374290">well,</span> <span m="376450">it's</span> <span m="376860">not</span> <span m="377050">necessarily</span> <span m="377240">the</span> <span m="377690">best</span> <span m="377900">example</span> <span m="378290">of</span> <span m="378370">how</span> <span m="378620">to</span> <span m="378920">build</span> <span m="379230">a</span> <span m="379300">security</span> <span m="379720">mechanism,</span> <span m="380550">because</span> <span m="380820">its</span> <span m="380960">security</span> <span m="381360">mechanism</span> <span m="381880">came</span> <span m="382140">about</span> <span m="382880">from</span> <span m="383410">a</span> <span m="383550">fairly</span> <span m="384050">utilitarian</span> <span m="384420">need</span> <span m="384790">of</span> <span m="385020">needing</span> <span m="385740">to</span> <span m="385810">separate</span> <span m="386170">different</span> <span m="386460">users</span> <span m="386940">on</span> <span m="387040">a</span> <span m="387090">single</span> <span m="387450">Unix</span> <span m="387780">system</span> <span m="388080">from</span> <span m="388360">one</span> <span m="388510">another,</span> <span m="388845">so</span> <span m="389180">they</span> <span m="389360">weren't</span> <span m="389530">thinking</span> <span m="389870">of</span> <span m="389960">it</span> <span m="390060">as</span> <span m="390200">a</span> <span m="390320">general</span> <span m="390730">purpose</span> <span m="391080">mechanism</span> <span m="391395">that</span> <span m="391830">applications</span> <span m="392510">like</span> <span m="392660">OKWS</span> <span m="393100">are</span> <span m="393410">going</span> <span m="393530">to</span> <span m="393580">use</span> <span m="394250">to</span> <span m="394410">implement</span> <span m="394820">privilege</span> <span m="395100">separation.</span> </p>
<p><span m="396000">They're</span> <span m="396150">just</span> <span m="396300">thinking,</span> <span m="396620">we</span> <span m="396740">have</span> <span m="396850">a</span> <span m="396955">bunch</span> <span m="397060">of</span> <span m="397150">users</span> <span m="397340">that</span> <span m="397530">are</span> <span m="397670">using</span> <span m="397910">the</span> <span m="397990">same</span> <span m="398130">computer,</span> <span m="398470">we</span> <span m="398620">need</span> <span m="398765">to</span> <span m="398910">keep</span> <span m="399070">them</span> <span m="399220">from</span> <span m="399440">each</span> <span m="399570">other.</span> <span m="400630">So</span> <span m="401190">it's</span> <span m="401370">not</span> <span m="401570">necessarily</span> <span m="401970">a</span> <span m="402090">general</span> <span m="402440">purpose</span> <span m="402740">mechanism</span> <span m="403160">but</span> <span m="403310">still</span> <span m="403650">one</span> <span m="403950">that</span> <span m="405010">is</span> <span m="405380">fairly</span> <span m="406450">prevalent</span> <span m="406715">and,</span> <span m="406980">as</span> <span m="407280">a</span> <span m="407540">result,</span> <span m="408170">widely</span> <span m="408580">used.</span> <span m="409460">Chrome</span> <span m="410060">tries</span> <span m="410300">to</span> <span m="410610">use</span> <span m="410810">many</span> <span m="411320">if</span> <span m="411760">these</span> <span m="411910">Unix</span> <span m="412330">mechanisms.</span> </p>
<p><span m="413980">So</span> <span m="414060">what</span> <span m="414100">does</span> <span m="414140">Unix</span> <span m="414305">have?</span> <span m="414470">So,</span> <span m="414910">in</span> <span m="415090">general,</span> <span m="415440">when</span> <span m="415560">you're</span> <span m="415690">thinking</span> <span m="415950">about</span> <span m="416070">protection</span> <span m="416500">mechanism,</span> <span m="417250">you</span> <span m="417340">should</span> <span m="417480">be</span> <span m="417590">thinking,</span> <span m="418220">well,</span> <span m="418470">what</span> <span m="418490">are</span> <span m="418550">the</span> <span m="418680">principals,</span> <span m="420010">meaning</span> <span m="420480">what</span> <span m="420630">are</span> <span m="420780">the</span> <span m="422180">entities</span> <span m="422710">that</span> <span m="422810">have</span> <span m="423210">privileges</span> <span m="423890">or</span> <span m="424100">rights,</span> <span m="425300">and</span> <span m="425970">in</span> <span m="426280">Unix</span> <span m="426750">these</span> <span m="427030">principals</span> <span m="427720">are</span> <span m="428120">typically</span> <span m="429800">invoked,</span> <span m="430500">or</span> <span m="430860">sort</span> <span m="431000">of</span> <span m="431090">held,</span> <span m="431630">by</span> <span m="432060">a</span> <span m="432180">process.</span> <span m="433410">So</span> <span m="434020">I</span> <span m="434180">guess</span> <span m="434390">the</span> <span m="436750">subject,</span> <span m="437530">if</span> <span m="437680">you</span> <span m="437810">will,</span> <span m="439070">in</span> <span m="439330">Unix</span> <span m="439920">is</span> <span m="440050">a</span> <span m="440120">process,</span> <span m="440660">so</span> <span m="441250">every</span> <span m="441660">operation</span> <span m="442470">or</span> <span m="442670">request</span> <span m="443330">that</span> <span m="443430">we</span> <span m="443560">can</span> <span m="443910">think</span> <span m="444240">about</span> <span m="444460">in</span> <span m="444540">terms</span> <span m="444740">of</span> <span m="444820">security,</span> <span m="445330">whether</span> <span m="445670">something</span> <span m="445950">should</span> <span m="446110">be</span> <span m="446200">allowed</span> <span m="446590">or</span> <span m="446680">not,</span> <span m="447410">is</span> <span m="447510">probably</span> <span m="447730">going</span> <span m="447850">to</span> <span m="447900">be</span> <span m="448020">an</span> <span m="448100">operation</span> <span m="448670">that</span> <span m="448780">a</span> <span m="448830">process</span> <span m="449380">invokes</span> <span m="449900">by</span> <span m="450150">making</span> <span m="450510">a</span> <span m="450570">system</span> <span m="450920">call.</span> </p>
<p><span m="452080">And</span> <span m="452710">the</span> <span m="452810">principal</span> <span m="453490">is</span> <span m="454500">how</span> <span m="454770">we</span> <span m="454970">describe</span> <span m="455610">what</span> <span m="455870">privileges</span> <span m="456390">that</span> <span m="456580">process</span> <span m="456970">has.</span> <span m="458430">Conversely,</span> <span m="458890">there's</span> <span m="459150">also</span> <span m="459740">what</span> <span m="459850">we</span> <span m="459930">can</span> <span m="460300">think</span> <span m="460460">about</span> <span m="460760">as</span> <span m="461140">objects,</span> <span m="462670">and</span> <span m="463250">these</span> <span m="463430">are</span> <span m="463570">the</span> <span m="463830">things</span> <span m="464140">that</span> <span m="464260">a</span> <span m="464320">process</span> <span m="464690">might</span> <span m="464930">act</span> <span m="465240">on</span> <span m="465390">that</span> <span m="465590">try</span> <span m="465790">to</span> <span m="466150">modify,</span> <span m="466830">read,</span> <span m="467610">observe</span> <span m="468100">in</span> <span m="468200">some</span> <span m="468410">way.</span> <span m="468620">There</span> <span m="469023">are</span> <span m="469426">actually</span> <span m="469830">a</span> <span m="469890">lot</span> <span m="470530">of</span> <span m="470630">different</span> <span m="471050">kinds</span> <span m="471440">of</span> <span m="471530">objects</span> <span m="471890">you</span> <span m="471970">might</span> <span m="472180">worry</span> <span m="472470">about</span> <span m="472700">protecting</span> <span m="473025">in</span> <span m="473350">an</span> <span m="473830">operating</span> <span m="474200">system.</span> <span m="474630">What</span> <span m="475012">do</span> <span m="475394">you</span> <span m="475776">guys</span> <span m="476260">think?</span> <span m="476350">What</span> <span m="476520">should</span> <span m="476690">we</span> <span m="476910">worry</span> <span m="477150">about</span> <span m="477340">protecting?</span> </p>
<p><span m="478786">AUDIENCE:</span> <span m="479190">Files.</span> </p>
<p><span m="479530">PROFESSOR: Files.</span> <span m="479790">Yeah,</span> <span m="480050">great.</span> <span m="480340">That's</span> <span m="480540">a</span> <span m="480590">big</span> <span m="480780">one.</span> <span m="481115">That's</span> <span m="481450">where</span> <span m="481820">all</span> <span m="481866">of</span> <span m="481913">our</span> <span m="481960">data</span> <span m="482140">lives,</span> <span m="482410">right?</span> <span m="483770">There's</span> <span m="483930">a</span> <span m="484210">closely</span> <span m="484560">related</span> <span m="484890">thing</span> <span m="485030">we</span> <span m="485140">might</span> <span m="485340">worry</span> <span m="485540">about--</span> <span m="486270">directories.</span> <span m="490100">Turns</span> <span m="490340">out</span> <span m="490610">to</span> <span m="490680">be</span> <span m="491040">pretty</span> <span m="491220">important</span> <span m="491520">also</span> <span m="491730">from</span> <span m="491880">a</span> <span m="491920">security</span> <span m="492260">standpoint.</span> <span m="493870">Anything</span> <span m="494110">else?</span> </p>
<p><span m="494630">AUDIENCE:</span> <span m="495046">Networking</span> <span m="495462">sockets.</span> </p>
<p><span m="495880">PROFESSOR:</span> <span m="496020">Yeah,</span> <span m="496420">great.</span> <span m="496730">Networking</span> <span m="497460">sockets.</span> <span m="503425">Anything</span> <span m="503920">else</span> <span m="504360">going</span> <span m="504530">on?</span> </p>
<p><span m="505170">AUDIENCE:</span> <span m="505440">Other</span> <span m="505670">processes.</span> </p>
<p><span m="506590">PROFESSOR:</span> <span m="507050">Oh,</span> <span m="507200">yeah.</span> <span m="507700">Actually,</span> <span m="508020">this</span> <span m="508120">is</span> <span m="508370">like</span> <span m="508560">stuff</span> <span m="508890">that</span> <span m="509000">the</span> <span m="509080">application</span> <span m="509820">or</span> <span m="509930">the</span> <span m="510090">user</span> <span m="510490">might</span> <span m="510730">care</span> <span m="510910">about,</span> <span m="511290">but</span> <span m="511400">then</span> <span m="511510">there's</span> <span m="511620">all</span> <span m="511720">kinds</span> <span m="511900">of</span> <span m="511980">internal</span> <span m="512380">stuff</span> <span m="512590">that</span> <span m="512669">you</span> <span m="512799">have</span> <span m="513000">to</span> <span m="513039">protect</span> <span m="513219">as</span> <span m="513400">well,</span> <span m="513719">so</span> <span m="514039">a</span> <span m="514360">process</span> <span m="515020">is</span> <span m="515179">not</span> <span m="515450">just</span> <span m="515679">the</span> <span m="515780">subject</span> <span m="516360">that's</span> <span m="516490">making</span> <span m="517070">a</span> <span m="517120">system</span> <span m="517510">call,</span> <span m="518070">but</span> <span m="518240">a</span> <span m="518330">process</span> <span m="518539">is</span> <span m="518690">also</span> <span m="518940">something</span> <span m="519280">that</span> <span m="519880">another</span> <span m="520260">process</span> <span m="520610">can</span> <span m="521070">act</span> <span m="521257">upon.</span> <span m="521445">It</span> <span m="521632">can</span> <span m="521820">kill</span> <span m="522110">it</span> <span m="522630">or</span> <span m="523260">create</span> <span m="523539">a</span> <span m="523590">new</span> <span m="523799">one.</span> <span m="524280">You</span> <span m="524630">have</span> <span m="524980">to</span> <span m="525190">figure</span> <span m="525420">out,</span> <span m="525540">what</span> <span m="525670">are</span> <span m="525740">the</span> <span m="525850">rules</span> <span m="526260">for</span> <span m="527080">thinking</span> <span m="527390">about</span> <span m="527630">process</span> <span m="527935">as</span> <span m="528240">an</span> <span m="528350">object</span> <span m="528690">you</span> <span m="528750">can</span> <span m="528850">manipulate.</span> <span m="530850">Other</span> <span m="531050">things</span> <span m="531550">we</span> <span m="531650">might</span> <span m="531770">care</span> <span m="531920">about?</span> </p>
<p><span m="532090">AUDIENCE:</span> <span m="532355">Environment</span> <span m="532620">variables.</span> </p>
<p><span m="534036">PROFESSOR:</span> <span m="534510">I</span> <span m="534610">guess</span> <span m="535290">they're</span> <span m="535860">probably</span> <span m="536160">not</span> <span m="536560">an</span> <span m="536780">entity</span> <span m="537060">you</span> <span m="537350">can</span> <span m="537940">modify,</span> <span m="538830">in</span> <span m="538980">the</span> <span m="539080">sense</span> <span m="539380">of</span> <span m="539970">being</span> <span m="540500">managed</span> <span m="540930">by</span> <span m="541070">an</span> <span m="541187">iOS</span> <span m="541305">and</span> <span m="541540">having</span> <span m="541910">some</span> <span m="542050">sort</span> <span m="542200">of</span> <span m="542270">a</span> <span m="542320">security</span> <span m="542650">policy.</span> <span m="543460">I</span> <span m="543730">guess</span> <span m="543920">I</span> <span m="544030">sort</span> <span m="544190">of</span> <span m="544280">think</span> <span m="544470">of</span> <span m="544550">environment</span> <span m="544960">variables</span> <span m="545530">as</span> <span m="545840">just</span> <span m="546040">being</span> <span m="546350">some</span> <span m="547870">state</span> <span m="548075">a</span> <span m="548280">process</span> <span m="548730">maintains</span> <span m="549200">in</span> <span m="549320">memory.</span> <span m="550560">But,</span> <span m="550800">I</span> <span m="550840">guess</span> <span m="551010">more</span> <span m="551160">generally,</span> <span m="551790">we</span> <span m="551900">do</span> <span m="552090">care</span> <span m="552320">about</span> <span m="552670">maybe</span> <span m="553300">part</span> <span m="553500">of</span> <span m="553550">a</span> <span m="553630">process</span> <span m="554060">is</span> <span m="554365">all</span> <span m="554670">this</span> <span m="554970">stuff</span> <span m="555200">in</span> <span m="555530">memory.</span> <span m="556330">So</span> <span m="556450">there's</span> <span m="556710">going</span> <span m="556840">to</span> <span m="556890">be</span> <span m="556980">environment</span> <span m="557360">variables</span> <span m="557790">there,</span> <span m="558080">there's</span> <span m="558410">a</span> <span m="558460">stack,</span> <span m="559010">there's</span> <span m="559260">arguments,</span> <span m="561090">and</span> <span m="561170">this</span> <span m="561350">also</span> <span m="561880">turns</span> <span m="562100">out</span> <span m="562220">to</span> <span m="562290">be</span> <span m="562580">quite</span> <span m="562760">important.</span> <span m="563140">Presumably</span> <span m="563470">lots</span> <span m="563810">of</span> <span m="564000">sensitive</span> <span m="564280">data</span> <span m="564405">lives</span> <span m="564530">in</span> <span m="564770">processor's</span> <span m="565220">memory.</span> <span m="565540">Other</span> <span m="566970">things?</span> </p>
<p><span m="567150">AUDIENCE: File</span> <span m="567510">descriptors</span> <span m="567920">in</span> <span m="568330">general.</span> </p>
<p><span m="568740">PROFESSOR:</span> <span m="569150">There's</span> <span m="569320">like</span> <span m="569900">another</span> <span m="570370">sort</span> <span m="570470">of</span> <span m="570550">internal</span> <span m="571090">detail</span> <span m="571480">that</span> <span m="571680">matters</span> <span m="572010">a</span> <span m="572060">lot.</span> <span m="572460">So</span> <span m="572860">files</span> <span m="573550">are</span> <span m="573680">the</span> <span m="573980">stuff</span> <span m="574250">we</span> <span m="574520">might</span> <span m="574730">care</span> <span m="574850">about</span> <span m="575090">on</span> <span m="575285">disk,</span> <span m="575740">and</span> <span m="575810">there's</span> <span m="576040">this</span> <span m="576530">operational</span> <span m="577190">thing,</span> <span m="577600">the</span> <span m="577880">file</span> <span m="578120">descriptor,</span> <span m="581600">that</span> <span m="581870">OKWS</span> <span m="582370">makes</span> <span m="582880">quite</span> <span m="583190">extensive</span> <span m="583990">use</span> <span m="584150">of,</span> <span m="584460">and</span> <span m="585000">we'll</span> <span m="585130">see</span> <span m="585250">what</span> <span m="585850">file</span> <span m="586010">descriptors</span> <span m="586470">are</span> <span m="586810">in</span> <span m="587540">a</span> <span m="587590">little</span> <span m="587780">bit.</span> <span m="588806">Any</span> <span m="589350">other</span> <span m="589510">stuff</span> <span m="589750">you</span> <span m="589840">guys</span> <span m="590040">want</span> <span m="590180">to</span> <span m="590570">protect</span> <span m="590920">in</span> <span m="591095">an</span> <span m="591270">operating</span> <span m="591590">system?</span> </p>
<p><span m="593036">AUDIENCE:</span> <span m="593440">Hardware.</span> </p>
<p><span m="593755">PROFESSOR:</span> <span m="594070">Hardware?</span> <span m="594400">Yeah,</span> <span m="594516">I</span> <span m="594633">guess</span> <span m="594750">in</span> <span m="594850">many</span> <span m="594950">ways</span> <span m="595520">hardware</span> <span m="596150">is--</span> <span m="597680">well,</span> <span m="597980">hardware</span> <span m="599060">is,</span> <span m="600650">in</span> <span m="600780">some</span> <span m="600940">ways,</span> <span m="601080">not</span> <span m="601520">really</span> <span m="601720">an</span> <span m="601790">abstraction</span> <span m="602700">that</span> <span m="603000">the</span> <span m="603250">iOS</span> <span m="603500">provides</span> <span m="603960">to</span> <span m="604060">you.</span> <span m="604250">I</span> <span m="604320">guess</span> <span m="604510">you</span> <span m="604730">run</span> <span m="604940">a</span> <span m="605020">process,</span> <span m="605430">so</span> <span m="605500">you</span> <span m="605610">might</span> <span m="605820">want</span> <span m="605980">to</span> <span m="606400">make</span> <span m="606570">sure</span> <span m="606730">the</span> <span m="606830">CPU</span> <span m="607290">doesn't</span> <span m="607630">get</span> <span m="608060">stuck.</span> </p>
<p><span m="608935">AUDIENCE: [INAUDIBLE].</span> </p>
<p><span m="609380">PROFESSOR:  Oh,</span> <span m="609825">yeah,</span> <span m="610270">yeah.</span> <span m="611610">So,</span> <span m="611830">like,</span> <span m="612560">extra</span> <span m="612970">devices,</span> <span m="613400">Yeah,</span> <span m="613610">you're</span> <span m="613720">right,</span> <span m="614020">especially</span> <span m="614260">on</span> <span m="614510">a</span> <span m="614750">desktop</span> <span m="615050">machine,</span> <span m="615430">there's</span> <span m="615560">lots</span> <span m="615740">of</span> <span m="615820">extra</span> <span m="616100">stuff.</span> <span m="616550">So</span> <span m="616830">there's</span> <span m="616930">your</span> <span m="617070">USB</span> <span m="617460">drive</span> <span m="617730">you</span> <span m="617810">plug</span> <span m="618030">in,</span> <span m="618690">your</span> <span m="619100">webcam,</span> <span m="619360">probably</span> <span m="619620">your</span> <span m="619750">display</span> <span m="620130">itself</span> <span m="620510">is</span> <span m="620590">something</span> <span m="620820">you'll</span> <span m="621030">want</span> <span m="621166">to</span> <span m="621303">protect,</span> <span m="621440">like</span> <span m="621670">an</span> <span m="621990">application</span> <span m="622390">shouldn't</span> <span m="622720">draw</span> <span m="622900">all</span> <span m="623080">over</span> <span m="623230">your</span> <span m="623360">screen</span> <span m="624100">anywhere.</span> <span m="625850">So,</span> <span m="625860">yes,</span> <span m="626080">actually</span> <span m="626600">I</span> <span m="626660">guess</span> <span m="626850">this</span> <span m="626990">isn't</span> <span m="627200">really</span> <span m="627510">on</span> <span m="627710">a</span> <span m="627910">server</span> <span m="628560">side</span> <span m="628950">view</span> <span m="629160">of</span> <span m="629320">things,</span> <span m="629670">where</span> <span m="630230">there's</span> <span m="630450">just</span> <span m="630630">a</span> <span m="630680">server</span> <span m="631020">somewhere</span> <span m="631420">in</span> <span m="631730">a</span> <span m="632040">closet,</span> <span m="632345">but</span> <span m="633110">on</span> <span m="633280">your</span> <span m="633410">phone,</span> <span m="634260">your</span> <span m="634460">microphone</span> <span m="635110">probably,</span> <span m="635860">is</span> <span m="635960">a</span> <span m="636000">hugely</span> <span m="636730">important</span> <span m="637730">object</span> <span m="638200">that</span> <span m="638260">you</span> <span m="638450">want</span> <span m="638475">to</span> <span m="638500">protect,</span> <span m="638970">yeah,</span> <span m="639660">but</span> <span m="639780">I</span> <span m="639950">will</span> <span m="640215">also</span> <span m="640480">leave</span> <span m="640625">it</span> <span m="640770">off</span> <span m="640910">this</span> <span m="641040">list,</span> <span m="641210">because</span> <span m="641410">we're</span> <span m="641510">going</span> <span m="641600">to</span> <span m="641640">talk</span> <span m="641830">much</span> <span m="642080">more</span> <span m="642350">about</span> <span m="642520">server</span> <span m="642630">applications</span> <span m="643110">for</span> <span m="643500">now,</span> <span m="643590">but</span> <span m="643680">you're</span> <span m="643770">absolutely</span> <span m="643860">right.</span> </p>
<p><span m="646600">I</span> <span m="646710">think</span> <span m="646940">for</span> <span m="647220">OKWS,</span> <span m="647810">this</span> <span m="648010">is</span> <span m="648210">probably</span> <span m="648495">a</span> <span m="648780">more</span> <span m="649065">or</span> <span m="649207">less</span> <span m="649350">exhaustive</span> <span m="649900">list</span> <span m="650200">of</span> <span m="650330">things</span> <span m="650580">we</span> <span m="650700">might</span> <span m="650980">care</span> <span m="651130">about</span> <span m="651380">protecting,</span> <span m="651675">or,</span> <span m="651970">at</span> <span m="652450">least</span> <span m="652840">that</span> <span m="653050">OKWS</span> <span m="653690">uses.</span> <span m="655270">So</span> <span m="655390">let's</span> <span m="655550">talk</span> <span m="655710">about</span> <span m="655920">how</span> <span m="657510">does</span> <span m="657720">the</span> <span m="657880">OS</span> <span m="658270">kernel</span> <span m="658660">decide</span> <span m="660090">when</span> <span m="660300">a</span> <span m="660400">process</span> <span m="660980">can</span> <span m="661300">do</span> <span m="661590">something</span> <span m="662440">to</span> <span m="662730">any</span> <span m="662930">of</span> <span m="663070">these</span> <span m="663410">objects?</span> <span m="665660">So</span> <span m="665710">the</span> <span m="666520">[INAUDIBLE],</span> <span m="666670">I</span> <span m="666730">guess</span> <span m="667000">is,</span> <span m="667600">we</span> <span m="668090">mostly</span> <span m="668500">think</span> <span m="668730">of</span> <span m="668850">a</span> <span m="668970">process</span> <span m="670010">as</span> <span m="670250">having</span> <span m="670550">the</span> <span m="670650">privileges</span> <span m="671310">represented</span> <span m="672000">by</span> <span m="672220">this</span> <span m="672430">principal,</span> <span m="673350">and</span> <span m="673530">the</span> <span m="673610">principal</span> <span m="674250">in</span> <span m="674380">a</span> <span m="674450">Unix</span> <span m="674950">system</span> <span m="676020">is</span> <span m="676230">this</span> <span m="676400">slightly</span> <span m="677220">complicated</span> <span m="677810">thing.</span> <span m="678870">There</span> <span m="679160">is</span> <span m="679690">something</span> <span m="679980">called</span> <span m="680180">a</span> <span m="680220">userid,</span> <span m="682050">which</span> <span m="682210">is</span> <span m="682470">just</span> <span m="682710">a</span> <span m="682930">32-bit</span> <span m="683350">integer.</span> <span m="687440">There's</span> <span m="687590">also</span> <span m="687890">a</span> <span m="688040">group</span> <span m="688350">ID,</span> <span m="691160">which</span> <span m="691300">is</span> <span m="691610">also</span> <span m="691970">a</span> <span m="692250">32-bit</span> <span m="692530">integer.</span> <span m="694700">And</span> <span m="695310">there's</span> <span m="695880">not</span> <span m="696060">really</span> <span m="696270">a</span> <span m="696380">great</span> <span m="696830">reason</span> <span m="697130">why</span> <span m="697390">they're</span> <span m="697600">different.</span> <span m="699340">It</span> <span m="699730">would've</span> <span m="699930">been</span> <span m="700070">nice</span> <span m="700310">if</span> <span m="700420">they</span> <span m="700500">were</span> <span m="700630">just</span> <span m="700830">a</span> <span m="700870">uniform</span> <span m="701145">set</span> <span m="701420">of</span> <span m="701840">32-bit</span> <span m="702680">integer</span> <span m="702990">principal</span> <span m="703410">numbers,</span> <span m="704200">but</span> <span m="704340">unfortunately</span> <span m="704850">Unix</span> <span m="705120">sort</span> <span m="705270">of</span> <span m="705340">splits</span> <span m="705700">them</span> <span m="705985">into</span> <span m="706270">two</span> <span m="706460">categories.</span> <span m="707130">There's</span> <span m="707240">userid</span> <span m="707920">integers</span> <span m="708240">and</span> <span m="708560">then</span> <span m="708830">there</span> <span m="709005">are</span> <span m="709180">group</span> <span m="709440">ID</span> <span m="709590">integers.</span> <span m="713480">When</span> <span m="713610">we</span> <span m="713700">talk</span> <span m="713850">about</span> <span m="713980">a</span> <span m="714110">process</span> <span m="714440">having</span> <span m="714660">certain</span> <span m="714930">privileges,</span> <span m="715420">we</span> <span m="715530">typically</span> <span m="716050">think</span> <span m="716280">of</span> <span m="716350">a</span> <span m="716460">process</span> <span m="717740">being</span> <span m="718090">associated</span> <span m="719040">with</span> <span m="719260">a</span> <span m="719350">particular</span> <span m="719860">uid</span> <span m="720160">value.</span> <span m="721290">The</span> <span m="721360">process,</span> <span m="722180">for</span> <span m="722420">the</span> <span m="722560">most</span> <span m="722830">part,</span> <span m="723070">has</span> <span m="723310">a</span> <span m="723370">single</span> <span m="724100">uid.</span> <span m="726510">As</span> <span m="726750">with</span> <span m="727060">almost</span> <span m="727370">everything</span> <span m="727670">else,</span> <span m="727950">there's</span> <span m="728070">complications</span> <span m="728690">everywhere</span> <span m="729060">in</span> <span m="729275">Unix,</span> <span m="729690">but</span> <span m="730180">I'll</span> <span m="730340">simplify</span> <span m="730820">it</span> <span m="730960">for</span> <span m="731185">now.</span> <span m="731410">A</span> <span m="731500">process</span> <span m="731930">has</span> <span m="732730">one</span> <span m="733020">uid,</span> <span m="733910">and</span> <span m="734210">there's</span> <span m="734360">also</span> <span m="734660">a</span> <span m="734760">list</span> <span m="735980">of</span> <span m="736870">group</span> <span m="737140">IDs</span> <span m="737560">that</span> <span m="737690">a</span> <span m="737770">process</span> <span m="738190">has.</span> <span m="740320">For</span> <span m="740470">historical</span> <span m="740890">reasons,</span> <span m="741300">the</span> <span m="741690">group</span> <span m="742010">IDs</span> <span m="742950">are</span> <span m="743080">split</span> <span m="743430">into</span> <span m="743630">one</span> <span m="744030">and</span> <span m="744160">then</span> <span m="744270">a</span> <span m="744350">list</span> <span m="744580">of</span> <span m="744690">others.</span> <span m="747620">Roughly,</span> <span m="747970">a</span> <span m="748000">process</span> <span m="748680">can</span> <span m="749230">then</span> <span m="749440">exercise</span> <span m="750030">the</span> <span m="750130">privileges</span> <span m="751110">represented</span> <span m="751780">by</span> <span m="751980">all</span> <span m="752140">of</span> <span m="752360">these</span> <span m="753180">identifiers.</span> <span m="754020">So</span> <span m="754370">if</span> <span m="754490">there's</span> <span m="754690">something</span> <span m="755000">accessible</span> <span m="755510">to</span> <span m="755750">this</span> <span m="755890">userid</span> <span m="756315">a</span> <span m="756600">process</span> <span m="757170">can</span> <span m="757950">do</span> <span m="758100">stuff</span> <span m="758350">with</span> <span m="758500">it.</span> </p>
<p><span m="759510">That's</span> <span m="759890">how</span> <span m="760390">we</span> <span m="760720">think</span> <span m="760900">about</span> <span m="761110">what</span> <span m="761370">privileges</span> <span m="761830">a</span> <span m="761900">process</span> <span m="762310">has,</span> <span m="762560">so</span> <span m="762660">now</span> <span m="762930">let's</span> <span m="763020">talk</span> <span m="763110">about</span> <span m="763780">files,</span> <span m="764510">directories</span> <span m="765050">and</span> <span m="765130">other</span> <span m="765350">kinds</span> <span m="765570">of</span> <span m="765660">objects.</span> <span m="766630">So</span> <span m="766990">what</span> <span m="767350">happens</span> <span m="767845">with</span> <span m="768340">files,</span> <span m="770590">or</span> <span m="771260">how</span> <span m="771420">do</span> <span m="771500">Unix</span> <span m="771930">permissions</span> <span m="772370">for</span> <span m="772520">files</span> <span m="772910">work?</span> <span m="773780">Well,</span> <span m="774010">in</span> <span m="774110">Unix,</span> <span m="774530">every</span> <span m="774830">file</span> <span m="776730">has--</span> <span m="777990">actually,</span> <span m="778520">maybe</span> <span m="778640">a</span> <span m="778730">better</span> <span m="778940">way</span> <span m="779060">to</span> <span m="779160">start</span> <span m="779620">is</span> <span m="780000">to</span> <span m="780090">think</span> <span m="780280">of</span> <span m="780385">what</span> <span m="780490">operations</span> <span m="781160">do</span> <span m="781220">we</span> <span m="781340">care</span> <span m="781580">about?</span> <span m="781820">For</span> <span m="781950">files,</span> <span m="782790">things</span> <span m="782990">are</span> <span m="783460">relatively</span> <span m="784490">straightforward.</span> <span m="784970">For</span> <span m="785910">files,</span> <span m="786580">you</span> <span m="786690">probably</span> <span m="787100">care</span> <span m="787330">about</span> <span m="788660">read,</span> <span m="789280">write,</span> <span m="791450">maybe</span> <span m="791730">things</span> <span m="791990">like</span> <span m="792210">execute</span> <span m="792490">as</span> <span m="792770">well,</span> <span m="793890">change</span> <span m="794170">permissions,</span> <span m="798550">maybe</span> <span m="798750">change</span> <span m="799890">other</span> <span m="800450">security</span> <span m="801080">properties.</span> </p>
<p><span m="801395">AUDIENCE:</span> <span m="801710">Unlink.</span> </p>
<p><span m="802126">PROFESSOR:</span> <span m="802542">Unlink.</span> <span m="802960">Well,</span> <span m="804110">so</span> <span m="804570">is</span> <span m="804730">unlink</span> <span m="805230">a</span> <span m="805290">property</span> <span m="805660">of</span> <span m="805875">a</span> <span m="806090">file</span> <span m="806540">itself</span> <span m="806820">or</span> <span m="807100">is</span> <span m="807230">it</span> <span m="807360">a</span> <span m="807540">directory</span> <span m="808170">thing?</span> <span m="809410">Actually</span> <span m="809430">a</span> <span m="809930">little</span> <span m="810190">not</span> <span m="810450">clear.</span> <span m="812460">At</span> <span m="812520">least,</span> <span m="812635">the</span> <span m="812750">way</span> <span m="812920">Unix</span> <span m="813360">thinks</span> <span m="813600">of</span> <span m="814080">deleting</span> <span m="814560">a</span> <span m="814630">file,</span> <span m="814985">is</span> <span m="815340">that</span> <span m="815480">it's</span> <span m="815750">really</span> <span m="815970">a</span> <span m="816060">directory</span> <span m="816780">kind</span> <span m="817020">of</span> <span m="817200">thing,</span> <span m="820530">because</span> <span m="820960">in</span> <span m="821310">Unix</span> <span m="821770">you</span> <span m="821900">can</span> <span m="822040">have--</span> <span m="822660">a</span> <span m="822770">file</span> <span m="823130">is</span> <span m="823260">really</span> <span m="823550">an</span> <span m="823770">inode,</span> <span m="824720">and</span> <span m="825190">in</span> <span m="825290">Unix</span> <span m="825640">you</span> <span m="825720">could</span> <span m="825820">have</span> <span m="825980">multiple</span> <span m="826330">hard</span> <span m="826680">links</span> <span m="827070">to</span> <span m="827150">an</span> <span m="827310">inode</span> <span m="827540">and</span> <span m="827770">when</span> <span m="827860">you</span> <span m="828100">unlink</span> <span m="828890">a</span> <span m="828980">particular</span> <span m="829350">name</span> <span m="829830">of</span> <span m="830080">a</span> <span m="830600">Unix</span> <span m="830990">file,</span> <span m="831720">what</span> <span m="831900">you're</span> <span m="831960">really</span> <span m="832170">doing</span> <span m="832410">is</span> <span m="832580">killing</span> <span m="832970">one</span> <span m="833120">of</span> <span m="833260">the</span> <span m="833790">names</span> <span m="834240">for</span> <span m="834430">that</span> <span m="834620">file,</span> <span m="834880">but</span> <span m="834970">it</span> <span m="835060">might</span> <span m="835220">have</span> <span m="835460">other</span> <span m="835740">names,</span> <span m="836620">other</span> <span m="836820">links</span> <span m="837280">to</span> <span m="837370">it.</span> <span m="838310">So</span> <span m="840110">what</span> <span m="840260">actually</span> <span m="840470">matters</span> <span m="840800">is</span> <span m="840990">whether</span> <span m="841650">you</span> <span m="841910">are</span> <span m="842030">allowed</span> <span m="842440">to</span> <span m="842520">modify</span> <span m="842970">the</span> <span m="843150">directory</span> <span m="843770">pointing</span> <span m="844120">at</span> <span m="844220">the</span> <span m="844300">file</span> <span m="844740">and</span> <span m="844880">not</span> <span m="845800">do</span> <span m="845940">something</span> <span m="846360">to</span> <span m="846470">the</span> <span m="846910">file's</span> <span m="847200">inode</span> <span m="847850">itself.</span> <span m="848850">So</span> <span m="849080">typically,</span> <span m="849310">unlink</span> <span m="849700">and</span> <span m="850030">link</span> <span m="851950">and</span> <span m="852770">rename,</span> <span m="853490">create,</span> <span m="854330">are</span> <span m="858230">operations</span> <span m="859535">that</span> <span m="860130">we</span> <span m="860270">sort</span> <span m="860420">of</span> <span m="860510">think</span> <span m="860690">of</span> <span m="860810">as</span> <span m="860920">being</span> <span m="861230">associated</span> <span m="861610">with</span> <span m="861670">the</span> <span m="861740">directory,</span> <span m="862120">although,</span> <span m="862210">they</span> <span m="862300">are</span> <span m="862390">actually</span> <span m="863020">related,</span> <span m="863420">so</span> <span m="863740">"create"</span> <span m="864820">affects</span> <span m="865150">both</span> <span m="865350">the</span> <span m="865420">directory</span> <span m="865900">and</span> <span m="866070">a</span> <span m="866230">new</span> <span m="866380">file</span> <span m="866770">as</span> <span m="866860">well,</span> <span m="867190">so</span> <span m="867400">we</span> <span m="867550">have</span> <span m="867760">to</span> <span m="868090">figure</span> <span m="868300">out</span> <span m="868410">what</span> <span m="868530">are</span> <span m="868590">the</span> <span m="868710">rules</span> <span m="868970">there.</span> </p>
<p><span m="870820">OK,</span> <span m="871010">so</span> <span m="871100">what</span> <span m="871260">are</span> <span m="871370">the</span> <span m="871500">rules?</span> <span m="872410">In</span> <span m="872550">order</span> <span m="872820">to</span> <span m="873140">help</span> <span m="873420">us</span> <span m="873630">decide</span> <span m="874200">when</span> <span m="874370">someone</span> <span m="874680">can</span> <span m="874860">read</span> <span m="875090">or</span> <span m="875220">write</span> <span m="875410">a</span> <span m="875460">file,</span> <span m="876100">we're</span> <span m="876230">going</span> <span m="876310">to</span> <span m="876390">stick</span> <span m="876720">some</span> <span m="877040">permission</span> <span m="877540">stuff,</span> <span m="878050">or</span> <span m="878210">bits,</span> <span m="878960">in</span> <span m="879200">the</span> <span m="879300">file</span> <span m="880140">inode.</span> <span m="881260">In</span> <span m="881370">Unix,</span> <span m="882090">every</span> <span m="883020">inode,</span> <span m="884600">meaning</span> <span m="884990">something</span> <span m="885460">that</span> <span m="885910">ends</span> <span m="886150">up</span> <span m="886390">being</span> <span m="888110">the</span> <span m="888290">file</span> <span m="888670">or</span> <span m="888930">directory,</span> <span m="889790">has</span> <span m="890290">a</span> <span m="890360">couple</span> <span m="890610">of</span> <span m="890910">interesting</span> <span m="891340">fields</span> <span m="891930">for</span> <span m="892150">security</span> <span m="892540">purposes.</span> <span m="893500">There's</span> <span m="893700">a</span> <span m="893750">userid</span> <span m="894720">and</span> <span m="894940">a</span> <span m="895070">group</span> <span m="896310">that</span> <span m="897160">we</span> <span m="897280">say</span> <span m="897670">owns</span> <span m="898330">the</span> <span m="898430">file</span> <span m="898910">or</span> <span m="899060">owns</span> <span m="899480">the</span> <span m="899560">directory.</span> <span m="901020">So</span> <span m="901390">you</span> <span m="901500">might</span> <span m="901700">have</span> <span m="902050">all</span> <span m="902250">the</span> <span m="902330">files</span> <span m="902690">in</span> <span m="902750">your</span> <span m="902860">home</span> <span m="903080">directory</span> <span m="903450">are</span> <span m="903590">probably</span> <span m="903970">owned</span> <span m="904300">by</span> <span m="904510">your</span> <span m="905930">on</span> <span m="906110">your</span> <span m="906300">Unix</span> <span m="906650">system.</span> </p>
<p><span m="907980">There's</span> <span m="908120">also</span> <span m="908715">a</span> <span m="908970">set</span> <span m="909180">of</span> <span m="909420">permission</span> <span m="909890">bits</span> <span m="910700">in</span> <span m="911120">Unix</span> <span m="913091">that</span> <span m="913520">you</span> <span m="913620">can</span> <span m="913700">sort</span> <span m="913780">of</span> <span m="913860">think</span> <span m="914060">of</span> <span m="914290">as</span> <span m="915190">a</span> <span m="915260">bit</span> <span m="915510">of</span> <span m="915590">a</span> <span m="915920">matrix,</span> <span m="916520">so</span> <span m="916930">we</span> <span m="917140">want</span> <span m="917270">to</span> <span m="917550">have--</span> <span m="918830">well</span> <span m="919420">in</span> <span m="919530">Unix</span> <span m="919850">there's</span> <span m="919970">basically</span> <span m="920780">the</span> <span m="920830">basic</span> <span m="921150">design,</span> <span m="921740">there's</span> <span m="921950">read,</span> <span m="922660">write</span> <span m="923430">and</span> <span m="923650">x</span> <span m="923915">for</span> <span m="924180">execute</span> <span m="924720">permissions.</span> <span m="926280">We</span> <span m="926370">can</span> <span m="926520">specify</span> <span m="927110">these</span> <span m="927390">permissions</span> <span m="927980">for</span> <span m="929090">different</span> <span m="930030">entities,</span> <span m="930630">and</span> <span m="930980">in</span> <span m="931280">Unix</span> <span m="931580">these</span> <span m="931680">are</span> <span m="932010">specified</span> <span m="932640">for</span> <span m="932800">the</span> <span m="932920">owner,</span> <span m="933940">meaning</span> <span m="934275">for</span> <span m="934610">the</span> <span m="934870">uid</span> <span m="934980">of</span> <span m="935370">the</span> <span m="935710">inode,</span> <span m="935930">for</span> <span m="936690">the</span> <span m="936930">group</span> <span m="937385">that</span> <span m="937840">owns</span> <span m="938220">the</span> <span m="938750">file,</span> <span m="939470">this</span> <span m="939680">gid</span> <span m="940080">and</span> <span m="940880">everyone</span> <span m="941250">else,</span> <span m="941600">other.</span> <span m="942600">You</span> <span m="942690">can</span> <span m="942823">sort</span> <span m="942956">of</span> <span m="943090">fill</span> <span m="943320">in</span> <span m="943460">this</span> <span m="943850">3</span> <span m="944350">by</span> <span m="944560">3</span> <span m="944960">binary</span> <span m="945390">matrix.</span> <span m="946380">You</span> <span m="946520">might</span> <span m="946710">say,</span> <span m="946800">well,</span> <span m="947390">I</span> <span m="947520">can</span> <span m="947730">read</span> <span m="948040">and</span> <span m="948170">write</span> <span m="948530">and</span> <span m="948630">maybe</span> <span m="948870">not</span> <span m="949100">execute</span> <span m="949430">this</span> <span m="949600">file.</span> <span m="950400">People</span> <span m="950750">in</span> <span m="950875">that</span> <span m="951000">gid</span> <span m="951550">might</span> <span m="951730">be</span> <span m="951810">able</span> <span m="952000">to</span> <span m="952110">read</span> <span m="952650">but</span> <span m="952850">not</span> <span m="953020">write</span> <span m="953230">this</span> <span m="953450">file,</span> <span m="954210">and</span> <span m="954340">everyone</span> <span m="954640">else--</span> <span m="954960">or</span> <span m="955280">maybe</span> <span m="955650">they</span> <span m="956040">can</span> <span m="956280">also</span> <span m="956520">read</span> <span m="956850">it--</span> <span m="957130">but</span> <span m="957350">not</span> <span m="957500">do</span> <span m="957560">anything</span> <span m="957850">else</span> <span m="958010">with</span> <span m="958150">it.</span> </p>
<p><span m="959250">So</span> <span m="959380">this</span> <span m="959463">is</span> <span m="959546">the</span> <span m="959630">way</span> <span m="960100">Unix</span> <span m="960270">stores</span> <span m="960880">permissions.</span> <span m="962300">There's</span> <span m="962500">some</span> <span m="962560">baroque</span> <span m="963870">way</span> <span m="964090">of</span> <span m="964200">encoding</span> <span m="964640">these</span> <span m="964880">things</span> <span m="965310">that</span> <span m="965370">you'll</span> <span m="965560">see</span> <span m="965780">often</span> <span m="966050">that's</span> <span m="966580">probably</span> <span m="966840">worth</span> <span m="967080">mentioning.</span> <span m="968860">In</span> <span m="968990">Unix,</span> <span m="969390">you</span> <span m="969700">encode</span> <span m="970070">this</span> <span m="970250">matrix</span> <span m="971160">as</span> <span m="971340">an</span> <span m="971490">octal</span> <span m="971920">number,</span> <span m="972390">so</span> <span m="972485">you</span> <span m="972580">treat</span> <span m="972900">each</span> <span m="973520">row</span> <span m="973910">here</span> <span m="974580">as</span> <span m="974920">a</span> <span m="975650">base</span> <span m="976000">8</span> <span m="976210">number,</span> <span m="976560">so</span> <span m="977650">r</span> <span m="978500">is</span> <span m="978760">bit</span> <span m="978910">4,</span> <span m="979300">w</span> <span m="979690">is</span> <span m="980080">bit</span> <span m="980430">2,</span> <span m="980710">x</span> <span m="980990">is</span> <span m="981230">bit</span> <span m="981530">1,</span> <span m="981590">so</span> <span m="981650">this</span> <span m="981990">ends</span> <span m="982130">up</span> <span m="982620">being</span> <span m="982830">6,</span> <span m="983930">4,</span> <span m="984830">4,</span> <span m="985180">so</span> <span m="985280">you'll</span> <span m="985380">sort</span> <span m="985540">of</span> <span m="986230">say--</span> <span m="986890">well,</span> <span m="987570">you'll</span> <span m="987840">often</span> <span m="988090">see</span> <span m="988280">this</span> <span m="988440">notation,</span> <span m="988750">even</span> <span m="989060">in</span> <span m="989330">this</span> <span m="989715">paper.</span> <span m="990100">You'll</span> <span m="990320">say,</span> <span m="990400">well,</span> <span m="990880">this</span> <span m="991000">file</span> <span m="991300">has</span> <span m="991580">permission</span> <span m="991990">6,</span> <span m="992126">4,</span> <span m="992263">4,</span> <span m="992960">meaning</span> <span m="993330">the</span> <span m="993420">owner</span> <span m="993880">can</span> <span m="993990">read</span> <span m="994126">and</span> <span m="994263">write</span> <span m="994400">this</span> <span m="994570">file,</span> <span m="994880">the</span> <span m="995000">group</span> <span m="995280">owner</span> <span m="995700">can</span> <span m="996035">read</span> <span m="996102">it</span> <span m="996169">and</span> <span m="996236">everyone</span> <span m="996303">else</span> <span m="996370">can</span> <span m="996600">also</span> <span m="996830">read</span> <span m="997100">it.</span> <span m="998260">Does</span> <span m="998380">that</span> <span m="998635">make</span> <span m="998890">sense?</span> </p>
<p><span m="1005690">This</span> <span m="1005970">tells</span> <span m="1006210">us</span> <span m="1006410">when</span> <span m="1006570">you</span> <span m="1006670">can</span> <span m="1006820">read,</span> <span m="1007180">write</span> <span m="1007310">and</span> <span m="1007430">execute</span> <span m="1007790">a</span> <span m="1007850">file.</span> <span m="1008845">What</span> <span m="1009310">about</span> <span m="1009410">changing</span> <span m="1009760">permissions</span> <span m="1010330">on</span> <span m="1010440">a</span> <span m="1010480">file?</span> <span m="1013475">This</span> <span m="1013960">is</span> <span m="1014120">not</span> <span m="1014300">entirely</span> <span m="1014560">a</span> <span m="1015090">fair</span> <span m="1015380">question,</span> <span m="1015710">but</span> <span m="1015798">what</span> <span m="1015886">do</span> <span m="1015974">you</span> <span m="1016062">guys</span> <span m="1016150">think?</span> <span m="1016390">How</span> <span m="1016590">should</span> <span m="1016780">we</span> <span m="1016900">decide</span> <span m="1017350">when</span> <span m="1017520">someone</span> <span m="1017810">should</span> <span m="1017960">be</span> <span m="1018110">able</span> <span m="1018280">to</span> <span m="1018490">change</span> <span m="1018760">these</span> <span m="1019030">permissions,</span> <span m="1019520">because</span> <span m="1019710">that's</span> <span m="1019880">also</span> <span m="1020160">something</span> <span m="1020550">to</span> <span m="1020670">try</span> <span m="1021640">to</span> <span m="1021740">do,</span> <span m="1021830">at</span> <span m="1021970">least.</span> </p>
<p><span m="1024235">Any guesses?</span> <span m="1024690">Yeah.</span> </p>
<p><span m="1025095">AUDIENCE: If they</span> <span m="1025500">have</span> <span m="1025970">[INAUDIBLE].</span> </p>
<p><span m="1028320">PROFESSOR:</span> <span m="1028790">Maybe,</span> <span m="1029025">yeah.</span> <span m="1030200">It</span> <span m="1030310">depends.</span> <span m="1030710">On</span> <span m="1031020">the</span> <span m="1032030">other</span> <span m="1032220">hand,</span> <span m="1032859">you</span> <span m="1032880">might</span> <span m="1033359">create</span> <span m="1033819">a</span> <span m="1034400">overwritable</span> <span m="1035119">file</span> <span m="1035550">that</span> <span m="1035680">I</span> <span m="1035740">just</span> <span m="1035890">want</span> <span m="1035990">to</span> <span m="1036030">share</span> <span m="1036250">with</span> <span m="1036390">anyone,</span> <span m="1036780">that</span> <span m="1037010">you</span> <span m="1037092">can</span> <span m="1037174">read</span> <span m="1037256">and</span> <span m="1037339">write</span> <span m="1037670">and</span> <span m="1037750">modify</span> <span m="1038060">my</span> <span m="1038220">file,</span> <span m="1039230">but</span> <span m="1039380">then</span> <span m="1039435">this</span> <span m="1039490">also</span> <span m="1039839">means</span> <span m="1040069">that</span> <span m="1040210">you'll</span> <span m="1040359">all</span> <span m="1040459">of</span> <span m="1040559">a</span> <span m="1040660">sudden</span> <span m="1040990">be</span> <span m="1041140">able</span> <span m="1041400">to</span> <span m="1041560">change</span> <span m="1041819">permissions,</span> <span m="1042260">so</span> <span m="1042339">you'll</span> <span m="1042470">be</span> <span m="1042550">able</span> <span m="1042720">to</span> <span m="1042810">take</span> <span m="1042990">my</span> <span m="1043109">file</span> <span m="1043790">and</span> <span m="1043910">make</span> <span m="1044109">it</span> <span m="1044280">not</span> <span m="1044540">overwritable</span> <span m="1045010">or</span> <span m="1045180">take</span> <span m="1045550">it</span> <span m="1045735">over.</span> <span m="1046230">That</span> <span m="1046430">seems</span> <span m="1046619">not</span> <span m="1046839">necessarily</span> <span m="1047420">great,</span> <span m="1049040">so</span> <span m="1049370">in</span> <span m="1049520">Unix,</span> <span m="1049960">what</span> <span m="1050360">are</span> <span m="1050740">the</span> <span m="1050840">designers</span> <span m="1051630">chose,</span> <span m="1051970">is</span> <span m="1052150">that,</span> <span m="1052310">well,</span> <span m="1052600">if</span> <span m="1052780">you</span> <span m="1053020">own</span> <span m="1053690">the</span> <span m="1053830">file,</span> <span m="1054430">meaning</span> <span m="1054820">if</span> <span m="1055240">you</span> <span m="1055490">have</span> <span m="1056230">the</span> <span m="1056330">same</span> <span m="1056680">uid</span> <span m="1057210">as</span> <span m="1057590">the</span> <span m="1057810">file,</span> <span m="1058180">then</span> <span m="1058330">you</span> <span m="1058420">can</span> <span m="1058930">change</span> <span m="1059190">permissions.</span> <span m="1060040">Otherwise,</span> <span m="1060730">you</span> <span m="1060840">cannot.</span> <span m="1061190">So</span> <span m="1061410">even</span> <span m="1061630">if</span> <span m="1061740">you're</span> <span m="1061910">in</span> <span m="1061950">the</span> <span m="1062050">gid</span> <span m="1062540">here</span> <span m="1063260">and</span> <span m="1064200">that</span> <span m="1064380">group</span> <span m="1064660">has</span> <span m="1064790">all</span> <span m="1065000">the</span> <span m="1065080">permissions</span> <span m="1065360">in</span> <span m="1065640">the</span> <span m="1065905">file,</span> <span m="1066170">you</span> <span m="1066283">still</span> <span m="1066396">cannot</span> <span m="1066510">really</span> <span m="1066730">change</span> <span m="1067030">the</span> <span m="1067150">permissions</span> <span m="1067890">on</span> <span m="1067990">that</span> <span m="1068170">file.</span> <span m="1068790">You</span> <span m="1068910">can</span> <span m="1069030">just</span> <span m="1069450">read,</span> <span m="1069675">write,</span> <span m="1069900">execute,</span> <span m="1070240">whatever</span> <span m="1070690">to</span> <span m="1070945">get</span> <span m="1071200">that</span> <span m="1071685">solved.</span> <span m="1072170">Make</span> <span m="1072280">sense?</span> </p>
<p><span m="1074660">Then</span> <span m="1074770">directories</span> <span m="1075260">actually</span> <span m="1075590">in</span> <span m="1075895">Unix</span> <span m="1076047">follow</span> <span m="1076200">a</span> <span m="1076270">pretty</span> <span m="1077200">similar</span> <span m="1077760">story.</span> <span m="1078320">So</span> <span m="1081310">unlinking</span> <span m="1081680">and</span> <span m="1081770">linking</span> <span m="1083410">entries</span> <span m="1083850">in</span> <span m="1083960">a</span> <span m="1084010">directory</span> <span m="1085180">means</span> <span m="1086220">having</span> <span m="1086580">write</span> <span m="1086740">permission</span> <span m="1087330">on</span> <span m="1087490">that</span> <span m="1087670">directory,</span> <span m="1088820">and</span> <span m="1089120">if</span> <span m="1089220">you</span> <span m="1089340">want</span> <span m="1089600">to</span> <span m="1090070">rename</span> <span m="1090600">a</span> <span m="1090660">file,</span> <span m="1091230">then</span> <span m="1091480">you</span> <span m="1091590">probably</span> <span m="1091950">need</span> <span m="1092240">to</span> <span m="1092330">have</span> <span m="1092620">write</span> <span m="1092880">permissions</span> <span m="1093370">on</span> <span m="1093550">both</span> <span m="1093860">the</span> <span m="1093950">directory</span> <span m="1094280">you're</span> <span m="1094490">moving</span> <span m="1094850">it</span> <span m="1095225">from</span> <span m="1095600">and</span> <span m="1095890">the</span> <span m="1095970">directory</span> <span m="1096320">you're</span> <span m="1096510">moving</span> <span m="1096790">it</span> <span m="1096930">to.</span> <span m="1097760">A</span> <span m="1098120">fairly</span> <span m="1098980">natural</span> <span m="1099320">plan.</span> <span m="1100300">There</span> <span m="1100660">are</span> <span m="1100750">some</span> <span m="1100840">corner</span> <span m="1101110">cases</span> <span m="1101530">with</span> <span m="1101760">hard</span> <span m="1102000">links,</span> <span m="1102480">as</span> <span m="1102600">it</span> <span m="1102700">turns</span> <span m="1102940">out.</span> <span m="1103470">Lecture</span> <span m="1103560">notes</span> <span m="1103740">have</span> <span m="1103990">some</span> <span m="1104200">details</span> <span m="1105130">but,</span> <span m="1105450">more</span> <span m="1105610">or</span> <span m="1105630">less,</span> <span m="1105870">that's</span> <span m="1105940">how</span> <span m="1106010">it</span> <span m="1106240">works.</span> </p>
<p><span m="1107420">There's</span> <span m="1107620">actually</span> <span m="1108050">another</span> <span m="1108480">interesting</span> <span m="1108830">operation</span> <span m="1109390">on</span> <span m="1109560">directory</span> <span m="1110010">that</span> <span m="1110140">you</span> <span m="1110210">might</span> <span m="1110400">care</span> <span m="1110560">about,</span> <span m="1110990">which</span> <span m="1111150">is</span> <span m="1111290">lookup.</span> <span m="1111770">So</span> <span m="1111870">you</span> <span m="1111970">might</span> <span m="1112680">want</span> <span m="1112800">to</span> <span m="1113190">just</span> <span m="1113330">look</span> <span m="1113510">up</span> <span m="1113750">a</span> <span m="1114180">file</span> <span m="1114196">in</span> <span m="1114213">a</span> <span m="1114230">directory.</span> <span m="1115430">And</span> <span m="1115600">Unix</span> <span m="1115950">sort</span> <span m="1116100">of</span> <span m="1116190">encodes</span> <span m="1117230">execute</span> <span m="1117710">permissions</span> <span m="1118300">as</span> <span m="1118720">implementing</span> <span m="1119630">lookup</span> <span m="1120510">for</span> <span m="1120680">directories,</span> <span m="1121920">so</span> <span m="1122150">what</span> <span m="1122205">it</span> <span m="1122260">means</span> <span m="1122500">to</span> <span m="1122610">have</span> <span m="1122850">execute</span> <span m="1123200">permissions</span> <span m="1123580">on</span> <span m="1123645">a</span> <span m="1123710">directory</span> <span m="1124210">is</span> <span m="1124310">just</span> <span m="1124415">being</span> <span m="1124520">able</span> <span m="1124690">to</span> <span m="1124760">look</span> <span m="1124980">up</span> <span m="1125070">a</span> <span m="1125140">certain</span> <span m="1125560">name</span> <span m="1125810">there.</span> <span m="1126535">Might</span> <span m="1126960">be</span> <span m="1127150">that</span> <span m="1127240">you</span> <span m="1127390">don't</span> <span m="1127495">actually</span> <span m="1127600">have</span> <span m="1127705">to</span> <span m="1127810">execute</span> <span m="1128140">permission</span> <span m="1128540">on</span> <span m="1128601">a</span> <span m="1128662">directory</span> <span m="1128723">so</span> <span m="1128785">you</span> <span m="1128846">can</span> <span m="1128907">look</span> <span m="1128968">up</span> <span m="1129030">a</span> <span m="1129135">name,</span> <span m="1129240">but</span> <span m="1129350">you</span> <span m="1129460">don't</span> <span m="1130530">don't</span> <span m="1130690">have</span> <span m="1130900">read</span> <span m="1131190">permission,</span> <span m="1131600">so</span> <span m="1131690">you</span> <span m="1131800">can't</span> <span m="1132120">list</span> <span m="1132530">the</span> <span m="1132620">contents</span> <span m="1132990">of</span> <span m="1133080">a</span> <span m="1133130">directory.</span> <span m="1134990">It</span> <span m="1135470">turns</span> <span m="1135700">out</span> <span m="1135820">to</span> <span m="1135880">be</span> <span m="1136010">useful</span> <span m="1136330">in</span> <span m="1136390">some</span> <span m="1136530">situations</span> <span m="1137030">if</span> <span m="1137140">you</span> <span m="1137215">really</span> <span m="1137380">want</span> <span m="1137530">to</span> <span m="1137600">restrict</span> <span m="1138420">what</span> <span m="1138700">someone</span> <span m="1139360">could</span> <span m="1139560">do</span> <span m="1139690">with</span> <span m="1142400">those</span> <span m="1142600">files,</span> <span m="1142950">or</span> <span m="1143140">sort</span> <span m="1143280">of</span> <span m="1143340">hide</span> <span m="1143690">the</span> <span m="1143760">files</span> <span m="1144370">from</span> <span m="1144570">a</span> <span m="1145013">user.</span> </p>
<p><span m="1146030">Let's</span> <span m="1146110">just</span> <span m="1146530">work</span> <span m="1146720">through</span> <span m="1146820">an</span> <span m="1147160">example.</span> <span m="1147790">What</span> <span m="1148230">happens</span> <span m="1148610">on</span> <span m="1148790">Unix</span> <span m="1149290">if</span> <span m="1149530">I</span> <span m="1150040">call</span> <span m="1150974">open("/etc/password")?</span> <span m="1156840">What</span> <span m="1157120">checks</span> <span m="1157890">is</span> <span m="1158050">the</span> <span m="1158170">kernel</span> <span m="1158510">going</span> <span m="1158800">to</span> <span m="1158950">perform</span> <span m="1160360">on</span> <span m="1160520">my</span> <span m="1160660">behalf</span> <span m="1161370">when</span> <span m="1161620">I</span> <span m="1161750">issue</span> <span m="1162180">this</span> <span m="1162340">system</span> <span m="1162400">call?</span> </p>
<p><span m="1166374">AUDIENCE:</span> <span m="1166856">It</span> <span m="1167820">checks</span> <span m="1168310">whether</span> <span m="1168500">you</span> <span m="1168820">have</span> <span m="1169140">execute</span> <span m="1169315">permissions</span> <span m="1169490">on</span> <span m="1169950">etc?</span> </p>
<p><span m="1170410">PROFESSOR: Yeah,</span> <span m="1170740">that</span> <span m="1171240">will</span> <span m="1171600">happen</span> <span m="1171800">somewhere.</span> <span m="1171850">I</span> <span m="1172250">need</span> <span m="1172650">to</span> <span m="1173010">execute</span> <span m="1173083">on</span> <span m="1173156">etc.</span> </p>
<p><span m="1174025">AUDIENCE:</span> <span m="1174340">And</span> <span m="1174470">then</span> <span m="1174770">execute</span> <span m="1175270">on</span> <span m="1175410">slash.</span> </p>
<p><span m="1175870">PROFESSOR:</span> <span m="1176260">Yes,</span> <span m="1176470">actually,</span> <span m="1176525">I</span> <span m="1176580">need</span> <span m="1176950">to</span> <span m="1177050">look</span> <span m="1177330">up</span> <span m="1177550">what</span> <span m="1177730">does</span> <span m="1178030">/etc</span> <span m="1178280">even</span> <span m="1178820">point</span> <span m="1179210">to?</span> <span m="1179340">So</span> <span m="1179400">if</span> <span m="1179460">I</span> <span m="1179510">don't</span> <span m="1179660">have</span> <span m="1180060">look up</span> <span m="1180260">permissions</span> <span m="1180400">on</span> <span m="1180460">root,</span> <span m="1181540">then</span> <span m="1182040">that's</span> <span m="1182410">not</span> <span m="1182540">going</span> <span m="1182640">to</span> <span m="1182710">work.</span> </p>
<p><span m="1183487">AUDIENCE:</span> <span m="1183944">Then</span> <span m="1184401">you</span> <span m="1184860">need</span> <span m="1185290">read</span> <span m="1186690">on</span> <span m="1186880">/etc/password.</span> </p>
<p><span m="1191975">PROFESSOR:</span> <span m="1192250">Make</span> <span m="1192430">sense,</span> <span m="1192800">roughly?</span> <span m="1195230">Here's</span> <span m="1195606">a</span> <span m="1196360">small</span> <span m="1196550">puzzle.</span> <span m="1197660">Suppose</span> <span m="1198030">that</span> <span m="1199910">MIT</span> <span m="1200390">sets</span> <span m="1200690">up</span> <span m="1200840">a</span> <span m="1200990">group</span> <span m="1201280">for</span> <span m="1201590">all</span> <span m="1202030">the</span> <span m="1202910">people</span> <span m="1203220">associated</span> <span m="1203630">with</span> <span m="1203740">6.858</span> <span m="1205090">and</span> <span m="1205300">another</span> <span m="1205680">group</span> <span m="1206190">in</span> <span m="1206300">the</span> <span m="1206350">Unix</span> <span m="1206720">sets</span> <span m="1206840">of</span> <span m="1206920">gids</span> <span m="1207960">for</span> <span m="1208680">all</span> <span m="1208840">the</span> <span m="1208960">TAs</span> <span m="1209950">at</span> <span m="1210070">MIT,</span> <span m="1211960">but</span> <span m="1212080">they</span> <span m="1212140">don't</span> <span m="1212330">have</span> <span m="1212460">a</span> <span m="1212530">group</span> <span m="1212790">four</span> <span m="1213280">6.858</span> <span m="1213695">TAs</span> <span m="1214320">for</span> <span m="1214420">some</span> <span m="1214680">silly</span> <span m="1214960">reason.</span> <span m="1215980">Could</span> <span m="1217780">I</span> <span m="1218050">create</span> <span m="1218300">a</span> <span m="1218360">file</span> <span m="1219240">that's</span> <span m="1219670">only</span> <span m="1219920">accessible</span> <span m="1220490">to</span> <span m="1220620">6.858</span> <span m="1221220">TAs?</span> <span m="1222010">If</span> <span m="1222200">I</span> <span m="1222330">have</span> <span m="1222800">a</span> <span m="1223050">6.858</span> <span m="1223680">group,</span> <span m="1224065">or</span> <span m="1226060">some</span> <span m="1226230">gid,</span> <span m="1226980">and</span> <span m="1227300">a</span> <span m="1227620">TAs</span> <span m="1228780">gid.</span> <span m="1232182">So</span> <span m="1232669">there's</span> <span m="1233650">only</span> <span m="1233910">one</span> <span m="1234180">gid</span> <span m="1234700">that</span> <span m="1234800">I</span> <span m="1234850">can</span> <span m="1235020">stick</span> <span m="1235290">in</span> <span m="1235370">a</span> <span m="1235420">file.</span> <span m="1236920">Any</span> <span m="1237385">guesses?</span> </p>
<p><span m="1240180">AUDIENCE: Well,</span> <span m="1240400">you</span> <span m="1240780">couldn't</span> <span m="1241120">anyway</span> <span m="1241340">because</span> <span m="1241460">you</span> <span m="1241760">might</span> <span m="1242030">have</span> <span m="1242487">TAs</span> <span m="1242944">that</span> <span m="1243401">and</span> <span m="1243858">not</span> <span m="1244315">858</span> <span m="1244772">TAs.</span> </p>
<p><span m="1245686">PROFESSOR:</span> <span m="1246143">That's</span> <span m="1246600">true,</span> <span m="1246830">yeah.</span> <span m="1247870">Suppose</span> <span m="1248020">they</span> <span m="1248130">want</span> <span m="1248390">to--</span> <span m="1248800">you're</span> <span m="1249230">right,</span> <span m="1249256">yeah,</span> <span m="1249283">so</span> <span m="1249310">there</span> <span m="1250320">are</span> <span m="1250720">students</span> <span m="1251000">in</span> <span m="1251280">858</span> <span m="1251500">that</span> <span m="1251550">are</span> <span m="1251910">TAs</span> <span m="1252070">of</span> <span m="1252230">other</span> <span m="1252410">classes,</span> <span m="1252750">so</span> <span m="1253020">that's</span> <span m="1253160">maybe</span> <span m="1253350">not</span> <span m="1253480">great.</span> <span m="1253800">But,</span> <span m="1254130">still,</span> <span m="1254460">lets</span> <span m="1254745">try</span> <span m="1254840">to</span> <span m="1254935">do</span> <span m="1255030">intersections</span> <span m="1255480">somehow.</span> </p>
<p><span m="1256220">AUDIENCE:</span> <span m="1256640">[INAUDIBLE].</span> </p>
<p><span m="1260520">PROFESSOR: Yes,</span> <span m="1261980">so</span> <span m="1262040">you</span> <span m="1262590">can</span> <span m="1262820">actually</span> <span m="1263040">play</span> <span m="1263280">tricks</span> <span m="1263570">with</span> <span m="1263940">this</span> <span m="1264105">mechanism.</span> <span m="1264270">It's</span> <span m="1264445">not</span> <span m="1264620">perfect,</span> <span m="1264980">but</span> <span m="1265270">you</span> <span m="1265370">can</span> <span m="1265520">sort</span> <span m="1265645">of</span> <span m="1265770">use</span> <span m="1266000">it</span> <span m="1266060">to</span> <span m="1266380">encode</span> <span m="1266655">more</span> <span m="1266930">interesting</span> <span m="1267030">things.</span> <span m="1267130">You</span> <span m="1267220">could</span> <span m="1267430">actually</span> <span m="1268060">do</span> <span m="1268200">something</span> <span m="1268590">like</span> <span m="1269390">create</span> <span m="1269780">/foo/bar/grades</span> <span m="1272940">file,</span> <span m="1274000">and</span> <span m="1274280">what</span> <span m="1274400">I'll</span> <span m="1274590">do</span> <span m="1274770">is</span> <span m="1274910">I'll</span> <span m="1275080">actually</span> <span m="1275380">make</span> <span m="1275800">foo</span> <span m="1276630">owned</span> <span m="1277070">by--</span> <span m="1277370">or</span> <span m="1277910">set</span> <span m="1278230">the</span> <span m="1278320">gid</span> <span m="1278745">to</span> <span m="1279170">6.858</span> <span m="1280065">and</span> <span m="1280460">only</span> <span m="1280900">make</span> <span m="1281390">it</span> <span m="1281920">executable</span> <span m="1283260">for</span> <span m="1283690">the</span> <span m="1283810">group.</span> </p>
<p><span m="1285070">So</span> <span m="1285350">unless</span> <span m="1285660">you're</span> <span m="1285763">in</span> <span m="1285866">this</span> <span m="1285970">group,</span> <span m="1286570">you</span> <span m="1286590">can't</span> <span m="1286980">even</span> <span m="1287260">look</span> <span m="1287520">things</span> <span m="1287760">up</span> <span m="1288030">in</span> <span m="1288220">/foo,</span> <span m="1288620">and</span> <span m="1289575">then</span> <span m="1290050">I</span> <span m="1290110">could</span> <span m="1290510">set</span> <span m="1290720">the</span> <span m="1290790">permissions</span> <span m="1291160">on</span> <span m="1291300">bar</span> <span m="1292080">so</span> <span m="1292310">the</span> <span m="1292640">gid</span> <span m="1293460">is</span> <span m="1293740">for</span> <span m="1294140">TAs</span> <span m="1294940">and</span> <span m="1295110">then</span> <span m="1295365">it's</span> <span m="1295620">executable</span> <span m="1296730">for</span> <span m="1296970">group</span> <span m="1297250">as</span> <span m="1297370">well</span> <span m="1298320">and</span> <span m="1298510">not</span> <span m="1298700">others.</span> <span m="1300390">So</span> <span m="1300530">unless</span> <span m="1300950">you</span> <span m="1301040">can</span> <span m="1301150">actually</span> <span m="1301450">traverse</span> <span m="1302080">this</span> <span m="1302300">path,</span> <span m="1302760">you</span> <span m="1302860">can't</span> <span m="1303050">get</span> <span m="1303210">to</span> <span m="1303305">this</span> <span m="1303400">grades</span> <span m="1303710">file.</span> <span m="1303995">It's</span> <span m="1304280">kind</span> <span m="1304694">of,</span> <span m="1304901">you</span> <span m="1305108">know,</span> <span m="1305522">a</span> <span m="1305936">cute</span> <span m="1306350">hack,</span> <span m="1306460">if</span> <span m="1306955">you</span> <span m="1307450">will,</span> <span m="1307950">but</span> <span m="1308160">these</span> <span m="1308330">kinds</span> <span m="1308530">of</span> <span m="1308700">tricks</span> <span m="1309140">are</span> <span m="1309390">things</span> <span m="1309680">you</span> <span m="1309800">end</span> <span m="1309930">up</span> <span m="1310480">doing</span> <span m="1311010">with</span> <span m="1311350">whatever</span> <span m="1312240">the</span> <span m="1312360">base</span> <span m="1312660">primitives</span> <span m="1313030">are,</span> <span m="1313230">the</span> <span m="1313900">isolation</span> <span m="1314400">mechanism</span> <span m="1315660">provides</span> <span m="1316050">to</span> <span m="1316225">you.</span> <span m="1316400">And</span> <span m="1316750">even</span> <span m="1317140">OKWS</span> <span m="1317570">plays</span> <span m="1317980">all</span> <span m="1318160">these</span> <span m="1319360">tricks</span> <span m="1319610">as</span> <span m="1319700">well</span> <span m="1319930">in</span> <span m="1320040">their</span> <span m="1320190">design.</span> <span m="1322320">Make</span> <span m="1322350">sense?</span> <span m="1323110">Questions?</span> <span m="1323390">Yeah.</span> </p>
<p><span m="1324237">AUDIENCE:</span> <span m="1324724">If, like,</span> <span m="1325211">the</span> <span m="1325698">permissions</span> <span m="1326185">on</span> <span m="1326672">the</span> <span m="1326916">grades</span> <span m="1327690">file</span> <span m="1327960">itself,</span> <span m="1328230">were let's</span> <span m="1328317">say--</span> <span m="1328492">the</span> <span m="1328580">QID</span> <span m="1328710">was</span> <span m="1328840">6.858,</span> <span m="1329910">could</span> <span m="1330328">a</span> <span m="1330432">TA,</span> <span m="1330537">like,</span> <span m="1330913">link</span> <span m="1330996">it</span> <span m="1331080">to</span> <span m="1331164">some</span> <span m="1331582">other</span> <span m="1332420">directory</span> <span m="1332725">and</span> <span m="1333030">allow</span> <span m="1333866">anybody</span> <span m="1334322">in</span> <span m="1334778">6.858</span> <span m="1335234">to</span> <span m="1335690">access</span> <span m="1335920">it?</span> </p>
<p><span m="1336150">PROFESSOR:</span> <span m="1336330">Yeah,</span> <span m="1336405">potentially,</span> <span m="1336630">right?</span> <span m="1336790">So</span> <span m="1336950">you</span> <span m="1337240">might</span> <span m="1337420">worry</span> <span m="1337650">about</span> <span m="1337760">other</span> <span m="1338080">things</span> <span m="1338310">like</span> <span m="1338500">leakage</span> <span m="1338910">now,</span> <span m="1339490">so</span> <span m="1339600">Unix</span> <span m="1339950">in</span> <span m="1340300">general</span> <span m="1341360">doesn't</span> <span m="1342650">try</span> <span m="1343040">to</span> <span m="1343150">enforce</span> <span m="1344320">these</span> <span m="1344510">kinds</span> <span m="1344730">of</span> <span m="1344930">transitive</span> <span m="1345910">security</span> <span m="1346430">properties,</span> <span m="1347000">meaning</span> <span m="1347310">that</span> <span m="1347730">once</span> <span m="1347950">a</span> <span m="1348170">process</span> <span m="1348690">has</span> <span m="1348840">access</span> <span m="1349320">to</span> <span m="1349430">some</span> <span m="1349750">data,</span> <span m="1350540">or</span> <span m="1350950">has</span> <span m="1351200">some</span> <span m="1351620">privileges,</span> <span m="1352910">it</span> <span m="1353030">can</span> <span m="1353230">basically</span> <span m="1353880">delegate</span> <span m="1354520">those</span> <span m="1354750">privileges</span> <span m="1355005">to</span> <span m="1355260">anyone</span> <span m="1355480">it</span> <span m="1355810">wants.</span> <span m="1357090">There</span> <span m="1357270">are</span> <span m="1357380">other</span> <span m="1357510">kinds</span> <span m="1357730">of</span> <span m="1357800">systems</span> <span m="1358470">called</span> <span m="1358850">mandatory</span> <span m="1359310">access</span> <span m="1359580">control</span> <span m="1359880">systems.</span> </p>
<p><span m="1360750">We'll</span> <span m="1361120">perhaps</span> <span m="1361340">talk</span> <span m="1361560">about</span> <span m="1361720">them</span> <span m="1361800">later,</span> <span m="1362630">but</span> <span m="1362800">those</span> <span m="1363090">try</span> <span m="1363253">to</span> <span m="1363416">actually</span> <span m="1363580">enforce</span> <span m="1363870">this</span> <span m="1364160">transitive</span> <span m="1365220">property</span> <span m="1365650">that,</span> <span m="1366010">if</span> <span m="1366150">I</span> <span m="1366210">give</span> <span m="1366480">it</span> <span m="1366700">to</span> <span m="1366850">you,</span> <span m="1367370">then</span> <span m="1367670">you</span> <span m="1367790">can't</span> <span m="1368010">give</span> <span m="1368250">to</span> <span m="1368430">other</span> <span m="1368540">people.</span> <span m="1368880">You're</span> <span m="1369000">basically</span> <span m="1369300">stuck.</span> <span m="1369820">It</span> <span m="1370285">sort</span> <span m="1370750">of</span> <span m="1370850">taints</span> <span m="1370910">you</span> <span m="1371520">and</span> <span m="1371990">you</span> <span m="1372190">can't</span> <span m="1372430">go</span> <span m="1372560">anywhere</span> <span m="1372870">else.</span> <span m="1373450">In</span> <span m="1373700">Unix,</span> <span m="1374110">this</span> <span m="1374390">is generally</span> <span m="1374770">not</span> <span m="1374970">the</span> <span m="1375060">case,</span> <span m="1375410">and</span> <span m="1377816">a</span> <span m="1378210">TA</span> <span m="1378760">probably</span> <span m="1380210">could</span> <span m="1380470">not</span> <span m="1380750">hard</span> <span m="1381200">link</span> <span m="1381335">this</span> <span m="1381470">file</span> <span m="1381790">because</span> <span m="1382090">of</span> <span m="1382170">another</span> <span m="1382510">silly</span> <span m="1382900">rule</span> <span m="1383230">that</span> <span m="1383370">Unix</span> <span m="1383660">enforces</span> <span m="1384190">for</span> <span m="1384320">hard</span> <span m="1384610">links,</span> <span m="1384860">which</span> <span m="1385040">is</span> <span m="1385190">that</span> <span m="1385760">only</span> <span m="1386180">the</span> <span m="1386410">owner</span> <span m="1386780">of</span> <span m="1386965">a</span> <span m="1387150">file</span> <span m="1387660">can</span> <span m="1387810">hard</span> <span m="1388075">link</span> <span m="1388340">it</span> <span m="1388540">somewhere</span> <span m="1389000">else.</span> </p>
<p><span m="1390420">And</span> <span m="1390550">this</span> <span m="1390710">is</span> <span m="1390880">partly</span> <span m="1392470">because</span> <span m="1392740">of</span> <span m="1392790">the</span> <span m="1392840">way</span> <span m="1392970">Unix</span> <span m="1393180">does</span> <span m="1393540">quotas,</span> <span m="1394550">because</span> <span m="1394780">in</span> <span m="1394890">Unix</span> <span m="1395260">quotas</span> <span m="1395790">are</span> <span m="1396270">by</span> <span m="1397080">who</span> <span m="1397360">owns</span> <span m="1397720">the</span> <span m="1397820">file.</span> <span m="1398520">So</span> <span m="1398760">if</span> <span m="1398910">you</span> <span m="1399010">create</span> <span m="1399300">some</span> <span m="1399470">giant</span> <span m="1399880">file,</span> <span m="1400900">I</span> <span m="1400990">can</span> <span m="1401170">hard</span> <span m="1401330">link</span> <span m="1401490">a</span> <span m="1401650">copy</span> <span m="1401970">over</span> <span m="1402110">to</span> <span m="1402170">my</span> <span m="1402340">directory,</span> <span m="1403330">then</span> <span m="1403500">you</span> <span m="1403590">maybe</span> <span m="1403680">delete</span> <span m="1404070">the</span> <span m="1404160">file,</span> <span m="1405050">but</span> <span m="1405150">I</span> <span m="1405230">still</span> <span m="1405420">have</span> <span m="1405680">it,</span> <span m="1405760">and</span> <span m="1405830">the</span> <span m="1405910">file</span> <span m="1406010">system</span> <span m="1406350">thinks,</span> <span m="1406790">yep,</span> <span m="1407110">that's</span> <span m="1407485">the</span> <span m="1407672">owner,</span> <span m="1407860">but</span> <span m="1407980">you</span> <span m="1408060">can't</span> <span m="1408250">even</span> <span m="1408440">delete</span> <span m="1408740">it,</span> <span m="1408860">because</span> <span m="1409130">I</span> <span m="1409390">have</span> <span m="1409820">the</span> <span m="1410030">reference</span> <span m="1410440">to</span> <span m="1410530">it.</span> <span m="1411160">So</span> <span m="1411720">that</span> <span m="1411860">would</span> <span m="1411990">be</span> <span m="1412220">a</span> <span m="1412540">bit</span> <span m="1412660">of</span> <span m="1412705">an</span> <span m="1412750">unfortunate</span> <span m="1413660">combination</span> <span m="1414200">of</span> <span m="1414360">Unix</span> <span m="1414650">mechanisms</span> <span m="1415130">there.</span> </p>
<p><span m="1416970">But</span> <span m="1417240">in</span> <span m="1417350">general,</span> <span m="1418430">you</span> <span m="1418440">should</span> <span m="1418600">worry</span> <span m="1418810">about</span> <span m="1419040">such</span> <span m="1419260">things</span> <span m="1419530">like</span> <span m="1419680">transitivity,</span> <span m="1419970">like</span> <span m="1420260">could</span> <span m="1420700">someone--</span> <span m="1421660">or</span> <span m="1422010">maybe</span> <span m="1422300">a</span> <span m="1422710">better</span> <span m="1422930">problem</span> <span m="1423300">is,</span> <span m="1423700">maybe</span> <span m="1423950">someone</span> <span m="1424370">was</span> <span m="1424660">a</span> <span m="1424945">TA</span> <span m="1425040">and</span> <span m="1425135">then</span> <span m="1425230">we</span> <span m="1425420">remove</span> <span m="1425700">him.</span> <span m="1426510">But</span> <span m="1426630">maybe</span> <span m="1426810">they</span> <span m="1427030">can</span> <span m="1427150">still</span> <span m="1427270">sort</span> <span m="1427420">of</span> <span m="1427500">stash</span> <span m="1427855">away</span> <span m="1428032">a</span> <span m="1428210">reference</span> <span m="1428580">somewhere,</span> <span m="1429580">so</span> <span m="1430644">this</span> <span m="1431026">is</span> <span m="1431410">maybe</span> <span m="1431650">not</span> <span m="1431930">a</span> <span m="1432000">perfect</span> <span m="1432280">solution</span> <span m="1432590">for</span> <span m="1432730">this</span> <span m="1432950">problem</span> <span m="1433310">for</span> <span m="1433800">many</span> <span m="1434020">reasons,</span> <span m="1434410">including</span> <span m="1434650">the</span> <span m="1434730">fact</span> <span m="1434860">that</span> <span m="1434990">there's</span> <span m="1435630">non-858</span> <span m="1435885">TAs</span> <span m="1436140">taking</span> <span m="1436455">858.</span> <span m="1439240">Are</span> <span m="1440050">there</span> <span m="1440180">questions?</span> </p>
<p><span m="1443050">OK,</span> <span m="1443540">so</span> <span m="1443690">that's</span> <span m="1444380">files</span> <span m="1444880">and</span> <span m="1445060">directories</span> <span m="1445560">in</span> <span m="1445660">Unix,</span> <span m="1446140">so</span> <span m="1446480">how</span> <span m="1447090">security</span> <span m="1447710">works</span> <span m="1448480">for</span> <span m="1448580">them.</span> <span m="1449535">A</span> <span m="1449900">closely</span> <span m="1450420">related</span> <span m="1451280">thing</span> <span m="1451540">in</span> <span m="1451650">Unix</span> <span m="1452070">are</span> <span m="1452450">file</span> <span m="1452710">descriptors.</span> <span m="1458800">The</span> <span m="1459250">file</span> <span m="1459510">descriptors</span> <span m="1459960">are</span> <span m="1460060">used</span> <span m="1460520">fairly</span> <span m="1461100">pretty</span> <span m="1461270">widely</span> <span m="1461760">in</span> <span m="1461990">OKWS</span> <span m="1462920">and</span> <span m="1463630">what</span> <span m="1463880">a</span> <span m="1464110">file</span> <span m="1464180">descriptor</span> <span m="1464930">represents</span> <span m="1465260">in</span> <span m="1465590">Unix</span> <span m="1465990">is</span> <span m="1466110">basically</span> <span m="1466440">an</span> <span m="1466650">open</span> <span m="1467060">file.</span> <span m="1467600">So</span> <span m="1468330">in</span> <span m="1468470">Unix</span> <span m="1468800">in</span> <span m="1468880">particular,</span> <span m="1469235">it</span> <span m="1469590">turns</span> <span m="1469895">out</span> <span m="1470200">that</span> <span m="1470450">the</span> <span m="1471180">security</span> <span m="1471710">checks</span> <span m="1472270">on</span> <span m="1472550">opening</span> <span m="1472990">a</span> <span m="1473040">file</span> <span m="1474180">are</span> <span m="1474490">performed--</span> <span m="1476210">or</span> <span m="1476530">security</span> <span m="1476840">checks</span> <span m="1477110">for</span> <span m="1477350">accessing</span> <span m="1477590">a</span> <span m="1477650">file--</span> <span m="1477850">are</span> <span m="1478050">performed</span> <span m="1478440">when</span> <span m="1478560">you</span> <span m="1478750">open</span> <span m="1479070">the</span> <span m="1479160">file</span> <span m="1479410">in</span> <span m="1479480">the</span> <span m="1479550">first</span> <span m="1479880">place.</span> </p>
<p><span m="1481310">And</span> <span m="1481490">from</span> <span m="1481660">there</span> <span m="1481930">on,</span> <span m="1482400">you</span> <span m="1482530">have</span> <span m="1482740">basically</span> <span m="1483180">a</span> <span m="1483220">handle</span> <span m="1483880">on</span> <span m="1483990">the</span> <span m="1484100">file,</span> <span m="1484970">where</span> <span m="1485270">anyone</span> <span m="1485770">with</span> <span m="1485805">that</span> <span m="1485840">handle</span> <span m="1486400">can</span> <span m="1486610">now</span> <span m="1486900">perform</span> <span m="1487270">operations</span> <span m="1487760">on</span> <span m="1487920">that</span> <span m="1488120">file.</span> <span m="1488540">So</span> <span m="1488810">the</span> <span m="1489300">rules</span> <span m="1489393">for</span> <span m="1489486">basically</span> <span m="1489580">accessing</span> <span m="1489970">a</span> <span m="1490040">file</span> <span m="1490350">descriptor</span> <span m="1491220">are,</span> <span m="1491610">if</span> <span m="1491730">you</span> <span m="1492120">have</span> <span m="1492360">an</span> <span m="1492430">open</span> <span m="1492650">file</span> <span m="1492830">descriptor</span> <span m="1493280">in</span> <span m="1493490">your</span> <span m="1493710">process,</span> <span m="1494230">then</span> <span m="1494400">you</span> <span m="1494520">can</span> <span m="1494650">access</span> <span m="1494980">it.</span> <span m="1496060">And</span> <span m="1496570">security</span> <span m="1496950">checks</span> <span m="1497200">don't</span> <span m="1497420">apply</span> <span m="1498470">in</span> <span m="1498510">the</span> <span m="1498580">sense</span> <span m="1498820">that,</span> <span m="1499390">to</span> <span m="1499510">get</span> <span m="1499710">that</span> <span m="1499980">file</span> <span m="1500130">descriptor,</span> <span m="1500470">you</span> <span m="1500600">could</span> <span m="1500850">have</span> <span m="1500945">just</span> <span m="1501040">opened</span> <span m="1501360">the</span> <span m="1501460">file,</span> <span m="1501820">in</span> <span m="1501910">which</span> <span m="1502090">case</span> <span m="1502360">these</span> <span m="1502550">regular</span> <span m="1502870">checks</span> <span m="1503070">would</span> <span m="1503175">have</span> <span m="1503280">applied,</span> <span m="1504180">or</span> <span m="1504870">some</span> <span m="1505150">other</span> <span m="1505400">process</span> <span m="1505800">might</span> <span m="1505990">have</span> <span m="1506270">passed</span> <span m="1506710">the</span> <span m="1506790">file</span> <span m="1507020">descriptor</span> <span m="1507500">to</span> <span m="1507710">you,</span> <span m="1508650">so</span> <span m="1508740">you</span> <span m="1508810">can</span> <span m="1509010">pass</span> <span m="1509320">file</span> <span m="1509510">descriptors</span> <span m="1510500">by</span> <span m="1511080">inheriting</span> <span m="1511710">from</span> <span m="1511920">a</span> <span m="1512020">parent,</span> <span m="1512500">so</span> <span m="1512660">a</span> <span m="1512960">parent</span> <span m="1513260">can</span> <span m="1513440">pass</span> <span m="1513790">a</span> <span m="1513825">file</span> <span m="1513860">descriptor</span> <span m="1513956">to</span> <span m="1514053">a</span> <span m="1514150">child</span> <span m="1514500">process</span> <span m="1515260">or</span> <span m="1515470">you</span> <span m="1515530">can</span> <span m="1515680">pass</span> <span m="1515960">file</span> <span m="1516130">descriptors</span> <span m="1516660">through</span> <span m="1516870">sockets</span> <span m="1517400">in</span> <span m="1517540">Unix,</span> <span m="1518510">but</span> <span m="1518810">however</span> <span m="1519350">you</span> <span m="1519505">manage</span> <span m="1519660">to</span> <span m="1519730">get</span> <span m="1519950">a</span> <span m="1520265">file descriptor,</span> <span m="1520580">you</span> <span m="1520660">can</span> <span m="1520830">read</span> <span m="1521150">and</span> <span m="1521250">write</span> <span m="1521480">the</span> <span m="1521570">file</span> <span m="1521790">descriptor</span> <span m="1522160">all</span> <span m="1522255">you</span> <span m="1522350">want,</span> <span m="1523090">because</span> <span m="1523370">the</span> <span m="1523450">security</span> <span m="1523730">checks</span> <span m="1523950">have</span> <span m="1524075">already</span> <span m="1524200">been</span> <span m="1524480">done</span> <span m="1524700">when</span> <span m="1525080">the</span> <span m="1525170">file</span> <span m="1525390">descriptor</span> <span m="1525720">was</span> <span m="1525860">initially</span> <span m="1526650">created.</span> </p>
<p><span m="1527810">So</span> <span m="1527910">that's</span> <span m="1528110">actually</span> <span m="1528310">a</span> <span m="1528425">nice</span> <span m="1528540">way</span> <span m="1528655">in</span> <span m="1528770">Unix</span> <span m="1529170">to</span> <span m="1529680">give</span> <span m="1529960">someone</span> <span m="1530270">privileges</span> <span m="1530890">that</span> <span m="1530960">they</span> <span m="1531130">don't</span> <span m="1531590">otherwise</span> <span m="1532170">have.</span> <span m="1533360">So</span> <span m="1533600">in</span> <span m="1533770">OKWS</span> <span m="1534150">there's</span> <span m="1534670">probably</span> <span m="1535060">many</span> <span m="1535500">components</span> <span m="1536220">that</span> <span m="1536940">need</span> <span m="1537170">to</span> <span m="1537230">act</span> <span m="1537490">as</span> <span m="1537590">a</span> <span m="1537660">certain</span> <span m="1538450">socket</span> <span m="1538790">or</span> <span m="1539156">file,</span> <span m="1539890">or</span> <span m="1540110">whatever</span> <span m="1540610">you</span> <span m="1540710">have</span> <span m="1541200">it,</span> <span m="1541590">and</span> <span m="1542060">one</span> <span m="1542280">way</span> <span m="1542440">to</span> <span m="1542980">implement</span> <span m="1543420">this</span> <span m="1543660">without</span> <span m="1544150">giving</span> <span m="1544390">them</span> <span m="1544650">direct</span> <span m="1545060">access</span> <span m="1545450">to</span> <span m="1545590">read</span> <span m="1545810">and</span> <span m="1545940">write</span> <span m="1546210">the</span> <span m="1546290">file</span> <span m="1546820">in</span> <span m="1546990">the</span> <span m="1547080">file</span> <span m="1547400">system,</span> <span m="1548280">is</span> <span m="1548430">to</span> <span m="1548520">have</span> <span m="1548690">someone</span> <span m="1549020">else</span> <span m="1549260">open</span> <span m="1549550">the</span> <span m="1549630">file,</span> <span m="1550010">create</span> <span m="1550200">a</span> <span m="1550250">file</span> <span m="1550480">descriptor</span> <span m="1551600">and</span> <span m="1551750">then</span> <span m="1552000">pass</span> <span m="1552390">it</span> <span m="1552580">to</span> <span m="1552650">this</span> <span m="1552770">extra</span> <span m="1553100">component.</span> <span m="1553940">This</span> <span m="1554070">way,</span> <span m="1554173">you</span> <span m="1554276">can</span> <span m="1554380">really</span> <span m="1554660">precisely</span> <span m="1555070">say,</span> <span m="1555210">that's</span> <span m="1555400">the</span> <span m="1555630">only</span> <span m="1556050">file</span> <span m="1556340">descriptor</span> <span m="1556700">you'll</span> <span m="1556860">ever</span> <span m="1557010">have.</span> <span m="1558080">And</span> <span m="1558490">there's</span> <span m="1558760">nothing</span> <span m="1559120">else</span> <span m="1559300">they</span> <span m="1559380">can</span> <span m="1559482">try</span> <span m="1559585">to</span> <span m="1559687">do</span> <span m="1559790">in</span> <span m="1559980">the</span> <span m="1560020">file</span> <span m="1560240">system</span> <span m="1560540">that</span> <span m="1560620">might</span> <span m="1560770">be</span> <span m="1560870">funny.</span> <span m="1562910">Make</span> <span m="1563040">sense?</span> <span m="1565280">So</span> <span m="1565600">in</span> <span m="1565670">fact,</span> <span m="1565830">it</span> <span m="1565940">has</span> <span m="1566050">fairly</span> <span m="1566320">simple</span> <span m="1566730">rules, I</span> <span m="1566830">guess.</span> <span m="1566942">If</span> <span m="1567055">you</span> <span m="1567167">have</span> <span m="1567280">a</span> <span m="1567730">file</span> <span m="1567780">descriptor,</span> <span m="1567815">you</span> <span m="1567850">can</span> <span m="1568140">do</span> <span m="1568240">whatever</span> <span m="1568450">you</span> <span m="1568530">want</span> <span m="1568640">with</span> <span m="1569036">It.</span> </p>
<p><span m="1569830">OK,</span> <span m="1570180">so</span> <span m="1570300">what</span> <span m="1570560">about</span> <span m="1570760">processes?</span> <span m="1571760">What</span> <span m="1571920">are</span> <span m="1572020">the</span> <span m="1572610">rules</span> <span m="1572930">there?</span> <span m="1573190">I</span> <span m="1573250">guess,</span> <span m="1573420">what</span> <span m="1573790">can</span> <span m="1573920">you</span> <span m="1574550">do</span> <span m="1574750">to</span> <span m="1574860">a</span> <span m="1574950">process?</span> <span m="1575470">In</span> <span m="1575720">Unix</span> <span m="1576130">it's</span> <span m="1576670">fairly</span> <span m="1577010">simple.</span> <span m="1577360">You</span> <span m="1577460">could,</span> <span m="1577560">I</span> <span m="1577610">guess,</span> <span m="1577840">create</span> <span m="1578110">a</span> <span m="1578200">process.</span> <span m="1579270">You</span> <span m="1579460">could</span> <span m="1579720">kill</span> <span m="1580020">it.</span> <span m="1581130">You</span> <span m="1581300">could</span> <span m="1581840">debug</span> <span m="1582290">it.</span> <span m="1583410">There's</span> <span m="1583660">this</span> <span m="1583810">mechanism</span> <span m="1584300">called</span> <span m="1584720">ptrace</span> <span m="1584940">in</span> <span m="1585160">Unix,</span> <span m="1586660">and</span> <span m="1587070">probably</span> <span m="1587550">a</span> <span m="1587570">couple</span> <span m="1587750">of</span> <span m="1587830">other</span> <span m="1588000">things.</span> <span m="1589470">And</span> <span m="1589540">the</span> <span m="1589690">rules</span> <span m="1589980">are</span> <span m="1591180">relatively</span> <span m="1592500">straightforward.</span> <span m="1593940">So</span> <span m="1594210">you</span> <span m="1594340">can</span> <span m="1594600">always</span> <span m="1595000">create</span> <span m="1595210">a</span> <span m="1595280">process,</span> <span m="1596560">more</span> <span m="1596720">or</span> <span m="1596740">less,</span> <span m="1597280">except</span> <span m="1597860">that</span> <span m="1598090">the</span> <span m="1598460">child</span> <span m="1598810">process</span> <span m="1599150">is</span> <span m="1599280">going</span> <span m="1599390">to</span> <span m="1599440">get</span> <span m="1599580">the</span> <span m="1599650">same</span> <span m="1599860">userid</span> <span m="1600290">as</span> <span m="1600410">you,</span> <span m="1600550">so</span> <span m="1600690">you</span> <span m="1600800">can't</span> <span m="1601050">create</span> <span m="1601260">a</span> <span m="1601340">process</span> <span m="1601770">with</span> <span m="1601930">some</span> <span m="1602090">other</span> <span m="1602330">userid</span> <span m="1603420">by</span> <span m="1603520">default.</span> <span m="1604590">So</span> <span m="1604750">you</span> <span m="1604870">can't</span> <span m="1605500">say,</span> <span m="1605700">well,</span> <span m="1606570">I'd</span> <span m="1606720">like</span> <span m="1606870">to</span> <span m="1606970">create</span> <span m="1607170">a</span> <span m="1607240">process</span> <span m="1607560">running</span> <span m="1607780">as</span> <span m="1608180">"web,"</span> <span m="1608600">one</span> <span m="1608740">of</span> <span m="1608800">my</span> <span m="1608900">TAs.</span> <span m="1610070">The</span> <span m="1610270">operating</span> <span m="1610550">system</span> <span m="1610770">kernel</span> <span m="1611240">will</span> <span m="1611617">not</span> <span m="1611994">let</span> <span m="1612371">you</span> <span m="1612497">do</span> <span m="1612623">that.</span> <span m="1612750">If</span> <span m="1612860">you</span> <span m="1612950">want</span> <span m="1613130">to</span> <span m="1613183">kill</span> <span m="1613236">a</span> <span m="1613290">process,</span> <span m="1613630">you</span> <span m="1613690">basically</span> <span m="1613990">have</span> <span m="1614140">to</span> <span m="1614210">have</span> <span m="1614380">the</span> <span m="1614470">same</span> <span m="1615120">userid</span> <span m="1615690">as</span> <span m="1615820">that</span> <span m="1615985">process</span> <span m="1616150">as</span> <span m="1616270">well.</span> <span m="1616580">It's</span> <span m="1616930">kind</span> <span m="1617320">of</span> <span m="1617510">nice.</span> <span m="1617860">All</span> <span m="1618060">the</span> <span m="1618360">things</span> <span m="1618890">with</span> <span m="1619030">a</span> <span m="1619070">single</span> <span m="1619380">userid</span> <span m="1620040">are</span> <span m="1620470">isolated</span> <span m="1620900">from</span> <span m="1621650">things</span> <span m="1621820">with</span> <span m="1622180">other</span> <span m="1622570">userids.</span> <span m="1623290">And</span> <span m="1623710">more</span> <span m="1623950">or</span> <span m="1623980">less,</span> <span m="1624180">the</span> <span m="1624280">same</span> <span m="1624530">rule</span> <span m="1624720">applies</span> <span m="1625170">to</span> <span m="1625480">ptrace</span> <span m="1625710">as</span> <span m="1625820">well.</span> <span m="1628050">The</span> <span m="1628200">process</span> <span m="1628390">with</span> <span m="1628685">the</span> <span m="1628980">same</span> <span m="1629275">uid</span> <span m="1629570">can</span> <span m="1629710">debug</span> <span m="1629980">processes</span> <span m="1630250">with</span> <span m="1630950">the</span> <span m="1632610">same</span> <span m="1632885">uid.</span> </p>
<p><span m="1635220">As</span> <span m="1635360">with</span> <span m="1635490">everything,</span> <span m="1635700">it</span> <span m="1635910">turns</span> <span m="1636130">out</span> <span m="1636350">race</span> <span m="1636550">conditions</span> <span m="1636950">show</span> <span m="1637030">up</span> <span m="1637110">often</span> <span m="1638560">and</span> <span m="1639030">can</span> <span m="1639220">cause</span> <span m="1639440">problems,</span> <span m="1639770">but</span> <span m="1639820">there</span> <span m="1639870">have</span> <span m="1639920">been</span> <span m="1640070">actually</span> <span m="1640290">some</span> <span m="1640780">interesting</span> <span m="1641110">bugs</span> <span m="1641540">in</span> <span m="1641660">the</span> <span m="1641810">ptrace</span> <span m="1642150">mechanism</span> <span m="1642590">in</span> <span m="1642720">Linux</span> <span m="1643610">where,</span> <span m="1644940">if</span> <span m="1645120">you</span> <span m="1646180">debug</span> <span m="1646580">a process</span> <span m="1647040">and</span> <span m="1647180">then</span> <span m="1647310">it</span> <span m="1647430">switches</span> <span m="1648110">and</span> <span m="1648270">gets</span> <span m="1648430">more</span> <span m="1648610">privileges,</span> <span m="1649510">then</span> <span m="1649740">maybe</span> <span m="1649940">you</span> <span m="1650000">could</span> <span m="1650190">somehow</span> <span m="1650495">trick</span> <span m="1650800">the</span> <span m="1650900">kernel</span> <span m="1651250">into</span> <span m="1651410">letting</span> <span m="1651680">you</span> <span m="1652270">retain</span> <span m="1652770">this</span> <span m="1652920">debug</span> <span m="1653280">privilege</span> <span m="1654040">on</span> <span m="1654190">this</span> <span m="1654310">process,</span> <span m="1654630">even</span> <span m="1654850">after</span> <span m="1655120">it</span> <span m="1655180">becomes</span> <span m="1655450">more</span> <span m="1655590">privileged.</span> <span m="1656455">Then</span> <span m="1656710">you</span> <span m="1656755">can</span> <span m="1656800">monkey</span> <span m="1657180">with</span> <span m="1657280">its</span> <span m="1657380">memory</span> <span m="1657700">and</span> <span m="1657930">take</span> <span m="1658430">it</span> <span m="1658765">over.</span> <span m="1660520">But</span> <span m="1661070">at</span> <span m="1661180">least</span> <span m="1661430">the</span> <span m="1661820">basic</span> <span m="1662160">design</span> <span m="1662470">that</span> <span m="1662660">you</span> <span m="1662810">probably</span> <span m="1663060">want</span> <span m="1663360">to</span> <span m="1663490">enforce</span> <span m="1663620">is</span> <span m="1663750">roughly</span> <span m="1664280">a</span> <span m="1664520">process</span> <span m="1664780">with</span> <span m="1665000">the</span> <span m="1665090">same</span> <span m="1665420">uid</span> <span m="1665610">can</span> <span m="1666390">act</span> <span m="1666780">on</span> <span m="1666850">each</span> <span m="1666990">other,</span> <span m="1667330">otherwise</span> <span m="1667670">not.</span> </p>
<p></p>
<p></p>
<p><span m="1670458">And</span> <span m="1670463">I</span> <span m="1670467">guess,</span> <span m="1670471">OK,</span> <span m="1670690">so</span> <span m="1670780">what</span> <span m="1670920">else</span> <span m="1671350">did</span> <span m="1671640">we</span> <span m="1671860">have</span> <span m="1672010">on</span> <span m="1672380">this</span> <span m="1672746">list?</span> <span m="1673112">Processes.</span> <span m="1674160">Memory</span> <span m="1674900">sort</span> <span m="1675010">of</span> <span m="1675110">goes</span> <span m="1675210">along</span> <span m="1675570">with the</span> <span m="1675670">process.</span> <span m="1676250">So,</span> <span m="1676680">unless</span> <span m="1677070">you're</span> <span m="1677410">in</span> <span m="1677520">that</span> <span m="1677730">process</span> <span m="1678050">you</span> <span m="1678290">can't</span> <span m="1678450">access</span> <span m="1678540">the</span> <span m="1678640">process</span> <span m="1678980">memory.</span> <span m="1679250">Virtual</span> <span m="1679540">memory</span> <span m="1680210">nicely</span> <span m="1680660">enforces</span> <span m="1680890">this</span> <span m="1681230">isolation</span> <span m="1681720">for</span> <span m="1681990">us.</span> <span m="1682780">Except</span> <span m="1683140">this</span> <span m="1683320">debug</span> <span m="1683620">mechanism</span> <span m="1684100">lets</span> <span m="1684200">you</span> <span m="1684620">poke</span> <span m="1684680">in</span> <span m="1684740">another</span> <span m="1684800">process's</span> <span m="1685190">memory</span> <span m="1685950">if</span> <span m="1686140">you</span> <span m="1686220">happen</span> <span m="1686440">to</span> <span m="1686490">have</span> <span m="1686660">the</span> <span m="1686750">same</span> <span m="1686950">userid.</span> </p>
<p><span m="1690420">And</span> <span m="1690630">then,</span> <span m="1691340">I</span> <span m="1691420">guess</span> <span m="1691660">the</span> <span m="1691740">other</span> <span m="1692240">remaining</span> <span m="1692640">thing</span> <span m="1692850">for</span> <span m="1693050">us</span> <span m="1693530">is</span> <span m="1693840">networking,</span> <span m="1694950">and</span> <span m="1695070">networking</span> <span m="1695375">in</span> <span m="1695680">Unix</span> <span m="1698530">doesn't</span> <span m="1698840">really</span> <span m="1699040">fall</span> <span m="1699410">in</span> <span m="1699540">the</span> <span m="1699630">same</span> <span m="1700070">model,</span> <span m="1700770">partly</span> <span m="1701010">because</span> <span m="1701240">of</span> <span m="1701310">it</span> <span m="1701555">came</span> <span m="1701800">about</span> <span m="1702140">later.</span> <span m="1702780">You</span> <span m="1702880">know,</span> <span m="1703030">the</span> <span m="1703580">Unix</span> <span m="1703890">operating</span> <span m="1704160">system</span> <span m="1704480">was</span> <span m="1704610">designed</span> <span m="1704950">first</span> <span m="1705260">and</span> <span m="1705690">then</span> <span m="1705930">networking</span> <span m="1706390">came</span> <span m="1706580">along</span> <span m="1706880">and</span> <span m="1707015">became</span> <span m="1707150">popular.</span> <span m="1710120">It</span> <span m="1710200">has</span> <span m="1710350">a</span> <span m="1710580">slightly</span> <span m="1710880">different</span> <span m="1711180">set</span> <span m="1711300">of</span> <span m="1711420">rules.</span> <span m="1713060">So</span> <span m="1713160">I</span> <span m="1713200">guess</span> <span m="1713380">the</span> <span m="1713590">operations</span> <span m="1713885">we</span> <span m="1714180">really</span> <span m="1714490">care</span> <span m="1714740">about</span> <span m="1715470">on</span> <span m="1715670">the</span> <span m="1715740">network</span> <span m="1716560">is,</span> <span m="1716890">presumably,</span> <span m="1717970">connecting</span> <span m="1718410">somewhere</span> <span m="1721390">or</span> <span m="1721630">maybe</span> <span m="1721850">listening</span> <span m="1722290">actually</span> <span m="1722560">for</span> <span m="1722680">connections</span> <span m="1722865">as</span> <span m="1723050">well.</span> </p>
<p><span m="1724160">So</span> <span m="1725420">you</span> <span m="1725510">might</span> <span m="1725700">want</span> <span m="1725820">to</span> <span m="1726000">connect</span> <span m="1726340">to</span> <span m="1726470">some</span> <span m="1726620">web</span> <span m="1726770">server</span> <span m="1727110">or</span> <span m="1727290">you</span> <span m="1727350">might</span> <span m="1727520">want</span> <span m="1727587">to</span> <span m="1727654">run</span> <span m="1727721">a</span> <span m="1727788">web</span> <span m="1727855">server</span> <span m="1728190">yourself</span> <span m="1728650">and</span> <span m="1728770">listen</span> <span m="1728910">on</span> <span m="1729030">a</span> <span m="1729140">particular</span> <span m="1729480">port.</span> <span m="1731080">Maybe</span> <span m="1731460">you</span> <span m="1731760">want</span> <span m="1732210">to</span> <span m="1732435">actually</span> <span m="1732660">read</span> <span m="1732980">data</span> <span m="1733280">from</span> <span m="1733440">a</span> <span m="1733500">connection,</span> <span m="1734080">or</span> <span m="1734260">read/write</span> <span m="1734690">data</span> <span m="1737150">on</span> <span m="1737410">some</span> <span m="1737510">existing</span> <span m="1737870">connection,</span> <span m="1738830">or</span> <span m="1739020">you</span> <span m="1739230">want</span> <span m="1739510">to</span> <span m="1739560">send</span> <span m="1739910">the</span> <span m="1740360">raw</span> <span m="1740695">packets</span> <span m="1741030">or</span> <span m="1741150">receive.</span> </p>
<p><span m="1747440">So</span> <span m="1747790">in</span> <span m="1747930">Unix</span> <span m="1749330">the</span> <span m="1749420">network</span> <span m="1749810">stuff</span> <span m="1750190">basically</span> <span m="1750610">has</span> <span m="1751800">no</span> <span m="1752070">relation</span> <span m="1753120">to</span> <span m="1753450">userids,</span> <span m="1754480">the</span> <span m="1754590">first</span> <span m="1754790">approximation.</span> <span m="1756450">The</span> <span m="1758410">rule</span> <span m="1758750">is</span> <span m="1759140">anyone</span> <span m="1759930">can</span> <span m="1760090">always</span> <span m="1760640">connect</span> <span m="1760990">to</span> <span m="1761550">any</span> <span m="1761850">machine</span> <span m="1762570">or</span> <span m="1762760">any</span> <span m="1762980">IP</span> <span m="1763230">address,</span> <span m="1763770">can</span> <span m="1763900">always</span> <span m="1764210">open</span> <span m="1764460">a</span> <span m="1764530">connection.</span> <span m="1766080">If</span> <span m="1766190">you</span> <span m="1766270">want</span> <span m="1766350">to</span> <span m="1766430">listen</span> <span m="1766815">on</span> <span m="1767200">a</span> <span m="1767460">port,</span> <span m="1767850">that's</span> <span m="1768165">where</span> <span m="1768480">one</span> <span m="1768640">difference</span> <span m="1769000">shows</span> <span m="1769260">up,</span> <span m="1770040">which</span> <span m="1770100">is</span> <span m="1770650">that</span> <span m="1771350">most</span> <span m="1771720">users</span> <span m="1772070">are</span> <span m="1772230">prohibited</span> <span m="1773140">from</span> <span m="1773540">listening</span> <span m="1774330">on</span> <span m="1774550">ports</span> <span m="1775300">below</span> <span m="1775765">a</span> <span m="1776090">magic</span> <span m="1776450">value</span> <span m="1776770">of</span> <span m="1776880">1024.</span> <span m="1778050">Basically,</span> <span m="1778530">if</span> <span m="1778620">you</span> <span m="1778730">listen</span> <span m="1779530">and</span> <span m="1779690">the</span> <span m="1779830">port</span> <span m="1780960">is</span> <span m="1781150">less</span> <span m="1781570">than</span> <span m="1782370">1024,</span> <span m="1783750">then</span> <span m="1783970">you</span> <span m="1784060">have</span> <span m="1784290">to</span> <span m="1784390">be</span> <span m="1784540">a</span> <span m="1784600">special</span> <span m="1784990">user</span> <span m="1785980">called</span> <span m="1786290">"super</span> <span m="1786560">user"</span> <span m="1787130">with</span> <span m="1787330">a</span> <span m="1787380">uid</span> <span m="1787950">of</span> <span m="1788070">0.</span> </p>
<p><span m="1790800">And</span> <span m="1791250">in</span> <span m="1791490">general,</span> <span m="1791960">Unix</span> <span m="1792430">has</span> <span m="1792550">this</span> <span m="1792730">notion</span> <span m="1793150">of</span> <span m="1793360">an</span> <span m="1793570">administrator,</span> <span m="1794870">or</span> <span m="1794990">super</span> <span m="1795290">user,</span> <span m="1796020">which</span> <span m="1796160">is</span> <span m="1796280">represented</span> <span m="1796740">by</span> <span m="1796850">having</span> <span m="1797170">uid</span> <span m="1797370">of</span> <span m="1797440">0,</span> <span m="1797710">which</span> <span m="1798220">can</span> <span m="1798380">bypass</span> <span m="1798830">pretty</span> <span m="1799110">much</span> <span m="1799490">all</span> <span m="1799630">these</span> <span m="1799770">checks,</span> <span m="1800780">so</span> <span m="1801400">if</span> <span m="1801510">you're</span> <span m="1801640">running</span> <span m="1801910">as</span> <span m="1802215">root,</span> <span m="1802520">then</span> <span m="1802775">none</span> <span m="1803030">of</span> <span m="1803230">this</span> <span m="1803580">applies.</span> <span m="1803930">You</span> <span m="1804050">can</span> <span m="1804540">read/write</span> <span m="1805180">files,</span> <span m="1805490">you</span> <span m="1805550">can</span> <span m="1805710">change</span> <span m="1806000">permissions</span> <span m="1806610">on</span> <span m="1807120">anyone's</span> <span m="1807540">files</span> <span m="1808030">and</span> <span m="1808160">the</span> <span m="1808220">operating</span> <span m="1808550">system</span> <span m="1808910">will</span> <span m="1809020">let</span> <span m="1809180">you</span> <span m="1809260">do</span> <span m="1809360">that</span> <span m="1809600">because</span> <span m="1810210">it</span> <span m="1810330">thinks</span> <span m="1810670">you</span> <span m="1810790">should</span> <span m="1810930">have</span> <span m="1811380">all</span> <span m="1811960">the</span> <span m="1812030">privileges.</span> <span m="1813380">And</span> <span m="1813480">one</span> <span m="1813710">thing</span> <span m="1814080">you</span> <span m="1814200">really</span> <span m="1814370">need</span> <span m="1814620">it</span> <span m="1814760">for</span> <span m="1814900">is</span> <span m="1815230">for</span> <span m="1815410">listening</span> <span m="1815880">on</span> <span m="1816390">ports</span> <span m="1816660">below</span> <span m="1816930">1024.</span> <span m="1819060">Any</span> <span m="1819530">idea</span> <span m="1819970">why</span> <span m="1820270">this</span> <span m="1820620">weird</span> <span m="1820740">restriction?</span> <span m="1822880">Who</span> <span m="1823030">cares</span> <span m="1823270">about</span> <span m="1823460">your</span> <span m="1823740">port</span> <span m="1824110">number?</span> </p>
<p><span m="1825272">AUDIENCE:</span> <span m="1825690">Would</span> <span m="1826090">they</span> <span m="1826505">define</span> <span m="1826920">specific</span> <span m="1827540">port</span> <span m="1827800">numbers</span> <span m="1828150">to</span> <span m="1828500">be</span> <span m="1828630">certain</span> <span m="1828760">things,</span> <span m="1829140">like</span> <span m="1829330">HTTP</span> <span m="1829700">is</span> <span m="1829763">like</span> <span m="1829827">80.</span> </p>
<p></p>
<p><span m="1830210">PROFESSOR: Yeah,</span> <span m="1830930">it's</span> <span m="1831630">like</span> <span m="1831780">HTTP</span> <span m="1832230">is</span> <span m="1832680">80</span> <span m="1833160">here.</span> <span m="1833600">On</span> <span m="1834040">the</span> <span m="1834120">other</span> <span m="1834520">hand,</span> <span m="1835310">other</span> <span m="1835550">services</span> <span m="1836220">might</span> <span m="1836400">be</span> <span m="1836560">above</span> <span m="1836920">1024,</span> <span m="1837930">so</span> <span m="1838610">why</span> <span m="1839030">this</span> <span m="1839240">restriction?</span> <span m="1839840">Why</span> <span m="1840270">is</span> <span m="1840420">this</span> <span m="1840650">useful?</span> <span m="1840925">Seems</span> <span m="1841200">to</span> <span m="1841630">complicate</span> <span m="1843540">my</span> <span m="1843650">life</span> <span m="1844010">more,</span> <span m="1844100">after</span> <span m="1844190">you.</span> </p>
<p><span m="1844280">AUDIENCE:</span> <span m="1844550">Since</span> <span m="1844950">you</span> <span m="1845350">don't</span> <span m="1845750">want</span> <span m="1846150">random</span> <span m="1848110">searches</span> <span m="1848595">just</span> <span m="1849080">listening</span> <span m="1849545">on</span> <span m="1850010">your</span> <span m="1850475">HTTP.</span> </p>
<p><span m="1850940">PROFESSOR: Yes.</span> <span m="1851390">I</span> <span m="1851840">think</span> <span m="1852290">the</span> <span m="1852560">reason</span> <span m="1852880">for</span> <span m="1853060">this</span> <span m="1853330">is</span> <span m="1853590">that</span> <span m="1853910">it</span> <span m="1854230">used</span> <span m="1854440">to</span> <span m="1854500">be</span> <span m="1854610">the</span> <span m="1854710">case,</span> <span m="1854920">at</span> <span m="1855000">least,</span> <span m="1855190">that</span> <span m="1855350">you'd</span> <span m="1855530">have</span> <span m="1855740">these</span> <span m="1855900">machines</span> <span m="1856440">where</span> <span m="1856610">there's</span> <span m="1856840">lots</span> <span m="1857230">of</span> <span m="1857380">things</span> <span m="1857650">running,</span> <span m="1857930">there's</span> <span m="1858100">users</span> <span m="1858450">logging</span> <span m="1858920">in,</span> <span m="1859280">there's</span> <span m="1859510">services</span> <span m="1860120">running,</span> <span m="1860930">and</span> <span m="1861180">you</span> <span m="1861260">want</span> <span m="1861350">to</span> <span m="1861390">make</span> <span m="1861540">sure</span> <span m="1861750">that</span> <span m="1861960">some</span> <span m="1862100">random</span> <span m="1862480">user</span> <span m="1863130">logging</span> <span m="1863620">into</span> <span m="1863740">our</span> <span m="1864025">machine</span> <span m="1864540">doesn't</span> <span m="1864870">all</span> <span m="1865040">of</span> <span m="1865190">sudden</span> <span m="1865650">take</span> <span m="1865940">over</span> <span m="1866190">the</span> <span m="1866310">web</span> <span m="1866480">server</span> <span m="1866750">running</span> <span m="1867020">on</span> <span m="1867130">that</span> <span m="1867240">machine,</span> <span m="1867550">because</span> <span m="1868160">people</span> <span m="1868450">connecting</span> <span m="1868820">from</span> <span m="1868960">outside</span> <span m="1869570">don't</span> <span m="1869750">really</span> <span m="1869910">know</span> <span m="1870060">who</span> <span m="1870330">is</span> <span m="1870480">running</span> <span m="1871000">on</span> <span m="1871120">that</span> <span m="1871250">port.</span> <span m="1871590">They</span> <span m="1871677">just</span> <span m="1871765">connect</span> <span m="1871852">to</span> <span m="1871940">port</span> <span m="1872010">80.</span> </p>
<p><span m="1873200">And</span> <span m="1873470">if</span> <span m="1873570">I</span> <span m="1873930">want</span> <span m="1874220">to</span> <span m="1874555">log</span> <span m="1874622">into</span> <span m="1874689">that</span> <span m="1874756">machine</span> <span m="1874823">and</span> <span m="1874890">start</span> <span m="1875130">my</span> <span m="1875240">own</span> <span m="1875420">web</span> <span m="1875570">server,</span> <span m="1875905">then</span> <span m="1876240">I</span> <span m="1876390">would</span> <span m="1876490">just</span> <span m="1876710">take</span> <span m="1876900">over</span> <span m="1877030">all</span> <span m="1877160">the</span> <span m="1877290">web</span> <span m="1877520">server</span> <span m="1877770">traffic</span> <span m="1878180">to</span> <span m="1878260">that</span> <span m="1878520">machine.</span> <span m="1878790">That</span> <span m="1879060">is</span> <span m="1879470">probably</span> <span m="1879740">not</span> <span m="1880200">a</span> <span m="1880420">great</span> <span m="1880700">plan.</span> <span m="1881180">So</span> <span m="1881660">this</span> <span m="1881760">is</span> <span m="1881860">one</span> <span m="1881960">way</span> <span m="1882280">that</span> <span m="1882760">the</span> <span m="1882930">networking</span> <span m="1883430">subsystem</span> <span m="1883695">in</span> <span m="1883960">Unix</span> <span m="1885020">prevents</span> <span m="1885920">arbitrary</span> <span m="1886530">users</span> <span m="1886990">from</span> <span m="1887510">impersonating</span> <span m="1887886">what</span> <span m="1888262">are</span> <span m="1888640">called</span> <span m="1889020">well-known</span> <span m="1889580">services</span> <span m="1890090">running</span> <span m="1890320">on</span> <span m="1890410">these</span> <span m="1890590">low</span> <span m="1890880">port</span> <span m="1891080">numbers.</span> <span m="1892510">So</span> <span m="1892800">that's</span> <span m="1892882">sort</span> <span m="1892965">of</span> <span m="1893047">one</span> <span m="1893130">rationale</span> <span m="1893700">for</span> <span m="1893860">this</span> <span m="1894710">restriction.</span> </p>
<p><span m="1897040">And</span> <span m="1897210">then,</span> <span m="1897370">in</span> <span m="1897440">terms</span> <span m="1897650">of</span> <span m="1897800">reading</span> <span m="1898090">and</span> <span m="1898380">writing</span> <span m="1898450">data</span> <span m="1898580">on</span> <span m="1898700">a</span> <span m="1898820">connection,</span> <span m="1899350">well,</span> <span m="1899590">if</span> <span m="1899780">you</span> <span m="1899860">have</span> <span m="1900040">a</span> <span m="1900110">file</span> <span m="1900460">descriptor</span> <span m="1900930">for</span> <span m="1901260">a</span> <span m="1901365">particular</span> <span m="1901470">socket,</span> <span m="1901990">then</span> <span m="1902170">Unix</span> <span m="1902570">lets</span> <span m="1902820">you</span> <span m="1903300">read</span> <span m="1903457">and</span> <span m="1903615">write</span> <span m="1903930">any</span> <span m="1904072">data</span> <span m="1904215">you</span> <span m="1904500">want</span> <span m="1904890">on</span> <span m="1905100">that</span> <span m="1905200">TCP</span> <span m="1905540">or</span> <span m="1905880">uTP</span> <span m="1906140">connection.</span> <span m="1907030">And</span> <span m="1907280">then</span> <span m="1907345">for</span> <span m="1907410">sending</span> <span m="1907750">raw</span> <span m="1907970">packets,</span> <span m="1908360">Unix</span> <span m="1908510">is</span> <span m="1908660">actually</span> <span m="1908950">pretty</span> <span m="1909180">paranoid</span> <span m="1909620">about</span> <span m="1909880">this,</span> <span m="1910280">so</span> <span m="1910370">it</span> <span m="1910480">actually</span> <span m="1910700">will</span> <span m="1910960">not</span> <span m="1911220">let</span> <span m="1911390">you</span> <span m="1911730">send</span> <span m="1911930">arbitrary</span> <span m="1912480">packets</span> <span m="1912900">over</span> <span m="1913060">the</span> <span m="1913170">network.</span> <span m="1913355">It</span> <span m="1913540">has</span> <span m="1913980">to</span> <span m="1914070">be</span> <span m="1914530">in</span> <span m="1914650">the</span> <span m="1914740">context</span> <span m="1915170">of</span> <span m="1915210">a</span> <span m="1915310">particular</span> <span m="1915730">connection,</span> <span m="1916820">except</span> <span m="1917360">if</span> <span m="1917500">you're</span> <span m="1917890">root,</span> <span m="1917950">of</span> <span m="1918135">course,</span> <span m="1918320">then</span> <span m="1918450">you</span> <span m="1918560">can</span> <span m="1918960">do</span> <span m="1919050">whatever</span> <span m="1919290">you</span> <span m="1919390">want.</span> <span m="1921870">That</span> <span m="1921910">make</span> <span m="1922060">sense?</span> <span m="1922570">Somewhat?</span> <span m="1923050">Any</span> <span m="1923100">other</span> <span m="1924650">questions</span> <span m="1925100">about</span> <span m="1925690">all</span> <span m="1926050">this</span> <span m="1926770">Unix</span> <span m="1926910">machinery?</span> </p>
<p><span m="1929464">OK, so</span> <span m="1930080">one</span> <span m="1930340">interesting</span> <span m="1930540">question</span> <span m="1930840">we</span> <span m="1930920">could</span> <span m="1931060">try</span> <span m="1931200">to</span> <span m="1931270">ask,</span> <span m="1931590">is</span> <span m="1931950">where</span> <span m="1932160">do</span> <span m="1932180">these</span> <span m="1932560">userids</span> <span m="1933730">come</span> <span m="1933920">from?</span> <span m="1935160">So,</span> <span m="1935260">when</span> <span m="1935400">we</span> <span m="1935500">talk</span> <span m="1935690">about</span> <span m="1935950">processes</span> <span m="1936430">having</span> <span m="1936790">a</span> <span m="1937045">userid</span> <span m="1937550">or</span> <span m="1937670">having</span> <span m="1938140">a</span> <span m="1938200">groupid,</span> <span m="1939140">and</span> <span m="1939400">if</span> <span m="1939560">you</span> <span m="1939750">run</span> <span m="1940090">PS</span> <span m="1940490">on</span> <span m="1940560">your</span> <span m="1940680">machine,</span> <span m="1941040">you</span> <span m="1941140">probably</span> <span m="1941260">see</span> <span m="1941390">lots</span> <span m="1941690">of</span> <span m="1941813">processes</span> <span m="1941936">with</span> <span m="1942060">different</span> <span m="1942420">uid</span> <span m="1942760">values.</span> <span m="1943550">Where</span> <span m="1943750">do</span> <span m="1943770">these</span> <span m="1943960">guys</span> <span m="1944190">come</span> <span m="1944410">from?</span> <span m="1944730">We</span> <span m="1945127">need</span> <span m="1945524">some</span> <span m="1945921">sort</span> <span m="1946320">of</span> <span m="1946810">a</span> <span m="1946900">mechanism</span> <span m="1947410">really</span> <span m="1947770">to</span> <span m="1947930">bootstrap</span> <span m="1948900">all</span> <span m="1949140">of</span> <span m="1949250">these</span> <span m="1950140">userid</span> <span m="1950690">values,</span> <span m="1951550">and</span> <span m="1951710">the</span> <span m="1951780">way</span> <span m="1951900">it</span> <span m="1952020">works</span> <span m="1952280">in</span> <span m="1952410">Unix,</span> <span m="1952810">at</span> <span m="1952890">least</span> <span m="1953140">at</span> <span m="1953240">the</span> <span m="1953700">mechanism</span> <span m="1954240">level,</span> <span m="1954850">is</span> <span m="1955180">that</span> <span m="1955590">there's</span> <span m="1956590">several</span> <span m="1957190">system</span> <span m="1957470">calls</span> <span m="1957910">for</span> <span m="1958290">doing</span> <span m="1958550">this.</span> </p>
<p><span m="1963800">So</span> <span m="1963930">initially</span> <span m="1964390">to</span> <span m="1964580">bootstrap</span> <span m="1964845">these</span> <span m="1965110">uid</span> <span m="1965600">values,</span> <span m="1966270">there's</span> <span m="1966660">a</span> <span m="1966860">system</span> <span m="1967180">called</span> <span m="1967500">setuid()</span> <span m="1967920">that</span> <span m="1968240">you</span> <span m="1969670">that</span> <span m="1969830">you</span> <span m="1969950">can</span> <span m="1970360">pass</span> <span m="1970630">some</span> <span m="1970840">sort</span> <span m="1970980">of</span> <span m="1971050">a</span> <span m="1971080">uid</span> <span m="1971450">number</span> <span m="1971760">to,</span> <span m="1973090">and</span> <span m="1973940">it'll</span> <span m="1974080">set</span> <span m="1974340">the</span> <span m="1974440">userid</span> <span m="1975150">of</span> <span m="1975380">the</span> <span m="1976340">current</span> <span m="1976670">process</span> <span m="1977100">to</span> <span m="1977200">this</span> <span m="1977420">value.</span> <span m="1978400">This</span> <span m="1978860">is</span> <span m="1978900">actually</span> <span m="1979170">a</span> <span m="1979360">dangerous</span> <span m="1979730">operation,</span> <span m="1980190">of</span> <span m="1980310">course,</span> <span m="1980660">so</span> <span m="1980960">in</span> <span m="1981260">sort</span> <span m="1981750">of</span> <span m="1982140">Unix</span> <span m="1982380">tradition,</span> <span m="1983106">you</span> <span m="1983470">can</span> <span m="1983590">only</span> <span m="1983820">do</span> <span m="1983980">this</span> <span m="1984220">if</span> <span m="1984340">you're</span> <span m="1984500">uid</span> <span m="1984940">is</span> <span m="1985030">equal</span> <span m="1985280">to</span> <span m="1985340">0.</span> </p>
<p><span m="1987080">Well,</span> <span m="1987880">must</span> <span m="1988270">have.</span> <span m="1991660">So</span> <span m="1991750">if</span> <span m="1991910">you</span> <span m="1992070">are</span> <span m="1992450">this</span> <span m="1992650">root</span> <span m="1992740">user</span> <span m="1993700">with</span> <span m="1993910">uid</span> <span m="1994440">0,</span> <span m="1995150">then</span> <span m="1995320">you</span> <span m="1995400">can</span> <span m="1995570">call</span> <span m="1995750">setuid()</span> <span m="1996080">and</span> <span m="1996540">switch</span> <span m="1996830">your</span> <span m="1997100">user</span> <span m="1997235">to</span> <span m="1997370">anything</span> <span m="1997650">else.</span> <span m="1998720">There's</span> <span m="1998800">a</span> <span m="1998850">couple</span> <span m="1999170">other</span> <span m="1999650">similar</span> <span m="2000220">system</span> <span m="2000500">calls</span> <span m="2000860">for</span> <span m="2001210">initializing</span> <span m="2002270">the</span> <span m="2002660">gids</span> <span m="2003200">associated</span> <span m="2003570">with</span> <span m="2003660">the</span> <span m="2003740">process.</span> <span m="2004730">It's</span> <span m="2005530">setgid</span> <span m="2006980">and</span> <span m="2007560">setgroups.</span> </p>
<p><span m="2012330">So</span> <span m="2012450">these</span> <span m="2012850">system</span> <span m="2013285">calls</span> <span m="2013720">together</span> <span m="2014410">let</span> <span m="2014670">you</span> <span m="2015130">configure</span> <span m="2016040">the</span> <span m="2016230">privileges</span> <span m="2016670">that</span> <span m="2016800">a</span> <span m="2016930">process</span> <span m="2017340">has.</span> <span m="2018870">So</span> <span m="2018980">typically,</span> <span m="2019420">when</span> <span m="2019660">you</span> <span m="2019990">go</span> <span m="2020270">and</span> <span m="2020440">log</span> <span m="2020810">into</span> <span m="2021090">a</span> <span m="2021190">Unix</span> <span m="2021580">machine,</span> <span m="2022720">the</span> <span m="2022860">way</span> <span m="2023070">that</span> <span m="2023360">your</span> <span m="2023580">processes</span> <span m="2024370">get</span> <span m="2024620">the</span> <span m="2024760">right</span> <span m="2025280">privileges,</span> <span m="2026430">is</span> <span m="2026630">that</span> <span m="2027790">you're</span> <span m="2028030">initially</span> <span m="2028450">actually</span> <span m="2028800">not</span> <span m="2029180">talking</span> <span m="2029670">to</span> <span m="2029770">a</span> <span m="2029870">process</span> <span m="2030400">running</span> <span m="2030720">as</span> <span m="2030840">your</span> <span m="2031020">uid,</span> <span m="2031520">partly</span> <span m="2031760">because</span> <span m="2032020">the</span> <span m="2032110">system</span> <span m="2032390">doesn't</span> <span m="2032580">know</span> <span m="2032720">who</span> <span m="2032850">you</span> <span m="2033000">are</span> <span m="2033240">yet.</span> <span m="2034240">Instead,</span> <span m="2034630">what</span> <span m="2034800">you</span> <span m="2035000">initially</span> <span m="2035440">talk</span> <span m="2035680">to</span> <span m="2035780">in</span> <span m="2035890">Unix</span> <span m="2036610">is</span> <span m="2036810">some</span> <span m="2036916">sort</span> <span m="2037023">of</span> <span m="2037130">a</span> <span m="2037290">login</span> <span m="2037730">process,</span> <span m="2038240">so</span> <span m="2038320">maybe</span> <span m="2038850">SSH</span> <span m="2039450">runs</span> <span m="2040690">a</span> <span m="2041380">process</span> <span m="2042110">for</span> <span m="2042710">anyone</span> <span m="2043140">that</span> <span m="2043240">connects</span> <span m="2043640">to</span> <span m="2043720">it</span> <span m="2044200">and</span> <span m="2044540">tries</span> <span m="2044730">to</span> <span m="2044860">authenticate</span> <span m="2045350">the</span> <span m="2045440">user.</span> </p>
<p><span m="2046340">So</span> <span m="2047220">this</span> <span m="2047530">login</span> <span m="2047910">process</span> <span m="2050350">runs</span> <span m="2051610">with</span> <span m="2052520">uid=0</span> <span m="2053480">as</span> <span m="2054219">root</span> <span m="2054850">and</span> <span m="2055050">then</span> <span m="2055810">when</span> <span m="2056060">the</span> <span m="2056139">supply</span> <span m="2056600">username</span> <span m="2057630">and</span> <span m="2057790">password,</span> <span m="2059719">it's</span> <span m="2059880">actually</span> <span m="2060080">going</span> <span m="2060219">to</span> <span m="2060389">check</span> <span m="2060730">it</span> <span m="2061510">against</span> <span m="2062760">its</span> <span m="2062960">own</span> <span m="2063179">database</span> <span m="2064469">of</span> <span m="2065080">accounts</span> <span m="2065860">and,</span> <span m="2066080">typically</span> <span m="2066360">in</span> <span m="2066449">Unix,</span> <span m="2067110">this</span> <span m="2067270">get</span> <span m="2067460">stored</span> <span m="2067900">in</span> <span m="2068570">two</span> <span m="2068750">files,</span> <span m="2069850">/etc/password,</span> <span m="2071810">which,</span> <span m="2072650">for</span> <span m="2073090">historical</span> <span m="2073530">reasons,</span> <span m="2073900">no</span> <span m="2074010">longer</span> <span m="2074449">stores</span> <span m="2074690">the</span> <span m="2074830">password.</span> <span m="2076739">And</span> <span m="2076929">there's</span> <span m="2077130">another</span> <span m="2077420">file,</span> <span m="2077820">/etc/shadow,</span> <span m="2079409">which</span> <span m="2079699">does</span> <span m="2079989">store</span> <span m="2080139">the</span> <span m="2080250">password,</span> <span m="2081120">but</span> <span m="2081375">in</span> <span m="2081630">/etc/password,</span> <span m="2082610">there</span> <span m="2082940">is</span> <span m="2083010">actually</span> <span m="2083790">a</span> <span m="2084400">table</span> <span m="2084810">mapping</span> <span m="2085270">every</span> <span m="2085670">username</span> <span m="2086300">in</span> <span m="2086389">the</span> <span m="2086480">system</span> <span m="2087250">to</span> <span m="2087409">these</span> <span m="2087659">integer</span> <span m="2088040">values.</span> </p>
<p><span m="2089070">So</span> <span m="2089230">your</span> <span m="2089449">username</span> <span m="2089949">gets</span> <span m="2090159">mapped</span> <span m="2090420">to</span> <span m="2090480">a</span> <span m="2090540">particular</span> <span m="2090860">integer</span> <span m="2091210">number</span> <span m="2091739">in</span> <span m="2091860">this</span> <span m="2092020">/etc/password</span> <span m="2092659">file,</span> <span m="2093760">and</span> <span m="2093870">then</span> <span m="2094170">login</span> <span m="2094650">will</span> <span m="2094850">check</span> <span m="2095159">whether</span> <span m="2095330">your</span> <span m="2095530">password</span> <span m="2095729">is</span> <span m="2095929">correct,</span> <span m="2096360">according</span> <span m="2096679">to</span> <span m="2096760">this</span> <span m="2096900">file,</span> <span m="2097830">and</span> <span m="2097850">if</span> <span m="2097940">it</span> <span m="2097985">is,</span> <span m="2098030">it'll</span> <span m="2098370">find</span> <span m="2098645">your</span> <span m="2098920">integer</span> <span m="2099240">uid</span> <span m="2100220">and</span> <span m="2100420">then</span> <span m="2100710">call</span> <span m="2101060">setuid</span> <span m="2102910">on</span> <span m="2103220">your</span> <span m="2103600">uid</span> <span m="2104030">value</span> <span m="2105550">and</span> <span m="2105760">then</span> <span m="2106240">execute</span> <span m="2106720">your</span> <span m="2106860">shell.</span> <span m="2107440">Whatever,</span> <span m="2107695">(den/sh)</span> <span m="2110170">And</span> <span m="2110340">now</span> <span m="2110520">you</span> <span m="2110680">can</span> <span m="2110770">actually</span> <span m="2111420">interact</span> <span m="2111910">with</span> <span m="2112050">the</span> <span m="2112130">shell,</span> <span m="2113060">but</span> <span m="2113560">it's</span> <span m="2113820">running</span> <span m="2114150">as</span> <span m="2114270">your</span> <span m="2114440">uid</span> <span m="2114960">so</span> <span m="2115080">you</span> <span m="2115240">cannot</span> <span m="2115530">do</span> <span m="2115610">any</span> <span m="2115840">arbitrary</span> <span m="2116350">damage</span> <span m="2116770">to</span> <span m="2116870">this</span> <span m="2117380">machine.</span> <span m="2118450">Question?</span> </p>
<p><span m="2118835">AUDIENCE:</span> <span m="2119220">Is</span> <span m="2119720">it</span> <span m="2120220">possible</span> <span m="2120720">to</span> <span m="2120820">start</span> <span m="2120920">a</span> <span m="2121020">new</span> <span m="2121120">process</span> <span m="2121220">with</span> <span m="2121660">uid</span> <span m="2121870">0</span> <span m="2121980">if</span> <span m="2122333">you</span> <span m="2122686">have</span> <span m="2123040">some</span> <span m="2123325">non-0</span> <span m="2123610">uid?</span> <span m="2124502">For</span> <span m="2124948">example,</span> <span m="2125394">if</span> <span m="2125840">you</span> <span m="2126286">want</span> <span m="2126732">[INAUDIBLE].</span> </p>
<p><span m="2127180">PROFESSOR: Yeah,</span> <span m="2127710">so</span> <span m="2127975">this</span> <span m="2128240">sort</span> <span m="2128670">of</span> <span m="2129150">lets</span> <span m="2129480">you</span> <span m="2129573">go</span> <span m="2129666">down,</span> <span m="2129760">if</span> <span m="2129880">you</span> <span m="2130000">will,</span> <span m="2130180">so</span> <span m="2130360">with</span> <span m="2130470">your</span> <span m="2130870">root,</span> <span m="2130915">you</span> <span m="2130960">can</span> <span m="2131100">restrict</span> <span m="2131470">yourself</span> <span m="2131840">down</span> <span m="2132130">to</span> <span m="2132215">a</span> <span m="2132300">different</span> <span m="2132620">uid,</span> <span m="2133010">but</span> <span m="2133370">the</span> <span m="2133520">rule</span> <span m="2133820">we</span> <span m="2134140">set</span> <span m="2134220">so</span> <span m="2134300">far</span> <span m="2134380">is</span> <span m="2134460">you</span> <span m="2134660">can</span> <span m="2134740">only</span> <span m="2134865">create</span> <span m="2134990">a</span> <span m="2135060">process</span> <span m="2135450">with</span> <span m="2135500">the</span> <span m="2135600">same</span> <span m="2135930">uid</span> <span m="2136100">as</span> <span m="2136370">yourself.</span> <span m="2136675">But,</span> <span m="2136980">of</span> <span m="2137285">course,</span> <span m="2137590">you</span> <span m="2137690">want</span> <span m="2137790">to</span> <span m="2137830">elevate</span> <span m="2138210">your</span> <span m="2138320">privileges</span> <span m="2138760">for</span> <span m="2138890">various</span> <span m="2139210">reasons.</span> <span m="2139520">You</span> <span m="2139610">want</span> <span m="2139750">to,</span> <span m="2139930">I</span> <span m="2140265">don't</span> <span m="2140432">know,</span> <span m="2140600">install</span> <span m="2140980">a</span> <span m="2141010">package</span> <span m="2141480">now</span> <span m="2141820">and</span> <span m="2141990">you</span> <span m="2142160">need</span> <span m="2142295">root</span> <span m="2142430">privileges.</span> </p>
<p><span m="2143670">So,</span> <span m="2144000">Unix</span> <span m="2144510">has</span> <span m="2146170">basically</span> <span m="2146660">two</span> <span m="2146900">ways</span> <span m="2147260">you</span> <span m="2147410">could</span> <span m="2147580">think</span> <span m="2147860">about</span> <span m="2148220">doing</span> <span m="2148470">this.</span> <span m="2149380">One</span> <span m="2149730">way</span> <span m="2149920">we</span> <span m="2150050">already</span> <span m="2150310">mentioned,</span> <span m="2150780">this</span> <span m="2150970">file</span> <span m="2151240">descriptor</span> <span m="2151740">passing</span> <span m="2152260">thing.</span> <span m="2152680">So</span> <span m="2152990">if</span> <span m="2153150">you</span> <span m="2153240">really</span> <span m="2153410">want</span> <span m="2153560">to</span> <span m="2153620">elevate</span> <span m="2153980">your</span> <span m="2154120">privileges,</span> <span m="2154730">maybe</span> <span m="2154990">you</span> <span m="2155090">can</span> <span m="2155260">talk</span> <span m="2155490">to</span> <span m="2155590">some</span> <span m="2155700">helper,</span> <span m="2156480">and</span> <span m="2156580">the</span> <span m="2156920">helper</span> <span m="2156965">is</span> <span m="2157010">running</span> <span m="2157260">as</span> <span m="2157370">root.</span> <span m="2158150">You</span> <span m="2158260">can</span> <span m="2158343">ask</span> <span m="2158426">it,</span> <span m="2158510">hey,</span> <span m="2158593">can</span> <span m="2158676">you</span> <span m="2158760">open</span> <span m="2159030">this</span> <span m="2159170">file</span> <span m="2159430">for</span> <span m="2159610">me?</span> <span m="2160370">And</span> <span m="2160766">maybe</span> <span m="2161162">you</span> <span m="2161560">like</span> <span m="2161990">define</span> <span m="2162340">some</span> <span m="2162460">new</span> <span m="2162580">interface,</span> <span m="2163340">and</span> <span m="2163630">that</span> <span m="2163750">helper</span> <span m="2163870">opens</span> <span m="2164170">the</span> <span m="2164260">file</span> <span m="2164520">and</span> <span m="2164640">gives</span> <span m="2164780">you</span> <span m="2164850">back</span> <span m="2165180">the</span> <span m="2165300">file</span> <span m="2165450">descriptor</span> <span m="2166000">through</span> <span m="2166330">fd</span> <span m="2166670">passing.</span> <span m="2167493">That's</span> <span m="2168300">one</span> <span m="2168540">way</span> <span m="2168780">you</span> <span m="2168895">could</span> <span m="2169010">elevate</span> <span m="2169360">your</span> <span m="2169470">privileges,</span> <span m="2170070">but</span> <span m="2170170">it's</span> <span m="2170740">kind</span> <span m="2170930">of</span> <span m="2171040">awkward,</span> <span m="2171540">because</span> <span m="2171920">what</span> <span m="2172230">you</span> <span m="2172340">really</span> <span m="2172450">want</span> <span m="2172560">in</span> <span m="2172695">some</span> <span m="2172830">cases</span> <span m="2173100">is</span> <span m="2173200">a</span> <span m="2173360">process</span> <span m="2173940">running</span> <span m="2174300">with</span> <span m="2174490">more</span> <span m="2174730">privileges.</span> <span m="2176510">So</span> <span m="2176950">in</span> <span m="2177080">order</span> <span m="2177340">to do</span> <span m="2177450">this,</span> <span m="2177810">Unix</span> <span m="2178220">has</span> <span m="2178590">this</span> <span m="2178895">sort</span> <span m="2179200">of</span> <span m="2179685">clever,</span> <span m="2180170">sort</span> <span m="2180280">of</span> <span m="2181370">problematic</span> <span m="2181980">mechanism</span> <span m="2182730">called</span> <span m="2183360">setuid</span> <span m="2183630">binaries.</span> </p>
<p><span m="2190560">So</span> <span m="2191030">setuid</span> <span m="2191490">binaries</span> <span m="2192810">are</span> <span m="2193700">just</span> <span m="2193880">regular</span> <span m="2194380">executables</span> <span m="2195400">in</span> <span m="2195560">a</span> <span m="2195610">Unix</span> <span m="2195980">file</span> <span m="2196280">system,</span> <span m="2197900">except</span> <span m="2198510">that</span> <span m="2199110">when</span> <span m="2199430">you</span> <span m="2199720">run</span> <span m="2200090">them,</span> <span m="2200330">when</span> <span m="2200450">you</span> <span m="2200690">sort</span> <span m="2200820">of</span> <span m="2200970">co-exec</span> <span m="2202270">on</span> <span m="2202610">a</span> <span m="2202690">setuid</span> <span m="2203170">binary--</span> <span m="2203890">one</span> <span m="2204050">example</span> <span m="2204520">is,</span> <span m="2204610">for</span> <span m="2204720">example,</span> <span m="2205730">is</span> <span m="2206080">/bin/su</span> <span m="2207450">on</span> <span m="2207600">most</span> <span m="2207880">machines,</span> <span m="2208340">or</span> <span m="2208910">sudo</span> <span m="2209470">as</span> <span m="2209590">well.</span> <span m="2210320">There's</span> <span m="2210500">a</span> <span m="2210550">bunch</span> <span m="2210760">of</span> <span m="2210830">setuid</span> <span m="2211210">binaries</span> <span m="2211305">on</span> <span m="2211400">a</span> <span m="2211695">typical</span> <span m="2211990">Unix</span> <span m="2212280">system.</span> <span m="2213610">The</span> <span m="2213760">difference</span> <span m="2214150">is</span> <span m="2214280">that</span> <span m="2214450">when</span> <span m="2214620">you</span> <span m="2214800">execute</span> <span m="2215310">one</span> <span m="2215470">of</span> <span m="2215520">these</span> <span m="2215740">binaries,</span> <span m="2216950">it</span> <span m="2217060">actually</span> <span m="2217910">switches</span> <span m="2219060">the</span> <span m="2219250">userid</span> <span m="2219910">of</span> <span m="2220000">the</span> <span m="2220110">process</span> <span m="2221250">to</span> <span m="2221670">the</span> <span m="2221830">owner</span> <span m="2222075">of</span> <span m="2222320">this</span> <span m="2222510">binary.</span> </p>
<p><span m="2224890">It's</span> <span m="2225220">a</span> <span m="2225630">little</span> <span m="2225770">bit</span> <span m="2226020">of</span> <span m="2226140">a</span> <span m="2226260">weird</span> <span m="2226640">mechanism</span> <span m="2226860">when</span> <span m="2226980">you</span> <span m="2227060">first</span> <span m="2227360">see</span> <span m="2227540">it.</span> <span m="2228200">Typically</span> <span m="2229120">the</span> <span m="2229210">way</span> <span m="2229310">it</span> <span m="2229410">is</span> <span m="2229510">used</span> <span m="2229670">is</span> <span m="2229830">that</span> <span m="2230065">this</span> <span m="2230300">binary</span> <span m="2231180">probably</span> <span m="2231520">has</span> <span m="2232630">an</span> <span m="2232780">owner</span> <span m="2233560">uid</span> <span m="2234035">of</span> <span m="2234790">0,</span> <span m="2235970">because</span> <span m="2236210">you</span> <span m="2236310">really</span> <span m="2236490">want</span> <span m="2236620">to</span> <span m="2236740">regain</span> <span m="2237065">lots</span> <span m="2237620">of</span> <span m="2238090">privileges--</span> <span m="2238360">you</span> <span m="2238450">want</span> <span m="2238560">to</span> <span m="2238630">regain</span> <span m="2238950">root</span> <span m="2239150">privileges--</span> <span m="2240230">so</span> <span m="2240430">you</span> <span m="2240550">can</span> <span m="2240760">run</span> <span m="2241090">this</span> <span m="2241230">su</span> <span m="2241600">command,</span> <span m="2242410">and</span> <span m="2242560">the</span> <span m="2242670">kernel,</span> <span m="2243160">when</span> <span m="2243245">you</span> <span m="2243330">exec</span> <span m="2243780">this</span> <span m="2243930">binary,</span> <span m="2244280">will</span> <span m="2244450">switch</span> <span m="2244870">the</span> <span m="2245060">uid</span> <span m="2245490">of</span> <span m="2245603">the</span> <span m="2245716">process</span> <span m="2245830">to</span> <span m="2245940">0,</span> <span m="2247010">so</span> <span m="2247290">this</span> <span m="2247480">program</span> <span m="2248000">will</span> <span m="2248600">now</span> <span m="2248820">do</span> <span m="2249070">some</span> <span m="2250230">privileged</span> <span m="2250840">stuff.</span> <span m="2252470">That</span> <span m="2252620">make</span> <span m="2252790">sense?</span> </p>
<p><span m="2254510">AUDIENCE: If</span> <span m="2254855">you</span> <span m="2255200">have</span> <span m="2255450">uid</span> <span m="2255480">0</span> <span m="2255860">and</span> <span m="2256240">you</span> <span m="2256570">change</span> <span m="2256890">the</span> <span m="2256972">uid</span> <span m="2257054">of</span> <span m="2257136">all</span> <span m="2257218">of</span> <span m="2257300">those</span> <span m="2257710">setuid</span> <span m="2258210">binaries</span> <span m="2258710">to</span> <span m="2259210">something</span> <span m="2259710">non-0</span> <span m="2260210">and</span> <span m="2260710">then</span> <span m="2260960">you</span> <span m="2261210">could</span> <span m="2261376">start</span> <span m="2261543">[INAUDIBLE].</span> </p>
<p><span m="2263710">PROFESSOR: Well,</span> <span m="2265160">many</span> <span m="2265430">processes</span> <span m="2265715">will</span> <span m="2266000">not</span> <span m="2266160">be</span> <span m="2266250">able</span> <span m="2266420">to</span> <span m="2266560">regain</span> <span m="2266970">privileges</span> <span m="2267510">later.</span> <span m="2268330">You</span> <span m="2268470">might</span> <span m="2268730">be</span> <span m="2268870">kind</span> <span m="2269070">of</span> <span m="2269180">stuck.</span> <span m="2270420">It'll</span> <span m="2270580">still</span> <span m="2271070">boot</span> <span m="2271520">probably,</span> <span m="2271940">but</span> <span m="2272130">maybe</span> <span m="2272340">some</span> <span m="2272790">things</span> <span m="2273135">will</span> <span m="2273250">not</span> <span m="2273365">work.</span> <span m="2275130">This</span> <span m="2275250">mechanism</span> <span m="2275500">is</span> <span m="2275815">not</span> <span m="2276130">tied</span> <span m="2276320">to</span> <span m="2276490">uid</span> <span m="2276940">0.</span> <span m="2277455">In</span> <span m="2277520">fact,</span> <span m="2278220">"I"</span> <span m="2278650">as</span> <span m="2278760">a</span> <span m="2278820">user</span> <span m="2279230">on</span> <span m="2279370">a</span> <span m="2279390">Unix</span> <span m="2279790">system</span> <span m="2280260">can</span> <span m="2280470">create</span> <span m="2280770">any</span> <span m="2281070">binary.</span> <span m="2281290">I</span> <span m="2281470">can</span> <span m="2282310">build</span> <span m="2282630">some</span> <span m="2282710">program,</span> <span m="2283070">compile</span> <span m="2283620">it,</span> <span m="2284770">and</span> <span m="2285220">I</span> <span m="2285310">can</span> <span m="2286180">set</span> <span m="2286640">this</span> <span m="2287060">setuid</span> <span m="2287360">bit</span> <span m="2287660">on</span> <span m="2287910">that</span> <span m="2288770">program</span> <span m="2289140">itself.</span> <span m="2289560">It's</span> <span m="2289730">owned</span> <span m="2290020">by</span> <span m="2290140">me,</span> <span m="2290490">the</span> <span m="2290620">user,</span> <span m="2291160">my</span> <span m="2291330">userid.</span> <span m="2292370">And</span> <span m="2292650">what</span> <span m="2292770">this</span> <span m="2292910">means</span> <span m="2293130">is,</span> <span m="2293300">anyone</span> <span m="2293730">executing</span> <span m="2294200">my</span> <span m="2294420">program</span> <span m="2295310">will</span> <span m="2295480">run</span> <span m="2295740">that</span> <span m="2296000">code</span> <span m="2296720">with</span> <span m="2296880">my</span> <span m="2297020">userid.</span> <span m="2298815">Is</span> <span m="2299290">that</span> <span m="2299500">problematic?</span> <span m="2300130">Should</span> <span m="2300611">I</span> <span m="2301092">do</span> <span m="2301573">this?</span> </p>
<p><span m="2303020">AUDIENCE:So,</span> <span m="2303500">if</span> <span m="2303750">there</span> <span m="2304090">was</span> <span m="2304300">a</span> <span m="2304710">bug</span> <span m="2304995">in</span> <span m="2305137">your</span> <span m="2305280">application</span> <span m="2305690">and</span> <span m="2306100">suddenly</span> <span m="2306485">someone</span> <span m="2306613">could</span> <span m="2306741">do</span> <span m="2306870">anything</span> <span m="2307135">as</span> <span m="2307400">you,</span> <span m="2307830">not</span> <span m="2308100">just</span> <span m="2308370">with</span> <span m="2308723">the</span> <span m="2309076">program</span> <span m="2309430">that's</span> <span m="2309528">assigned</span> <span m="2309627">to</span> <span m="2309726">you.</span> </p>
<p><span m="2309825">PROFESSOR: Right.</span> <span m="2310220">But</span> <span m="2310420">yes,</span> <span m="2310670">so</span> <span m="2310800">that's</span> <span m="2311090">right.</span> <span m="2311230">If</span> <span m="2311640">my</span> <span m="2311810">application</span> <span m="2312095">is</span> <span m="2312380">buggy,</span> <span m="2313780">or</span> <span m="2314030">if</span> <span m="2314500">it</span> <span m="2314880">allows</span> <span m="2315220">you</span> <span m="2315320">to</span> <span m="2315510">run</span> <span m="2315700">anything</span> <span m="2315750">you</span> <span m="2315800">want,</span> <span m="2316090">well,</span> <span m="2316250">I</span> <span m="2316340">could</span> <span m="2316550">copy</span> <span m="2316870">the</span> <span m="2316960">system</span> <span m="2317260">shell</span> <span m="2317680">and</span> <span m="2317790">make</span> <span m="2317970">its</span> <span m="2318100">setuid</span> <span m="2318580">to</span> <span m="2318670">me,</span> <span m="2318945">then</span> <span m="2319220">anyone</span> <span m="2319550">can</span> <span m="2319650">run</span> <span m="2319810">a</span> <span m="2319880">shell</span> <span m="2320300">under</span> <span m="2320550">my</span> <span m="2320710">account.</span> <span m="2321140">That</span> <span m="2321410">would</span> <span m="2321770">probably</span> <span m="2322040">not</span> <span m="2322300">be</span> <span m="2322325">a</span> <span m="2322350">best</span> <span m="2322670">plan</span> <span m="2323450">of</span> <span m="2323590">action.</span> <span m="2324300">But</span> <span m="2325160">a</span> <span m="2326630">system</span> <span m="2326920">mechanism,</span> <span m="2327510">well,</span> <span m="2327810">this</span> <span m="2327940">is</span> <span m="2328100">not</span> <span m="2328320">necessarily</span> <span m="2328680">problematic,</span> <span m="2329130">because</span> <span m="2329820">the</span> <span m="2329960">only</span> <span m="2330300">person</span> <span m="2330680">that</span> <span m="2330880">can</span> <span m="2331820">set</span> <span m="2332220">the</span> <span m="2332300">setuid</span> <span m="2332585">bit</span> <span m="2333190">on</span> <span m="2333350">a</span> <span m="2333390">binary</span> <span m="2333930">is</span> <span m="2334340">the</span> <span m="2335000">owner</span> <span m="2335380">of</span> <span m="2335470">the</span> <span m="2335750">file,</span> <span m="2336680">and</span> <span m="2337110">owner</span> <span m="2337290">of</span> <span m="2337410">the</span> <span m="2337490">file</span> <span m="2337750">has</span> <span m="2338100">that</span> <span m="2338400">uid</span> <span m="2338760">privilege,</span> <span m="2339230">so</span> <span m="2339740">I</span> <span m="2339850">can</span> <span m="2340090">basically</span> <span m="2340380">give</span> <span m="2340560">away</span> <span m="2340780">my</span> <span m="2341050">account</span> <span m="2341190">to</span> <span m="2341330">other</span> <span m="2341570">people</span> <span m="2341970">if</span> <span m="2342015">I</span> <span m="2342060">want,</span> <span m="2342770">but</span> <span m="2343480">someone</span> <span m="2343880">else</span> <span m="2344240">cannot</span> <span m="2344810">create</span> <span m="2345330">a</span> <span m="2345390">setuid</span> <span m="2345860">binary</span> <span m="2346420">with</span> <span m="2346620">my</span> <span m="2346760">userid.</span> <span m="2347330">That</span> <span m="2348036">make</span> <span m="2348390">sense?</span> </p>
<p><span m="2349500">And</span> <span m="2349750">the</span> <span m="2349820">setuid</span> <span m="2350300">bit</span> <span m="2350980">is</span> <span m="2351130">sort</span> <span m="2351270">of</span> <span m="2351360">stored</span> <span m="2352050">alongside</span> <span m="2353060">these</span> <span m="2353350">permission</span> <span m="2353710">bits.</span> <span m="2353940">So</span> <span m="2354010">somewhere</span> <span m="2354240">there</span> <span m="2354740">is</span> <span m="2355020">also</span> <span m="2355160">a</span> <span m="2355300">setuid</span> <span m="2356970">bit</span> <span m="2357710">in</span> <span m="2357830">every</span> <span m="2358080">inode</span> <span m="2358650">that</span> <span m="2358840">says</span> <span m="2359040">whether</span> <span m="2359410">this</span> <span m="2360130">executable</span> <span m="2360590">or</span> <span m="2361190">this</span> <span m="2361390">program</span> <span m="2362420">should</span> <span m="2362820">be</span> <span m="2363250">switched</span> <span m="2363890">to</span> <span m="2364020">the</span> <span m="2364170">owner's</span> <span m="2364540">uid</span> <span m="2364710">on</span> <span m="2365040">execution.</span> <span m="2366124">Does</span> <span m="2366501">that</span> <span m="2366880">make</span> <span m="2367060">sense</span> <span m="2367630">as</span> <span m="2367760">sort</span> <span m="2368200">of</span> <span m="2368365">a</span> <span m="2368530">privilege</span> <span m="2368780">estimation</span> <span m="2369030">mechanism?</span> </p>
<p><span m="2370580">It</span> <span m="2370680">turns</span> <span m="2370900">out</span> <span m="2370966">that</span> <span m="2371033">this</span> <span m="2371100">is</span> <span m="2371190">a</span> <span m="2371260">very</span> <span m="2372680">tricky</span> <span m="2373210">mechanism</span> <span m="2373740">to</span> <span m="2373870">use</span> <span m="2374310">correctly.</span> <span m="2375330">So</span> <span m="2375430">the</span> <span m="2375530">kernel</span> <span m="2375670">implements</span> <span m="2375940">it</span> <span m="2376150">correctly.</span> <span m="2376580">It's</span> <span m="2376650">actually</span> <span m="2376720">a</span> <span m="2376790">fairly</span> <span m="2377170">easy</span> <span m="2377470">thing</span> <span m="2377610">to</span> <span m="2377670">do.</span> <span m="2377980">It's</span> <span m="2378070">just</span> <span m="2378240">one</span> <span m="2378410">check.</span> <span m="2378770">If</span> <span m="2378920">there</span> <span m="2379062">is</span> <span m="2379205">[INAUDIBLE],</span> <span m="2379490">switch</span> <span m="2379720">the</span> <span m="2379810">uid.</span> <span m="2380530">Easy</span> <span m="2380790">enough.</span> </p>
<p><span m="2381410">But</span> <span m="2381820">using</span> <span m="2382200">it</span> <span m="2382340">safely</span> <span m="2382870">turns</span> <span m="2383080">out</span> <span m="2383180">to</span> <span m="2383230">be</span> <span m="2383350">very</span> <span m="2383620">tricky</span> <span m="2383980">because,</span> <span m="2384700">as</span> <span m="2385230">was</span> <span m="2385370">just</span> <span m="2385580">pointed</span> <span m="2385730">out,</span> <span m="2385985">if</span> <span m="2386240">this</span> <span m="2386760">program</span> <span m="2388190">has</span> <span m="2388540">bugs</span> <span m="2388970">in</span> <span m="2389110">it</span> <span m="2389280">or</span> <span m="2389480">does</span> <span m="2389730">something</span> <span m="2390140">unexpected,</span> <span m="2391450">then</span> <span m="2392410">you</span> <span m="2392540">might</span> <span m="2392940">be</span> <span m="2393080">able</span> <span m="2393270">to</span> <span m="2393350">do</span> <span m="2393450">arbitrary</span> <span m="2393860">things</span> <span m="2394260">uid</span> <span m="2394690">0</span> <span m="2395110">or</span> <span m="2395610">whatever</span> <span m="2395656">the</span> <span m="2395703">other</span> <span m="2395750">uid</span> <span m="2396040">is.</span> <span m="2397080">And</span> <span m="2397190">it</span> <span m="2397230">turns</span> <span m="2397440">out</span> <span m="2398340">in</span> <span m="2398530">Unix,</span> <span m="2399070">the</span> <span m="2399180">way</span> <span m="2399290">you</span> <span m="2399430">execute</span> <span m="2399830">a</span> <span m="2399900">program,</span> <span m="2400290">you</span> <span m="2400420">inherit</span> <span m="2400930">a</span> <span m="2401000">lot</span> <span m="2401460">of</span> <span m="2401590">stuff</span> <span m="2402100">from</span> <span m="2402310">your</span> <span m="2402490">parent</span> <span m="2403000">process.</span> </p>
<p><span m="2404260">For</span> <span m="2404350">example,</span> <span m="2404940">you</span> <span m="2405020">can</span> <span m="2405160">pass</span> <span m="2405480">environment</span> <span m="2406090">variables</span> <span m="2406650">to</span> <span m="2406730">the</span> <span m="2406860">setuid</span> <span m="2407350">binaries,</span> <span m="2407680">and</span> <span m="2408420">it</span> <span m="2408560">used</span> <span m="2408730">to</span> <span m="2408780">be</span> <span m="2408870">the</span> <span m="2408960">case</span> <span m="2409330">that--</span> <span m="2409890">well,</span> <span m="2410270">in</span> <span m="2410520">Unix,</span> <span m="2410730">you</span> <span m="2410830">can</span> <span m="2411230">specify</span> <span m="2412300">what</span> <span m="2412620">shared</span> <span m="2413030">library</span> <span m="2413560">should</span> <span m="2413860">be</span> <span m="2413960">used</span> <span m="2414670">for</span> <span m="2415090">a</span> <span m="2415170">process</span> <span m="2415620">by</span> <span m="2415760">setting</span> <span m="2416060">an</span> <span m="2416300">environment</span> <span m="2416540">variable,</span> <span m="2417440">and</span> <span m="2417590">it</span> <span m="2417680">used</span> <span m="2417900">to</span> <span m="2418110">be</span> <span m="2418260">that</span> <span m="2418416">the</span> <span m="2418573">setuid</span> <span m="2418730">binaries</span> <span m="2419070">weren't</span> <span m="2419320">careful</span> <span m="2419700">about</span> <span m="2419960">filtering</span> <span m="2420290">out</span> <span m="2420500">these</span> <span m="2420660">environment</span> <span m="2421040">variables,</span> <span m="2421380">so</span> <span m="2421490">you</span> <span m="2421590">could</span> <span m="2422140">run</span> <span m="2422560">bin/su,</span> <span m="2422970">but</span> <span m="2423310">say,</span> <span m="2423420">well,</span> <span m="2423770">use</span> <span m="2423970">my</span> <span m="2424170">shared</span> <span m="2424480">library</span> <span m="2424910">for</span> <span m="2425060">things</span> <span m="2425280">like</span> <span m="2425610">printf(),</span> <span m="2426290">so</span> <span m="2426635">your</span> <span m="2426980">printf()</span> <span m="2427990">is</span> <span m="2428070">going</span> <span m="2428190">to</span> <span m="2428280">run</span> <span m="2428770">when</span> <span m="2429060">bin/su</span> <span m="2429550">prints</span> <span m="2429800">something</span> <span m="2430100">out,</span> <span m="2430240">and</span> <span m="2430330">you</span> <span m="2430400">can</span> <span m="2430930">get</span> <span m="2431080">it</span> <span m="2431220">to</span> <span m="2432190">run</span> <span m="2432370">a</span> <span m="2432410">shell</span> <span m="2432760">instead</span> <span m="2433070">of</span> <span m="2433220">printing</span> <span m="2433590">stuff.</span> </p>
<p><span m="2435030">So</span> <span m="2435640">there's</span> <span m="2435830">many</span> <span m="2436200">other</span> <span m="2436480">subtle</span> <span m="2436880">things</span> <span m="2437170">that</span> <span m="2437250">you</span> <span m="2437310">have</span> <span m="2437420">to</span> <span m="2437510">get</span> <span m="2437740">right</span> <span m="2438420">in</span> <span m="2438560">terms</span> <span m="2438880">of</span> <span m="2439110">this</span> <span m="2439310">program</span> <span m="2440130">not</span> <span m="2440550">trusting</span> <span m="2441050">the</span> <span m="2441150">user</span> <span m="2441400">input,</span> <span m="2441670">and</span> <span m="2441763">this</span> <span m="2441856">is</span> <span m="2441950">actually</span> <span m="2442490">quite</span> <span m="2442770">different</span> <span m="2443090">from</span> <span m="2443220">how</span> <span m="2443370">you</span> <span m="2443460">think</span> <span m="2443670">of</span> <span m="2443800">writing</span> <span m="2444100">most</span> <span m="2444380">Unix</span> <span m="2444680">programs.</span> <span m="2445030">You</span> <span m="2445210">generally</span> <span m="2445920">do</span> <span m="2446180">trust</span> <span m="2446430">the</span> <span m="2446510">user</span> <span m="2446750">input</span> <span m="2446930">a</span> <span m="2446990">lot,</span> <span m="2447900">so</span> <span m="2449110">for</span> <span m="2449220">this</span> <span m="2449420">reason,</span> <span m="2449790">the</span> <span m="2449920">setuid</span> <span m="2450680">mechanism</span> <span m="2451840">hasn't</span> <span m="2452240">been</span> <span m="2452990">the</span> <span m="2453150">most</span> <span m="2454370">secure</span> <span m="2454920">part,</span> <span m="2455320">in</span> <span m="2455470">some</span> <span m="2455660">sense,</span> <span m="2455940">of</span> <span m="2456100">the</span> <span m="2456220">overall</span> <span m="2456990">Unix</span> <span m="2457380">system.</span> <span m="2459470">All</span> <span m="2459530">right.</span> <span m="2459790">Any</span> <span m="2459910">questions</span> <span m="2460260">about</span> <span m="2460490">this</span> <span m="2461070">stuff?</span> <span m="2461630">Yeah.</span> </p>
<p><span m="2462090">AUDIENCE:</span> <span m="2462463">Does</span> <span m="2462836">setuid</span> <span m="2463210">apply</span> <span m="2463615">to</span> <span m="2464020">groups</span> <span m="2464083">as</span> <span m="2464146">well,</span> <span m="2464210">or</span> <span m="2464273">just</span> <span m="2464336">the</span> <span m="2464400">user?</span> </p>
<p><span m="2464780">PROFESSOR:</span> <span m="2465090">There</span> <span m="2465400">is</span> <span m="2465540">actually</span> <span m="2465825">a</span> <span m="2466110">symmetric</span> <span m="2467460">setgid</span> <span m="2468350">bit</span> <span m="2468580">you</span> <span m="2468660">could</span> <span m="2468840">set.</span> <span m="2470970">Why</span> <span m="2471180">not.</span> <span m="2472640">And</span> <span m="2473210">you</span> <span m="2473340">could--</span> <span m="2474840">well,</span> <span m="2475290">the</span> <span m="2475540">same</span> <span m="2475790">thing</span> <span m="2476100">happens,</span> <span m="2476470">right?</span> <span m="2476660">If</span> <span m="2477060">the</span> <span m="2477130">file</span> <span m="2477400">has</span> <span m="2477800">a</span> <span m="2478175">particular</span> <span m="2478362">gid</span> <span m="2478550">and</span> <span m="2478870">that</span> <span m="2479080">setgid</span> <span m="2479160">bit</span> <span m="2479500">is</span> <span m="2479680">set</span> <span m="2479930">when</span> <span m="2480040">you</span> <span m="2480140">run</span> <span m="2480280">the</span> <span m="2480360">program,</span> <span m="2480670">you</span> <span m="2480910">get</span> <span m="2481160">that</span> <span m="2481480">group.</span> <span m="2482610">It's</span> <span m="2482850">not</span> <span m="2483090">used</span> <span m="2483410">a</span> <span m="2483490">lot,</span> <span m="2483970">but</span> <span m="2484080">it</span> <span m="2484300">is</span> <span m="2484500">useful</span> <span m="2485220">in</span> <span m="2485490">cases</span> <span m="2485930">where</span> <span m="2486130">you</span> <span m="2486210">want</span> <span m="2486360">to</span> <span m="2486400">give</span> <span m="2486690">very</span> <span m="2486920">specific</span> <span m="2487500">privileges.</span> <span m="2488120">So</span> <span m="2488220">here,</span> <span m="2488445">like</span> <span m="2488670">bin/su</span> <span m="2489290">probably</span> <span m="2489550">needs</span> <span m="2489720">a</span> <span m="2489780">lot</span> <span m="2489980">of</span> <span m="2490070">privileges,</span> <span m="2490490">but</span> <span m="2490700">it</span> <span m="2490810">might</span> <span m="2490920">be</span> <span m="2491010">that</span> <span m="2491190">there's</span> <span m="2491390">some</span> <span m="2491570">program</span> <span m="2492010">that</span> <span m="2492200">needs</span> <span m="2492360">a</span> <span m="2492450">little</span> <span m="2492680">bit</span> <span m="2492810">of</span> <span m="2493010">extra</span> <span m="2493060">privileges,</span> <span m="2493490">like</span> <span m="2493640">maybe</span> <span m="2493760">to</span> <span m="2493880">write</span> <span m="2494210">something</span> <span m="2494510">to</span> <span m="2494600">a</span> <span m="2494680">special</span> <span m="2495080">log</span> <span m="2495340">file.</span> <span m="2496330">So</span> <span m="2496420">you</span> <span m="2496540">probably</span> <span m="2496740">want</span> <span m="2496870">to</span> <span m="2496920">give</span> <span m="2497020">it</span> <span m="2497120">some</span> <span m="2497240">group</span> <span m="2497560">and</span> <span m="2497980">make</span> <span m="2498140">that</span> <span m="2498280">log</span> <span m="2498550">file</span> <span m="2498650">writable</span> <span m="2499060">by</span> <span m="2499270">that</span> <span m="2499350">group.</span> <span m="2499930">So</span> <span m="2500300">even</span> <span m="2500430">if</span> <span m="2500480">the</span> <span m="2500530">program</span> <span m="2500780">is</span> <span m="2500860">buggy,</span> <span m="2501260">which</span> <span m="2501410">is</span> <span m="2501570">likely</span> <span m="2501640">the</span> <span m="2501750">case,</span> <span m="2502150">then,</span> <span m="2502860">well,</span> <span m="2503140">you</span> <span m="2503270">lose</span> <span m="2503445">that</span> <span m="2503620">group,</span> <span m="2504300">sort</span> <span m="2504440">of,</span> <span m="2504530">privileges</span> <span m="2505020">but</span> <span m="2505200">not</span> <span m="2505440">much</span> <span m="2505640">else.</span> <span m="2506510">It</span> <span m="2506585">is</span> <span m="2506660">sort</span> <span m="2506840">of</span> <span m="2506970">useful</span> <span m="2507490">as</span> <span m="2507600">a</span> <span m="2507660">mechanism,</span> <span m="2508710">but</span> <span m="2508950">it</span> <span m="2509095">doesn't</span> <span m="2509240">show</span> <span m="2509400">up</span> <span m="2509560">often,</span> <span m="2509890">because</span> <span m="2510140">it's--</span> <span m="2511970">I</span> <span m="2512060">don't</span> <span m="2512310">why.</span> <span m="2512660">People</span> <span m="2512890">should</span> <span m="2513095">use</span> <span m="2513300">root</span> <span m="2513610">more.</span> <span m="2516395">Yeah.</span> </p>
<p><span m="2516890">AUDIENCE: What</span> <span m="2517055">are</span> <span m="2517220">the</span> <span m="2517385">restrictions</span> <span m="2517467">on</span> <span m="2517550">who</span> <span m="2517632">can</span> <span m="2517715">change</span> <span m="2517797">the</span> <span m="2517880">[INAUDIBLE]?</span> </p>
<p><span m="2519870">AUDIENCE: Yes.</span> <span m="2525290">Different</span> <span m="2526130">Unix</span> <span m="2526460">implementations</span> <span m="2527150">have</span> <span m="2527330">slightly</span> <span m="2527830">different</span> <span m="2528620">checks</span> <span m="2528940">for</span> <span m="2529040">this.</span> <span m="2529670">The</span> <span m="2530270">general</span> <span m="2530655">rule</span> <span m="2531040">of</span> <span m="2531470">thumb</span> <span m="2531780">is,</span> <span m="2532150">only</span> <span m="2532500">root</span> <span m="2532730">can</span> <span m="2532900">change</span> <span m="2533120">the</span> <span m="2533320">owner</span> <span m="2533423">of</span> <span m="2533526">a</span> <span m="2533630">file,</span> <span m="2533940">because</span> <span m="2534710">you</span> <span m="2534840">don't</span> <span m="2535000">want</span> <span m="2535150">to</span> <span m="2535260">create</span> <span m="2535710">files</span> <span m="2536270">owned</span> <span m="2536640">by</span> <span m="2537700">someone</span> <span m="2537960">else,</span> <span m="2538220">and</span> <span m="2538580">you</span> <span m="2538750">don't</span> <span m="2538910">want</span> <span m="2539060">to</span> <span m="2539160">take</span> <span m="2539360">over</span> <span m="2539600">other</span> <span m="2539770">people's</span> <span m="2540070">files,</span> <span m="2540210">of</span> <span m="2540350">course,</span> <span m="2540630">either.</span> <span m="2541590">So,</span> <span m="2541950">in</span> <span m="2542130">general,</span> <span m="2542820">if</span> <span m="2542920">you're</span> <span m="2543270">a particular</span> <span m="2543590">non-0</span> <span m="2544190">uid,</span> <span m="2544750">then</span> <span m="2544890">you're</span> <span m="2545210">stuck.</span> <span m="2545570">You</span> <span m="2545670">can't</span> <span m="2547350">change</span> <span m="2547650">owner</span> <span m="2548080">of</span> <span m="2548210">any</span> <span m="2548300">file.</span> <span m="2548870">If</span> <span m="2548990">you're</span> <span m="2549320">a</span> <span m="2549400">root,</span> <span m="2549480">you</span> <span m="2549590">can</span> <span m="2549800">change</span> <span m="2550080">it</span> <span m="2550115">to</span> <span m="2550150">anything</span> <span m="2550310">you</span> <span m="2550570">want.</span> <span m="2551950">There</span> <span m="2552060">are</span> <span m="2552130">some</span> <span m="2552430">complications</span> <span m="2553170">if</span> <span m="2553600">you're</span> <span m="2554030">a</span> <span m="2554360">setuid</span> <span m="2554420">binary</span> <span m="2554860">and</span> <span m="2555050">you</span> <span m="2555500">switch</span> <span m="2555650">from</span> <span m="2555930">one</span> <span m="2556030">uid</span> <span m="2556175">to</span> <span m="2556320">another--</span> <span m="2556620">it's</span> <span m="2556770">a</span> <span m="2556920">little</span> <span m="2558040">bit</span> <span m="2558290">tricky--</span> <span m="2558550">but</span> <span m="2559100">for</span> <span m="2559200">the</span> <span m="2559240">most</span> <span m="2559440">part</span> <span m="2559820">you</span> <span m="2560000">basically</span> <span m="2560340">can't</span> <span m="2560580">change</span> <span m="2560900">the</span> <span m="2560970">owner</span> <span m="2561290">of</span> <span m="2561390">a</span> <span m="2561540">file</span> <span m="2561805">unless</span> <span m="2562070">you're</span> <span m="2562340">a</span> <span m="2562821">root.</span> <span m="2565230">Make</span> <span m="2565370">sense?</span> <span m="2566280">Other</span> <span m="2566870">questions</span> <span m="2567260">about</span> <span m="2567480">this</span> <span m="2568600">machinery?</span> </p>
<p><span m="2570425">It</span> <span m="2570810">is,</span> <span m="2570910">admittedly,</span> <span m="2571185">a</span> <span m="2571460">slightly</span> <span m="2571700">baroque</span> <span m="2572190">system.</span> <span m="2572570">You</span> <span m="2572810">could</span> <span m="2573130">probably</span> <span m="2573390">imagine</span> <span m="2573700">lots</span> <span m="2573900">of</span> <span m="2573990">ways</span> <span m="2574190">in</span> <span m="2574290">which</span> <span m="2574410">you</span> <span m="2574470">could</span> <span m="2574620">simplify</span> <span m="2575050">this</span> <span m="2575610">but,</span> <span m="2575880">in</span> <span m="2575970">fact,</span> <span m="2576280">most</span> <span m="2576370">successful</span> <span m="2576740">systems</span> <span m="2577000">sort</span> <span m="2577150">of</span> <span m="2577240">look</span> <span m="2577390">like</span> <span m="2577530">this</span> <span m="2577740">as</span> <span m="2577870">they</span> <span m="2578270">evolve</span> <span m="2578630">over</span> <span m="2578810">time.</span> <span m="2579230">As</span> <span m="2579940">it</span> <span m="2580205">turns</span> <span m="2580470">out,</span> <span m="2580890">you</span> <span m="2581150">can</span> <span m="2581300">make</span> <span m="2581530">some</span> <span m="2581730">good</span> <span m="2581900">use</span> <span m="2582120">of</span> <span m="2582220">these</span> <span m="2582380">sandboxing</span> <span m="2582880">mechanisms.</span> <span m="2584800">These</span> <span m="2585040">are</span> <span m="2585260">just</span> <span m="2585410">sort</span> <span m="2585560">of</span> <span m="2585640">the</span> <span m="2585720">basic</span> <span m="2586180">Unix</span> <span m="2586670">primitives</span> <span m="2587190">that</span> <span m="2587490">show</span> <span m="2587720">up</span> <span m="2587960">in</span> <span m="2588200">pretty</span> <span m="2588370">much</span> <span m="2588520">every</span> <span m="2588820">Unix-like</span> <span m="2589450">operating</span> <span m="2589780">systems,</span> <span m="2590190">so</span> <span m="2590240">Mac</span> <span m="2590490">OS</span> <span m="2590730">X</span> <span m="2591050">has</span> <span m="2591290">this,</span> <span m="2591530">Linux</span> <span m="2591940">has</span> <span m="2592120">this,</span> <span m="2592250">FreeBSD</span> <span m="2592900">has</span> <span m="2593240">this,</span> <span m="2593900">Solaris--</span> <span m="2594520">if</span> <span m="2594620">anyone's</span> <span m="2594930">still</span> <span m="2595050">runs</span> <span m="2595230">this,</span> <span m="2595320">et</span> <span m="2595700">cetera.</span> <span m="2597585">But</span> <span m="2598220">in</span> <span m="2598510">every</span> <span m="2598740">one</span> <span m="2598890">of</span> <span m="2598980">these,</span> <span m="2599190">there</span> <span m="2599260">is</span> <span m="2599330">actually</span> <span m="2599560">more</span> <span m="2600080">sophisticated</span> <span m="2600820">mechanisms</span> <span m="2601350">that</span> <span m="2601480">you</span> <span m="2601590">might</span> <span m="2601800">use,</span> <span m="2602200">so</span> <span m="2602260">Linux</span> <span m="2602730">has</span> <span m="2602940">something</span> <span m="2603730">called</span> <span m="2603970">set COMP</span> <span m="2604650">for</span> <span m="2604870">sandboxing</span> <span m="2605400">processes,</span> <span m="2606090">Mac</span> <span m="2606340">OS</span> <span m="2606570">X</span> <span m="2606960">has</span> <span m="2607130">its</span> <span m="2607270">own</span> <span m="2607480">thing</span> <span m="2607700">called</span> <span m="2607920">Seatbelt,</span> <span m="2609170">and</span> <span m="2609470">there's</span> <span m="2609760">all</span> <span m="2609960">kinds</span> <span m="2610170">of</span> <span m="2610240">extensions.</span> <span m="2611420">We'll</span> <span m="2611630">at</span> <span m="2611840">one</span> <span m="2611970">extension</span> <span m="2612160">actually</span> <span m="2612350">next</span> <span m="2612590">week,</span> <span m="2612860">just</span> <span m="2613250">to</span> <span m="2613340">see,</span> <span m="2613740">but</span> <span m="2613870">this</span> <span m="2613990">is</span> <span m="2614140">just</span> <span m="2614860">to</span> <span m="2614920">get</span> <span m="2615080">you</span> <span m="2615180">familiar</span> <span m="2615530">with</span> <span m="2615730">the</span> <span m="2615950">basics</span> <span m="2616330">that</span> <span m="2616430">every</span> <span m="2616880">Unix</span> <span m="2617240">system</span> <span m="2617724">has.</span> </p>
<p><span m="2621210">So</span> <span m="2622320">one</span> <span m="2622530">sort</span> <span m="2622590">of</span> <span m="2622990">last</span> <span m="2623330">bit</span> <span m="2623480">of</span> <span m="2623570">machinery</span> <span m="2624020">we</span> <span m="2624100">want</span> <span m="2624180">to</span> <span m="2624250">look</span> <span m="2624460">at</span> <span m="2624620">before</span> <span m="2625070">diving</span> <span m="2625520">into</span> <span m="2625960">OKWS,</span> <span m="2626870">is</span> <span m="2627190">how</span> <span m="2627330">do</span> <span m="2627420">you</span> <span m="2627510">deal</span> <span m="2627760">with</span> <span m="2627910">setuid</span> <span m="2628360">binaries?</span> <span m="2628730">How</span> <span m="2628870">do</span> <span m="2628930">you</span> <span m="2629010">protect</span> <span m="2629460">yourself</span> <span m="2630030">from</span> <span m="2630420">these</span> <span m="2632300">security</span> <span m="2632650">holes,</span> <span m="2632950">if</span> <span m="2633050">you</span> <span m="2633160">will.</span> <span m="2633770">So</span> <span m="2634240">the</span> <span m="2634330">problem</span> <span m="2634570">is</span> <span m="2634690">that</span> <span m="2635850">inevitably</span> <span m="2636370">you'll</span> <span m="2636540">have</span> <span m="2636730">some</span> <span m="2636970">setuid</span> <span m="2637120">binaries</span> <span m="2637240">in</span> <span m="2637690">your</span> <span m="2637830">system</span> <span m="2638190">like</span> <span m="2638390">/bin/su,</span> <span m="2639640">or</span> <span m="2639790">sudo,</span> <span m="2640060">or</span> <span m="2640260">what</span> <span m="2640370">have</span> <span m="2640610">you,</span> <span m="2641320">and</span> <span m="2642480">there's</span> <span m="2642730">probably</span> <span m="2642990">bugs</span> <span m="2643390">in</span> <span m="2643500">these</span> <span m="2643890">programs,</span> <span m="2644590">so</span> <span m="2644760">if</span> <span m="2645010">someone</span> <span m="2645280">can</span> <span m="2645450">execute</span> <span m="2645910">the</span> <span m="2646000">setuid</span> <span m="2646480">binary,</span> <span m="2647300">then</span> <span m="2650160">that</span> <span m="2650530">process</span> <span m="2650910">might</span> <span m="2651090">get</span> <span m="2651330">root</span> <span m="2651560">access,</span> <span m="2651690">so</span> <span m="2651820">you</span> <span m="2651940">don't</span> <span m="2652110">want</span> <span m="2652240">to</span> <span m="2652280">do</span> <span m="2652390">that--</span> <span m="2652780">or</span> <span m="2652980">don't</span> <span m="2653180">want</span> <span m="2653380">to</span> <span m="2653580">allow</span> <span m="2653780">that.</span> </p>
<p><span m="2657640">The</span> <span m="2657740">mechanism</span> <span m="2658140">in</span> <span m="2658310">Unix</span> <span m="2658690">that</span> <span m="2658725">is</span> <span m="2658760">often</span> <span m="2659130">used</span> <span m="2659730">to</span> <span m="2660260">prevent</span> <span m="2660750">a</span> <span m="2661470">potentially</span> <span m="2661890">malicious</span> <span m="2662410">process</span> <span m="2662980">from</span> <span m="2663460">exploiting</span> <span m="2664200">setuid</span> <span m="2664690">binaries</span> <span m="2665710">is</span> <span m="2666430">to</span> <span m="2666560">use</span> <span m="2666830">the</span> <span m="2667120">file</span> <span m="2667220">system</span> <span m="2667640">namespace</span> <span m="2668750">to</span> <span m="2668860">modify</span> <span m="2669330">it,</span> <span m="2669470">using</span> <span m="2669840">the</span> <span m="2669960">chroot</span> <span m="2670780">system</span> <span m="2671180">call.</span> <span m="2671980">OKWS</span> <span m="2672510">uses</span> <span m="2672630">this</span> <span m="2672920">pretty</span> <span m="2673110">extensively.</span> <span m="2674280">So</span> <span m="2674470">in</span> <span m="2674910">Unix,</span> <span m="2676060">what</span> <span m="2676280">you</span> <span m="2676350">can</span> <span m="2676500">do</span> <span m="2676650">is</span> <span m="2676750">you</span> <span m="2676850">can</span> <span m="2677000">call</span> <span m="2677290">chroot</span> <span m="2678820">on</span> <span m="2679290">a</span> <span m="2679350">particular</span> <span m="2679740">directory.</span> <span m="2680540">So</span> <span m="2681080">maybe</span> <span m="2681290">you</span> <span m="2681380">can</span> <span m="2681700">chroot("/foo")</span> <span m="2684680">and</span> <span m="2686090">there's</span> <span m="2686410">actually</span> <span m="2686660">two</span> <span m="2686920">explanations</span> <span m="2687280">I</span> <span m="2687640">want</span> <span m="2687730">to</span> <span m="2687770">give</span> <span m="2687960">to</span> <span m="2688210">what</span> <span m="2688310">chroot</span> <span m="2688630">does.</span> <span m="2689010">The</span> <span m="2689570">first</span> <span m="2689790">one</span> <span m="2689920">is</span> <span m="2690010">just</span> <span m="2690200">intuitive.</span> <span m="2690800">What</span> <span m="2691060">it</span> <span m="2691216">does</span> <span m="2691373">is</span> <span m="2691530">it</span> <span m="2691740">means</span> <span m="2691960">that</span> <span m="2692140">after</span> <span m="2692490">you</span> <span m="2692790">run</span> <span m="2692970">chroot,</span> <span m="2693960">the</span> <span m="2694470">root</span> <span m="2694720">directory</span> <span m="2695170">or</span> <span m="2695290">slash</span> <span m="2696100">basically</span> <span m="2696790">is</span> <span m="2696920">equal</span> <span m="2697200">to</span> <span m="2697330">what</span> <span m="2697550">/foo</span> <span m="2698130">used</span> <span m="2698330">to</span> <span m="2698400">be</span> <span m="2699080">before</span> <span m="2699480">you</span> <span m="2699560">called</span> <span m="2699860">chroot.</span> <span m="2701280">So</span> <span m="2701880">it</span> <span m="2701930">kind</span> <span m="2702140">restricts</span> <span m="2702540">your</span> <span m="2702680">namespace</span> <span m="2703270">down</span> <span m="2703600">/foo</span> <span m="2704270">so</span> <span m="2704360">it</span> <span m="2704480">looks</span> <span m="2704690">like</span> <span m="2704860">that's</span> <span m="2705090">all</span> <span m="2705420">the</span> <span m="2705490">stuff</span> <span m="2705710">you</span> <span m="2705800">have.</span> <span m="2706150">So</span> <span m="2706620">if</span> <span m="2706730">you</span> <span m="2706810">have</span> <span m="2707270">a</span> <span m="2707360">file</span> <span m="2708750">that</span> <span m="2709180">used</span> <span m="2709410">to</span> <span m="2709480">be</span> <span m="2709750">called</span> <span m="2710400">/foo/x,</span> <span m="2711610">after</span> <span m="2713300">calling</span> <span m="2713610">chroot,</span> <span m="2713890">you</span> <span m="2714240">can</span> <span m="2714390">get</span> <span m="2714660">at</span> <span m="2714685">that</span> <span m="2714710">file</span> <span m="2715080">by</span> <span m="2715200">just</span> <span m="2715390">opening</span> <span m="2715800">/x.</span> <span m="2717230">So</span> <span m="2717370">just</span> <span m="2717550">restrict</span> <span m="2717940">your</span> <span m="2718050">namespace</span> <span m="2718510">down</span> <span m="2718750">to</span> <span m="2718840">a</span> <span m="2718910">subdirectory.</span> <span m="2720930">So</span> <span m="2721170">this</span> <span m="2721390">is</span> <span m="2721580">the</span> <span m="2721620">intuitive</span> <span m="2721660">version.</span> </p>
<p><span m="2722600">Of</span> <span m="2722680">course,</span> <span m="2722980">in</span> <span m="2723280">security,</span> <span m="2723580">what</span> <span m="2723760">matters</span> <span m="2724110">is</span> <span m="2724240">not</span> <span m="2724370">the</span> <span m="2724520">intuitive</span> <span m="2724790">version,</span> <span m="2725080">but</span> <span m="2725140">what</span> <span m="2725560">is</span> <span m="2725600">the</span> <span m="2725730">kernel</span> <span m="2725950">exactly</span> <span m="2726610">doing</span> <span m="2727270">with</span> <span m="2727700">this</span> <span m="2727950">system</span> <span m="2728280">call?</span> <span m="2728750">What</span> <span m="2729220">the</span> <span m="2729470">kernel</span> <span m="2729800">does</span> <span m="2730140">is</span> <span m="2730350">basically</span> <span m="2730830">two</span> <span m="2731060">things.</span> <span m="2732240">So</span> <span m="2732350">when</span> <span m="2732460">you</span> <span m="2732540">call</span> <span m="2732770">chroot</span> <span m="2733490">a</span> <span m="2733540">particular</span> <span m="2733940">directory,</span> <span m="2734810">it</span> <span m="2735230">does</span> <span m="2735460">two</span> <span m="2735610">things.</span> <span m="2736000">One,</span> <span m="2736400">it</span> <span m="2736580">changes</span> <span m="2737400">what</span> <span m="2737920">slash</span> <span m="2738540">means,</span> <span m="2739300">so</span> <span m="2739410">whenever</span> <span m="2739690">you</span> <span m="2740290">access--</span> <span m="2740830">whenever</span> <span m="2741290">you</span> <span m="2741410">start</span> <span m="2741770">a</span> <span m="2741890">path</span> <span m="2742330">name</span> <span m="2742380">with</span> <span m="2742430">slash,</span> <span m="2743530">the</span> <span m="2743630">kernel</span> <span m="2743980">will</span> <span m="2744150">now</span> <span m="2745010">plug</span> <span m="2745363">in</span> <span m="2746070">whatever</span> <span m="2746400">the</span> <span m="2746500">file</span> <span m="2746910">you</span> <span m="2747160">gave</span> <span m="2747230">to</span> <span m="2747450">chroot.</span> <span m="2747890">It's</span> <span m="2748280">roughly</span> <span m="2748780">the</span> <span m="2749230">/foo</span> <span m="2749420">file</span> <span m="2749770">from</span> <span m="2750500">before</span> <span m="2750840">you</span> <span m="2751130">called</span> <span m="2751350">chroot.</span> </p>
<p><span m="2753250">The</span> <span m="2753350">other</span> <span m="2753570">thing</span> <span m="2753920">the</span> <span m="2754030">kernel</span> <span m="2754340">does,</span> <span m="2754700">is</span> <span m="2754880">it</span> <span m="2755080">tries</span> <span m="2755480">to</span> <span m="2755570">prevent</span> <span m="2755950">you</span> <span m="2756490">from</span> <span m="2756800">escaping</span> <span m="2757500">out</span> <span m="2757780">of</span> <span m="2758450">your</span> <span m="2758780">/</span> <span m="2759640">by</span> <span m="2759880">doing</span> <span m="2760210">/../</span> <span m="2761070">because</span> <span m="2761500">you</span> <span m="2761590">could</span> <span m="2761710">imagine</span> <span m="2762130">in Unix,</span> <span m="2762420">I</span> <span m="2762500">could</span> <span m="2762650">ask</span> <span m="2762900">for,</span> <span m="2763040">you</span> <span m="2763370">know,</span> <span m="2763620">give</span> <span m="2763760">me</span> <span m="2763880">/../etcpassword.</span> <span m="2767552">So</span> <span m="2768011">if</span> <span m="2768470">I</span> <span m="2768560">just</span> <span m="2768910">prepended</span> <span m="2769470">/foo,</span> <span m="2770510">then</span> <span m="2770620">this</span> <span m="2770720">would</span> <span m="2770870">not</span> <span m="2771070">be</span> <span m="2771170">good,</span> <span m="2772070">because</span> <span m="2772340">I</span> <span m="2772390">can</span> <span m="2772740">just</span> <span m="2772960">sort</span> <span m="2773090">of</span> <span m="2773200">walk</span> <span m="2773450">out</span> <span m="2773620">of</span> <span m="2773810">/foo</span> <span m="2774080">and</span> <span m="2774265">go</span> <span m="2774450">get</span> <span m="2774605">/etc/password.</span> </p>
<p><span m="2776330">So</span> <span m="2776490">the</span> <span m="2776570">other</span> <span m="2776870">thing</span> <span m="2777140">the</span> <span m="2777260">Unix</span> <span m="2777560">kernel</span> <span m="2777870">does,</span> <span m="2778380">when</span> <span m="2778530">you</span> <span m="2778610">call</span> <span m="2778800">chroot,</span> <span m="2779930">is</span> <span m="2780640">for</span> <span m="2780830">that</span> <span m="2781180">particular</span> <span m="2781550">process,</span> <span m="2782730">it</span> <span m="2783110">changes</span> <span m="2783640">how</span> <span m="2783980">it</span> <span m="2784170">evaluates</span> <span m="2784920">/../</span> <span m="2785780">in</span> <span m="2786020">this</span> <span m="2786370">directory,</span> <span m="2787455">so</span> <span m="2787800">it</span> <span m="2787920">basically</span> <span m="2788590">changes</span> <span m="2789060">/../</span> <span m="2789780">in</span> <span m="2790160">/foo</span> <span m="2790620">to</span> <span m="2790790">point</span> <span m="2791130">to</span> <span m="2791230">itself,</span> <span m="2793860">so</span> <span m="2794020">it</span> <span m="2794140">doesn't</span> <span m="2794750">let</span> <span m="2794930">you</span> <span m="2795040">do</span> <span m="2795180">this</span> <span m="2795500">kind</span> <span m="2795740">of</span> <span m="2795810">escaping,</span> <span m="2796780">and</span> <span m="2796890">this</span> <span m="2797040">change</span> <span m="2797370">only</span> <span m="2798330">applies</span> <span m="2799060">to</span> <span m="2799490">this</span> <span m="2799800">process</span> <span m="2800180">and</span> <span m="2800300">not</span> <span m="2800490">everyone</span> <span m="2800790">else.</span> <span m="2801576">Does</span> <span m="2802012">that</span> <span m="2802450">roughly</span> <span m="2802860">make</span> <span m="2803020">sense?</span> <span m="2804896">So</span> <span m="2805360">do</span> <span m="2805450">you</span> <span m="2805550">guys</span> <span m="2805730">have</span> <span m="2805850">any</span> <span m="2806140">ideas</span> <span m="2806540">about</span> <span m="2808140">how</span> <span m="2808570">you</span> <span m="2808700">could</span> <span m="2808900">escape</span> <span m="2809380">a</span> <span m="2809750">chroot</span> <span m="2810690">environment</span> <span m="2811870">because</span> <span m="2812430">of</span> <span m="2812590">the</span> <span m="2812680">way</span> <span m="2812830">it's</span> <span m="2812930">implemented?</span> <span m="2813830">Yeah.</span> </p>
<p><span m="2814170">AUDIENCE:</span> <span m="2814664">So</span> <span m="2814828">if</span> <span m="2814993">you're</span> <span m="2815075">[INAUDIBLE],</span> <span m="2815116">you</span> <span m="2815137">can</span> <span m="2815158">make</span> <span m="2815652">a</span> <span m="2816146">directory</span> <span m="2816310">and</span> <span m="2816475">then</span> <span m="2816640">bring</span> <span m="2817134">that</span> <span m="2817628">directory,</span> <span m="2818122">and</span> <span m="2818616">then</span> <span m="2818739">go</span> <span m="2818863">back</span> <span m="2818904">to</span> <span m="2818945">your</span> <span m="2819110">directory and</span> <span m="2819480">[INAUDIBLE].</span> </p>
<p><span m="2819930">PROFESSOR:  Yeah.</span> <span m="2820830">So,</span> <span m="2821280">the</span> <span m="2821560">interesting</span> <span m="2822310">thing--</span> <span m="2823110">so</span> <span m="2823270">the</span> <span m="2823410">kernel</span> <span m="2823750">only</span> <span m="2824050">keeps</span> <span m="2824260">track</span> <span m="2824600">of</span> <span m="2824780">one</span> <span m="2825240">chroot</span> <span m="2825990">directory.</span> <span m="2827030">And</span> <span m="2827140">I'll</span> <span m="2827250">explain</span> <span m="2827560">sort</span> <span m="2827630">of</span> <span m="2827730">the</span> <span m="2827830">answer</span> <span m="2827850">that</span> <span m="2828100">I</span> <span m="2828330">gave</span> <span m="2828700">in</span> <span m="2829150">a</span> <span m="2829200">second.</span> <span m="2829800">So</span> <span m="2830150">what</span> <span m="2830430">you</span> <span m="2830560">could</span> <span m="2830790">do</span> <span m="2831120">is,</span> <span m="2831690">maybe</span> <span m="2832050">your</span> <span m="2832210">chroot'd</span> <span m="2832500">into</span> <span m="2835630">/foo.</span> </p>
<p><span m="2839390">You're</span> <span m="2839550">sort</span> <span m="2839900">of</span> <span m="2840050">stuck.</span> <span m="2840095">You</span> <span m="2840140">want</span> <span m="2840250">to</span> <span m="2840300">get</span> <span m="2840430">at</span> <span m="2840640">/etc/password,</span> <span m="2841140">but</span> <span m="2841350">how</span> <span m="2841500">do</span> <span m="2841546">you</span> <span m="2841593">do</span> <span m="2841640">it?</span> <span m="2842190">Well,</span> <span m="2842700">what</span> <span m="2842850">you</span> <span m="2842910">could</span> <span m="2843110">do</span> <span m="2843330">is</span> <span m="2843430">you</span> <span m="2843520">can</span> <span m="2843620">actually</span> <span m="2844540">open</span> <span m="2846330">the</span> <span m="2846750">root</span> <span m="2848010">directory</span> <span m="2848510">now.</span> <span m="2849110">That</span> <span m="2849240">will</span> <span m="2849350">give</span> <span m="2849490">you</span> <span m="2849600">a</span> <span m="2849650">file</span> <span m="2849940">descriptor</span> <span m="2851040">for</span> <span m="2852440">effectively</span> <span m="2852980">what</span> <span m="2853180">is</span> <span m="2853290">/foo.</span> <span m="2855350">Then</span> <span m="2855580">you</span> <span m="2855700">could</span> <span m="2856270">call</span> <span m="2856620">chroot</span> <span m="2857190">again.</span> <span m="2857940">Maybe</span> <span m="2858130">you</span> <span m="2858260">can</span> <span m="2858410">chroot</span> <span m="2860070">into</span> <span m="2860930">/bar.</span> <span m="2863110">So</span> <span m="2863230">now</span> <span m="2863880">the</span> <span m="2863990">kernel</span> <span m="2865300">changes</span> <span m="2865790">plan.</span> <span m="2866440">Root</span> <span m="2866750">is</span> <span m="2866900">no</span> <span m="2867040">longer</span> <span m="2867340">/foo</span> <span m="2867870">but</span> <span m="2868000">it's</span> <span m="2868640">/foo/bar</span> <span m="2869860">and</span> <span m="2870020">this</span> <span m="2870250">/../</span> <span m="2870840">redirection</span> <span m="2871290">only</span> <span m="2871600">applies</span> <span m="2872570">to</span> <span m="2872690">/foo/bar/..</span> </p>
<p><span m="2876950">But</span> <span m="2877110">know</span> <span m="2877340">that</span> <span m="2877470">you</span> <span m="2877570">still</span> <span m="2877740">have</span> <span m="2877880">the</span> <span m="2878010">file</span> <span m="2878200">descriptor</span> <span m="2878630">for</span> <span m="2879013">/foo.</span> <span m="2880530">So</span> <span m="2880630">now</span> <span m="2881040">what</span> <span m="2881200">you</span> <span m="2881300">could</span> <span m="2881450">do</span> <span m="2882140">is</span> <span m="2882300">you</span> <span m="2882440">could</span> <span m="2883490">change</span> <span m="2883800">directories</span> <span m="2884320">into</span> <span m="2884540">that</span> <span m="2884600">file</span> <span m="2884850">descriptor,</span> <span m="2885420">fchdir(fd)</span> <span m="2888880">from</span> <span m="2889190">this</span> <span m="2889660">open</span> <span m="2890010">call,</span> <span m="2891140">and</span> <span m="2891290">now</span> <span m="2892210">you</span> <span m="2892400">chdir(..)</span> <span m="2898220">And</span> <span m="2898300">at</span> <span m="2898360">this</span> <span m="2898510">point,</span> <span m="2899360">you</span> <span m="2899530">were</span> <span m="2899680">in</span> <span m="2899830">/foo,</span> <span m="2900820">you</span> <span m="2901020">go</span> <span m="2901410">to</span> <span m="2901800">/../</span> <span m="2902470">from</span> <span m="2902670">foo.</span> <span m="2902910">It's</span> <span m="2903305">no</span> <span m="2903502">longer</span> <span m="2903700">looped</span> <span m="2903980">back</span> <span m="2904330">to</span> <span m="2904440">/foo</span> <span m="2904810">itself,</span> <span m="2905230">because</span> <span m="2905470">you</span> <span m="2905515">now</span> <span m="2905560">have</span> <span m="2905740">a</span> <span m="2905830">different</span> <span m="2906160">route</span> <span m="2906410">and</span> <span m="2906740">now</span> <span m="2906890">you</span> <span m="2906950">can</span> <span m="2907140">escape,</span> <span m="2908730">so</span> <span m="2909350">this</span> <span m="2909845">is</span> <span m="2911330">perhaps</span> <span m="2911610">a</span> <span m="2911660">good</span> <span m="2911810">illustration</span> <span m="2912310">for</span> <span m="2912430">why</span> <span m="2912610">the</span> <span m="2912690">exact</span> <span m="2913180">mechanism</span> <span m="2913560">matters</span> <span m="2913840">a</span> <span m="2913890">lot.</span> <span m="2914170">It's</span> <span m="2914310">not,</span> <span m="2914450">sort</span> <span m="2914600">of,</span> <span m="2914720">the</span> <span m="2914900">intuitive</span> <span m="2915080">explanation</span> <span m="2915610">that</span> <span m="2915690">matters.</span> <span m="2916720">And</span> <span m="2917330">partly</span> <span m="2917600">as</span> <span m="2917690">a</span> <span m="2917750">result,</span> <span m="2919000">in</span> <span m="2919130">Unix</span> <span m="2920250">only</span> <span m="2920770">the</span> <span m="2921070">root</span> <span m="2921300">user</span> <span m="2921730">can</span> <span m="2921880">invoke</span> <span m="2922230">chroot,</span> <span m="2923940">because</span> <span m="2924150">otherwise</span> <span m="2924630">chroot</span> <span m="2925230">would</span> <span m="2925710">be</span> <span m="2926310">fairly</span> <span m="2926600">pointless,</span> <span m="2927460">in</span> <span m="2927870">some</span> <span m="2928070">ways.</span> </p>
<p><span m="2930210">So</span> <span m="2930450">in</span> <span m="2930580">Unix,</span> <span m="2930690">you</span> <span m="2930970">basically</span> <span m="2931250">have</span> <span m="2931400">to</span> <span m="2931480">have</span> <span m="2931710">uid</span> <span m="2931830">0</span> <span m="2932110">in</span> <span m="2932390">order</span> <span m="2932570">to</span> <span m="2933060">chroot</span> <span m="2933180">a</span> <span m="2933290">process.</span> <span m="2934830">It's</span> <span m="2935300">a</span> <span m="2935770">little</span> <span m="2936240">bit</span> <span m="2936410">of</span> <span m="2936660">a</span> <span m="2936740">disappointment</span> <span m="2937390">in</span> <span m="2937490">some</span> <span m="2937680">ways,</span> <span m="2937980">because</span> <span m="2938890">if</span> <span m="2939030">you</span> <span m="2939150">wanted</span> <span m="2939470">to</span> <span m="2939570">build</span> <span m="2939820">a</span> <span m="2939960">really</span> <span m="2940310">privileged</span> <span m="2940700">separated</span> <span m="2941140">system</span> <span m="2941540">where</span> <span m="2942160">everyone</span> <span m="2942550">had</span> <span m="2942810">just</span> <span m="2943070">the</span> <span m="2943160">minimum</span> <span m="2943440">set</span> <span m="2943580">of</span> <span m="2943660">privileges</span> <span m="2944150">necessary,</span> <span m="2945080">you</span> <span m="2945400">would</span> <span m="2945600">probably</span> <span m="2945900">need</span> <span m="2946030">to</span> <span m="2946100">use</span> <span m="2946400">chroot,</span> <span m="2946630">you</span> <span m="2946800">would</span> <span m="2946890">need</span> <span m="2947080">to</span> <span m="2947220">create</span> <span m="2947500">new</span> <span m="2947610">userids,</span> <span m="2948080">et</span> <span m="2948410">cetera,</span> <span m="2948740">but</span> <span m="2948940">in</span> <span m="2949210">order</span> <span m="2949260">to</span> <span m="2949310">do</span> <span m="2949420">that</span> <span m="2949590">in</span> <span m="2949680">Unix,</span> <span m="2950010">you</span> <span m="2950090">have</span> <span m="2950240">to</span> <span m="2950320">have</span> <span m="2950430">a</span> <span m="2950510">process</span> <span m="2950880">running</span> <span m="2951120">as</span> <span m="2951230">root,</span> <span m="2951490">which</span> <span m="2951630">has</span> <span m="2951800">lots</span> <span m="2951945">of</span> <span m="2952090">privileges.</span> <span m="2952930">So</span> <span m="2953030">it's</span> <span m="2953310">a</span> <span m="2953590">little</span> <span m="2953660">bit</span> <span m="2954630">of</span> <span m="2955020">an</span> <span m="2955100">unfortunate</span> <span m="2955570">trade</span> <span m="2955820">off,</span> <span m="2956050">but</span> <span m="2956980">it's</span> <span m="2957240">probably</span> <span m="2957540">one</span> <span m="2957820">you</span> <span m="2958040">could</span> <span m="2958270">make</span> <span m="2958450">some</span> <span m="2958560">reasonable</span> <span m="2958940">design</span> <span m="2959080">decisions</span> <span m="2959190">on.</span> <span m="2960370">Question.</span> </p>
<p><span m="2961080">AUDIENCE:</span> <span m="2961533">If</span> <span m="2961986">in</span> <span m="2962440">the</span> <span m="2962920">[INAUDIBLE]</span> <span m="2963400">directory,</span> <span m="2963880">so</span> <span m="2964360">[INAUDIBLE]</span> <span m="2964840">to</span> <span m="2965320">a</span> <span m="2965800">file</span> <span m="2966280">that's</span> <span m="2966760">in</span> <span m="2967240">[INAUDIBLE].</span> </p>
<p><span m="2968200">PROFESSOR: No,</span> <span m="2968680">actually,</span> <span m="2969880">unless</span> <span m="2970230">you</span> <span m="2970330">do</span> <span m="2970480">this</span> <span m="2970750">trick,</span> <span m="2971420">the</span> <span m="2971590">kernel</span> <span m="2972470">evaluates</span> <span m="2972840">symlinks</span> <span m="2974000">in</span> <span m="2974270">your</span> <span m="2974880">root</span> <span m="2975280">context,</span> <span m="2976180">if</span> <span m="2976210">you</span> <span m="2976320">will.</span> <span m="2976800">So</span> <span m="2976960">if</span> <span m="2977070">you</span> <span m="2977500">have</span> <span m="2977520">a</span> <span m="2977540">symlink</span> <span m="2977980">to</span> <span m="2978060">/etc/password,</span> <span m="2979300">it'll</span> <span m="2979550">evaluate</span> <span m="2980040">as</span> <span m="2980220">if</span> <span m="2980425">it</span> <span m="2980630">is</span> <span m="2980920">similar</span> <span m="2980980">to</span> <span m="2981040">/foo/etc/password.</span> </p>
<p><span m="2981520">AUDIENCE:</span> <span m="2981670">[INAUDIBLE].</span> </p>
<p><span m="2983012">PROFESSOR:  A</span> <span m="2983470">hard</span> <span m="2983675">link</span> <span m="2983880">would</span> <span m="2984400">not</span> <span m="2984710">be</span> <span m="2985180">protected.</span> <span m="2985970">Yeah.</span> <span m="2986650">So</span> <span m="2987270">one</span> <span m="2987310">way</span> <span m="2987570">to</span> <span m="2987790">set</span> <span m="2987915">up</span> <span m="2988040">a</span> <span m="2988090">chroot</span> <span m="2988350">environment</span> <span m="2988870">without</span> <span m="2989300">creating</span> <span m="2989700">lots</span> <span m="2989885">of</span> <span m="2990070">copies</span> <span m="2990430">of</span> <span m="2990540">files</span> <span m="2990840">is</span> <span m="2991140">to,</span> <span m="2991290">in</span> <span m="2991400">fact,</span> <span m="2991790">create</span> <span m="2992010">a</span> <span m="2992060">directory</span> <span m="2992410">and</span> <span m="2992510">hard</span> <span m="2992690">link</span> <span m="2992870">all</span> <span m="2993040">these</span> <span m="2993190">things</span> <span m="2993410">back.</span> <span m="2994420">That's</span> <span m="2994600">fairly</span> <span m="2994890">cheap</span> <span m="2995590">and</span> <span m="2995720">then</span> <span m="2996020">use</span> <span m="2997390">it.</span> </p>
<p><span m="2998335">AUDIENCE: If a</span> <span m="2998790">program</span> <span m="2998978">gradually</span> <span m="2999166">generates</span> <span m="2999542">inodes</span> <span m="2999920">and,</span> <span m="3000240">like,</span> <span m="3000550">actually</span> <span m="3000860">not</span> <span m="3001282">to</span> <span m="3001704">give</span> <span m="3002126">you</span> <span m="3002548">the</span> <span m="3002688">file</span> <span m="3002829">descriptor--</span> </p>
<p><span m="3003430">PROFESSOR: Right.</span> <span m="3003890">So</span> <span m="3004060">it's</span> <span m="3004670">like</span> <span m="3004860">a</span> <span m="3005290">huge</span> <span m="3005710">important</span> <span m="3006500">detail</span> <span m="3006840">here,</span> <span m="3007140">is</span> <span m="3007490">you</span> <span m="3007570">can</span> <span m="3007680">only</span> <span m="3007980">access</span> <span m="3008270">a</span> <span m="3008350">file</span> <span m="3008730">by</span> <span m="3009116">path</span> <span m="3009502">name,</span> <span m="3009890">not</span> <span m="3010300">by</span> <span m="3010760">saying,</span> <span m="3011150">I</span> <span m="3011250">want</span> <span m="3011350">to</span> <span m="3011450">open</span> <span m="3011610">inode</span> <span m="3011940">number</span> <span m="3012320">23.</span> <span m="3013340">This</span> <span m="3013460">might</span> <span m="3013690">be</span> <span m="3013930">some</span> <span m="3014240">weird</span> <span m="3014500">file</span> <span m="3014950">out</span> <span m="3015055">there</span> <span m="3015160">outside</span> <span m="3015520">of</span> <span m="3015585">my</span> <span m="3015650">chroot.</span> <span m="3016290">So</span> <span m="3016610">in</span> <span m="3016790">Unix</span> <span m="3016970">you</span> <span m="3017060">cannot</span> <span m="3017430">open</span> <span m="3017720">an</span> <span m="3017910">inode</span> <span m="3018010">by</span> <span m="3018990">inode</span> <span m="3019610">number</span> <span m="3020540">unless</span> <span m="3020820">you're</span> <span m="3021150">root,</span> <span m="3021641">of</span> <span m="3022132">course.</span> <span m="3024590">Other</span> <span m="3024700">questions?</span> </p>
<p><span m="3027240">All</span> <span m="3027310">right.</span> <span m="3027560">So</span> <span m="3027840">I</span> <span m="3027866">think</span> <span m="3027893">we</span> <span m="3027920">have</span> <span m="3028130">sort</span> <span m="3028245">of</span> <span m="3028360">enough</span> <span m="3028540">machinery</span> <span m="3029030">now</span> <span m="3029240">to</span> <span m="3029350">see</span> <span m="3029740">what</span> <span m="3030360">these</span> <span m="3030880">OKWS</span> <span m="3031480">guys</span> <span m="3031810">do,</span> <span m="3032600">and</span> <span m="3033900">probably</span> <span m="3034170">a</span> <span m="3034440">useful,</span> <span m="3035070">quick</span> <span m="3035780">introduction</span> <span m="3036370">is</span> <span m="3036910">by</span> <span m="3037900">contrast</span> <span m="3038500">to</span> <span m="3038620">what</span> <span m="3038830">everyone</span> <span m="3039120">else</span> <span m="3039300">does.</span> <span m="3040100">So</span> <span m="3040270">what</span> <span m="3040500">is</span> <span m="3040680">it</span> <span m="3040830">that</span> <span m="3041480">everyone</span> <span m="3041810">else</span> <span m="3042440">is</span> <span m="3042600">doing</span> <span m="3042810">that</span> <span m="3042940">the</span> <span m="3043240">OKWS</span> <span m="3044110">guys</span> <span m="3044390">are</span> <span m="3044540">afraid</span> <span m="3044920">of?</span> <span m="3045540">So</span> <span m="3046070">the</span> <span m="3046180">alternative</span> <span m="3046500">design</span> <span m="3047200">that</span> <span m="3047630">pretty</span> <span m="3047726">much</span> <span m="3047823">every</span> <span m="3047920">web</span> <span m="3048270">server</span> <span m="3048490">follows,</span> <span m="3049270">is</span> <span m="3049380">like</span> <span m="3049520">the</span> <span m="3049810">unprivileged</span> <span m="3050080">separating</span> <span m="3050730">picture</span> <span m="3051180">above</span> <span m="3051470">there,</span> <span m="3051900">so</span> <span m="3052150">you</span> <span m="3052280">might</span> <span m="3052480">have</span> <span m="3053150">web</span> <span m="3053410">browsers</span> <span m="3054100">out</span> <span m="3054330">there</span> <span m="3054900">on</span> <span m="3055060">the</span> <span m="3055130">internet,</span> <span m="3056620">these</span> <span m="3056900">guys</span> <span m="3057260">are</span> <span m="3057380">going</span> <span m="3057480">to</span> <span m="3057560">connect</span> <span m="3057830">to</span> <span m="3057890">your</span> <span m="3058070">server</span> <span m="3059020">and,</span> <span m="3059390">inside</span> <span m="3059800">of</span> <span m="3059910">your</span> <span m="3060090">server,</span> <span m="3061110">you're</span> <span m="3061220">basically</span> <span m="3061540">going</span> <span m="3061660">to</span> <span m="3061720">have,</span> <span m="3062750">basically</span> <span m="3063230">one</span> <span m="3063440">process,</span> <span m="3063790">httpd,</span> <span m="3065840">well,</span> <span m="3066480">Apache,</span> <span m="3066920">let's</span> <span m="3067130">say.</span> </p>
<p><span m="3069050">And</span> <span m="3069590">this</span> <span m="3069790">is</span> <span m="3069980">one</span> <span m="3070300">process</span> <span m="3070780">running</span> <span m="3071220">as</span> <span m="3071400">a</span> <span m="3071450">single</span> <span m="3071780">userid</span> <span m="3072740">called</span> <span m="3073000">www</span> <span m="3073473">in</span> <span m="3073946">/etc/password.</span> <span m="3074940">It</span> <span m="3075250">takes</span> <span m="3075640">all</span> <span m="3075800">your</span> <span m="3075890">connections,</span> <span m="3077090">does</span> <span m="3077290">everything</span> <span m="3077850">with</span> <span m="3078000">your</span> <span m="3078270">process,</span> <span m="3078750">including</span> <span m="3079300">doing</span> <span m="3079640">SSL</span> <span m="3080020">processing</span> <span m="3080500">maybe,</span> <span m="3081420">including</span> <span m="3081900">running</span> <span m="3082800">application</span> <span m="3083320">code</span> <span m="3083610">and</span> <span m="3083740">PHP,</span> <span m="3084160">et</span> <span m="3084580">cetera,</span> <span m="3085900">all</span> <span m="3086140">part</span> <span m="3086340">of</span> <span m="3086420">the</span> <span m="3086500">same</span> <span m="3086710">process.</span> <span m="3087760">And</span> <span m="3088630">if</span> <span m="3088780">need</span> <span m="3088990">be,</span> <span m="3089120">this</span> <span m="3089320">process</span> <span m="3089870">will</span> <span m="3090060">typically</span> <span m="3090360">connect</span> <span m="3090670">back</span> <span m="3091380">to</span> <span m="3091610">some</span> <span m="3091800">database</span> <span m="3092210">server,</span> <span m="3093490">maybe</span> <span m="3094240">MySQL</span> <span m="3095740">could</span> <span m="3095890">be</span> <span m="3095990">running</span> <span m="3096240">on</span> <span m="3096280">the</span> <span m="3096320">same</span> <span m="3096520">machine,</span> <span m="3096870">could</span> <span m="3096990">be</span> <span m="3097110">running</span> <span m="3097230">elsewhere.</span> <span m="3098640">And</span> <span m="3099000">this</span> <span m="3099130">MySQL</span> <span m="3099630">process</span> <span m="3101080">actually</span> <span m="3101510">writes</span> <span m="3101750">data</span> <span m="3101980">to</span> <span m="3102060">disk.</span> <span m="3103240">But</span> <span m="3104000">to</span> <span m="3104190">connect</span> <span m="3104470">to</span> <span m="3104560">this</span> <span m="3104650">MySQL,</span> <span m="3105220">you</span> <span m="3105300">probably</span> <span m="3105530">have</span> <span m="3105730">to</span> <span m="3105940">provide</span> <span m="3106045">a</span> <span m="3106150">username</span> <span m="3106520">and</span> <span m="3106610">password</span> <span m="3107050">but,</span> <span m="3107200">typically,</span> <span m="3108480">the</span> <span m="3108660">way</span> <span m="3110280">applications</span> <span m="3110960">are</span> <span m="3111070">written</span> <span m="3111600">or,</span> <span m="3111820">at</span> <span m="3112180">least,</span> <span m="3112420">not</span> <span m="3112750">very</span> <span m="3112930">security</span> <span m="3113280">conscious</span> <span m="3113590">applications</span> <span m="3114450">are</span> <span m="3114600">written,</span> <span m="3114875">is</span> <span m="3115150">that</span> <span m="3115250">there's</span> <span m="3115460">a</span> <span m="3115520">single</span> <span m="3115970">account</span> <span m="3116265">on</span> <span m="3116560">the</span> <span m="3116770">MySQL</span> <span m="3117280">server</span> <span m="3117630">that</span> <span m="3117980">the</span> <span m="3118460">application</span> <span m="3119070">knows</span> <span m="3119270">the</span> <span m="3119390">username</span> <span m="3119680">and</span> <span m="3119870">password</span> <span m="3120240">for,</span> <span m="3120530">so</span> <span m="3120820">you</span> <span m="3120990">just</span> <span m="3121160">connect</span> <span m="3121345">and</span> <span m="3121530">you</span> <span m="3121600">have</span> <span m="3121750">access</span> <span m="3122020">to</span> <span m="3122110">all</span> <span m="3122270">of</span> <span m="3122350">your</span> <span m="3122470">data.</span> </p>
<p><span m="3122830">So</span> <span m="3123145">it's</span> <span m="3123560">super</span> <span m="3123900">convenient</span> <span m="3124380">to</span> <span m="3124525">write,</span> <span m="3124670">because</span> <span m="3124860">you</span> <span m="3124940">just</span> <span m="3125550">write</span> <span m="3125790">whatever</span> <span m="3126090">code</span> <span m="3126270">you</span> <span m="3126370">want.</span> <span m="3127340">You</span> <span m="3127360">can</span> <span m="3127470">access</span> <span m="3127710">whatever</span> <span m="3127970">data</span> <span m="3128170">in</span> <span m="3128260">the</span> <span m="3128330">database</span> <span m="3128680">you</span> <span m="3128760">want.</span> <span m="3129540">There's</span> <span m="3129710">no</span> <span m="3129860">real</span> <span m="3130160">isolation,</span> <span m="3131030">but</span> <span m="3131760">it</span> <span m="3131870">has</span> <span m="3132180">security</span> <span m="3132550">problems</span> <span m="3132870">that</span> <span m="3132950">these</span> <span m="3133110">guys</span> <span m="3133300">worry</span> <span m="3133540">about,</span> <span m="3134410">namely</span> <span m="3134840">if</span> <span m="3134960">there's</span> <span m="3135160">bugs</span> <span m="3136090">in</span> <span m="3136200">Apache,</span> <span m="3136595">maybe</span> <span m="3136990">in</span> <span m="3137330">SSL,</span> <span m="3138190">maybe</span> <span m="3138450">in</span> <span m="3138560">the</span> <span m="3138630">application</span> <span m="3138895">code</span> <span m="3139160">or</span> <span m="3139510">in</span> <span m="3139600">the</span> <span m="3139810">PHP</span> <span m="3140120">interpreter,</span> <span m="3141010">then</span> <span m="3143000">inevitably</span> <span m="3143600">the</span> <span m="3143730">answer</span> <span m="3144080">is,</span> <span m="3144170">if</span> <span m="3144280">there's</span> <span m="3144450">a</span> <span m="3144500">bug</span> <span m="3144860">and</span> <span m="3145220">you</span> <span m="3145310">can</span> <span m="3145400">exploit</span> <span m="3145790">it,</span> <span m="3145940">then,</span> <span m="3146310">yep,</span> <span m="3146550">you</span> <span m="3146650">get</span> <span m="3146880">the</span> <span m="3146950">whole</span> <span m="3148090">application</span> <span m="3149200">data</span> <span m="3149450">contents.</span> <span m="3150470">Does</span> <span m="3150830">that</span> <span m="3150950">make</span> <span m="3151080">sense?</span> <span m="3151700">You</span> <span m="3152055">had</span> <span m="3152410">some</span> <span m="3152520">questions</span> <span m="3153200">before.</span> <span m="3154845">No?</span> </p>
<p><span m="3155540">AUDIENCE: Oh.</span> <span m="3156040">Uh,</span> <span m="3156405">yeah,</span> <span m="3156587">it's</span> <span m="3156770">fine.</span> <span m="3156936">Thank</span> <span m="3157103">you.</span> </p>
<p><span m="3157270">PROFESSOR: All right.</span> <span m="3157650">No</span> <span m="3157898">worries.</span> <span m="3159140">OK.</span> <span m="3159830">So</span> <span m="3160190">this</span> <span m="3160440">is</span> <span m="3160690">sort</span> <span m="3160820">of</span> <span m="3160890">state</span> <span m="3161210">of</span> <span m="3161310">art</span> <span m="3161650">what</span> <span m="3161740">these</span> <span m="3161930">guys</span> <span m="3162210">really</span> <span m="3162390">wanted</span> <span m="3162570">to</span> <span m="3162720">protect</span> <span m="3162990">against.</span> <span m="3163470">And</span> <span m="3165070">in</span> <span m="3165180">their</span> <span m="3165360">case,</span> <span m="3166255">I</span> <span m="3166630">guess</span> <span m="3166790">they</span> <span m="3166960">worried</span> <span m="3167320">a</span> <span m="3167370">lot</span> <span m="3167630">because</span> <span m="3167870">they</span> <span m="3168440">were</span> <span m="3168580">thinking,</span> <span m="3168990">well,</span> <span m="3169160">they're</span> <span m="3169280">building</span> <span m="3169680">basically</span> <span m="3169970">a</span> <span m="3170260">dating</span> <span m="3170470">website,</span> <span m="3170840">okcupid.com</span> <span m="3172300">and</span> <span m="3172420">they</span> <span m="3172480">really</span> <span m="3172740">wanted</span> <span m="3173020">to</span> <span m="3173080">make</span> <span m="3173260">sure</span> <span m="3173680">their,</span> <span m="3174680">I</span> <span m="3174700">guess</span> <span m="3174870">reputation,</span> <span m="3175450">wouldn't</span> <span m="3175710">be</span> <span m="3175800">damaged</span> <span m="3176380">by</span> <span m="3176620">these</span> <span m="3177210">data</span> <span m="3177420">disclosures.</span> </p>
<p><span m="3178520">So</span> <span m="3180590">in</span> <span m="3180700">fact,</span> <span m="3181010">I</span> <span m="3181260">guess--</span> <span m="3182460">from</span> <span m="3182860">talking</span> <span m="3183200">to</span> <span m="3183515">the</span> <span m="3183830">guy</span> <span m="3184125">that</span> <span m="3184420">wrote</span> <span m="3184640">this</span> <span m="3184765">paper,</span> <span m="3184890">it</span> <span m="3185250">seems</span> <span m="3185440">like</span> <span m="3185610">they</span> <span m="3185840">actually</span> <span m="3186040">haven't</span> <span m="3186430">been</span> <span m="3186580">compromised--</span> <span m="3187350">or,</span> <span m="3187805">at</span> <span m="3188260">least,</span> <span m="3188670">not</span> <span m="3188795">that</span> <span m="3188920">they</span> <span m="3189420">know</span> <span m="3189910">of--</span> <span m="3190570">or</span> <span m="3190950">their</span> <span m="3191170">data</span> <span m="3191580">wasn't</span> <span m="3191940">leaked.</span> <span m="3193610">And</span> <span m="3193985">it</span> <span m="3194360">seems</span> <span m="3194470">to</span> <span m="3194790">be partly</span> <span m="3195120">as</span> <span m="3195230">a</span> <span m="3195270">result</span> <span m="3195680">of</span> <span m="3195810">running</span> <span m="3196210">OKWS,</span> <span m="3197180">partly</span> <span m="3197590">as</span> <span m="3197870">a</span> <span m="3197910">result</span> <span m="3198180">of</span> <span m="3198250">maybe</span> <span m="3198470">more</span> <span m="3198690">proactive</span> <span m="3199110">monitoring</span> <span m="3199520">that</span> <span m="3199635">they</span> <span m="3199750">do,</span> <span m="3199850">et</span> <span m="3199970">cetera,</span> <span m="3201320">but</span> <span m="3201750">it</span> <span m="3201830">seems</span> <span m="3202110">to</span> <span m="3202160">have</span> <span m="3202210">worked</span> <span m="3202375">out</span> <span m="3202540">reasonably</span> <span m="3202870">well</span> <span m="3203080">for</span> <span m="3203230">them,</span> <span m="3204970">to</span> <span m="3205040">some</span> <span m="3205180">extent,</span> <span m="3205440">I</span> <span m="3205480">guess,</span> <span m="3205740">because</span> <span m="3205980">of</span> <span m="3206065">this</span> <span m="3206150">architecture</span> <span m="3206600">that</span> <span m="3207036">we</span> <span m="3207472">have.</span> </p>
<p><span m="3208780">OK.</span> <span m="3209220">So</span> <span m="3209600">the</span> <span m="3209770">reason</span> <span m="3210630">that</span> <span m="3212480">people,</span> <span m="3212940">I</span> <span m="3213000">guess,</span> <span m="3213190">don't</span> <span m="3213890">break</span> <span m="3214310">up</span> <span m="3214510">their</span> <span m="3214660">applications</span> <span m="3215310">into</span> <span m="3216000">smaller</span> <span m="3216370">components</span> <span m="3217190">is</span> <span m="3217310">because</span> <span m="3217410">it</span> <span m="3217510">actually</span> <span m="3217730">takes</span> <span m="3218010">quite</span> <span m="3218190">a</span> <span m="3218230">bit</span> <span m="3218340">of</span> <span m="3218430">effort</span> <span m="3218800">to</span> <span m="3219240">separate</span> <span m="3219640">out</span> <span m="3220120">all</span> <span m="3220350">their</span> <span m="3220580">pieces</span> <span m="3220820">of</span> <span m="3220940">code</span> <span m="3221240">and</span> <span m="3221330">define</span> <span m="3221840">clean</span> <span m="3222090">interfaces</span> <span m="3222580">between</span> <span m="3222930">them,</span> <span m="3223540">decide</span> <span m="3223960">which</span> <span m="3224230">data</span> <span m="3224690">every</span> <span m="3224950">component</span> <span m="3225215">should</span> <span m="3225480">have</span> <span m="3225580">access</span> <span m="3225970">to,</span> <span m="3226980">or</span> <span m="3227110">if</span> <span m="3227180">you</span> <span m="3227250">decide</span> <span m="3227530">to</span> <span m="3227580">implement</span> <span m="3227930">new</span> <span m="3228070">feature,</span> <span m="3228500">you're</span> <span m="3228620">going</span> <span m="3228710">to</span> <span m="3228750">have</span> <span m="3228880">to</span> <span m="3229010">change</span> <span m="3229980">the</span> <span m="3230140">data</span> <span m="3230380">that</span> <span m="3230500">every</span> <span m="3230750">component</span> <span m="3231110">has</span> <span m="3231240">access</span> <span m="3231560">to</span> <span m="3232170">give</span> <span m="3232420">it</span> <span m="3232620">new</span> <span m="3232970">privileges</span> <span m="3233150">or</span> <span m="3233490">take</span> <span m="3233750">some</span> <span m="3233880">away,</span> <span m="3234040">et</span> <span m="3234190">cetera.</span> <span m="3234940">So</span> <span m="3235280">it's</span> <span m="3235380">a</span> <span m="3235680">bit</span> <span m="3235920">of</span> <span m="3236300">some</span> <span m="3236700">overhead</span> <span m="3236910">for</span> <span m="3238850">separating</span> <span m="3239280">application,</span> <span m="3240350">but</span> <span m="3241110">in</span> <span m="3241330">their</span> <span m="3241430">case</span> <span m="3241800">I</span> <span m="3241850">guess</span> <span m="3242060">they</span> <span m="3242100">decided</span> <span m="3242480">it</span> <span m="3242860">was</span> <span m="3243240">worth</span> <span m="3243630">the</span> <span m="3244520">effort.</span> </p>
<p><span m="3245890">Let's</span> <span m="3246430">try</span> <span m="3246600">to</span> <span m="3246670">understand</span> <span m="3247080">how</span> <span m="3247430">their</span> <span m="3248110">web</span> <span m="3248320">server</span> <span m="3248750">design</span> <span m="3249530">works,</span> <span m="3250540">and</span> <span m="3250800">perhaps</span> <span m="3250990">one</span> <span m="3251320">way</span> <span m="3251530">to</span> <span m="3251720">do</span> <span m="3251940">it</span> <span m="3252520">is</span> <span m="3252960">to</span> <span m="3253500">trace</span> <span m="3254110">out</span> <span m="3254520">roughly</span> <span m="3254980">how</span> <span m="3255620">http</span> <span m="3255970">request</span> <span m="3258490">gets</span> <span m="3258780">processed</span> <span m="3259940">by</span> <span m="3260350">an</span> <span m="3260660">OKWS</span> <span m="3261050">server.</span> <span m="3262700">So,</span> <span m="3262880">similarly</span> <span m="3263370">to</span> <span m="3263600">that</span> <span m="3263830">picture,</span> <span m="3264050">there's</span> <span m="3264400">probably</span> <span m="3264690">a</span> <span m="3264750">web</span> <span m="3264910">browser</span> <span m="3265290">out</span> <span m="3265435">there</span> <span m="3265580">somewhere</span> <span m="3266290">that</span> <span m="3266680">wants</span> <span m="3267000">to</span> <span m="3267470">go</span> <span m="3267660">to</span> <span m="3267880">okcupid.com,</span> <span m="3269620">and</span> <span m="3270700">in</span> <span m="3270820">their</span> <span m="3271000">design</span> <span m="3271520">they</span> <span m="3271530">sort</span> <span m="3271660">of</span> <span m="3271750">imagined</span> <span m="3272220">they're</span> <span m="3272350">going</span> <span m="3272450">to</span> <span m="3272490">have</span> <span m="3272680">a</span> <span m="3272730">bunch</span> <span m="3272990">of</span> <span m="3273080">machines,</span> <span m="3273530">but</span> <span m="3273660">we'll</span> <span m="3273800">just</span> <span m="3273960">look</span> <span m="3274120">at</span> <span m="3274560">probably</span> <span m="3274760">just</span> <span m="3275040">one</span> <span m="3275820">front-end</span> <span m="3276260">machine</span> <span m="3276740">that</span> <span m="3277160">is</span> <span m="3277340">going</span> <span m="3277470">to</span> <span m="3277520">be</span> <span m="3277650">running</span> <span m="3277950">OKWS</span> <span m="3278570">here</span> <span m="3279400">and</span> <span m="3279580">then</span> <span m="3279910">another</span> <span m="3280230">machine</span> <span m="3281310">behind</span> <span m="3281880">the</span> <span m="3281970">scenes</span> <span m="3282730">that's</span> <span m="3282900">going</span> <span m="3283020">to</span> <span m="3283080">be</span> <span m="3283180">storing</span> <span m="3283610">the</span> <span m="3283720">database</span> <span m="3284260">somewhere.</span> <span m="3285200">And</span> <span m="3286130">I</span> <span m="3286210">sort</span> <span m="3286400">of</span> <span m="3286420">imagine</span> <span m="3286780">they're</span> <span m="3286910">probably</span> <span m="3287170">also</span> <span m="3287440">using</span> <span m="3287820">MySQL,</span> <span m="3288410">because</span> <span m="3288710">it's</span> <span m="3289880">a</span> <span m="3290180">nice</span> <span m="3290470">piece</span> <span m="3290535">of</span> <span m="3290600">software</span> <span m="3290940">in</span> <span m="3291000">many</span> <span m="3291200">ways.</span> <span m="3291960">They</span> <span m="3292140">don't</span> <span m="3292300">want</span> <span m="3292430">to</span> <span m="3292510">re-implement</span> <span m="3292990">this</span> <span m="3293380">functionality,</span> <span m="3294210">but</span> <span m="3294330">they</span> <span m="3294380">want</span> <span m="3294500">to</span> <span m="3294560">really</span> <span m="3294880">protect</span> <span m="3295420">this</span> <span m="3295630">data,</span> <span m="3296540">so</span> <span m="3296780">that</span> <span m="3297020">it's</span> <span m="3297270">really</span> <span m="3297550">hard</span> <span m="3297830">to</span> <span m="3297900">get</span> <span m="3298190">to</span> <span m="3298260">the</span> <span m="3298400">raw</span> <span m="3298690">disk</span> <span m="3299040">or</span> <span m="3299210">the</span> <span m="3299295">raw</span> <span m="3299380">database.</span> </p>
<p><span m="3301290">So</span> <span m="3301360">how</span> <span m="3301430">does</span> <span m="3301500">a</span> <span m="3301570">request</span> <span m="3301880">work,</span> <span m="3302270">or</span> <span m="3302420">how</span> <span m="3302590">does</span> <span m="3302690">a</span> <span m="3303090">request</span> <span m="3303390">get</span> <span m="3303530">handled</span> <span m="3303950">by</span> <span m="3304255">OKWS?</span> <span m="3305400">Well,</span> <span m="3305860">the</span> <span m="3305990">request</span> <span m="3306420">first</span> <span m="3306860">comes</span> <span m="3307220">in</span> <span m="3307540">and</span> <span m="3307760">gets</span> <span m="3307960">handled</span> <span m="3308990">by</span> <span m="3309190">this</span> <span m="3309450">process</span> <span m="3310010">they</span> <span m="3310120">call</span> <span m="3310570">okd</span> <span m="3311680">for</span> <span m="3312060">the</span> <span m="3312660">OKWS</span> <span m="3313730">dispatcher.</span> <span m="3314870">So</span> <span m="3315260">those</span> <span m="3315650">guys</span> <span m="3315900">look</span> <span m="3316010">at</span> <span m="3316360">what</span> <span m="3316700">the</span> <span m="3317135">request</span> <span m="3317570">is</span> <span m="3317710">asking</span> <span m="3318110">for</span> <span m="3319120">and</span> <span m="3320400">then</span> <span m="3320530">actually</span> <span m="3320710">does</span> <span m="3320870">a</span> <span m="3320990">couple</span> <span m="3321390">things.</span> <span m="3321690">So</span> <span m="3321790">first</span> <span m="3323020">it</span> <span m="3323170">might</span> <span m="3323530">need</span> <span m="3323720">to</span> <span m="3323800">log</span> <span m="3324280">the</span> <span m="3324380">request,</span> <span m="3325380">so</span> <span m="3325580">it</span> <span m="3325920">forwards</span> <span m="3326270">it</span> <span m="3326380">to</span> <span m="3326440">this</span> <span m="3326590">component</span> <span m="3327050">called</span> <span m="3327290">oklogd,</span> <span m="3330680">then</span> <span m="3331740">it</span> <span m="3331890">might</span> <span m="3332100">need</span> <span m="3332330">to</span> <span m="3332660">generate</span> <span m="3333130">some</span> <span m="3333320">templates,</span> <span m="3334590">maybe</span> <span m="3334730">before</span> <span m="3335040">the</span> <span m="3335160">request</span> <span m="3335480">came</span> <span m="3335710">in</span> <span m="3335930">even.</span> <span m="3337020">And</span> <span m="3337260">this</span> <span m="3337470">is</span> <span m="3337930">handled</span> <span m="3338310">by</span> <span m="3338550">another</span> <span m="3338820">component</span> <span m="3340060">called</span> <span m="3340380">pubd.</span> </p>
<p><span m="3342670">And</span> <span m="3342950">finally,</span> <span m="3343600">there's</span> <span m="3343920">a</span> <span m="3344150">particular</span> <span m="3344620">service</span> <span m="3345390">that</span> <span m="3345740">this</span> <span m="3346160">request</span> <span m="3347130">is</span> <span m="3347480">being</span> <span m="3347720">sent</span> <span m="3348080">to,</span> <span m="3348580">so</span> <span m="3348830">okd</span> <span m="3349160">has</span> <span m="3349370">a</span> <span m="3349530">table</span> <span m="3349880">of</span> <span m="3349935">a</span> <span m="3349990">bunch</span> <span m="3350210">of</span> <span m="3350310">services</span> <span m="3350780">it</span> <span m="3350900">supports.</span> <span m="3351740">This</span> <span m="3351840">request</span> <span m="3352250">is</span> <span m="3352360">presumably</span> <span m="3352700">going</span> <span m="3352910">to</span> <span m="3352990">one</span> <span m="3353160">of</span> <span m="3353290">them,</span> <span m="3354110">and,</span> <span m="3354810">as</span> <span m="3354900">a</span> <span m="3354950">result,</span> <span m="3355270">okd</span> <span m="3355640">will</span> <span m="3355830">forward</span> <span m="3356850">this</span> <span m="3357050">request</span> <span m="3358260">to</span> <span m="3358850">a</span> <span m="3359140">particular</span> <span m="3360090">service</span> <span m="3360510">process.</span> <span m="3361890">And</span> <span m="3362010">the</span> <span m="3362080">job</span> <span m="3362270">of</span> <span m="3362360">the</span> <span m="3362460">service</span> <span m="3362800">is</span> <span m="3362970">to</span> <span m="3363140">actually</span> <span m="3363460">do</span> <span m="3363740">something</span> <span m="3364300">with</span> <span m="3364410">this</span> <span m="3364550">request,</span> <span m="3365030">like</span> <span m="3365240">subscribe</span> <span m="3365910">the</span> <span m="3366000">guy</span> <span m="3366126">to</span> <span m="3366253">a</span> <span m="3366380">newsletter</span> <span m="3367420">or</span> <span m="3367870">to</span> <span m="3368040">match</span> <span m="3368345">him</span> <span m="3368910">to</span> <span m="3369580">whoever</span> <span m="3369970">else</span> <span m="3370350">is</span> <span m="3370480">using</span> <span m="3370820">OkCupid,</span> <span m="3371610">using</span> <span m="3371870">the</span> <span m="3371950">database.</span> </p>
<p><span m="3374430">And</span> <span m="3374880">in</span> <span m="3374990">order</span> <span m="3375130">to</span> <span m="3375170">do</span> <span m="3375290">this,</span> <span m="3375720">the</span> <span m="3375850">service</span> <span m="3376800">presumably</span> <span m="3377830">might</span> <span m="3378060">need</span> <span m="3378240">to</span> <span m="3378850">log</span> <span m="3379830">some</span> <span m="3380040">information</span> <span m="3380450">about</span> <span m="3380670">the</span> <span m="3380740">request</span> <span m="3381120">as</span> <span m="3381230">well</span> <span m="3381470">by</span> <span m="3381590">talking</span> <span m="3381920">to</span> <span m="3381990">this</span> <span m="3382670">oklogd</span> <span m="3383310">component.</span> <span m="3384350">And</span> <span m="3384730">at</span> <span m="3385110">the</span> <span m="3385530">end</span> <span m="3386030">of</span> <span m="3386190">the</span> <span m="3386470">day</span> <span m="3386750">it's</span> <span m="3386920">got</span> <span m="3386940">to</span> <span m="3386960">talk</span> <span m="3387160">to</span> <span m="3387230">this</span> <span m="3387400">database.</span> <span m="3388420">So</span> <span m="3388730">the</span> <span m="3388795">way</span> <span m="3388860">these</span> <span m="3389200">this</span> <span m="3389390">guys</span> <span m="3389660">actually</span> <span m="3389740">implement</span> <span m="3390340">talking</span> <span m="3390600">to</span> <span m="3390650">the</span> <span m="3390740">database</span> <span m="3391770">is</span> <span m="3392020">that,</span> <span m="3392700">unlike</span> <span m="3392770">that</span> <span m="3393050">Apache</span> <span m="3393410">picture</span> <span m="3394070">where</span> <span m="3394260">you</span> <span m="3394330">just</span> <span m="3394850">talk</span> <span m="3395060">to</span> <span m="3395140">the</span> <span m="3395220">database</span> <span m="3395620">and issue</span> <span m="3395880">arbitrary</span> <span m="3396360">SQL</span> <span m="3396760">queries,</span> <span m="3397890">these</span> <span m="3398130">guys</span> <span m="3398770">come</span> <span m="3398950">up</span> <span m="3399030">with</span> <span m="3399110">this</span> <span m="3399270">notion</span> <span m="3399600">of</span> <span m="3399710">a</span> <span m="3399920">database</span> <span m="3400430">proxy</span> <span m="3404390">that</span> <span m="3405480">sits</span> <span m="3405780">in</span> <span m="3405960">front</span> <span m="3406340">of</span> <span m="3406450">the</span> <span m="3406550">MySQL</span> <span m="3407150">database</span> <span m="3408120">and</span> <span m="3408300">accepts</span> <span m="3408790">requests</span> <span m="3410140">from</span> <span m="3411160">the</span> <span m="3411310">service</span> <span m="3412280">to</span> <span m="3412540">do</span> <span m="3412740">some</span> <span m="3412930">queries,</span> <span m="3414220">and</span> <span m="3416100">I</span> <span m="3416160">think</span> <span m="3416290">that's</span> <span m="3416470">most</span> <span m="3416780">of</span> <span m="3416840">the</span> <span m="3416940">picture</span> <span m="3417400">for</span> <span m="3418370">OKWS.</span> </p>
<p><span m="3420220">There's</span> <span m="3420390">another</span> <span m="3420990">component</span> <span m="3422170">in</span> <span m="3422290">this</span> <span m="3422430">whole</span> <span m="3422640">picture</span> <span m="3423620">that</span> <span m="3426040">sparks</span> <span m="3426620">this</span> <span m="3426790">whole</span> <span m="3427040">mess,</span> <span m="3427500">so</span> <span m="3427630">they</span> <span m="3427770">have</span> <span m="3428030">another</span> <span m="3428820">component</span> <span m="3429520">called</span> <span m="3429900">okld,</span> <span m="3430850">for</span> <span m="3431220">the</span> <span m="3431410">ok</span> <span m="3432420">launcher</span> <span m="3432810">demon,</span> <span m="3433800">and</span> <span m="3434600">this</span> <span m="3434750">guy</span> <span m="3434950">is</span> <span m="3434970">responsible</span> <span m="3435480">for</span> <span m="3435650">starting</span> <span m="3436170">all</span> <span m="3436350">these</span> <span m="3436580">processes</span> <span m="3437720">on</span> <span m="3437880">this</span> <span m="3438090">front</span> <span m="3438450">end</span> <span m="3439260">web</span> <span m="3439440">server</span> <span m="3439730">machine.</span> <span m="3441660">Hopefully</span> <span m="3441990">some</span> <span m="3442070">of</span> <span m="3442310">these</span> <span m="3442530">things</span> <span m="3442560">actually</span> <span m="3442700">look</span> <span m="3442820">familiar,</span> <span m="3443140">because</span> <span m="3443360">this</span> <span m="3443435">is</span> <span m="3443510">exactly</span> <span m="3444010">the</span> <span m="3444090">architecture</span> <span m="3444495">of</span> <span m="3444900">[INAUDIBLE]</span> <span m="3445740">for</span> <span m="3445880">your</span> <span m="3446020">lab</span> <span m="3446330">assignment,</span> <span m="3447062">so</span> <span m="3447430">this</span> <span m="3447620">is</span> <span m="3447810">basically</span> <span m="3448170">what</span> <span m="3449290">our</span> <span m="3449450">design</span> <span m="3449770">is</span> <span m="3449860">all</span> <span m="3449980">based</span> <span m="3450260">on.</span> <span m="3450905">It</span> <span m="3451230">seems</span> <span m="3451490">like</span> <span m="3451610">a</span> <span m="3451650">nice</span> <span m="3451800">design,</span> <span m="3452080">actually.</span> <span m="3453410">Well,</span> <span m="3453580">we</span> <span m="3453670">don't</span> <span m="3453820">have</span> <span m="3454230">pubd</span> <span m="3454370">or</span> <span m="3454980">logd,</span> <span m="3455740">but</span> <span m="3456110">we</span> <span m="3456300">have</span> <span m="3456470">these</span> <span m="3456630">two</span> <span m="3456740">guys</span> <span m="3457190">and</span> <span m="3457255">a</span> <span m="3457320">service.</span> <span m="3459530">No</span> <span m="3459730">database</span> <span m="3460070">proxy</span> <span m="3460220">either.</span> <span m="3461450">All</span> <span m="3461530">right,</span> <span m="3462440">so</span> <span m="3462550">any</span> <span m="3462670">questions</span> <span m="3462990">about</span> <span m="3463750">OKWS?</span> <span m="3465710">Yes.</span> </p>
<p></p>
<p><span m="3467030">AUDIENCE: Dbproxy</span> <span m="3467340">does</span> <span m="3467710">not</span> <span m="3468310">accept</span> <span m="3470205">SQL</span> <span m="3470427">queries,</span> <span m="3471095">it</span> <span m="3471540">accepts</span> <span m="3471651">some</span> <span m="3471762">sort</span> </p>
<p></p>
<p><span m="3472430">PROFESSOR: Yes.</span> <span m="3472880">What</span> <span m="3472975">does</span> <span m="3473070">this</span> <span m="3473165">interface</span> <span m="3473450">look</span> <span m="3473630">like?</span> <span m="3473780">They</span> <span m="3473870">don't</span> <span m="3474100">really</span> <span m="3474400">describe</span> <span m="3474740">it</span> <span m="3475080">in</span> <span m="3475170">a</span> <span m="3475290">lot</span> <span m="3475480">of</span> <span m="3475650">detail,</span> <span m="3476450">but</span> <span m="3476950">one</span> <span m="3477210">thing</span> <span m="3477540">I</span> <span m="3477760">sort</span> <span m="3478220">of</span> <span m="3478280">imagine</span> <span m="3479090">you</span> <span m="3479220">could</span> <span m="3479430">do</span> <span m="3479550">in</span> <span m="3479660">this</span> <span m="3479790">database</span> <span m="3480190">proxy</span> <span m="3480930">is</span> <span m="3481030">basically</span> <span m="3481540">have</span> <span m="3481680">this</span> <span m="3482170">supply</span> <span m="3482650">a</span> <span m="3482760">bunch</span> <span m="3482870">of</span> <span m="3482970">arguments</span> <span m="3483600">for</span> <span m="3483790">SQL</span> <span m="3484310">query</span> <span m="3484880">templates.</span> <span m="3485840">So</span> <span m="3485930">it</span> <span m="3486030">might</span> <span m="3486240">be</span> <span m="3486430">that</span> <span m="3486950">this</span> <span m="3487390">dbproxy,</span> <span m="3488120">this</span> <span m="3488360">one</span> <span m="3488550">in</span> <span m="3488630">particular,</span> <span m="3489100">maybe</span> <span m="3489490">is</span> <span m="3489950">for</span> <span m="3490530">finding,</span> <span m="3491710">I</span> <span m="3491820">don't</span> <span m="3491900">know,</span> <span m="3492050">your</span> <span m="3492430">friends</span> <span m="3493040">or</span> <span m="3493150">something,</span> <span m="3493530">so</span> <span m="3494070">inside</span> <span m="3494530">of</span> <span m="3495240">the</span> <span m="3495300">dbproxy</span> <span m="3495540">maybe</span> <span m="3495980">there's</span> <span m="3496190">a</span> <span m="3496350">template</span> <span m="3496760">query</span> <span m="3497090">like</span> <span m="3498350">select</span> <span m="3500580">ID</span> <span m="3501860">from</span> <span m="3502310">friends,</span> <span m="3506900">where</span> <span m="3510380">user--</span> <span m="3511800">I</span> <span m="3511890">guess</span> <span m="3512020">this</span> <span m="3512120">is</span> <span m="3512220">like</span> <span m="3512400">the</span> <span m="3512470">ID</span> <span m="3512740">of</span> <span m="3512810">the</span> <span m="3512890">friend,</span> <span m="3513300">and</span> <span m="3513440">this</span> <span m="3513550">is</span> <span m="3513650">the</span> <span m="3513730">ID</span> <span m="3514000">of</span> <span m="3514090">the</span> <span m="3514180">person</span> <span m="3514530">who</span> <span m="3514770">is</span> <span m="3515230">the</span> <span m="3515310">friend</span> <span m="3515580">of.</span> <span m="3516290">The</span> <span m="3516420">user</span> <span m="3516770">equals,</span> <span m="3517530">I</span> <span m="3517620">don't</span> <span m="3517720">know,</span> <span m="3518070">person</span> <span m="3518390">D</span> <span m="3518825">here,</span> <span m="3519260">or</span> <span m="3519350">something,</span> <span m="3519810">or</span> <span m="3520050">person</span> <span m="3520550">S</span> <span m="3521050">here,</span> <span m="3521260">right?</span> <span m="3522020">And</span> <span m="3522450">they</span> <span m="3522650">sort</span> <span m="3522790">of</span> <span m="3523020">sanitize</span> <span m="3523250">this</span> <span m="3523310">string,</span> <span m="3523810">and</span> <span m="3523920">I</span> <span m="3523990">imagine</span> <span m="3524330">this</span> <span m="3524520">RPC</span> <span m="3524930">request</span> <span m="3525460">here</span> <span m="3526310">sort</span> <span m="3526430">of</span> <span m="3526550">looks</span> <span m="3526850">like</span> <span m="3527730">do</span> <span m="3528770">query</span> <span m="3529150">one,</span> <span m="3531770">and</span> <span m="3532080">the</span> <span m="3532140">argument</span> <span m="3532710">is,</span> <span m="3533680">I</span> <span m="3533770">don't</span> <span m="3533850">know,</span> <span m="3533970">"Alice."</span> <span m="3535020">I</span> <span m="3535470">sort</span> <span m="3535920">of</span> <span m="3536060">imagine</span> <span m="3536375">this</span> <span m="3536690">RPC</span> <span m="3537110">interface</span> <span m="3537510">looks</span> <span m="3537930">like</span> <span m="3538130">this,</span> <span m="3538400">where</span> <span m="3538890">the</span> <span m="3538970">application</span> <span m="3539540">knows</span> <span m="3539780">ahead</span> <span m="3539950">of</span> <span m="3540030">time</span> <span m="3540410">that</span> <span m="3540470">this</span> <span m="3540530">database</span> <span m="3540910">proxy</span> <span m="3541240">is</span> <span m="3541350">willing</span> <span m="3541700">to</span> <span m="3541870">run</span> <span m="3542720">three</span> <span m="3543040">kinds</span> <span m="3543330">of</span> <span m="3543620">queries</span> <span m="3543686">on</span> <span m="3543753">its</span> <span m="3543820">behalf,</span> <span m="3544740">and</span> <span m="3545680">now</span> <span m="3545890">I</span> <span m="3545980">want</span> <span m="3546130">to</span> <span m="3546200">run</span> <span m="3546500">query</span> <span m="3546680">number</span> <span m="3546940">one</span> <span m="3547270">and</span> <span m="3547450">the</span> <span m="3547520">argument</span> <span m="3547950">is</span> <span m="3548120">Alice.</span> <span m="3549010">And</span> <span m="3549310">that's</span> <span m="3549880">sort</span> <span m="3550010">of</span> <span m="3550120">the</span> <span m="3550220">way</span> <span m="3550460">I</span> <span m="3550510">get</span> <span m="3550750">access</span> <span m="3550960">to</span> <span m="3551110">any</span> <span m="3551520">data</span> <span m="3551580">in</span> <span m="3551640">the</span> <span m="3551700">database.</span> <span m="3553170">Does</span> <span m="3553585">this</span> <span m="3554000">make</span> <span m="3554010">sense?</span> </p>
<p><span m="3556580">AUDIENCE:</span> <span m="3557063">Could</span> <span m="3557546">an</span> <span m="3558029">external</span> <span m="3558512">user</span> <span m="3558632">at</span> <span m="3558874">the</span> <span m="3558995">web</span> <span m="3559236">browser</span> <span m="3559478">level</span> <span m="3559961">send</span> <span m="3560202">the</span> <span m="3560444">request</span> <span m="3560685">like</span> <span m="3560927">that</span> <span m="3561047">to</span> <span m="3561168">the</span> <span m="3561289">database</span> <span m="3561410">or</span> <span m="3561571">is</span> <span m="3561732">that</span> <span m="3561893">all</span> <span m="3562134">internal?</span> </p>
<p><span m="3563342">PROFESSOR:  Well,</span> <span m="3563830">yeah.</span> <span m="3564020">So,</span> <span m="3564290">how does this work?</span> <span m="3565460">It's</span> <span m="3565510">actually</span> <span m="3565690">kind</span> <span m="3566160">of</span> <span m="3566390">weird,</span> <span m="3566710">that</span> <span m="3566716">this</span> <span m="3566723">is</span> <span m="3566730">a</span> <span m="3566750">separate</span> <span m="3567090">machine,</span> <span m="3567410">because</span> <span m="3567680">now</span> <span m="3567830">it</span> <span m="3567960">seems</span> <span m="3568160">like,</span> <span m="3568520">why</span> <span m="3568880">don't</span> <span m="3568980">just</span> <span m="3569300">connect</span> <span m="3569510">to</span> <span m="3569570">the</span> <span m="3569640">database</span> <span m="3569960">proxy</span> <span m="3570200">yourself,</span> <span m="3571350">or</span> <span m="3571520">to</span> <span m="3571610">the</span> <span m="3571700">MySQL</span> <span m="3572230">server,</span> <span m="3572560">right?</span> <span m="3573850">So</span> <span m="3573990">what</span> <span m="3574160">prevents</span> <span m="3574660">this</span> <span m="3574935">in</span> <span m="3575210">their</span> <span m="3575340">design?</span> </p>
<p><span m="3575760">AUDIENCE:</span> <span m="3576116">Fire</span> <span m="3576472">wall?</span> </p>
<p><span m="3576830">PROFESSOR: Yeah,</span> <span m="3577180">probably</span> <span m="3577460">at</span> <span m="3577580">some</span> <span m="3577760">level.</span> <span m="3578060">They</span> <span m="3578140">don't</span> <span m="3578320">really</span> <span m="3578500">describe</span> <span m="3578890">this</span> <span m="3579030">in</span> <span m="3579130">too</span> <span m="3579230">much</span> <span m="3579410">detail,</span> <span m="3579780">but</span> <span m="3580400">probably</span> <span m="3581110">this</span> <span m="3581400">is</span> <span m="3581690">some</span> <span m="3581980">internal</span> <span m="3582350">network,</span> <span m="3582820">where</span> <span m="3583140">there's</span> <span m="3583460">like</span> <span m="3583590">a</span> <span m="3583650">switch</span> <span m="3584080">here,</span> <span m="3584800">and</span> <span m="3585040">this</span> <span m="3585170">machine</span> <span m="3585540">is</span> <span m="3585760">connected</span> <span m="3585830">to</span> <span m="3586110">the</span> <span m="3586470">switch,</span> <span m="3586680">this</span> <span m="3586850">machine</span> <span m="3587090">is</span> <span m="3587190">connected</span> <span m="3587370">to</span> <span m="3587550">the</span> <span m="3587610">switch,</span> <span m="3588330">but</span> <span m="3588480">the</span> <span m="3588590">switch</span> <span m="3588850">is</span> <span m="3588970">not</span> <span m="3589170">reachable</span> <span m="3589480">from</span> <span m="3589600">the</span> <span m="3589660">outside</span> <span m="3589970">world.</span> <span m="3590450">It's</span> <span m="3590610">like</span> <span m="3590770">there</span> <span m="3590920">is</span> <span m="3591220">an</span> <span m="3591340">internet</span> <span m="3591670">connection</span> <span m="3592160">here</span> <span m="3592610">and</span> <span m="3592990">those</span> <span m="3593090">guys</span> <span m="3593190">are</span> <span m="3593290">some</span> <span m="3593450">back-end</span> <span m="3593760">network.</span> <span m="3594790">Or</span> <span m="3594960">maybe</span> <span m="3595180">they're</span> <span m="3595320">actually</span> <span m="3595650">on</span> <span m="3595860">the</span> <span m="3595965">same</span> <span m="3596070">network,</span> <span m="3596185">but</span> <span m="3596300">there's</span> <span m="3596345">a</span> <span m="3596390">firewall</span> <span m="3596860">here</span> <span m="3597650">that</span> <span m="3597880">has</span> <span m="3598180">rules</span> <span m="3598410">that</span> <span m="3598540">say,</span> <span m="3598710">well,</span> <span m="3598980">you</span> <span m="3599110">can</span> <span m="3599200">only</span> <span m="3599470">connect</span> <span m="3599730">to</span> <span m="3599850">this</span> <span m="3599970">front-end</span> <span m="3600320">machine</span> <span m="3600630">on</span> <span m="3600720">port</span> <span m="3600950">80.</span> <span m="3601570">You</span> <span m="3601710">cannot</span> <span m="3602260">talk</span> <span m="3602550">to</span> <span m="3602660">the</span> <span m="3602750">back-end</span> <span m="3602980">server.</span> </p>
<p><span m="3605240">So</span> <span m="3605380">that's</span> <span m="3605480">one</span> <span m="3606120">plan.</span> <span m="3606520">I</span> <span m="3606810">guess</span> <span m="3606920">the</span> <span m="3607030">other</span> <span m="3607270">plan</span> <span m="3607500">they</span> <span m="3607580">have</span> <span m="3607770">in</span> <span m="3607850">mind</span> <span m="3608170">is</span> <span m="3608350">that</span> <span m="3608720">actually</span> <span m="3609000">when</span> <span m="3609210">you</span> <span m="3609330">connect</span> <span m="3609650">to</span> <span m="3609710">this</span> <span m="3609870">database</span> <span m="3610350">proxy,</span> <span m="3611530">you</span> <span m="3611630">have</span> <span m="3611860">to</span> <span m="3612010">supply</span> <span m="3613010">this</span> <span m="3613360">20</span> <span m="3613670">byte</span> <span m="3613920">token</span> <span m="3614480">thing,</span> <span m="3615580">and</span> <span m="3616760">unless</span> <span m="3617150">you</span> <span m="3617250">supply</span> <span m="3617525">it,</span> <span m="3617800">the</span> <span m="3618580">dbproxy</span> <span m="3618920">will</span> <span m="3619110">reject</span> <span m="3619520">your</span> <span m="3619620">connection.</span> <span m="3620700">So</span> <span m="3620820">the</span> <span m="3620910">rule</span> <span m="3621130">is</span> <span m="3621230">you</span> <span m="3621370">open</span> <span m="3621600">the</span> <span m="3621680">TCP</span> <span m="3621920">connection,</span> <span m="3622290">you</span> <span m="3622390">send</span> <span m="3622575">your</span> <span m="3622760">20</span> <span m="3622990">bytes.</span> <span m="3623320">If</span> <span m="3623420">they're</span> <span m="3623570">not</span> <span m="3623810">the</span> <span m="3623900">right</span> <span m="3624070">20</span> <span m="3624270">bytes,</span> <span m="3624630">your</span> <span m="3624770">connection</span> <span m="3625110">gets</span> <span m="3625300">closed,</span> <span m="3626260">and</span> <span m="3627210">hopefully</span> <span m="3627650">this</span> <span m="3627820">is</span> <span m="3627950">something</span> <span m="3628260">that's</span> <span m="3628500">relatively</span> <span m="3629300">easy</span> <span m="3629610">for</span> <span m="3629740">the</span> <span m="3629810">database</span> <span m="3630140">proxy</span> <span m="3630440">to</span> <span m="3630500">implement,</span> <span m="3630960">so</span> <span m="3631130">that</span> <span m="3632300">there's</span> <span m="3632600">probably</span> <span m="3634690">low</span> <span m="3634950">probability</span> <span m="3635440">of</span> <span m="3635630">a</span> <span m="3635720">bug</span> <span m="3636160">in</span> <span m="3636290">that</span> <span m="3637150">token</span> <span m="3637490">checking</span> <span m="3637820">logic</span> <span m="3638200">that's</span> <span m="3638420">right</span> <span m="3638710">up</span> <span m="3638850">front.</span> <span m="3639590">And</span> <span m="3640740">unless</span> <span m="3641000">you</span> <span m="3641070">have</span> <span m="3641220">the</span> <span m="3641270">token,</span> <span m="3641750">you</span> <span m="3641900">will</span> <span m="3642050">not</span> <span m="3642350">be</span> <span m="3642470">able</span> <span m="3642680">to</span> <span m="3642760">do</span> <span m="3642900">anything</span> <span m="3643260">else</span> <span m="3643450">of</span> <span m="3643540">interest</span> <span m="3644360">to</span> <span m="3644500">the</span> <span m="3644610">database</span> <span m="3644990">server.</span> <span m="3645856">That's,</span> <span m="3646610">I</span> <span m="3646690">think,</span> <span m="3646930">their</span> <span m="3647320">sort</span> <span m="3647420">of</span> <span m="3647990">design</span> <span m="3648825">goal</span> <span m="3649090">here.</span> <span m="3650300">Make</span> <span m="3650700">sense?</span> </p>
<p><span m="3653180">All</span> <span m="3653280">right.</span> <span m="3654000">So,</span> <span m="3654170">let's</span> <span m="3655050">try</span> <span m="3655210">to</span> <span m="3655300">figure</span> <span m="3655530">out,</span> <span m="3655630">I</span> <span m="3655670">guess,</span> <span m="3655900">how</span> <span m="3656570">these</span> <span m="3656800">guys</span> <span m="3657010">isolate</span> <span m="3658650">these</span> <span m="3658850">different</span> <span m="3659140">processes.</span> <span m="3660740">So</span> <span m="3660850">how</span> <span m="3660970">do</span> <span m="3661030">they</span> <span m="3661150">make</span> <span m="3661350">sure</span> <span m="3661970">that</span> <span m="3662920">all</span> <span m="3663100">these</span> <span m="3663290">components</span> <span m="3663850">don't</span> <span m="3665030">trample</span> <span m="3665540">on</span> <span m="3665640">each</span> <span m="3665790">other?</span> <span m="3668690">What's</span> <span m="3669170">the</span> <span m="3669290">plan?</span> </p>
<p><span m="3672488">AUDIENCE:</span> <span m="3672956">Different</span> <span m="3673424">roots</span> <span m="3673892">and</span> <span m="3674126">different</span> <span m="3674360">userids?</span> </p>
<p><span m="3675300">PROFESSOR: Yeah,</span> <span m="3675680">so</span> <span m="3675775">pretty</span> <span m="3675870">much</span> <span m="3676030">every</span> <span m="3676330">one</span> <span m="3676490">of</span> <span m="3676530">these</span> <span m="3676730">components</span> <span m="3677400">runs</span> <span m="3677790">as</span> <span m="3678020">a</span> <span m="3678360">difference</span> <span m="3678680">uid,</span> <span m="3679080">so</span> <span m="3679190">they</span> <span m="3679270">have</span> <span m="3679400">this</span> <span m="3679840">whole</span> <span m="3680100">table</span> <span m="3680410">in</span> <span m="3680480">the</span> <span m="3680900">paper</span> <span m="3681600">that</span> <span m="3681870">describes,</span> <span m="3682440">for</span> <span m="3682550">every</span> <span m="3682800">component,</span> <span m="3683620">where</span> <span m="3684090">is</span> <span m="3684150">it</span> <span m="3684315">running</span> <span m="3684480">and</span> <span m="3684570">what's</span> <span m="3684770">the</span> <span m="3684900">uid.</span> <span m="3685250">So</span> <span m="3685600">we</span> <span m="3685950">can</span> <span m="3686260">write</span> <span m="3686530">this</span> <span m="3686660">out,</span> <span m="3686830">so</span> <span m="3687840">okd</span> <span m="3688110">has</span> <span m="3688290">its</span> <span m="3688430">own</span> <span m="3688790">uid,</span> <span m="3689830">pubd</span> <span m="3690260">has</span> <span m="3690390">its</span> <span m="3690520">own</span> <span m="3690680">uid,</span> <span m="3692010">the</span> <span m="3692160">logger</span> <span m="3692650">has</span> <span m="3692830">its</span> <span m="3692980">own</span> <span m="3693370">uid.</span> <span m="3694850">okld</span> <span m="3695730">runs</span> <span m="3695890">as</span> <span m="3696080">root,</span> <span m="3696630">which</span> <span m="3696810">is</span> <span m="3697060">kind</span> <span m="3697220">of</span> <span m="3697300">unfortunate,</span> <span m="3697850">but</span> <span m="3698570">may</span> <span m="3698855">be</span> <span m="3699410">all</span> <span m="3699600">right.</span> <span m="3700380">Then,</span> <span m="3700450">there's</span> <span m="3700520">a</span> <span m="3700570">whole</span> <span m="3700800">bunch</span> <span m="3701020">of</span> <span m="3701270">dynamically</span> <span m="3701950">assigned</span> <span m="3702500">userids</span> <span m="3703200">for</span> <span m="3703330">every</span> <span m="3703540">service.</span> <span m="3703960">I</span> <span m="3704063">sort</span> <span m="3704166">of</span> <span m="3704270">imagine</span> <span m="3704770">he</span> <span m="3704865">has</span> <span m="3705290">ID</span> <span m="3705440">51001.</span> </p>
<p><span m="3708880">So</span> <span m="3708980">this</span> <span m="3709110">makes</span> <span m="3709310">sure</span> <span m="3709530">that</span> <span m="3709680">every</span> <span m="3709920">service</span> <span m="3710360">cannot</span> <span m="3711780">poke</span> <span m="3712260">at</span> <span m="3712860">the</span> <span m="3712960">processes</span> <span m="3713550">of</span> <span m="3714030">other</span> <span m="3714520">services,</span> <span m="3715980">and</span> <span m="3717250">they</span> <span m="3717470">also</span> <span m="3718260">use</span> <span m="3718790">chroot</span> <span m="3719400">pretty</span> <span m="3719610">extensively,</span> <span m="3720120">so</span> <span m="3720220">every</span> <span m="3720480">one</span> <span m="3720650">of</span> <span m="3720700">these</span> <span m="3720900">guys</span> <span m="3721180">is</span> <span m="3721500">chroot-ed</span> <span m="3721690">into</span> <span m="3722170">some</span> <span m="3722470">directory.</span> <span m="3723560">They</span> <span m="3723950">sort</span> <span m="3724110">of</span> <span m="3724260">initially</span> <span m="3724690">say,</span> <span m="3724880">well,</span> <span m="3725170">you</span> <span m="3725290">should</span> <span m="3725490">really</span> <span m="3725720">chroot</span> <span m="3726150">everyone</span> <span m="3726550">into</span> <span m="3726700">a</span> <span m="3726760">separate</span> <span m="3727040">directory.</span> <span m="3728350">As</span> <span m="3728960">it</span> <span m="3729050">turns</span> <span m="3729280">out,</span> <span m="3729540">in</span> <span m="3730390">that</span> <span m="3730550">table,</span> <span m="3731250">it</span> <span m="3731730">turns</span> <span m="3731960">out</span> <span m="3732385">that</span> <span m="3732810">okd</span> <span m="3733560">and</span> <span m="3733820">all</span> <span m="3734010">the</span> <span m="3734110">services</span> <span m="3735190">basically</span> <span m="3735860">share</span> <span m="3736700">a</span> <span m="3736820">chroot</span> <span m="3737040">directory.</span> <span m="3739060">It's</span> <span m="3739240">kind</span> <span m="3739380">of</span> <span m="3739490">weird.</span> <span m="3741111">Why</span> <span m="3741500">do</span> <span m="3741660">you</span> <span m="3741840">guys</span> <span m="3741930">think</span> <span m="3742320">they</span> <span m="3742610">put</span> <span m="3742925">okd</span> <span m="3743240">and</span> <span m="3744260">the</span> <span m="3744330">services</span> <span m="3745370">into</span> <span m="3745560">a</span> <span m="3745620">single</span> <span m="3745990">chroot</span> <span m="3747130">and</span> <span m="3747310">not</span> <span m="3747460">give</span> <span m="3747640">them</span> <span m="3747900">their</span> <span m="3748070">own</span> <span m="3748220">chroots?</span> <span m="3750070">Weird.</span> <span m="3750380">Yeah.</span> </p>
<p><span m="3751335">AUDIENCE:</span> <span m="3751770">okd</span> <span m="3751830">is</span> <span m="3752265">not</span> <span m="3752700">root.</span> </p>
<p><span m="3753095">PROFESSOR:</span> <span m="3753490">Well,</span> <span m="3753885">yeah,</span> <span m="3754280">but</span> <span m="3754530">like</span> <span m="3754750">why</span> <span m="3755000">don't</span> <span m="3755100">they</span> <span m="3755250">put</span> <span m="3755680">pubd</span> <span m="3756190">and</span> <span m="3756480">oklogd</span> <span m="3756735">and</span> <span m="3756990">everyone</span> <span m="3757290">else</span> <span m="3757700">in</span> <span m="3757753">the</span> <span m="3757806">same</span> <span m="3757860">chroot</span> <span m="3758230">as</span> <span m="3758330">well?</span> </p>
<p></p>
<p><span m="3761494">AUDIENCE: Okld</span> <span m="3762402">[INAUDIBLE].</span> </p>
<p><span m="3762856">PROFESSOR:</span> <span m="3763310">okld</span> <span m="3763680">is</span> <span m="3763800">actually</span> <span m="3764090">sitting</span> <span m="3764300">out</span> <span m="3764460">here</span> <span m="3764770">in</span> <span m="3764825">a</span> <span m="3764880">separate</span> <span m="3765200">chroot.</span> <span m="3766030">This</span> <span m="3766190">guy,</span> <span m="3766440">this</span> <span m="3766610">guy.</span> <span m="3769620">Actually</span> <span m="3769670">okld</span> <span m="3769910">is</span> <span m="3770310">not</span> <span m="3770530">chroot.</span> <span m="3771000">I'm</span> <span m="3771170">sorry</span> <span m="3771475">about</span> <span m="3771780">that.</span> <span m="3772250">These</span> <span m="3772355">guys</span> <span m="3772461">are</span> <span m="3772566">chroot.</span> <span m="3773516">Does</span> <span m="3773940">it</span> <span m="3774140">matter?</span> </p>
<p><span m="3775320">AUDIENCE:</span> <span m="3775710">I</span> <span m="3776100">was</span> <span m="3776520">thinking,</span> <span m="3776730">if</span> <span m="3776940">the</span> <span m="3777035">services</span> <span m="3777130">have</span> <span m="3777225">to</span> <span m="3777320">share</span> <span m="3777415">a</span> <span m="3777652">lot</span> <span m="3777890">of</span> <span m="3778365">data,</span> <span m="3778840">where's</span> <span m="3779077">the</span> <span m="3779315">[INAUDIBLE]</span> <span m="3779790">isolate</span> <span m="3780265">them?</span> </p>
<p><span m="3781215">PROFESSOR: Maybe.</span> <span m="3781690">Actually,</span> <span m="3782170">I</span> <span m="3782250">think</span> <span m="3782650">what's</span> <span m="3782870">going</span> <span m="3783090">on</span> <span m="3783190">is</span> <span m="3784610">they</span> <span m="3784750">have</span> <span m="3784890">to</span> <span m="3785010">share</span> <span m="3785330">some</span> <span m="3785530">data,</span> <span m="3785890">but</span> <span m="3786390">none</span> <span m="3786730">of</span> <span m="3786910">this</span> <span m="3787110">data</span> <span m="3787400">actually</span> <span m="3787675">lives</span> <span m="3787950">in</span> <span m="3788050">the</span> <span m="3788087">file,</span> <span m="3788125">so</span> <span m="3788162">they</span> <span m="3788200">pass</span> <span m="3788480">a</span> <span m="3788545">lot</span> <span m="3788610">of</span> <span m="3788690">data</span> <span m="3788910">through</span> <span m="3789080">sockets</span> <span m="3789660">from</span> <span m="3789920">okd</span> <span m="3790550">to</span> <span m="3790680">the</span> <span m="3790820">services.</span> <span m="3791920">But</span> <span m="3792030">in</span> <span m="3792140">fact,</span> <span m="3792920">none</span> <span m="3793040">of</span> <span m="3793090">these</span> <span m="3793290">guys</span> <span m="3793730">store</span> <span m="3793890">anything</span> <span m="3794230">of</span> <span m="3794330">interest</span> <span m="3794650">at</span> <span m="3794740">all</span> <span m="3795060">in</span> <span m="3795200">the</span> <span m="3795300">file</span> <span m="3795620">system.</span> </p>
<p><span m="3796860">So</span> <span m="3797140">as</span> <span m="3797280">a</span> <span m="3797320">result,</span> <span m="3798850">there's</span> <span m="3799325">pretty</span> <span m="3799800">much</span> <span m="3800390">nothing</span> <span m="3800690">interesting</span> <span m="3801150">in</span> <span m="3801230">the</span> <span m="3801540">chroot</span> <span m="3801730">directory,</span> <span m="3802280">so</span> <span m="3802880">I</span> <span m="3802990">imagine</span> <span m="3803410">the</span> <span m="3803740">OKWS</span> <span m="3804010">guys</span> <span m="3804340">just</span> <span m="3804510">decided,</span> <span m="3805500">well,</span> <span m="3806590">there's</span> <span m="3806730">probably</span> <span m="3807140">some</span> <span m="3807380">overhead</span> <span m="3807720">to</span> <span m="3807965">creating</span> <span m="3808210">a</span> <span m="3808370">chroot,</span> <span m="3808760">like</span> <span m="3808806">you</span> <span m="3808853">have</span> <span m="3808900">to</span> <span m="3809210">create</span> <span m="3809390">a</span> <span m="3809450">copy</span> <span m="3809710">of</span> <span m="3809790">the</span> <span m="3809910">directory,</span> <span m="3810290">there</span> <span m="3810525">is</span> <span m="3810760">maybe</span> <span m="3811120">some</span> <span m="3811165">management</span> <span m="3811210">overhead</span> <span m="3811550">for</span> <span m="3811670">every</span> <span m="3812100">chroot.</span> <span m="3813470">Whereas,</span> <span m="3813910">for</span> <span m="3814060">this,</span> <span m="3814970">there's</span> <span m="3815140">no</span> <span m="3815310">real</span> <span m="3815550">files</span> <span m="3816020">here,</span> <span m="3816330">so</span> <span m="3816730">maybe</span> <span m="3816950">that's</span> <span m="3817130">all</span> <span m="3817240">right.</span> <span m="3817920">I</span> <span m="3818280">mean,</span> <span m="3818500">there's</span> <span m="3818650">not</span> <span m="3818860">a</span> <span m="3818990">clear,</span> <span m="3819280">sort</span> <span m="3819390">of,</span> <span m="3819480">cut</span> <span m="3819700">trade</span> <span m="3819900">off</span> <span m="3819990">here,</span> <span m="3821050">or</span> <span m="3821400">not</span> <span m="3821590">a</span> <span m="3821650">clear-cut</span> <span m="3821980">argument</span> <span m="3822280">which</span> <span m="3822420">way</span> <span m="3822580">you</span> <span m="3822680">should</span> <span m="3822780">go,</span> <span m="3823420">but</span> <span m="3824280">certainly</span> <span m="3824570">prevents</span> <span m="3824930">from</span> <span m="3825210">setuid</span> <span m="3826140">binaries.</span> <span m="3827290">The</span> <span m="3827370">reason</span> <span m="3827600">that</span> <span m="3827700">these</span> <span m="3827880">guys</span> <span m="3828080">are</span> <span m="3828150">probably</span> <span m="3828470">in</span> <span m="3828635">different</span> <span m="3828800">chroots</span> <span m="3829260">is</span> <span m="3829380">because</span> <span m="3829500">there</span> <span m="3829550">is</span> <span m="3829600">actually</span> <span m="3829790">some</span> <span m="3829960">interesting</span> <span m="3830280">stuff</span> <span m="3830580">there.</span> <span m="3830940">There's</span> <span m="3831010">maybe</span> <span m="3831190">the</span> <span m="3831300">templates</span> <span m="3831710">here,</span> <span m="3832560">maybe</span> <span m="3832720">there's</span> <span m="3832855">a</span> <span m="3832990">log</span> <span m="3833350">file</span> <span m="3833690">here,</span> <span m="3834100">so</span> <span m="3834190">you</span> <span m="3834300">don't</span> <span m="3834480">want</span> <span m="3835060">these</span> <span m="3835270">guys</span> <span m="3835500">accidentally</span> <span m="3835950">reading</span> <span m="3836260">the</span> <span m="3836400">log</span> <span m="3836540">file</span> <span m="3836800">for</span> <span m="3836900">some</span> <span m="3837030">reason,</span> <span m="3838870">but</span> <span m="3839600">there's</span> <span m="3839940">no</span> <span m="3840120">real</span> <span m="3840320">mutable</span> <span m="3840740">state</span> <span m="3841190">inside</span> <span m="3841590">of</span> <span m="3841660">the</span> <span m="3841760">chroot</span> <span m="3842220">shared</span> <span m="3842510">by</span> <span m="3842660">all</span> <span m="3842860">okd</span> <span m="3843870">and</span> <span m="3844265">the</span> <span m="3844660">services.</span> </p>
<p><span m="3845050">AUDIENCE:</span> <span m="3845440">Don't</span> <span m="3845906">the</span> <span m="3846372">services</span> <span m="3846838">have,</span> <span m="3846993">like,</span> <span m="3847148">two</span> <span m="3847304">files</span> <span m="3847770">or,</span> <span m="3848236">I</span> <span m="3848702">don't</span> <span m="3849168">know,</span> <span m="3849634">aspx</span> <span m="3850100">files.</span> </p>
<p><span m="3851032">PROFESSOR:</span> <span m="3851510">Well,</span> <span m="3851750">at</span> <span m="3851870">least</span> <span m="3852140">the</span> <span m="3852570">way</span> <span m="3852680">they</span> <span m="3852780">describe</span> <span m="3852975">it</span> <span m="3853170">in</span> <span m="3853250">the</span> <span m="3853340">paper,</span> <span m="3853670">the</span> <span m="3853770">service</span> <span m="3854243">is</span> <span m="3855190">a</span> <span m="3855670">single</span> <span m="3856135">C++</span> <span m="3857320">compiled</span> <span m="3857920">binary,</span> <span m="3858480">so</span> <span m="3858745">there's</span> <span m="3859010">actually</span> <span m="3859590">no</span> <span m="3860500">extra</span> <span m="3861140">files,</span> <span m="3861990">and</span> <span m="3862530">there</span> <span m="3862770">are</span> <span m="3862960">templates,</span> <span m="3863490">but</span> <span m="3863660">those</span> <span m="3863870">actually</span> <span m="3864470">get</span> <span m="3864690">passed</span> <span m="3864970">in</span> <span m="3865065">through</span> <span m="3865160">this</span> <span m="3865360">weird</span> <span m="3865630">mechanism,</span> <span m="3866060">where</span> <span m="3866450">pubd</span> <span m="3866940">has</span> <span m="3867120">the</span> <span m="3867230">templates</span> <span m="3867363">in</span> <span m="3867496">its</span> <span m="3867630">directory,</span> <span m="3868280">it</span> <span m="3868400">renders</span> <span m="3868920">them--</span> <span m="3869630">or</span> <span m="3870110">sort</span> <span m="3870260">of</span> <span m="3870370">pre-computes</span> <span m="3871080">them--</span> <span m="3871560">sends</span> <span m="3871840">them</span> <span m="3872000">to</span> <span m="3872440">okd</span> <span m="3872660">and</span> <span m="3873125">okd</span> <span m="3873590">gives</span> <span m="3873810">the</span> <span m="3873910">templates</span> <span m="3874330">to</span> <span m="3874415">all</span> <span m="3874500">the</span> <span m="3874590">services</span> <span m="3875200">through</span> <span m="3875350">RPC</span> <span m="3875720">calls.</span> <span m="3875960">So</span> <span m="3876025">they</span> <span m="3876090">sit</span> <span m="3876270">in</span> <span m="3876370">memory,</span> <span m="3876730">but</span> <span m="3877190">they're</span> <span m="3877370">actually</span> <span m="3877570">not</span> <span m="3878020">directly</span> <span m="3878340">accessible</span> <span m="3878790">through</span> <span m="3878940">the</span> <span m="3879060">file</span> <span m="3879340">system.</span> <span m="3880590">It's</span> <span m="3880710">a</span> <span m="3880950">somewhat</span> <span m="3881320">paranoid</span> <span m="3881710">design</span> <span m="3881800">here.</span> <span m="3883170">Can't</span> <span m="3883580">even</span> <span m="3883990">read</span> <span m="3884260">the</span> <span m="3884370">templates.</span> </p>
<p><span m="3889860">So</span> <span m="3889970">what's</span> <span m="3890110">the</span> <span m="3890230">point</span> <span m="3890460">of</span> <span m="3890540">having</span> <span m="3891960">all</span> <span m="3892120">these</span> <span m="3892300">components</span> <span m="3892740">split</span> <span m="3892885">up?</span> <span m="3893030">So</span> <span m="3893100">I</span> <span m="3893150">guess</span> <span m="3893310">let's</span> <span m="3893600">talk</span> <span m="3893810">about</span> <span m="3894020">maybe</span> <span m="3894340">oklogd,</span> <span m="3894420">so</span> <span m="3895320">why</span> <span m="3895540">do</span> <span m="3895610">you</span> <span m="3895690">have</span> <span m="3895850">a</span> <span m="3895900">separate</span> <span m="3896290">oklogd?</span> <span m="3899970">Yeah.</span> </p>
<p><span m="3900920">AUDIENCE:</span> <span m="3901395">Because</span> <span m="3901553">if</span> <span m="3901711">you</span> <span m="3901870">had</span> <span m="3902345">[INAUDIBLE],</span> <span m="3902503">you</span> <span m="3902661">could</span> <span m="3902740">overwrite</span> <span m="3902820">logs,</span> <span m="3903057">or</span> <span m="3903295">truncate</span> <span m="3903770">log.</span> </p>
<p><span m="3904245">PROFESSOR: Yeah,</span> <span m="3904730">so</span> <span m="3904820">we</span> <span m="3904910">really</span> <span m="3905090">want</span> <span m="3905230">to</span> <span m="3905270">make</span> <span m="3905460">sure</span> <span m="3905700">that</span> <span m="3905860">if</span> <span m="3905950">something</span> <span m="3906280">goes</span> <span m="3906540">wrong,</span> <span m="3907150">the</span> <span m="3907250">log,</span> <span m="3907535">at</span> <span m="3907820">least,</span> <span m="3908025">is</span> <span m="3908230">intact.</span> <span m="3909180">So</span> <span m="3909480">there's</span> <span m="3909720">a</span> <span m="3909790">separate</span> <span m="3910160">log</span> <span m="3910530">file</span> <span m="3910790">that</span> <span m="3910920">is</span> <span m="3911050">only</span> <span m="3911390">writable</span> <span m="3911860">by</span> <span m="3912090">this</span> <span m="3912320">uid,</span> <span m="3913460">and</span> <span m="3914510">all</span> <span m="3914750">the</span> <span m="3914950">log</span> <span m="3915160">messages</span> <span m="3915570">are</span> <span m="3915770">sent</span> <span m="3915970">as</span> <span m="3916150">RPCs</span> <span m="3916930">to</span> <span m="3917050">this</span> <span m="3917490">log</span> <span m="3918240">service,</span> <span m="3919770">and</span> <span m="3920960">even</span> <span m="3921210">if</span> <span m="3921590">everything</span> <span m="3921980">else</span> <span m="3922140">gets</span> <span m="3922300">compromised--</span> <span m="3923080">well,</span> <span m="3923360">except</span> <span m="3923470">for</span> <span m="3923950">okld--</span> <span m="3924580">then</span> <span m="3924920">the</span> <span m="3925000">log</span> <span m="3925370">is</span> <span m="3925450">still</span> <span m="3925720">intact,</span> <span m="3926940">because</span> <span m="3927130">they</span> <span m="3927210">talk</span> <span m="3927370">about</span> <span m="3928100">the</span> <span m="3928610">process</span> <span m="3928950">of</span> <span m="3929180">appending</span> <span m="3929540">noise</span> <span m="3930140">to</span> <span m="3930280">this</span> <span m="3930510">log.</span> <span m="3930910">So</span> <span m="3930987">what</span> <span m="3931065">is</span> <span m="3931142">this</span> <span m="3931220">about?</span> <span m="3931560">Does</span> <span m="3931680">this</span> <span m="3931800">matter?</span> <span m="3932390">Should</span> <span m="3932750">we</span> <span m="3933000">worry</span> <span m="3933240">about</span> <span m="3933790">this</span> <span m="3933960">noise?</span> <span m="3935061">Yeah.</span> </p>
<p><span m="3936384">AUDIENCE: If</span> <span m="3936825">somehow</span> <span m="3937270">you</span> <span m="3937770">accidentally</span> <span m="3938210">find</span> <span m="3938560">a</span> <span m="3938610">way</span> <span m="3938770">to</span> <span m="3939010">read</span> <span m="3939720">the</span> <span m="3939900">log</span> <span m="3940115">and</span> <span m="3940330">you</span> <span m="3940500">can't</span> <span m="3940710">see</span> <span m="3940940">what</span> <span m="3941290">everyone</span> <span m="3941415">else</span> <span m="3941540">has</span> <span m="3941747">been</span> <span m="3941954">doing?</span> </p>
<p><span m="3943196">PROFESSOR: No,</span> <span m="3943610">I</span> <span m="3943880">think</span> <span m="3944150">this</span> <span m="3944410">noise</span> <span m="3944510">thing</span> <span m="3944880">they</span> <span m="3944950">are</span> <span m="3945040">actually</span> <span m="3945240">worried</span> <span m="3945480">about</span> <span m="3946020">is</span> <span m="3946430">that,</span> <span m="3946990">suppose</span> <span m="3948320">you</span> <span m="3948480">compromise</span> <span m="3948970">a</span> <span m="3949030">service</span> <span m="3949970">or</span> <span m="3950190">you</span> <span m="3950310">compromise</span> <span m="3950850">pubd</span> <span m="3951520">or</span> <span m="3951620">something,</span> <span m="3952500">you</span> <span m="3952620">all</span> <span m="3952810">of</span> <span m="3952830">a</span> <span m="3952850">sudden</span> <span m="3953080">might</span> <span m="3953310">be</span> <span m="3953380">able</span> <span m="3953610">to</span> <span m="3953720">write</span> <span m="3954070">log</span> <span m="3954310">messages</span> <span m="3954720">to</span> <span m="3954810">the</span> <span m="3954900">log,</span> <span m="3955310">and</span> <span m="3955470">you</span> <span m="3955630">can</span> <span m="3955790">actually</span> <span m="3956000">write</span> <span m="3956190">whatever</span> <span m="3956440">you</span> <span m="3956560">want</span> <span m="3956930">to</span> <span m="3957020">the</span> <span m="3957110">log</span> <span m="3957490">at</span> <span m="3957620">that</span> <span m="3957750">point.</span> <span m="3959220">So</span> <span m="3959430">the</span> <span m="3959510">only</span> <span m="3959750">guarantee</span> <span m="3960140">they</span> <span m="3960790">claim</span> <span m="3961090">to</span> <span m="3961190">provide</span> <span m="3961580">is</span> <span m="3961730">that,</span> <span m="3962015">I</span> <span m="3962300">guess,</span> <span m="3962550">before</span> <span m="3962830">the</span> <span m="3962920">point</span> <span m="3963120">of</span> <span m="3963190">the</span> <span m="3963260">compromise,</span> <span m="3963670">all</span> <span m="3963715">the</span> <span m="3963760">log</span> <span m="3964050">entries</span> <span m="3964340">are</span> <span m="3964440">intact,</span> <span m="3964930">and</span> <span m="3965050">afterwards</span> <span m="3966060">there</span> <span m="3966270">is</span> <span m="3966570">sort</span> <span m="3966600">of</span> <span m="3966630">legitimate</span> <span m="3967100">log</span> <span m="3967370">entries</span> <span m="3967870">interspersed</span> <span m="3968500">with</span> <span m="3968810">whatever</span> <span m="3969170">else</span> <span m="3969290">the</span> <span m="3969410">attacker</span> <span m="3969800">wants</span> <span m="3969930">to</span> <span m="3970060">log.</span> </p>
<p><span m="3972400">One</span> <span m="3972560">actually</span> <span m="3972860">cool</span> <span m="3973110">thing</span> <span m="3973370">about</span> <span m="3973960">having</span> <span m="3974370">oklogd</span> <span m="3974930">be</span> <span m="3975250">a</span> <span m="3975300">separate</span> <span m="3975750">process</span> <span m="3976220">instead</span> <span m="3976560">of</span> <span m="3976800">it</span> <span m="3976925">just</span> <span m="3977050">being</span> <span m="3977320">an</span> <span m="3977400">append-only</span> <span m="3978040">file,</span> <span m="3979220">is</span> <span m="3979510">that</span> <span m="3979990">oklogd</span> <span m="3980540">cannot</span> <span m="3980890">add</span> <span m="3981070">some</span> <span m="3981190">extra</span> <span m="3981420">information</span> <span m="3982150">to</span> <span m="3982270">each</span> <span m="3982500">log</span> <span m="3982770">entry,</span> <span m="3983730">because</span> <span m="3983920">you</span> <span m="3983980">could</span> <span m="3984100">imagine</span> <span m="3984870">maybe</span> <span m="3985230">the</span> <span m="3985460">operating</span> <span m="3985810">system</span> <span m="3986080">supports</span> <span m="3986390">an</span> <span m="3986480">append-only</span> <span m="3987040">file,</span> <span m="3988510">but</span> <span m="3988780">then</span> <span m="3989580">you</span> <span m="3989820">don't</span> <span m="3990000">actually</span> <span m="3990230">know</span> <span m="3990470">who</span> <span m="3990710">wrote</span> <span m="3990950">anything</span> <span m="3991170">to</span> <span m="3991340">a</span> <span m="3991400">file,</span> <span m="3991730">when</span> <span m="3992000">that</span> <span m="3992220">was,</span> <span m="3993220">whereas</span> <span m="3993390">oklogd,</span> <span m="3994230">for</span> <span m="3994370">every</span> <span m="3994590">message,</span> <span m="3995010">it</span> <span m="3995060">can</span> <span m="3995110">actually</span> <span m="3995340">maybe</span> <span m="3995690">time</span> <span m="3995832">stamp</span> <span m="3995975">it</span> <span m="3996260">and</span> <span m="3996570">say,</span> <span m="3996700">actually,</span> <span m="3997260">I</span> <span m="3997410">know</span> <span m="3997600">this</span> <span m="3997760">came</span> <span m="3997940">from</span> <span m="3998090">this</span> <span m="3998210">service,</span> <span m="3998600">or</span> <span m="3998680">this</span> <span m="3998850">came</span> <span m="3999030">from</span> <span m="3999240">okd,</span> <span m="4000250">so</span> <span m="4000360">you</span> <span m="4000500">actually</span> <span m="4000720">get</span> <span m="4001020">extra</span> <span m="4001280">information</span> <span m="4002280">in</span> <span m="4002410">that</span> <span m="4002560">log</span> <span m="4002800">file</span> <span m="4003560">because</span> <span m="4003815">it's</span> <span m="4004070">a</span> <span m="4004260">separate</span> <span m="4004600">service</span> <span m="4004890">here.</span> <span m="4006270">Make</span> <span m="4006410">sense?</span> </p>
<p><span m="4009110">So</span> <span m="4010550">what's</span> <span m="4010750">the</span> <span m="4010840">point</span> <span m="4011110">of</span> <span m="4011490">this</span> <span m="4011660">okld</span> <span m="4012220">guy?</span> <span m="4012420">Why</span> <span m="4012590">do</span> <span m="4012690">we</span> <span m="4012780">need</span> <span m="4013130">this</span> <span m="4013260">guy</span> <span m="4013420">to</span> <span m="4013500">be</span> <span m="4013620">running</span> <span m="4013860">as</span> <span m="4014000">root?</span> <span m="4016795">I</span> <span m="4017730">guess</span> <span m="4018000">a</span> <span m="4018070">couple</span> <span m="4018270">reasons.</span> </p>
<p><span m="4018540">AUDIENCE:</span> <span m="4018970">If</span> <span m="4019465">you</span> <span m="4019960">want</span> <span m="4020140">no</span> <span m="4020215">one</span> <span m="4020390">else</span> <span m="4020700">to</span> <span m="4021185">run</span> <span m="4021670">as</span> <span m="4022155">root,</span> <span m="4022252">then</span> <span m="4022349">you</span> <span m="4022446">need</span> <span m="4022543">okld</span> <span m="4022640">to</span> <span m="4023125">delegate</span> <span m="4023610">who</span> <span m="4023773">it</span> <span m="4023936">is.</span> </p>
<p><span m="4024100">PROFESSOR: Yes.</span> <span m="4024410">So</span> <span m="4024490">someone</span> <span m="4024610">needs</span> <span m="4024650">to</span> <span m="4024690">set</span> <span m="4025000">up</span> <span m="4025130">this</span> <span m="4025190">whole</span> <span m="4025610">uid</span> <span m="4025710">chroot</span> <span m="4026880">thing,</span> <span m="4027250">and</span> <span m="4027440">you</span> <span m="4027700">need</span> <span m="4028200">root</span> <span m="4028275">for</span> <span m="4028350">this</span> <span m="4028620">in</span> <span m="4028730">Unix,</span> <span m="4029160">so</span> <span m="4029460">okld</span> <span m="4030020">is</span> <span m="4030240">it.</span> <span m="4031110">That's</span> <span m="4031560">one</span> <span m="4031760">reason.</span> <span m="4032505">Anything</span> <span m="4032840">else?</span> </p>
<p><span m="4033240">AUDIENCE:</span> <span m="4033700">To</span> <span m="4033930">define</span> <span m="4034160">80?</span> </p>
<p><span m="4034220">PROFESSOR:  Oh,</span> <span m="4034580">yeah,</span> <span m="4034760">yeah.</span> <span m="4034940">This</span> <span m="4035240">like</span> <span m="4035430">whole</span> <span m="4035910">listening</span> <span m="4036030">on</span> <span m="4036157">a</span> <span m="4036285">port</span> <span m="4036540">business,</span> <span m="4037080">you</span> <span m="4037425">have</span> <span m="4037770">to</span> <span m="4038250">bind</span> <span m="4038375">on</span> <span m="4038500">port</span> <span m="4038800">80,</span> <span m="4039100">so</span> <span m="4039400">okld</span> <span m="4039745">does</span> <span m="4040090">that</span> <span m="4040260">as</span> <span m="4040385">well</span> <span m="4040510">for</span> <span m="4040900">us.</span> <span m="4043400">Anything</span> <span m="4043610">else?</span> </p>
<p><span m="4046385">AUDIENCE:</span> <span m="4046880">Complete</span> <span m="4047375">to</span> <span m="4047870">open</span> <span m="4047900">the</span> <span m="4047931">log</span> <span m="4047962">file</span> <span m="4047993">oklogd.</span> <span m="4048860">You</span> <span m="4048950">don't</span> <span m="4049080">want</span> <span m="4049240">to</span> <span m="4049565">open</span> <span m="4049890">oklogd</span> <span m="4050090">to</span> <span m="4050240">have</span> <span m="4050650">access</span> <span m="4051050">to</span> <span m="4051440">open</span> <span m="4051890">the</span> <span m="4052380">file.</span> <span m="4052660">You</span> <span m="4052730">want</span> <span m="4052800">to</span> <span m="4052870">open</span> <span m="4052940">it</span> <span m="4053180">for</span> <span m="4053556">[INAUDIBLE].</span> </p>
<p><span m="4055216">PROFESSOR: Maybe.</span> <span m="4055669">Actually,</span> <span m="4055895">yeah.</span> <span m="4057028">I</span> <span m="4057481">don't</span> <span m="4057940">know.</span> <span m="4058740">I</span> <span m="4058840">forget</span> <span m="4059165">this</span> <span m="4059250">from</span> <span m="4059370">the</span> <span m="4059450">source</span> <span m="4059710">code</span> <span m="4060610">whether</span> <span m="4060840">they</span> <span m="4060960">actually</span> <span m="4061150">do</span> <span m="4061260">this</span> <span m="4061430">or</span> <span m="4061500">not.</span> <span m="4062460">You</span> <span m="4062590">could</span> <span m="4062730">imagine absolutley--</span> </p>
<p><span m="4063380">AUDIENCE: I</span> <span m="4063795">think</span> <span m="4064002">they</span> <span m="4064210">write</span> <span m="4064293">it</span> <span m="4064376">in</span> <span m="4064459">the</span> <span m="4064542">paper</span> <span m="4064625">as</span> <span m="4064832">well.</span> </p>
<p><span m="4065040">PROFESSOR: I</span> <span m="4065190">see.</span> <span m="4065340">So</span> <span m="4066830">okld</span> <span m="4067040">opens</span> <span m="4067430">the</span> <span m="4067500">log</span> <span m="4067750">file</span> <span m="4068020">and</span> <span m="4068130">passes</span> <span m="4068400">it</span> <span m="4068490">in?</span> <span m="4068720">Could</span> <span m="4068800">be.</span> </p>
<p><span m="4068880">AUDIENCE: Because</span> <span m="4069040">otherwise</span> <span m="4069360">an</span> <span m="4069810">attacker</span> <span m="4070160">that</span> <span m="4070380">compromised</span> <span m="4070766">oklogd</span> <span m="4071540">would</span> <span m="4071860">be</span> <span m="4072013">able</span> <span m="4072166">to</span> <span m="4072320">erase</span> <span m="4072432">the</span> <span m="4072545">entire</span> <span m="4072657">log.</span> </p>
<p><span m="4073500">PROFESSOR:  That's</span> <span m="4073780">right,</span> <span m="4074065">yeah.</span> <span m="4074350">So</span> <span m="4074720">maybe</span> <span m="4074820">you</span> <span m="4074943">want</span> <span m="4075066">to</span> <span m="4075190">open</span> <span m="4075750">in</span> <span m="4075890">append-only</span> <span m="4076310">mode</span> <span m="4076840">and</span> <span m="4077030">then</span> <span m="4077260">pass</span> <span m="4077530">it</span> <span m="4077650">to</span> <span m="4078140">oklogd</span> <span m="4078690">and</span> <span m="4078850">then</span> <span m="4079616">you</span> <span m="4080052">have</span> <span m="4080490">more</span> <span m="4081210">security</span> <span m="4081610">guarantees</span> <span m="4081990">for</span> <span m="4082040">the</span> <span m="4082090">log.</span> <span m="4082300">Yeah,</span> <span m="4082425">that's</span> <span m="4082550">actually</span> <span m="4082830">pretty</span> <span m="4083000">cool.</span> <span m="4083840">I</span> <span m="4084310">missed</span> <span m="4084780">that</span> <span m="4085150">on</span> <span m="4085280">the</span> <span m="4085713">paper,</span> <span m="4085929">but</span> <span m="4086580">makes</span> <span m="4086700">a</span> <span m="4086765">lot</span> <span m="4086830">of</span> <span m="4087200">sense,</span> <span m="4087660">yeah.</span> <span m="4089650">Any</span> <span m="4089790">other</span> <span m="4089990">things</span> <span m="4090435">okld</span> <span m="4090880">is</span> <span m="4091570">doing</span> <span m="4091740">for</span> <span m="4091910">us?</span> <span m="4094710">I</span> <span m="4094820">think</span> <span m="4094906">that's</span> <span m="4094993">basically</span> <span m="4095080">it.</span> <span m="4095340">These</span> <span m="4095580">are</span> <span m="4095670">the</span> <span m="4095790">main</span> <span m="4096010">things</span> <span m="4096330">that</span> <span m="4096495">you</span> <span m="4096660">can't</span> <span m="4097090">do</span> <span m="4097439">unless</span> <span m="4097740">you're</span> <span m="4097920">root,</span> <span m="4098220">and</span> <span m="4098439">okld</span> <span m="4098910">is</span> <span m="4099130">sort</span> <span m="4099310">of</span> <span m="4099450">the</span> <span m="4100010">component</span> <span m="4100649">that</span> <span m="4101260">ends</span> <span m="4101410">up</span> <span m="4101560">having</span> <span m="4101890">to</span> <span m="4101990">do</span> <span m="4102180">all</span> <span m="4102340">these</span> <span m="4103479">operations.</span> </p>
<p><span m="4105479">So</span> <span m="4107750">I</span> <span m="4107850">guess</span> <span m="4108029">we</span> <span m="4108220">had</span> <span m="4108525">this</span> <span m="4108830">homework</span> <span m="4109140">question</span> <span m="4109439">about</span> <span m="4109670">what</span> <span m="4109819">happens</span> <span m="4110270">if</span> <span m="4110380">you</span> <span m="4110500">leak</span> <span m="4110800">this</span> <span m="4111210">20</span> <span m="4111470">byte</span> <span m="4112020">database</span> <span m="4112490">token</span> <span m="4112770">thing.</span> <span m="4113279">So</span> <span m="4114140">what</span> <span m="4114279">do</span> <span m="4114319">you</span> <span m="4114470">guys</span> <span m="4114595">think?</span> <span m="4114720">What's</span> <span m="4115420">the</span> <span m="4115500">damage?</span> <span m="4116740">Should</span> <span m="4117055">we</span> <span m="4117370">leak</span> <span m="4117590">these</span> <span m="4117770">guys?</span> <span m="4118180">Should</span> <span m="4118245">we</span> <span m="4118310">worry</span> <span m="4118620">about</span> <span m="4118859">it?</span> <span m="4122149">Anything</span> <span m="4122319">else?</span> </p>
<p><span m="4125405">AUDIENCE:</span> <span m="4125892">The</span> <span m="4126379">attacker</span> <span m="4126866">can</span> <span m="4127359">pretend</span> <span m="4127729">to</span> <span m="4127830">be</span> <span m="4128109">that</span> <span m="4128569">specific</span> <span m="4129140">service</span> <span m="4129394">[INAUDIBLE].</span> </p>
<p><span m="4129954">PROFESSOR:</span> <span m="4130260">That's</span> <span m="4130369">right,</span> <span m="4130479">yeah.</span> <span m="4130890">So,</span> <span m="4130960">you</span> <span m="4131390">might</span> <span m="4131550">be</span> <span m="4131630">able</span> <span m="4131840">to</span> <span m="4131974">now</span> <span m="4132109">connect</span> <span m="4132470">and</span> <span m="4132630">issue,</span> <span m="4132790">of</span> <span m="4132880">course,</span> <span m="4133100">all</span> <span m="4133189">these</span> <span m="4133330">template</span> <span m="4133580">queries.</span> <span m="4133890">That</span> <span m="4134175">actually</span> <span m="4134317">seems</span> <span m="4134460">fairly</span> <span m="4134870">straightforward,</span> <span m="4135370">I</span> <span m="4135529">guess,</span> <span m="4135859">from</span> <span m="4136029">this</span> <span m="4136120">picture.</span> <span m="4137600">You</span> <span m="4137720">probably</span> <span m="4137960">need</span> <span m="4138109">to</span> <span m="4138210">compromise</span> <span m="4138689">one</span> <span m="4138840">of</span> <span m="4138890">these</span> <span m="4139080">components</span> <span m="4139600">to</span> <span m="4139680">be</span> <span m="4139770">able</span> <span m="4139990">to</span> <span m="4140160">connect</span> <span m="4140430">to</span> <span m="4140490">the</span> <span m="4140580">database</span> <span m="4141109">server</span> <span m="4141399">in</span> <span m="4141450">the</span> <span m="4141520">first</span> <span m="4141760">place.</span> <span m="4142149">So</span> <span m="4142779">I</span> <span m="4142850">guess</span> <span m="4143069">if</span> <span m="4143240">you</span> <span m="4143890">have</span> <span m="4144069">this</span> <span m="4144220">token</span> <span m="4144680">and</span> <span m="4145109">you</span> <span m="4145210">manage</span> <span m="4145490">to</span> <span m="4145649">compromise</span> <span m="4146810">one</span> <span m="4147060">of</span> <span m="4147130">these</span> <span m="4147380">pieces</span> <span m="4147689">in</span> <span m="4147790">the</span> <span m="4147880">picture,</span> <span m="4148550">then</span> <span m="4148859">you</span> <span m="4149010">could</span> <span m="4149260">run</span> <span m="4149474">all</span> <span m="4149689">these</span> <span m="4149859">queries</span> <span m="4150249">as</span> <span m="4150640">well.</span> <span m="4151632">Make</span> <span m="4152128">sense?</span> <span m="4153620">Fairly</span> <span m="4153850">straightforward</span> <span m="4154279">stuff.</span> </p>
<p><span m="4156845">OK,</span> <span m="4157306">I</span> <span m="4157770">guess</span> <span m="4158050">let's</span> <span m="4158270">look</span> <span m="4158460">at,</span> <span m="4159784">could</span> <span m="4160276">you</span> <span m="4160770">do</span> <span m="4160840">better?</span> <span m="4161600">Could</span> <span m="4161644">you</span> <span m="4161689">do</span> <span m="4161859">better</span> <span m="4162279">than</span> <span m="4162510">this</span> <span m="4162689">OKWS</span> <span m="4163560">design?</span> <span m="4164310">Except</span> <span m="4164430">for</span> <span m="4164590">make</span> <span m="4164760">this</span> <span m="4164920">whole</span> <span m="4165529">argument</span> <span m="4166000">about,</span> <span m="4166700">well,</span> <span m="4167630">we</span> <span m="4167770">might</span> <span m="4168220">be</span> <span m="4168319">able</span> <span m="4168490">to</span> <span m="4168580">do</span> <span m="4168649">even</span> <span m="4168970">better,</span> <span m="4169470">like</span> <span m="4169700">allocating</span> <span m="4170319">a</span> <span m="4170390">separate</span> <span m="4170920">unit</span> <span m="4171390">uid</span> <span m="4172359">per</span> <span m="4172720">user</span> <span m="4173540">in</span> <span m="4173670">this</span> <span m="4173800">design</span> <span m="4174279">instead</span> <span m="4174470">of</span> <span m="4174630">per</span> <span m="4174890">service.</span> <span m="4176340">But</span> <span m="4176430">here,</span> <span m="4176930">every</span> <span m="4177170">service,</span> <span m="4177649">like</span> <span m="4177899">newsletters</span> <span m="4178640">or</span> <span m="4178760">friend</span> <span m="4179130">matching</span> <span m="4179689">or</span> <span m="4179840">account</span> <span m="4180220">sign</span> <span m="4180510">up</span> <span m="4181000">is</span> <span m="4181120">a</span> <span m="4181180">separate</span> <span m="4181590">userid,</span> <span m="4183240">but</span> <span m="4183880">every</span> <span m="4184740">OKWS</span> <span m="4185120">user</span> <span m="4187130">isn't</span> <span m="4187479">really</span> <span m="4187710">represented</span> <span m="4188220">by</span> <span m="4188330">a</span> <span m="4188450">Unix</span> <span m="4188819">uid.</span> <span m="4189979">There's</span> <span m="4190510">not</span> <span m="4190930">really</span> <span m="4191210">userids,</span> <span m="4191810">they're</span> <span m="4192000">service</span> <span m="4192290">IDs.</span> <span m="4193960">So,</span> <span m="4194240">would</span> <span m="4194365">it</span> <span m="4194490">make</span> <span m="4194730">sense</span> <span m="4195100">to</span> <span m="4195260">have</span> <span m="4197470">different</span> <span m="4198440">uids</span> <span m="4198790">for</span> <span m="4198960">every</span> <span m="4199600">OKWS</span> <span m="4200040">customer?</span> <span m="4200986">Is</span> <span m="4201402">there</span> <span m="4201818">a</span> <span m="4202026">reason</span> <span m="4202234">for</span> <span m="4202650">that?</span> <span m="4203370">Yeah.</span> </p>
<p><span m="4203850">AUDIENCE:</span> <span m="4204310">So</span> <span m="4204480">at</span> <span m="4204535">the</span> <span m="4204590">moment,</span> <span m="4204970">if</span> <span m="4205430">one</span> <span m="4205710">user</span> <span m="4205985">compromises</span> <span m="4206260">the</span> <span m="4206420">service,</span> <span m="4207280">then</span> <span m="4207420">they</span> <span m="4207500">can</span> <span m="4207590">get</span> <span m="4207680">access</span> <span m="4207940">to</span> <span m="4208050">all</span> <span m="4208500">the</span> <span m="4208830">other</span> <span m="4209070">user's</span> <span m="4209450">data</span> <span m="4209810">for</span> <span m="4210100">that</span> <span m="4210390">same</span> <span m="4210650">server.</span> </p>
<p><span m="4210910">PROFESSOR: That's</span> <span m="4211275">right,</span> <span m="4211640">yeah.</span> </p>
<p><span m="4212340">AUDIENCE: Whereas,</span> <span m="4212610">if</span> <span m="4212730">you</span> <span m="4212860">had</span> <span m="4213060">a</span> <span m="4213130">separate--</span> <span m="4214070">essentially</span> <span m="4214170">a</span> <span m="4214450">separate</span> <span m="4214640">service</span> <span m="4215070">and</span> <span m="4215135">a</span> <span m="4215200">separate</span> <span m="4215550">dbproxy</span> <span m="4216440">for</span> <span m="4216910">every</span> <span m="4217040">user,</span> <span m="4217790">there's</span> <span m="4218080">no</span> <span m="4218340">way</span> <span m="4218796">you</span> <span m="4219252">could</span> <span m="4219708">access</span> <span m="4219799">anyone</span> <span m="4219890">else's</span> <span m="4219981">data</span> <span m="4220072">either.</span> </p>
<p><span m="4220620">PROFESSOR: Right,</span> <span m="4221210">but</span> <span m="4221670">could</span> <span m="4221850">it</span> <span m="4221990">be</span> <span m="4222190">actually</span> <span m="4222430">a</span> <span m="4222490">stronger</span> <span m="4223030">model?</span> <span m="4223720">So</span> <span m="4224120">especially</span> <span m="4224440">for--</span> <span m="4225160">well,</span> <span m="4225600">I</span> <span m="4225800">guess</span> <span m="4226000">there's</span> <span m="4226240">really</span> <span m="4226520">two</span> <span m="4226720">reasons</span> <span m="4227060">why</span> <span m="4227360">I</span> <span m="4227660">think</span> <span m="4227880">the</span> <span m="4228050">OKWS</span> <span m="4228290">guys</span> <span m="4228610">don't</span> <span m="4228930">go</span> <span m="4229550">to</span> <span m="4229660">that</span> <span m="4229830">extreme</span> <span m="4230510">model.</span> <span m="4231560">One</span> <span m="4231800">of</span> <span m="4231890">them</span> <span m="4232150">is--</span> <span m="4232530">they</span> <span m="4232620">make</span> <span m="4232800">a</span> <span m="4232850">big</span> <span m="4233040">deal</span> <span m="4233250">in</span> <span m="4233416">this</span> <span m="4233583">paper--</span> <span m="4233750">is</span> <span m="4234150">performance,</span> <span m="4234550">right?</span> <span m="4234730">So</span> <span m="4235240">if</span> <span m="4235400">you</span> <span m="4235520">have,</span> <span m="4235825">I</span> <span m="4236130">don't</span> <span m="4236370">know,</span> <span m="4236610">a</span> <span m="4236890">couple</span> <span m="4237150">million</span> <span m="4237600">users</span> <span m="4238000">on</span> <span m="4238040">OkCupid,</span> <span m="4238380">then</span> <span m="4239380">all</span> <span m="4239530">of</span> <span m="4239590">a</span> <span m="4239650">sudden</span> <span m="4239900">you</span> <span m="4239990">have</span> <span m="4240170">a</span> <span m="4240270">couple</span> <span m="4240550">of</span> <span m="4240650">million</span> <span m="4241060">processes</span> <span m="4241610">running</span> <span m="4241900">here,</span> <span m="4242790">or</span> <span m="4242970">maybe</span> <span m="4243220">a</span> <span m="4243290">couple</span> <span m="4243520">million</span> <span m="4243920">dbproxies,</span> <span m="4244830">or</span> <span m="4245410">maybe</span> <span m="4245630">you</span> <span m="4245720">can</span> <span m="4246120">optimize</span> <span m="4246500">something</span> <span m="4246920">on</span> <span m="4247020">the</span> <span m="4247310">dbproxy</span> <span m="4247423">side,</span> <span m="4247536">but</span> <span m="4247650">here,</span> <span m="4248060">yeah,</span> <span m="4248210">you</span> <span m="4248360">have</span> <span m="4248870">a</span> <span m="4248950">couple</span> <span m="4249170">million</span> <span m="4249480">userids</span> <span m="4250660">and</span> <span m="4250830">either</span> <span m="4251160">you</span> <span m="4251210">have</span> <span m="4251470">a</span> <span m="4251530">lot</span> <span m="4251880">of</span> <span m="4252050">processes</span> <span m="4252610">running</span> <span m="4252870">all</span> <span m="4253020">the</span> <span m="4253120">time</span> <span m="4254030">or</span> <span m="4254320">you're</span> <span m="4254540">starting</span> <span m="4254980">these</span> <span m="4255220">processes</span> <span m="4255600">on</span> <span m="4255880">demand.</span> <span m="4256890">And</span> <span m="4257070">starting</span> <span m="4257330">a</span> <span m="4257400">process</span> <span m="4258110">involves</span> <span m="4258810">some</span> <span m="4259160">nontrivial</span> <span m="4259700">amount</span> <span m="4259900">of</span> <span m="4259990">overhead,</span> <span m="4261510">so</span> <span m="4261680">you</span> <span m="4261800">probably</span> <span m="4262160">wouldn't</span> <span m="4262440">be</span> <span m="4262540">able</span> <span m="4262730">to</span> <span m="4262800">get</span> <span m="4263150">as</span> <span m="4263380">good</span> <span m="4263660">of</span> <span m="4263830">performance</span> <span m="4264350">numbers</span> <span m="4264680">as</span> <span m="4264840">these</span> <span m="4265030">guys</span> <span m="4265240">are</span> <span m="4265320">able</span> <span m="4265610">to</span> <span m="4265700">show</span> <span m="4265940">with</span> <span m="4266240">OKWS.</span> <span m="4267480">There's</span> <span m="4267690">a</span> <span m="4267750">performance</span> <span m="4268090">argument.</span> <span m="4268610">Question.</span> </p>
<p><span m="4269189">AUDIENCE: Yeah,</span> <span m="4269658">I</span> <span m="4269775">was</span> <span m="4269892">just</span> <span m="4270009">reading</span> <span m="4270127">in</span> <span m="4270244">the</span> <span m="4270361">paper</span> <span m="4270478">that</span> <span m="4270596">said</span> <span m="4271065">the</span> <span m="4271534">performance</span> <span m="4272003">of</span> <span m="4272472">the</span> <span m="4272550">system</span> <span m="4272628">was</span> <span m="4272706">better</span> <span m="4272784">than</span> <span m="4272862">others?</span> </p>
<p><span m="4273410">PROFESSOR: Yeah.</span> </p>
<p><span m="4273890">AUDIENCE: How</span> <span m="4274375">come?</span> </p>
<p><span m="4275345">PROFESSOR: Well,</span> <span m="4275830">I</span> <span m="4276000">think</span> <span m="4276680">it's</span> <span m="4277110">partly</span> <span m="4277560">because</span> <span m="4278130">they</span> <span m="4278880">fine</span> <span m="4279280">tuned</span> <span m="4279580">their</span> <span m="4279750">design</span> <span m="4280140">to</span> <span m="4280300">their</span> <span m="4280590">particular</span> <span m="4281140">workload</span> <span m="4282220">and</span> <span m="4282510">it's</span> <span m="4282640">also</span> <span m="4282990">they</span> <span m="4283330">write</span> <span m="4283600">their</span> <span m="4283670">whole</span> <span m="4283970">thing</span> <span m="4284140">in</span> <span m="4284230">C++.</span> <span m="4285050">The</span> <span m="4285300">alternative</span> <span m="4285550">is</span> <span m="4285630">you're</span> <span m="4285810">writing</span> <span m="4286070">some</span> <span m="4286220">stuff</span> <span m="4286440">in</span> <span m="4286600">PHP,</span> <span m="4287510">then</span> <span m="4287740">you're</span> <span m="4287880">probably</span> <span m="4288130">going</span> <span m="4288230">to</span> <span m="4288300">win</span> <span m="4288690">on</span> <span m="4288840">that</span> <span m="4289240">front.</span> <span m="4290320">It's</span> <span m="4290510">also</span> <span m="4290930">the</span> <span m="4291030">case</span> <span m="4291410">that</span> <span m="4292890">they</span> <span m="4293100">don't</span> <span m="4293250">have</span> <span m="4293580">nearly</span> <span m="4294330">as</span> <span m="4294500">many</span> <span m="4294740">features</span> <span m="4295360">as,</span> <span m="4295750">let's</span> <span m="4295920">say,</span> <span m="4296020">Apache</span> <span m="4296140">has.</span> </p>
<p><span m="4296900">Apache</span> <span m="4297690">has</span> <span m="4297860">a</span> <span m="4298430">very</span> <span m="4299480">general</span> <span m="4299980">purpose</span> <span m="4300320">design,</span> <span m="4300930">so</span> <span m="4301100">it</span> <span m="4301250">has</span> <span m="4301470">lots</span> <span m="4301655">of</span> <span m="4301840">processes</span> <span m="4302350">running,</span> <span m="4302780">it</span> <span m="4302880">restarts</span> <span m="4303420">them</span> <span m="4303490">every</span> <span m="4303690">once</span> <span m="4303930">in</span> <span m="4303970">awhile.</span> <span m="4304840">It</span> <span m="4305030">actually</span> <span m="4305330">has</span> <span m="4305990">every</span> <span m="4306540">ttp</span> <span m="4306910">connection</span> <span m="4307400">tying</span> <span m="4307740">up</span> <span m="4307880">a</span> <span m="4307940">process</span> <span m="4308360">for</span> <span m="4308460">the</span> <span m="4308560">duration</span> <span m="4308820">of</span> <span m="4309080">that</span> <span m="4309200">connection.</span> <span m="4309640">They</span> <span m="4309725">do</span> <span m="4309810">keep-alives.</span> <span m="4310970">That</span> <span m="4311170">also</span> <span m="4311640">increases</span> <span m="4312180">the</span> <span m="4312260">number</span> <span m="4312460">of</span> <span m="4312530">processes</span> <span m="4312850">you</span> <span m="4312920">have</span> <span m="4313050">to</span> <span m="4313140">run</span> <span m="4313500">for</span> <span m="4314040">their</span> <span m="4314200">design.</span> <span m="4315100">So</span> <span m="4315420">all</span> <span m="4315630">those</span> <span m="4315890">things</span> <span m="4316230">just</span> <span m="4316440">add</span> <span m="4316610">up</span> <span m="4316820">in</span> <span m="4316920">terms</span> <span m="4317110">of</span> <span m="4317220">overhead</span> <span m="4317620">for</span> <span m="4317880">Apache,</span> <span m="4318150">because</span> <span m="4318370">it</span> <span m="4318540">wants</span> <span m="4318720">to</span> <span m="4318790">handle</span> <span m="4319040">anything</span> <span m="4319410">possibly</span> <span m="4319765">you</span> <span m="4320120">could</span> <span m="4320290">do</span> <span m="4320390">with</span> <span m="4320455">a</span> <span m="4320520">web</span> <span m="4320680">server.</span> <span m="4321570">Whereas</span> <span m="4321760">these</span> <span m="4321950">guys,</span> <span m="4322130">I</span> <span m="4322240">think,</span> <span m="4322350">are</span> <span m="4322420">very</span> <span m="4322650">specific.</span> <span m="4323060">We're</span> <span m="4323210">just</span> <span m="4323450">going</span> <span m="4323560">to</span> <span m="4323650">run</span> <span m="4323850">these</span> <span m="4324010">services,</span> <span m="4324450">very</span> <span m="4324680">quick</span> <span m="4324880">requests,</span> <span m="4325770">and</span> <span m="4326130">no</span> <span m="4326365">even</span> <span m="4326600">static</span> <span m="4326920">file</span> <span m="4327130">serving,</span> <span m="4327740">if</span> <span m="4327850">they</span> <span m="4327950">can</span> <span m="4328080">help</span> <span m="4328300">it.</span> </p>
<p><span m="4330180">But</span> <span m="4330460">I</span> <span m="4330540">think</span> <span m="4330710">there's</span> <span m="4330840">actually</span> <span m="4331310">other</span> <span m="4331550">web</span> <span m="4331720">servers</span> <span m="4332040">out</span> <span m="4332180">there</span> <span m="4332410">these</span> <span m="4332660">days</span> <span m="4332890">that</span> <span m="4333200">probably</span> <span m="4333330">can</span> <span m="4333490">match</span> <span m="4333800">the</span> <span m="4333950">performance</span> <span m="4334380">of</span> <span m="4334470">OKWS</span> <span m="4334980">if</span> <span m="4335120">you</span> <span m="4335200">really</span> <span m="4335380">wanted</span> <span m="4335550">to.</span> <span m="4335750">So,</span> <span m="4336240">for</span> <span m="4336360">example,</span> <span m="4336610">Nginx</span> <span m="4337160">is</span> <span m="4337240">a</span> <span m="4337300">very</span> <span m="4337580">optimized</span> <span m="4338190">web</span> <span m="4338340">server</span> <span m="4338660">you</span> <span m="4338760">can</span> <span m="4338880">run</span> <span m="4339060">these</span> <span m="4339250">days.</span> <span m="4339860">If</span> <span m="4339970">you</span> <span m="4340060">want</span> <span m="4340280">fast</span> <span m="4340940">application</span> <span m="4341500">performance</span> <span m="4341920">on</span> <span m="4342010">the</span> <span m="4342080">server</span> <span m="4342350">side,</span> <span m="4342590">you</span> <span m="4342670">probably</span> <span m="4342930">want</span> <span m="4343060">to</span> <span m="4343560">keep</span> <span m="4344020">a</span> <span m="4344060">long</span> <span m="4344480">running</span> <span m="4344750">process</span> <span m="4345120">very</span> <span m="4345260">much</span> <span m="4345450">like</span> <span m="4345550">the</span> <span m="4345830">OKWS</span> <span m="4346170">service</span> <span m="4346580">thing,</span> <span m="4347200">and</span> <span m="4347620">the</span> <span m="4347710">fast</span> <span m="4348080">cgi</span> <span m="4348680">is</span> <span m="4348870">a</span> <span m="4349030">common</span> <span m="4349560">mechanism,</span> <span m="4350060">or</span> <span m="4350190">sort</span> <span m="4350330">of</span> <span m="4350780">protocol,</span> <span m="4351610">that</span> <span m="4352050">you</span> <span m="4352150">could</span> <span m="4352290">use</span> <span m="4352460">on</span> <span m="4352530">the</span> <span m="4352620">server</span> <span m="4352900">side</span> <span m="4353240">to</span> <span m="4353940">implement</span> <span m="4354320">this</span> <span m="4354450">even</span> <span m="4354580">in</span> <span m="4354710">Apache</span> <span m="4355100">or</span> <span m="4355180">Nginx</span> <span m="4355590">as</span> <span m="4355680">well.</span> </p>
<p><span m="4356460">So</span> <span m="4356650">I</span> <span m="4356740">think</span> <span m="4357080">many</span> <span m="4357270">of</span> <span m="4357340">these</span> <span m="4357790">performance</span> <span m="4358160">ideas</span> <span m="4359110">aren't</span> <span m="4359440">exclusive</span> <span m="4359695">to</span> <span m="4359950">OKWS.</span> <span m="4360540">You</span> <span m="4360630">couldn't</span> <span m="4361800">perform</span> <span m="4362110">the</span> <span m="4362190">same</span> <span m="4362360">performance</span> <span m="4362760">tricks</span> <span m="4363250">in</span> <span m="4363400">other</span> <span m="4363900">services</span> <span m="4364340">as</span> <span m="4364760">well.</span> <span m="4365040">They</span> <span m="4365170">just</span> <span m="4365320">show</span> <span m="4365570">that</span> <span m="4367090">better</span> <span m="4367410">security</span> <span m="4368040">doesn't</span> <span m="4368470">preclude</span> <span m="4368760">these</span> <span m="4369140">tricks.</span> <span m="4369660">You</span> <span m="4369940">could</span> <span m="4370110">still</span> <span m="4370600">get</span> <span m="4370780">the</span> <span m="4370880">performance.</span> </p>
<p><span m="4371810">I</span> <span m="4371840">guess</span> <span m="4371980">for</span> <span m="4372060">them,</span> <span m="4372320">they</span> <span m="4372630">were</span> <span m="4372860">just</span> <span m="4373500">initially</span> <span m="4373900">starting</span> <span m="4374200">out</span> <span m="4374410">with</span> <span m="4374580">an</span> <span m="4374660">Apache-like</span> <span m="4375400">design,</span> <span m="4376320">where</span> <span m="4377940">they</span> <span m="4378050">were</span> <span m="4378180">willing</span> <span m="4378460">to</span> <span m="4378530">pay</span> <span m="4378690">the</span> <span m="4378770">price</span> <span m="4379030">if</span> <span m="4379075">it</span> <span m="4379120">was</span> <span m="4379270">easy</span> <span m="4379450">to</span> <span m="4379540">program</span> <span m="4379900">and</span> <span m="4380145">secure,</span> <span m="4380390">but</span> <span m="4380475">it</span> <span m="4380560">just</span> <span m="4380720">wasn't</span> <span m="4380920">secure,</span> <span m="4381320">so</span> <span m="4381420">they</span> <span m="4381610">said,</span> <span m="4381940">OK,</span> <span m="4382080">well</span> <span m="4382290">we'll</span> <span m="4382510">do</span> <span m="4382640">this,</span> <span m="4383010">and</span> <span m="4383185">I</span> <span m="4383360">don't</span> <span m="4383600">think</span> <span m="4383660">the</span> <span m="4383860">performance</span> <span m="4384430">was</span> <span m="4386230">as</span> <span m="4386460">necessarily</span> <span m="4386540">a</span> <span m="4386850">big</span> <span m="4387010">of</span> <span m="4387170">a</span> <span m="4387330">goal</span> <span m="4387600">for</span> <span m="4387650">them.</span> <span m="4387780">I</span> <span m="4387820">guess</span> <span m="4388230">they</span> <span m="4388300">wanted</span> <span m="4388480">to--</span> <span m="4388980">well,</span> <span m="4389290">at</span> <span m="4389600">the</span> <span m="4389850">time</span> <span m="4390120">they</span> <span m="4390240">had</span> <span m="4390400">some</span> <span m="4390540">problems</span> <span m="4390850">in</span> <span m="4390933">terms</span> <span m="4391016">of</span> <span m="4391100">performance</span> <span m="4391243">as</span> <span m="4391386">well,</span> <span m="4391530">so</span> <span m="4391740">I</span> <span m="4391790">think</span> <span m="4392100">they</span> <span m="4392360">really</span> <span m="4392490">wanted</span> <span m="4392810">good</span> <span m="4392980">performance.</span> <span m="4397464">Any</span> <span m="4397930">other</span> <span m="4398510">questions</span> <span m="4398840">about</span> <span m="4399320">this</span> <span m="4399800">stuff?</span> </p>
<p><span m="4401240">OK.</span> <span m="4402250">So</span> <span m="4402630">I</span> <span m="4403012">guess</span> <span m="4403394">it</span> <span m="4403776">was</span> <span m="4404160">saying,</span> <span m="4405050">one</span> <span m="4405290">reason</span> <span m="4405620">why</span> <span m="4405790">these</span> <span m="4405865">guys</span> <span m="4405940">don't</span> <span m="4406500">want</span> <span m="4406630">to</span> <span m="4406750">run</span> <span m="4406950">a</span> <span m="4407010">separate</span> <span m="4407380">service</span> <span m="4407780">per</span> <span m="4408130">user</span> <span m="4408560">is</span> <span m="4408860">the</span> <span m="4408960">fact</span> <span m="4409320">that</span> <span m="4410820">there's</span> <span m="4410990">performance</span> <span m="4411370">overheads</span> <span m="4411710">in</span> <span m="4411800">doing</span> <span m="4412020">that.</span> <span m="4412630">The</span> <span m="4412720">other</span> <span m="4413040">reason</span> <span m="4413350">is</span> <span m="4413460">that</span> <span m="4413870">their</span> <span m="4413970">full</span> <span m="4414200">application</span> <span m="4414830">model</span> <span m="4415175">sort</span> <span m="4415520">of</span> <span m="4415920">hinges</span> <span m="4416320">around</span> <span m="4416860">a</span> <span m="4416940">service</span> <span m="4418100">having</span> <span m="4418400">to</span> <span m="4418630">get</span> <span m="4418800">access</span> <span m="4419170">to</span> <span m="4419470">every</span> <span m="4419950">user's</span> <span m="4420260">data,</span> <span m="4420720">like</span> <span m="4420880">finding</span> <span m="4421320">your</span> <span m="4421450">friends</span> <span m="4421880">on</span> <span m="4422020">OkCupid</span> <span m="4422650">or</span> <span m="4422800">someone</span> <span m="4423250">to</span> <span m="4423620">go</span> <span m="4423760">out</span> <span m="4423980">on</span> <span m="4424225">a</span> <span m="4424470">date</span> <span m="4424625">with.</span> </p>
<p><span m="4425460">And</span> <span m="4426770">as</span> <span m="4426900">a</span> <span m="4426950">result,</span> <span m="4427800">this</span> <span m="4428390">per</span> <span m="4428630">user</span> <span m="4428930">isolation</span> <span m="4429410">model</span> <span m="4429710">might</span> <span m="4429950">not</span> <span m="4430190">make</span> <span m="4430350">a</span> <span m="4430390">lot</span> <span m="4430540">of</span> <span m="4430620">sense,</span> <span m="4430850">because</span> <span m="4431110">ultimately</span> <span m="4431530">there</span> <span m="4431950">has</span> <span m="4432170">to</span> <span m="4432250">be</span> <span m="4432330">a</span> <span m="4432380">service</span> <span m="4432745">that</span> <span m="4433110">you're</span> <span m="4433510">going</span> <span m="4433765">to</span> <span m="4434020">send</span> <span m="4434460">a</span> <span m="4434900">request</span> <span m="4435340">to,</span> <span m="4435780">and</span> <span m="4436220">it's</span> <span m="4436308">going</span> <span m="4436396">to</span> <span m="4436484">look</span> <span m="4436572">at</span> <span m="4436660">everyone</span> <span m="4437200">else's</span> <span m="4437400">data</span> <span m="4437900">to</span> <span m="4438010">find</span> <span m="4438420">your</span> <span m="4438590">match.</span> <span m="4439970">So</span> <span m="4441470">that's</span> <span m="4441650">probably,</span> <span m="4442680">as</span> <span m="4442830">a</span> <span m="4442970">result,</span> <span m="4443110">not</span> <span m="4443550">really</span> <span m="4443990">amenable,</span> <span m="4444060">like,</span> <span m="4444600">even</span> <span m="4444770">if</span> <span m="4444860">you</span> <span m="4444920">had</span> <span m="4445130">user</span> <span m="4445480">IDs</span> <span m="4446430">or</span> <span m="4446590">some</span> <span m="4446740">sort</span> <span m="4446900">of</span> <span m="4447540">per</span> <span m="4447830">user</span> <span m="4448120">isolation</span> <span m="4448320">mechanism,</span> <span m="4448520">you</span> <span m="4448920">would</span> <span m="4449070">have</span> <span m="4449380">to</span> <span m="4449470">give</span> <span m="4449560">that</span> <span m="4449650">service</span> <span m="4449920">access</span> <span m="4450180">to</span> <span m="4450300">every</span> <span m="4450610">userid</span> <span m="4451030">anyway.</span> </p>
<p><span m="4452730">So</span> <span m="4452840">for</span> <span m="4452980">other</span> <span m="4453290">services</span> <span m="4453680">like</span> <span m="4453820">maybe</span> <span m="4454190">Gmail</span> <span m="4454950">or</span> <span m="4455330">Dropbox,</span> <span m="4455700">where</span> <span m="4456070">it's</span> <span m="4456290">much</span> <span m="4456510">more</span> <span m="4456670">user</span> <span m="4457120">focused</span> <span m="4457390">and</span> <span m="4457660">no</span> <span m="4457830">sharing,</span> <span m="4458780">then</span> <span m="4459150">a</span> <span m="4459540">per</span> <span m="4459675">user</span> <span m="4459810">isolation</span> <span m="4460380">might</span> <span m="4460590">make</span> <span m="4460840">more</span> <span m="4461220">sense</span> <span m="4461630">in</span> <span m="4461740">terms</span> <span m="4461980">of</span> <span m="4462110">the</span> <span m="4462200">benefits</span> <span m="4462610">you</span> <span m="4462780">could</span> <span m="4462890">get</span> <span m="4463000">out</span> <span m="4463180">of</span> <span m="4463260">it,</span> <span m="4463770">because</span> <span m="4464850">if</span> <span m="4465020">there's</span> <span m="4465410">a</span> <span m="4465720">userid</span> <span m="4467050">on</span> <span m="4467180">the</span> <span m="4467250">Dropbox</span> <span m="4467610">server</span> <span m="4467840">for</span> <span m="4468100">every</span> <span m="4468460">Dropbox</span> <span m="4469000">customer,</span> <span m="4469790">then,</span> <span m="4470700">well,</span> <span m="4471840">there's</span> <span m="4472390">a</span> <span m="4472500">process</span> <span m="4472820">running</span> <span m="4473050">for</span> <span m="4473220">you</span> <span m="4473450">and</span> <span m="4473540">there's</span> <span m="4473585">a</span> <span m="4473630">process</span> <span m="4473890">running</span> <span m="4474150">for</span> <span m="4474260">someone</span> <span m="4474530">else,</span> <span m="4474740">and</span> <span m="4474830">if</span> <span m="4474920">you</span> <span m="4475170">exploit</span> <span m="4475370">a</span> <span m="4475410">bug,</span> <span m="4475760">then</span> <span m="4476130">you</span> <span m="4476310">can't</span> <span m="4476360">touch</span> <span m="4476410">other</span> <span m="4476460">people's</span> <span m="4476920">data.</span> </p>
<p><span m="4477920">But</span> <span m="4478330">could</span> <span m="4478450">be</span> <span m="4478550">cool,</span> <span m="4478990">I</span> <span m="4479220">don't</span> <span m="4479470">know.</span> <span m="4479700">Dropbox</span> <span m="4480050">probably</span> <span m="4480220">doesn't</span> <span m="4480320">do</span> <span m="4480485">this</span> <span m="4480650">for</span> <span m="4480750">performance</span> <span m="4481180">reasons,</span> <span m="4482050">but</span> <span m="4482330">you</span> <span m="4482410">could</span> <span m="4482610">get</span> <span m="4482740">some</span> <span m="4482860">security</span> <span m="4483160">benefit.</span> <span m="4483550">Whereas,</span> <span m="4483820">for</span> <span m="4484160">OKWS</span> <span m="4484490">guys,</span> <span m="4485000">and</span> <span m="4485140">even</span> <span m="4485480">functionality-wise,</span> <span m="4486890">they</span> <span m="4487020">wouldn't</span> <span m="4487290">be</span> <span m="4487420">able</span> <span m="4487640">to</span> <span m="4488000">take</span> <span m="4488180">advantage</span> <span m="4488800">as</span> <span m="4489000">much</span> <span m="4489590">of</span> <span m="4489970">this</span> <span m="4490400">model.</span> <span m="4490830">So</span> <span m="4491060">maybe</span> <span m="4491300">for</span> <span m="4491540">your</span> <span m="4491680">profile</span> <span m="4492125">editing</span> <span m="4492570">service,</span> <span m="4492860">maybe</span> <span m="4492940">that</span> <span m="4493090">could</span> <span m="4493240">be</span> <span m="4493350">run</span> <span m="4493570">per</span> <span m="4493850">user,</span> <span m="4494730">but</span> <span m="4494870">the</span> <span m="4495240">matching</span> <span m="4495728">thing</span> <span m="4496216">would</span> <span m="4496338">still</span> <span m="4496460">be</span> <span m="4496582">shared.</span> <span m="4497192">Make</span> <span m="4497680">sense?</span> </p>
<p><span m="4500120">All</span> <span m="4500190">right.</span> <span m="4500260">So</span> <span m="4500505">let's</span> <span m="4500750">look</span> <span m="4500890">at</span> <span m="4501130">whether</span> <span m="4501870">OKWS</span> <span m="4502320">actually</span> <span m="4502720">manages</span> <span m="4503290">to</span> <span m="4504250">improve</span> <span m="4504600">security</span> <span m="4504970">here.</span> <span m="4505190">So</span> <span m="4505990">when</span> <span m="4506130">we</span> <span m="4506260">do</span> <span m="4506640">think</span> <span m="4506860">of</span> <span m="4507430">whether</span> <span m="4507720">a</span> <span m="4507820">system</span> <span m="4507930">is</span> <span m="4508040">secure</span> <span m="4508380">or</span> <span m="4508690">not</span> <span m="4509000">is</span> <span m="4509050">to</span> <span m="4509100">look</span> <span m="4509150">at</span> <span m="4509350">all</span> <span m="4509453">the</span> <span m="4509556">components</span> <span m="4509660">and</span> <span m="4509810">see,</span> <span m="4509960">well,</span> <span m="4510430">first</span> <span m="4510610">of</span> <span m="4510680">all,</span> <span m="4510810">what's</span> <span m="4510930">the</span> <span m="4511050">attack</span> <span m="4511370">surface?</span> <span m="4511810">Meaning,</span> <span m="4512340">how</span> <span m="4512560">would</span> <span m="4512710">you</span> <span m="4512840">try</span> <span m="4513200">to</span> <span m="4513320">compromise</span> <span m="4513780">that</span> <span m="4513890">component,</span> <span m="4514420">or</span> <span m="4514730">how</span> <span m="4514870">hard</span> <span m="4515160">is</span> <span m="4515290">it,</span> <span m="4515770">and</span> <span m="4515930">second</span> <span m="4516300">what's</span> <span m="4516550">the</span> <span m="4516650">damage?</span> <span m="4517330">So</span> <span m="4517770">let's</span> <span m="4518210">go</span> <span m="4518430">through</span> <span m="4518570">this</span> <span m="4518710">list.</span> </p>
<p><span m="4519390">Let's</span> <span m="4519610">start</span> <span m="4519950">with</span> <span m="4520300">okd,</span> <span m="4520860">so</span> <span m="4520970">what's</span> <span m="4521220">the</span> <span m="4522650">attack</span> <span m="4522850">surface?</span> <span m="4523770">What</span> <span m="4524290">kinds</span> <span m="4524570">of</span> <span m="4524860">things</span> <span m="4525200">could</span> <span m="4525400">you</span> <span m="4526380">use</span> <span m="4526710">to</span> <span m="4526840">attack</span> <span m="4527196">it?</span> <span m="4530020">[INAUDIBLE],</span> <span m="4530960">like</span> <span m="4531040">all</span> <span m="4531335">these</span> <span m="4531630">requests</span> <span m="4531835">coming</span> <span m="4532040">from</span> <span m="4532160">the</span> <span m="4532590">browser.</span> <span m="4532920">That</span> <span m="4533090">seems</span> <span m="4533500">pretty</span> <span m="4533720">good.</span> <span m="4533840">You</span> <span m="4533960">can</span> <span m="4534080">control</span> <span m="4534285">it</span> <span m="4534490">probably</span> <span m="4534830">in</span> <span m="4534946">lots</span> <span m="4535063">of</span> <span m="4535180">ways,</span> <span m="4535510">you can send</span> <span m="4535830">lots</span> <span m="4535960">of</span> <span m="4536090">strange</span> <span m="4536510">input.</span> </p>
<p><span m="4536993">AUDIENCE:</span> <span m="4537476">[INAUDIBLE].</span> </p>
<p><span m="4537960">PROFESSOR: Yeah,</span> <span m="4538190">so</span> <span m="4538680">maybe</span> <span m="4539000">there is--</span> <span m="4539300">this</span> <span m="4539400">thing</span> <span m="4539710">is</span> <span m="4539823">written</span> <span m="4539936">in</span> <span m="4540050">C++,</span> <span m="4540790">so</span> <span m="4541270">probably</span> <span m="4541910">these</span> <span m="4542090">guys</span> <span m="4542290">were</span> <span m="4542420">sloppy.</span> <span m="4542710">I</span> <span m="4543000">think</span> <span m="4543090">this</span> <span m="4543180">guy's</span> <span m="4543270">a</span> <span m="4543515">good</span> <span m="4543760">programmer,</span> <span m="4544130">but</span> <span m="4544660">if</span> <span m="4545070">he</span> <span m="4545240">was</span> <span m="4546400">not</span> <span m="4546790">very</span> <span m="4546810">careful</span> <span m="4547160">somewhere,</span> <span m="4547440">could</span> <span m="4547720">be</span> <span m="4548110">easily</span> <span m="4548480">exploitable.</span> <span m="4549660">So</span> <span m="4549750">what's</span> <span m="4549833">the</span> <span m="4549916">damage?</span> <span m="4550110">Suppose</span> <span m="4550440">you</span> <span m="4550580">find</span> <span m="4550910">a</span> <span m="4551120">buffer</span> <span m="4551460">overflow</span> <span m="4551630">or</span> <span m="4551800">some</span> <span m="4551940">other</span> <span m="4552080">bug</span> <span m="4552335">in</span> <span m="4552590">okd?</span> <span m="4553070">How</span> <span m="4553490">bad</span> <span m="4553910">is</span> <span m="4554300">this?</span> <span m="4563139">Yeah.</span> </p>
<p><span m="4564133">AUDIENCE:</span> <span m="4564630">You</span> <span m="4565127">can</span> <span m="4565226">call</span> <span m="4565325">basically</span> <span m="4565425">any</span> <span m="4565524">service</span> <span m="4565624">on</span> <span m="4566121">that</span> <span m="4566370">machine?</span> </p>
<p><span m="4566620">PROFESSOR: Yeah,</span> <span m="4566840">OK,</span> <span m="4567170">so</span> <span m="4567500">you</span> <span m="4567650">could</span> <span m="4567780">call</span> <span m="4568170">any</span> <span m="4568310">service.</span> <span m="4569010">Is</span> <span m="4569170">that</span> <span m="4569530">bad?</span> <span m="4569870">How</span> <span m="4570080">should</span> <span m="4570545">we</span> <span m="4570700">think</span> <span m="4570855">of</span> <span m="4571010">this?</span> </p>
<p><span m="4572334">AUDIENCE: You</span> <span m="4572811">can</span> <span m="4572930">call</span> <span m="4573049">it</span> <span m="4573168">whatever</span> <span m="4573288">input</span> <span m="4573526">you</span> <span m="4573765">want.</span> </p>
<p><span m="4574242">PROFESSOR: That's</span> <span m="4574720">true,</span> <span m="4574960">yeah.</span> <span m="4575720">But</span> <span m="4576050">you</span> <span m="4576380">could</span> <span m="4576420">probably</span> <span m="4576460">have</span> <span m="4576500">done</span> <span m="4576540">that</span> <span m="4576900">even</span> <span m="4577650">without</span> <span m="4578220">compromising,</span> <span m="4578830">because</span> <span m="4579223">you</span> <span m="4579321">can</span> <span m="4579419">send</span> <span m="4579517">any</span> <span m="4579616">http</span> <span m="4580010">request</span> <span m="4580200">you</span> <span m="4580510">want,</span> <span m="4580700">which</span> <span m="4580810">is</span> <span m="4580920">basically</span> <span m="4581320">what</span> <span m="4581470">these</span> <span m="4581720">service</span> <span m="4582060">requests</span> <span m="4582240">end</span> <span m="4582590">up</span> <span m="4582940">being.</span> <span m="4583340">Maybe</span> <span m="4583740">that's</span> <span m="4584110">actually</span> <span m="4584340">not</span> <span m="4584570">so</span> <span m="4584690">bad.</span> <span m="4585020">Yeah.</span> </p>
<p><span m="4586178">AUDIENCE:</span> <span m="4586642">Could</span> <span m="4586796">it</span> <span m="4586951">route</span> <span m="4587106">all</span> <span m="4587338">the</span> <span m="4587570">traffic</span> <span m="4588034">for</span> <span m="4588498">maybe</span> <span m="4588962">OK</span> <span m="4589426">website?</span> </p>
<p><span m="4590360">PROFESSOR: Yes.</span> <span m="4591230">That</span> <span m="4591310">actually</span> <span m="4591550">seems</span> <span m="4591720">a</span> <span m="4591760">little</span> <span m="4591940">more</span> <span m="4592110">damaging,</span> <span m="4592530">right?</span> <span m="4592910">You</span> <span m="4593015">can</span> <span m="4593120">all</span> <span m="4593580">of</span> <span m="4593640">a</span> <span m="4593820">sudden</span> <span m="4594130">take</span> <span m="4594207">over</span> <span m="4594285">the</span> <span m="4594362">whole</span> <span m="4594440">website</span> <span m="4594770">and</span> <span m="4594890">serve</span> <span m="4595150">your</span> <span m="4595360">pages</span> <span m="4596180">instead</span> <span m="4596800">of</span> <span m="4596890">sending</span> <span m="4597190">a</span> <span m="4597240">request</span> <span m="4597520">to</span> <span m="4597560">the</span> <span m="4597600">services.</span> <span m="4598040">You</span> <span m="4598140">could</span> <span m="4598280">redirect</span> <span m="4598650">all</span> <span m="4598730">the</span> <span m="4598820">people</span> <span m="4599110">to</span> <span m="4599240">match.com</span> <span m="4599630">or</span> <span m="4600020">whoever</span> <span m="4600300">else</span> <span m="4600870">you</span> <span m="4601030">want</span> <span m="4601250">to,</span> <span m="4601710">I</span> <span m="4601980">don't</span> <span m="4602115">know.</span> <span m="4602250">I</span> <span m="4602510">guess</span> <span m="4602650">now</span> <span m="4603000">they</span> <span m="4603470">bought</span> <span m="4603893">out</span> <span m="4604316">OkCupid</span> <span m="4604740">but,</span> <span m="4605190">before,</span> <span m="4605685">who</span> <span m="4606180">knows.</span> <span m="4607430">OK,</span> <span m="4608380">anything</span> <span m="4608670">else?</span> <span m="4609180">Could</span> <span m="4609340">you</span> <span m="4609615">leak</span> <span m="4609890">data</span> <span m="4610380">in</span> <span m="4610500">any</span> <span m="4610640">way?</span> <span m="4612390">Yeah.</span> </p>
<p><span m="4612690">AUDIENCE: Well,</span> <span m="4613165">it</span> <span m="4613402">depends</span> <span m="4613640">on,</span> <span m="4614115">like</span> <span m="4614590">if</span> <span m="4614748">you</span> <span m="4614906">use</span> <span m="4615065">any</span> <span m="4615540">authentication</span> <span m="4616015">in</span> <span m="4616490">okd.</span> <span m="4616965">Instead</span> <span m="4617440">of</span> <span m="4617915">any</span> <span m="4618390">SVC,</span> <span m="4618865">you</span> <span m="4619340">could</span> <span m="4619577">potentially</span> <span m="4619815">just</span> <span m="4620052">do</span> <span m="4620290">unauthorized</span> <span m="4621720">requests,</span> <span m="4622200">like</span> <span m="4622232">in</span> <span m="4622265">the</span> <span m="4622297">database?</span> </p>
<p><span m="4622330">PROFESSOR: Right.</span> <span m="4622790">In</span> <span m="4622866">their</span> <span m="4622943">case,</span> <span m="4623020">this</span> <span m="4623096">guy</span> <span m="4623173">just</span> <span m="4623250">parses</span> <span m="4623650">and</span> <span m="4623880">forwards</span> <span m="4624240">the</span> <span m="4624330">request</span> <span m="4624700">on.</span> </p>
<p><span m="4625402">AUDIENCE: </span> <span m="4625864">Could</span> <span m="4626326">it</span> <span m="4626788">[INAUDIBLE]?</span> </p>
<p><span m="4628180">PROFESSOR: Yeah.</span> <span m="4628590">Not</span> <span m="4628910">only</span> <span m="4629230">can</span> <span m="4629360">you</span> <span m="4629605">redirect</span> <span m="4629686">it</span> <span m="4629768">first,</span> <span m="4629850">you</span> <span m="4629895">could</span> <span m="4629940">actually</span> <span m="4630030">look</span> <span m="4630430">for</span> <span m="4630660">all</span> <span m="4631150">the</span> <span m="4631230">subsequent</span> <span m="4631600">requests,</span> <span m="4631935">which</span> <span m="4632270">probably</span> <span m="4632465">includes</span> <span m="4632660">passwords</span> <span m="4633250">of</span> <span m="4633350">other</span> <span m="4633550">users</span> <span m="4634640">connecting</span> <span m="4635030">to</span> <span m="4635090">the</span> <span m="4635210">site,</span> <span m="4636370">and</span> <span m="4636680">you</span> <span m="4636920">could</span> <span m="4637810">save</span> <span m="4637990">their</span> <span m="4638180">passwords</span> <span m="4638870">or</span> <span m="4639340">modify</span> <span m="4639730">their</span> <span m="4639850">requests</span> <span m="4640255">or</span> <span m="4640660">see</span> <span m="4640800">what</span> <span m="4640930">they're</span> <span m="4641080">doing</span> <span m="4641400">or</span> <span m="4641670">fetch</span> <span m="4642050">things</span> <span m="4642105">on</span> <span m="4642160">their</span> <span m="4642310">behalf.</span> <span m="4643410">That</span> <span m="4643500">seems</span> <span m="4643795">damaging</span> <span m="4644090">potentially.</span> <span m="4644340">That's</span> <span m="4644570">probably</span> <span m="4644810">the</span> <span m="4644910">biggest</span> <span m="4645290">leak.</span> <span m="4645690">If</span> <span m="4645955">you</span> <span m="4646220">compromise</span> <span m="4646730">okd,</span> <span m="4646930">you</span> <span m="4647210">can</span> <span m="4647500">probably</span> <span m="4647740">watch</span> <span m="4647870">other</span> <span m="4648000">requests</span> <span m="4648445">and</span> <span m="4648890">steal</span> <span m="4649040">people's</span> <span m="4649460">credential</span> <span m="4649890">passwords,</span> <span m="4650670">steal</span> <span m="4650920">their</span> <span m="4651330">data</span> <span m="4651820">as</span> <span m="4652050">it</span> <span m="4652260">flows</span> <span m="4652610">by.</span> <span m="4653268">Make</span> <span m="4653766">sense?</span> </p>
<p><span m="4654762">AUDIENCE: Could</span> <span m="4655260">you</span> <span m="4655705">do</span> <span m="4655816">some</span> <span m="4655927">sort</span> <span m="4656038">of</span> <span m="4656150">denial</span> <span m="4656630">of</span> <span m="4657110">service</span> <span m="4657280">with</span> <span m="4657450">just</span> <span m="4657790">with</span> <span m="4658233">sending</span> <span m="4658380">a</span> <span m="4658528">whole--</span> </p>
<p></p>
<p><span m="4659120">PROFESSOR: Yeah,</span> <span m="4659270">so</span> <span m="4659600">you</span> <span m="4659770">could</span> <span m="4659910">probably</span> <span m="4659950">chew</span> <span m="4659990">up</span> <span m="4660030">the</span> <span m="4660120">CPU</span> <span m="4660540">or</span> <span m="4660770">send</span> <span m="4661000">lots</span> <span m="4661090">of</span> <span m="4661180">requests</span> <span m="4661380">to</span> <span m="4661580">this,</span> <span m="4662030">fill</span> <span m="4662240">up</span> <span m="4663150">database</span> <span m="4663640">with</span> <span m="4663760">lots</span> <span m="4663915">of</span> <span m="4664070">data,</span> <span m="4664510">but</span> <span m="4665140">that</span> <span m="4665175">you</span> <span m="4665210">could</span> <span m="4665310">probably</span> <span m="4665550">do</span> <span m="4665625">even</span> <span m="4665930">by</span> <span m="4666100">just</span> <span m="4666260">sending</span> <span m="4666520">lots</span> <span m="4666620">of</span> <span m="4666700">requests</span> <span m="4667040">in</span> <span m="4667085">the</span> <span m="4667130">first</span> <span m="4667380">place.</span> <span m="4667700">So</span> <span m="4668170">now</span> <span m="4668470">[INAUDIBLE]</span> <span m="4668880">are</span> <span m="4669130">somewhat</span> <span m="4669670">complicated--</span> <span m="4670160">well,</span> <span m="4671630">different.</span> <span m="4671890">Yeah.</span> </p>
<p><span m="4672320">AUDIENCE: So,</span> <span m="4672750">the goal</span> <span m="4672990">here</span> <span m="4673450">is</span> <span m="4673508">not</span> <span m="4673566">to</span> <span m="4673625">leak</span> <span m="4673800">data--</span> </p>
<p><span m="4674670">PROFESSOR: Yeah.</span> </p>
<p><span m="4675000">AUDIENCE: --from</span> <span m="4675452">different</span> <span m="4675678">services.</span> <span m="4676810">If</span> <span m="4677010">you</span> <span m="4677170">have</span> <span m="4677340">access</span> <span m="4677490">to</span> <span m="4677770">okd,</span> <span m="4678120">presumably</span> <span m="4678580">you</span> <span m="4678740">could</span> <span m="4678970">read</span> <span m="4679250">the</span> <span m="4679330">responses</span> <span m="4679690">that</span> <span m="4680050">are</span> <span m="4680170">being sent--</span> </p>
<p></p>
<p><span m="4680630">PROFESSOR: Yeah,</span> <span m="4680970">exactly.</span> <span m="4681360">So</span> <span m="4681700">in</span> <span m="4681800">fact,</span> <span m="4682415">okd</span> <span m="4682800">is</span> <span m="4683970">has</span> <span m="4684270">to</span> <span m="4684370">be</span> <span m="4684460">pretty</span> <span m="4684680">trustworthy,</span> <span m="4685270">because</span> <span m="4686975">the</span> <span m="4687720">responses</span> <span m="4688070">don't</span> <span m="4688770">go</span> <span m="4688940">directly</span> <span m="4689460">back</span> <span m="4689780">through</span> <span m="4689926">okd</span> <span m="4690073">in</span> <span m="4690220">the</span> <span m="4690650">normal</span> <span m="4691010">operation,</span> <span m="4691430">because</span> <span m="4691600">you</span> <span m="4691690">just</span> <span m="4691890">pass</span> <span m="4692150">off</span> <span m="4692300">the</span> <span m="4692590">fd,</span> <span m="4693240">and</span> <span m="4693360">the</span> <span m="4693430">service</span> <span m="4693720">directly</span> <span m="4694090">writes</span> <span m="4694360">to</span> <span m="4694600">the</span> <span m="4694910">fd.</span> <span m="4695220">But</span> <span m="4695500">you</span> <span m="4695790">could</span> <span m="4695900">totally</span> <span m="4696040">fake</span> <span m="4696180">it</span> <span m="4696320">and</span> <span m="4696415">create</span> <span m="4696510">your</span> <span m="4696620">own</span> <span m="4696770">fd</span> <span m="4697160">here.</span> <span m="4697550">So</span> <span m="4697855">if</span> <span m="4698160">you</span> <span m="4698410">compromise this,</span> <span m="4698880">you</span> <span m="4698970">could</span> <span m="4699080">basically</span> <span m="4699310">watch</span> <span m="4699590">all</span> <span m="4699720">the</span> <span m="4699790">traffic</span> <span m="4700230">and</span> <span m="4700723">steal</span> <span m="4702030">people's</span> <span m="4702470">passwords</span> <span m="4702970">there.</span> </p>
<p><span m="4703405">AUDIENCE:</span> <span m="4703840">But,</span> <span m="4704275">the other way--</span> </p>
<p><span m="4704710">PROFESSOR: And</span> <span m="4705050">the response</span> <span m="4705390">is--</span> </p>
<p></p>
<p><span m="4706314">AUDIENCE:</span> <span m="4706406">--to</span> <span m="4706498">the</span> <span m="4706591">output,</span> <span m="4706683">which</span> <span m="4706776">means</span> <span m="4706853">that</span> <span m="4706930">essentially</span> <span m="4707008">you</span> <span m="4707085">get</span> <span m="4707162">access--</span> </p>
<p></p>
<p><span m="4707590">PROFESSOR: That's</span> <span m="4707670">right.</span> <span m="4707890">Yeah,</span> <span m="4708010">so</span> <span m="4708096">you</span> <span m="4708183">could--</span> <span m="4709460">If</span> <span m="4709850">okd</span> <span m="4710430">was</span> <span m="4710580">compromised</span> <span m="4711240">and</span> <span m="4711920">I</span> <span m="4712080">happened</span> <span m="4712380">to</span> <span m="4712450">log</span> <span m="4712650">into</span> <span m="4712840">that</span> <span m="4712950">site,</span> <span m="4713530">you</span> <span m="4713620">could</span> <span m="4713740">probably</span> <span m="4714110">look</span> <span m="4714410">at</span> <span m="4714520">my</span> <span m="4714680">responses</span> <span m="4715135">and</span> <span m="4715590">you</span> <span m="4715740">could</span> <span m="4715890">probably</span> <span m="4716150">even</span> <span m="4716350">take</span> <span m="4716570">my</span> <span m="4716740">password</span> <span m="4717150">and</span> <span m="4717420">send</span> <span m="4717670">other</span> <span m="4717950">requests</span> <span m="4718450">with</span> <span m="4718570">my</span> <span m="4718885">credentials</span> <span m="4719200">and</span> <span m="4719490">get</span> <span m="4719610">data</span> <span m="4719910">from</span> <span m="4720080">there</span> <span m="4720280">as</span> <span m="4720590">well.</span> <span m="4720900">Yeah.</span> </p>
<p><span m="4721070">AUDIENCE:And</span> <span m="4721345">then</span> <span m="4721482">essentially</span> <span m="4721620">reconstruct</span> <span m="4722030">the</span> <span m="4722300">entire</span> <span m="4722410">database.</span> </p>
<p><span m="4722852">PROFESSOR: Exactly.</span> <span m="4723294">Yeah,</span> <span m="4723736">or</span> <span m="4723847">at</span> <span m="4723958">least</span> <span m="4724069">for</span> <span m="4724180">users</span> <span m="4724360">who</span> <span m="4724540">were</span> <span m="4724572">logged</span> <span m="4724605">in</span> <span m="4724637">at</span> <span m="4724670">the</span> <span m="4724760">time</span> <span m="4725230">and</span> <span m="4725440">things</span> <span m="4725670">you</span> <span m="4726080">could</span> <span m="4726490">reconstruct.</span> <span m="4726900">This</span> <span m="4727002">is</span> <span m="4727105">pretty</span> <span m="4727207">damaging,</span> <span m="4727310">right?</span> <span m="4728410">So</span> <span m="4728620">this</span> <span m="4728910">component</span> <span m="4729320">is</span> <span m="4730370">actually</span> <span m="4730660">a</span> <span m="4730740">bit</span> <span m="4730890">troublesome</span> <span m="4731320">here.</span> <span m="4732710">What</span> <span m="4732830">happens</span> <span m="4733050">if</span> <span m="4733150">we</span> <span m="4733230">compromise,</span> <span m="4733610">let's</span> <span m="4733990">say,</span> <span m="4734060">oklogd?</span> <span m="4734906">How</span> <span m="4735330">bad</span> <span m="4735720">is</span> <span m="4735820">that?</span> <span m="4739735">Yeah.</span> </p>
<p><span m="4740725">AUDIENCE:</span> <span m="4741220">[INAUDIBLE]</span> <span m="4743200">pretty</span> <span m="4743695">bad.</span> </p>
<p><span m="4744190">PROFESSOR: Yeah,</span> <span m="4744550">so</span> <span m="4744622">there's</span> <span m="4744694">like</span> <span m="4744766">all</span> <span m="4744838">this</span> <span m="4744910">confidential</span> <span m="4745390">data</span> <span m="4745760">in</span> <span m="4745843">the</span> <span m="4745926">log</span> <span m="4746010">entries,</span> <span m="4746330">then</span> <span m="4746840">that's</span> <span m="4746980">probably</span> <span m="4747210">not</span> <span m="4747410">good,</span> <span m="4747790">but</span> <span m="4748260">otherwise</span> <span m="4748320">you</span> <span m="4748495">can't</span> <span m="4748670">probably</span> <span m="4749480">access</span> <span m="4749790">the</span> <span m="4749860">database</span> <span m="4750500">directly,</span> <span m="4751560">right?</span> <span m="4752420">Pubd,</span> <span m="4753020">I</span> <span m="4753080">guess</span> <span m="4753350">you</span> <span m="4753480">might</span> <span m="4754010">corrupt</span> <span m="4754360">templates,</span> <span m="4754900">or</span> <span m="4754970">something</span> <span m="4755220">like</span> <span m="4755370">this,</span> <span m="4755640">send</span> <span m="4755840">out</span> <span m="4756040">different</span> <span m="4756750">requests</span> <span m="4757470">and</span> <span m="4757620">responses,</span> <span m="4758030">I</span> <span m="4758275">mean.</span> <span m="4758520">Yeah.</span> </p>
<p><span m="4759010">AUDIENCE:</span> <span m="4759500">So</span> <span m="4759990">this</span> <span m="4760088">is</span> <span m="4760186">about</span> <span m="4760284">the</span> <span m="4760382">logd.</span> <span m="4760480">Presumably</span> <span m="4760910">okdlogd</span> <span m="4761273">doesn't</span> <span m="4761636">have</span> <span m="4762000">access</span> <span m="4762157">to</span> <span m="4762315">read</span> <span m="4762630">the</span> <span m="4763032">log.</span> <span m="4763836">It</span> <span m="4764240">just</span> <span m="4764600">needs--</span> </p>
<p></p>
<p><span m="4765160">PROFESSOR: Ah,</span> <span m="4765490">yeah,</span> <span m="4765830">yeah.</span> <span m="4765916">Good</span> <span m="4766003">point.</span> <span m="4766090">Well,</span> <span m="4766186">it</span> <span m="4766283">depends</span> <span m="4766380">on</span> <span m="4766460">how</span> <span m="4766580">they</span> <span m="4766690">do</span> <span m="4766890">it,</span> <span m="4767160">right?</span> <span m="4767340">If</span> <span m="4767730">they</span> <span m="4767747">really</span> <span m="4767765">have</span> <span m="4767782">this</span> <span m="4767800">append-only</span> <span m="4768470">file,</span> <span m="4768980">then</span> <span m="4769500">it</span> <span m="4769640">might</span> <span m="4769860">be</span> <span m="4770030">that</span> <span m="4770125">you</span> <span m="4770220">can't</span> <span m="4770490">even</span> <span m="4770760">read</span> <span m="4770990">the</span> <span m="4771400">log,</span> <span m="4771580">so--</span> </p>
<p><span m="4772005">AUDIENCE: All</span> <span m="4772430">you</span> <span m="4772525">could</span> <span m="4772620">do</span> <span m="4772715">is</span> <span m="4772810">append</span> <span m="4773190">garbage.</span> </p>
<p><span m="4773570">PROFESSOR:That's</span> <span m="4773950">right,</span> <span m="4774000">yeah.</span> <span m="4774050">So</span> <span m="4774370">you</span> <span m="4774443">could</span> <span m="4774516">write</span> <span m="4774590">a</span> <span m="4774620">lot</span> <span m="4775070">of</span> <span m="4775210">garbage,</span> <span m="4775780">but</span> <span m="4775860">if</span> <span m="4775960">they</span> <span m="4776340">were</span> <span m="4776610">using</span> <span m="4776700">the</span> <span m="4776790">OS</span> <span m="4776880">to</span> <span m="4777250">enforce</span> <span m="4777520">the</span> <span m="4777720">append-only</span> <span m="4777920">log,</span> <span m="4778400">and</span> <span m="4778550">no</span> <span m="4778700">reading,</span> <span m="4778850">then</span> <span m="4779250">you</span> <span m="4779650">might</span> <span m="4779850">be</span> <span m="4780050">actually</span> <span m="4780470">in</span> <span m="4780610">good</span> <span m="4780750">shape</span> <span m="4780890">for</span> <span m="4781020">the</span> <span m="4781350">log</span> <span m="4781790">contents.</span> <span m="4782177">Yeah.</span> </p>
<p><span m="4782564">AUDIENCE: Well,</span> <span m="4782951">I</span> <span m="4783145">guess</span> <span m="4783340">also,</span> <span m="4784092">you</span> <span m="4784318">can</span> <span m="4784544">not</span> <span m="4784996">append.</span> <span m="4785448">So</span> <span m="4785561">when</span> <span m="4785674">a</span> <span m="4785787">valid</span> <span m="4785824">log</span> <span m="4785862">comes</span> <span m="4785900">in--</span> </p>
<p></p>
<p><span m="4786810">PROFESSOR: Right,</span> <span m="4787090">so</span> <span m="4787180">you</span> <span m="4787245">could</span> <span m="4787310">probably</span> <span m="4787600">block</span> <span m="4788240">real</span> <span m="4788480">entries,</span> <span m="4788910">fill</span> <span m="4789200">it</span> <span m="4789296">up</span> <span m="4789393">with</span> <span m="4789490">garbage.</span> <span m="4789815">You</span> <span m="4790140">could</span> <span m="4790410">also</span> <span m="4790680">watch</span> <span m="4791280">new</span> <span m="4791430">entries</span> <span m="4791940">and</span> <span m="4792200">at</span> <span m="4792525">least</span> <span m="4792850">compromise</span> <span m="4793280">them.</span> </p>
<p><span m="4793550">AUDIENCE:</span> <span m="4793820">Or</span> <span m="4793942">if</span> <span m="4794064">you're</span> <span m="4794186">relying</span> <span m="4794308">on</span> <span m="4794470">a</span> <span m="4794633">rate</span> <span m="4794796">limit</span> <span m="4795040">for</span> <span m="4795284">number</span> <span m="4795528">of</span> <span m="4795772">logins.</span> </p>
<p></p>
<p><span m="4796748">PROFESSOR: That's</span> <span m="4797236">right,</span> <span m="4797724">yeah.</span> <span m="4798212">You</span> <span m="4798309">could</span> <span m="4798407">probably</span> <span m="4798504">do</span> <span m="4798602">that.</span> <span m="4799188">OK.</span> <span m="4799676">So</span> <span m="4800170">what</span> <span m="4800510">about</span> <span m="4800680">the</span> <span m="4800850">services?</span> <span m="4801910">That's,</span> <span m="4802190">I</span> <span m="4802370">think,</span> <span m="4802526">their</span> <span m="4802683">main</span> <span m="4802840">attack</span> <span m="4803075">factor,</span> <span m="4803310">because--</span> <span m="4803730">actually,</span> <span m="4804070">in</span> <span m="4804410">most</span> <span m="4804790">of</span> <span m="4805000">these</span> <span m="4805220">systems,</span> <span m="4805535">what</span> <span m="4805850">you're</span> <span m="4806040">really</span> <span m="4806290">worried</span> <span m="4806570">about</span> <span m="4806830">is</span> <span m="4807080">the</span> <span m="4807700">one-off</span> <span m="4808460">components,</span> <span m="4809120">because</span> <span m="4810250">even</span> <span m="4810410">in</span> <span m="4810570">Apache,</span> <span m="4811140">the</span> <span m="4811450">Apache</span> <span m="4811900">code</span> <span m="4812320">is</span> <span m="4812440">probably</span> <span m="4812960">pretty</span> <span m="4813580">good.</span> </p>
<p><span m="4814000">Like</span> <span m="4814530">millions</span> <span m="4815010">people</span> <span m="4815310">are</span> <span m="4815480">running</span> <span m="4815650">it,</span> <span m="4815980">everyone's</span> <span m="4816230">looking</span> <span m="4816560">for</span> <span m="4816690">bugs</span> <span m="4817080">in</span> <span m="4817230">it.</span> <span m="4817890">Probably</span> <span m="4818260">[INAUDIBLE]</span> <span m="4818350">not</span> <span m="4818980">that</span> <span m="4819680">many</span> <span m="4819920">bugs</span> <span m="4820280">in</span> <span m="4820390">Apache</span> <span m="4820510">itself</span> <span m="4821390">or,</span> <span m="4821880">well,</span> <span m="4823125">even</span> <span m="4823540">in</span> <span m="4823800">SSL,</span> <span m="4823860">for</span> <span m="4824210">all</span> <span m="4824480">the</span> <span m="4824590">hoopla</span> <span m="4825410">we've</span> <span m="4825750">heard</span> <span m="4826000">recently</span> <span m="4826370">about</span> <span m="4826690">[INAUDIBLE]</span> <span m="4826830">and</span> <span m="4827100">still</span> <span m="4827370">bugs</span> <span m="4827760">probably</span> <span m="4828000">not</span> <span m="4828400">as</span> <span m="4828885">bad</span> <span m="4829370">as</span> <span m="4829800">the</span> <span m="4830020">application</span> <span m="4830840">code</span> <span m="4831230">that</span> <span m="4831320">you</span> <span m="4831435">write</span> <span m="4831550">for</span> <span m="4831665">a</span> <span m="4831780">particular</span> <span m="4832180">site,</span> <span m="4832420">because</span> <span m="4832710">no</span> <span m="4833200">one</span> <span m="4833280">else</span> <span m="4833400">has</span> <span m="4833520">reviewed</span> <span m="4833880">that</span> <span m="4834090">code.</span> <span m="4834690">You</span> <span m="4834790">just</span> <span m="4835000">wrote</span> <span m="4835260">it,</span> <span m="4835630">you</span> <span m="4835760">haven't</span> <span m="4835890">really</span> <span m="4836110">tested</span> <span m="4836490">it</span> <span m="4836600">very</span> <span m="4836710">thoroughly.</span> <span m="4837030">That's</span> <span m="4837560">probably</span> <span m="4837820">where</span> <span m="4838050">most</span> <span m="4838570">of</span> <span m="4838660">the</span> <span m="4838740">bugs</span> <span m="4839280">in</span> <span m="4839600">a</span> <span m="4839700">complex</span> <span m="4840100">system</span> <span m="4840370">actually</span> <span m="4840720">lie.</span> <span m="4841380">So</span> <span m="4841780">the</span> <span m="4841900">service</span> <span m="4842215">code</span> <span m="4842530">is</span> <span m="4842710">probably</span> <span m="4843240">the</span> <span m="4843320">equivalent</span> <span m="4843600">for</span> <span m="4843880">OKWS.</span> </p>
<p><span m="4844800">These</span> <span m="4845030">components</span> <span m="4845530">are</span> <span m="4845630">written</span> <span m="4845870">by</span> <span m="4846010">Max</span> <span m="4846460">Krohn.</span> <span m="4846820">He</span> <span m="4847180">was</span> <span m="4847400">careful</span> <span m="4848010">to</span> <span m="4848050">make</span> <span m="4848240">sure</span> <span m="4848390">there's</span> <span m="4848640">no</span> <span m="4848800">buffer</span> <span m="4849040">overflows.</span> <span m="4850000">This</span> <span m="4850220">component</span> <span m="4850670">is</span> <span m="4850770">written</span> <span m="4851060">by</span> <span m="4851210">some</span> <span m="4851375">web</span> <span m="4851540">developer</span> <span m="4852030">who</span> <span m="4852160">wants</span> <span m="4852290">to</span> <span m="4852370">deploy</span> <span m="4852730">the</span> <span m="4852830">next</span> <span m="4853070">feature</span> <span m="4853340">as</span> <span m="4853430">fast</span> <span m="4853630">as</span> <span m="4853730">possible,</span> <span m="4854710">so</span> <span m="4854830">this</span> <span m="4855080">is</span> <span m="4855230">the</span> <span m="4855330">part</span> <span m="4855540">where</span> <span m="4855930">I</span> <span m="4856010">think</span> <span m="4856170">they</span> <span m="4856280">really</span> <span m="4856840">worry</span> <span m="4857130">about</span> <span m="4857420">bugs</span> <span m="4858690">being</span> <span m="4859340">sort</span> <span m="4859520">of</span> <span m="4859620">exploitable</span> <span m="4859990">and</span> <span m="4860360">potentially</span> <span m="4860710">damaging.</span> <span m="4862010">But</span> <span m="4862100">hopefully</span> <span m="4862500">the</span> <span m="4862640">damage</span> <span m="4863000">here</span> <span m="4863170">is</span> <span m="4863260">not</span> <span m="4863680">too</span> <span m="4863840">big,</span> <span m="4864090">in</span> <span m="4864160">the</span> <span m="4864250">sense</span> <span m="4864570">that</span> <span m="4866380">you</span> <span m="4866490">can</span> <span m="4866600">only</span> <span m="4866980">issue</span> <span m="4867360">whatever</span> <span m="4867980">queries</span> <span m="4868460">you</span> <span m="4868600">are</span> <span m="4868690">allowed</span> <span m="4868960">to</span> <span m="4869020">do</span> <span m="4869230">by</span> <span m="4869500">the</span> <span m="4870000">database</span> <span m="4870330">proxy.</span> <span m="4871980">Make</span> <span m="4872090">sense?</span> </p>
<p><span m="4873450">So</span> <span m="4873690">what</span> <span m="4873830">about</span> <span m="4873970">okld?</span> <span m="4874690">This</span> <span m="4874760">is</span> <span m="4874830">a</span> <span m="4875070">bit</span> <span m="4875220">of</span> <span m="4875570">a</span> <span m="4875920">sore</span> <span m="4876330">thumb</span> <span m="4876610">here.</span> <span m="4876890">It's,</span> <span m="4877030">like,</span> <span m="4877290">running</span> <span m="4877390">as</span> <span m="4877720">root.</span> <span m="4878920">How</span> <span m="4879060">much</span> <span m="4879240">should</span> <span m="4879380">we</span> <span m="4879490">worry</span> <span m="4879750">about</span> <span m="4880060">it?</span> <span m="4880220">Of</span> <span m="4880480">course,</span> <span m="4880560">the</span> <span m="4880710">damage</span> <span m="4880860">is</span> <span m="4880980">pretty</span> <span m="4881190">big</span> <span m="4881710">if</span> <span m="4881820">we</span> <span m="4881910">compromise</span> <span m="4882400">it.</span> <span m="4882480">You</span> <span m="4882560">get</span> <span m="4882750">access</span> <span m="4883060">to</span> <span m="4883250">everything</span> <span m="4883630">on</span> <span m="4883700">the</span> <span m="4883760">machine</span> <span m="4884200">and</span> <span m="4884520">all</span> <span m="4884700">the</span> <span m="4884780">database</span> <span m="4885120">proxy</span> <span m="4885580">tokens.</span> <span m="4886640">How</span> <span m="4886920">hard</span> <span m="4887036">is</span> <span m="4887153">it</span> <span m="4887270">to</span> <span m="4887370">compromise</span> <span m="4887970">okld?</span> <span m="4889770">What</span> <span m="4889970">signals--</span> <span m="4890480">what</span> <span m="4890810">could</span> <span m="4891080">you</span> <span m="4891350">poke</span> <span m="4891600">it</span> <span m="4891850">with?</span> <span m="4896770">Does</span> <span m="4897190">it</span> <span m="4897610">take</span> <span m="4897810">input?</span> </p>
<p><span m="4900375">AUDIENCE: [INAUDIBLE]</span> <span m="4903273">in</span> <span m="4903393">a</span> <span m="4903514">very</span> <span m="4903635">specific</span> <span m="4903756">pattern.</span> </p>
<p><span m="4904239">PROFESSOR: Yeah,</span> <span m="4904730">so</span> <span m="4906230">pretty</span> <span m="4906380">much</span> <span m="4906530">the</span> <span m="4906620">only</span> <span m="4907000">input</span> <span m="4907150">it</span> <span m="4907410">takes</span> <span m="4907800">is</span> <span m="4908270">when</span> <span m="4908450">a</span> <span m="4908590">child</span> <span m="4909070">exits</span> <span m="4909355">and</span> <span m="4909497">it</span> <span m="4909640">gets</span> <span m="4909780">a</span> <span m="4909870">notification</span> <span m="4910170">that</span> <span m="4910470">a</span> <span m="4910650">child</span> <span m="4910930">process</span> <span m="4911245">exited</span> <span m="4912020">and</span> <span m="4912180">then</span> <span m="4912400">maybe</span> <span m="4912650">it</span> <span m="4912780">responds</span> <span m="4913070">it,</span> <span m="4913590">or</span> <span m="4913790">not,</span> <span m="4914060">if</span> <span m="4914150">it</span> <span m="4914570">is</span> <span m="4914690">rate</span> <span m="4914930">limited.</span> <span m="4915650">So</span> <span m="4915960">if</span> <span m="4916120">there's</span> <span m="4916590">some</span> <span m="4916780">sort</span> <span m="4916900">of</span> <span m="4916970">erase</span> <span m="4917420">condition</span> <span m="4917820">or</span> <span m="4917983">a</span> <span m="4918146">bug</span> <span m="4918228">with</span> <span m="4918310">handling</span> <span m="4918860">exactly--</span> <span m="4919240">it's</span> <span m="4919330">interesting--</span> <span m="4919790">lots</span> <span m="4920130">of</span> <span m="4920470">exits</span> <span m="4920870">at</span> <span m="4920920">the</span> <span m="4920970">same</span> <span m="4921180">time,</span> <span m="4921420">then</span> <span m="4921830">maybe</span> <span m="4921930">you</span> <span m="4922030">could</span> <span m="4922210">trigger</span> <span m="4922480">something</span> <span m="4922760">bad,</span> <span m="4923120">but</span> <span m="4923520">even</span> <span m="4923685">then</span> <span m="4923850">it</span> <span m="4924020">seems</span> <span m="4924240">hard</span> <span m="4924470">to</span> <span m="4924540">imagine</span> <span m="4924920">injecting</span> <span m="4925175">some</span> <span m="4925430">sort</span> <span m="4925650">of</span> <span m="4925940">shell</span> <span m="4926230">code</span> <span m="4926880">through</span> <span m="4927570">the</span> <span m="4927680">exit</span> <span m="4928750">pattern.</span> <span m="4929505">So</span> <span m="4929830">it's</span> <span m="4930010">probably</span> <span m="4931160">a</span> <span m="4931210">reasonable</span> <span m="4931830">thing</span> <span m="4932050">to</span> <span m="4932140">have</span> <span m="4933300">to</span> <span m="4933400">run</span> <span m="4933640">as</span> <span m="4933785">root,</span> <span m="4933930">because</span> <span m="4934360">it</span> <span m="4934450">doesn't</span> <span m="4934700">take</span> <span m="4935340">a</span> <span m="4935380">whole</span> <span m="4935630">lot</span> <span m="4935870">of</span> <span m="4936365">input.</span> <span m="4937520">Make</span> <span m="4937805">sense?</span> <span m="4938550">Other</span> <span m="4939010">questions?</span> </p>
<p><span m="4940522">AUDIENCE: So</span> <span m="4940960">presumably</span> <span m="4941230">a</span> <span m="4941578">big</span> <span m="4941634">concern</span> <span m="4941690">would</span> <span m="4942100">be</span> <span m="4942460">if</span> <span m="4942600">you</span> <span m="4942740">managed</span> <span m="4943020">to</span> <span m="4943420">somehow</span> <span m="4943820">exploit</span> <span m="4944020">the</span> <span m="4944240">dbproxy.</span> </p>
<p><span m="4944650">PROFESSOR: Uh-huh.</span> </p>
<p><span m="4945246">AUDIENCE: If</span> <span m="4946060">it</span> <span m="4946610">turns</span> <span m="4946970">out</span> <span m="4947210">that</span> <span m="4947300">it</span> <span m="4947440">doesn't,</span> <span m="4948160">like,</span> <span m="4948730">it</span> <span m="4948920">provides</span> <span m="4949320">an</span> <span m="4949650">RPC</span> <span m="4949960">that's</span> <span m="4950150">limited</span> <span m="4950620">in</span> <span m="4950785">scope,</span> <span m="4950950">but</span> <span m="4951210">if</span> <span m="4951260">there</span> <span m="4951310">is</span> <span m="4951360">some</span> <span m="4951560">input</span> <span m="4951815">you</span> <span m="4951942">can</span> <span m="4952070">give</span> <span m="4952495">that,</span> <span m="4952920">that</span> <span m="4953345">turns</span> <span m="4953770">out</span> <span m="4954070">to</span> <span m="4954170">run</span> <span m="4954270">in</span> <span m="4954370">different</span> <span m="4954630">query</span> <span m="4954890">than</span> <span m="4954970">it</span> <span m="4955070">was</span> <span m="4955150">expecting</span> <span m="4955425">to</span> <span m="4955700">run,</span> <span m="4956575">presumably</span> <span m="4957050">that</span> <span m="4957440">could</span> <span m="4957635">be</span> <span m="4957830">a</span> <span m="4958025">big</span> <span m="4958220">[INAUDIBLE].</span> </p>
<p><span m="4958610">PROFESSOR: That</span> <span m="4958780">could</span> <span m="4958970">be</span> <span m="4959090">a</span> <span m="4959500">bit</span> <span m="4959605">of</span> <span m="4959710">a</span> <span m="4959815">problem.</span> <span m="4959920">So</span> <span m="4960720">what's</span> <span m="4960870">the</span> <span m="4961060">attack</span> <span m="4961490">vector</span> <span m="4961820">though</span> <span m="4961900">on</span> <span m="4962120">this</span> <span m="4962240">database</span> <span m="4962620">proxy?</span> <span m="4962935">I</span> <span m="4963092">think</span> <span m="4963250">you</span> <span m="4963490">have</span> <span m="4963720">to</span> <span m="4963800">have</span> <span m="4963940">access</span> <span m="4964210">to</span> <span m="4964290">one</span> <span m="4964420">of</span> <span m="4964470">these</span> <span m="4964620">other</span> <span m="4964880">components</span> <span m="4965550">in</span> <span m="4965660">the</span> <span m="4965740">first</span> <span m="4965970">place.</span> <span m="4966340">So</span> <span m="4966670">at</span> <span m="4966900">least</span> <span m="4967650">you</span> <span m="4967770">have</span> <span m="4967980">to</span> <span m="4968045">now</span> <span m="4968110">compromise</span> <span m="4968790">both--</span> <span m="4969320">you</span> <span m="4969380">have</span> <span m="4969530">to</span> <span m="4969620">find</span> <span m="4969800">a</span> <span m="4969850">bug</span> <span m="4970050">both</span> <span m="4970310">in</span> <span m="4970380">the</span> <span m="4970670">dbproxy</span> <span m="4971410">and</span> <span m="4971880">somewhere</span> <span m="4972230">else,</span> <span m="4972460">so--</span> </p>
<p><span m="4972760">AUDIENCE: So</span> <span m="4973255">not</span> <span m="4973750">necessarily,</span> <span m="4974245">because</span> <span m="4974740">the</span> <span m="4974987">SVC</span> <span m="4975235">is</span> <span m="4975482">already</span> <span m="4975730">forwarding--</span> </p>
<p><span m="4976230">PROFESSOR: Right.</span> <span m="4976640">So</span> <span m="4976720">as</span> <span m="4977190">the</span> <span m="4977330">SVC</span> <span m="4978300">passes</span> <span m="4978820">through</span> <span m="4979100">great</span> <span m="4979360">query</span> <span m="4979490">is</span> <span m="4979620">largely</span> <span m="4980060">unchecked--</span> </p>
<p><span m="4980395">AUDIENCE: Well,</span> <span m="4980730">so,</span> <span m="4981060">I mean,</span> <span m="4981390">let's</span> <span m="4981680">say</span> <span m="4981842">you're</span> <span m="4982005">trying</span> <span m="4982167">to</span> <span m="4982330">log</span> <span m="4982487">in,</span> <span m="4982645">right?</span> <span m="4982960">It</span> <span m="4983090">will</span> <span m="4983220">pass.</span> </p>
<p><span m="4983830">PROFESSOR: Yeah,</span> <span m="4984110">like</span> <span m="4984420">your</span> <span m="4984680">Alice</span> <span m="4985160">name</span> <span m="4985560">goes</span> <span m="4985630">in</span> <span m="4985700">the</span> <span m="4985770">template,</span> <span m="4985840">and</span> <span m="4986120">yeah.</span> </p>
<p></p>
<p><span m="4986860">AUDIENCE: Alice</span> <span m="4987210">is</span> <span m="4987230">straight</span> <span m="4987250">to</span> <span m="4987555">the</span> <span m="4987860">dbproxy,</span> <span m="4989000">in</span> <span m="4989480">theory.</span> </p>
<p><span m="4989890">PROFESSOR: Absolutely.</span> <span m="4990040">So,</span> <span m="4990425">there</span> <span m="4990810">might</span> <span m="4991010">be</span> <span m="4991150">some</span> <span m="4991780">dbproxy</span> <span m="4992280">bugs</span> <span m="4992420">here</span> <span m="4992670">that</span> <span m="4993170">are</span> <span m="4993320">also</span> <span m="4993640">exploitable.</span> <span m="4995140">Anyway,</span> <span m="4995325">this</span> <span m="4995510">hopefully</span> <span m="4995890">gives</span> <span m="4996070">you</span> <span m="4996150">guys</span> <span m="4996360">some</span> <span m="4996610">sense</span> <span m="4996890">of</span> <span m="4996970">how</span> <span m="4997130">do</span> <span m="4997180">you</span> <span m="4997280">think</span> <span m="4997610">of</span> <span m="4997885">privileged</span> <span m="4998160">separating</span> <span m="4998540">application.</span> <span m="4999550">And</span> <span m="4999650">as</span> <span m="4999660">we</span> <span m="4999670">see,</span> <span m="4999850">it's</span> <span m="4999980">not</span> <span m="5000250">perfect.</span> <span m="5000550">There</span> <span m="5000910">are</span> <span m="5000980">still</span> <span m="5001050">many</span> <span m="5001360">things</span> <span m="5001580">that</span> <span m="5001730">could</span> <span m="5001880">go</span> <span m="5002090">wrong.</span> <span m="5002920">But</span> <span m="5003200">it</span> <span m="5003340">seems</span> <span m="5003630">much</span> <span m="5004020">better</span> <span m="5004290">than</span> <span m="5004560">the</span> <span m="5004926">nonprivileged</span> <span m="5005660">separated</span> <span m="5006290">design</span> <span m="5006590">that</span> <span m="5006890">we</span> <span m="5007190">started</span> <span m="5007490">out</span> <span m="5007790">with.</span> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>iTunes U (<a href="https://itunes.apple.com/us/itunes-u/id1017908130">MP4 - 185MB</a>)</li>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec04_300k.mp4">MP4 - 185MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/video-lectures/lecture-4-privilege-separation/dNl22h1kW1k.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","85");googletag.pubads().set("CRS_END","8");googletag.pubads().set("SESSION","F");googletag.pubads().set("YEAR","14");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
