<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 13: Network Protocols | Lecture Videos | Computer Systems Security | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-858-computer-systems-security-fall-2014" name="WT.cg_n">
    <meta content="Lecture 13: Network Protocols" name="WT.cg_s">
    <meta content="In this lecture, Professor Zeldovich discusses the Kerberos authentication service." name="Description">
    <meta content="Zeldovich, Nickolai" name="Author">
    <meta content="6.858,Kerberos,distributed architecture,trust model,TGS protocol,encryption,Unix,Diffie-Hellman,Computer Design and Engineering,Software Design and Engineering" name="keywords">
    <meta content="6.858 Computer Systems Security | Lecture 13: Network Protocols" name="Search_Display">
    <meta content="Computer Design and Engineering" itemprop="about">
    <meta content="Software Design and Engineering" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-13-network-protocols/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Computer Systems Security</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/video-lectures/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 13: Network Protocols
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 13: Network Protocols
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/readings/index.htm">
		                  Readings  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/video-lectures/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/labs/index.htm">
		                  Labs  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/exams/index.htm">
		                  Exams  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/final-project/index.htm">
		                  Final Project  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/related-resources/index.htm">
		                  Related Resources  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-13-network-protocols/QOtA76ga_fY.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://itunes.apple.com/us/itunes-u/id1017908130">iTunes U</a> or the <a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec13_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/QOtA76ga_fY', 'youtube', '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-13-network-protocols', 'https://img.youtube.com/vi/QOtA76ga_fY/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-13-network-protocols/QOtA76ga_fY.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 662956, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/video-lectures/lecture-12-network-security/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/video-lectures/lecture-14-ssl-and-https/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p><strong>Description:</strong> In this lecture, Professor Zeldovich discusses the Kerberos authentication service.</p>  <p><strong>Instructor:</strong> Nickolai Zeldovich</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-1-introduction-threat-models/index.htm">
<img src="https://img.youtube.com/vi/GqmQg-cszw4/default.jpg" title="Lecture 1: Introduction, Threat Models" alt="Lecture 1: Introduction, Threat Models">
<p>Lecture 1: Introduction, Th...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-2-control-hijacking-attacks/index.htm">
<img src="https://img.youtube.com/vi/r4KjHEgg9Wg/default.jpg" title="Lecture 2: Control Hijacking Attacks" alt="Lecture 2: Control Hijacking Attacks">
<p>Lecture 2: Control Hijackin...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-3-buffer-overflow-exploits-and-defenses/index.htm">
<img src="https://img.youtube.com/vi/xSQxaie_h1o/default.jpg" title="Lecture 3: Buffer Overflow Exploits and Defenses" alt="Lecture 3: Buffer Overflow Exploits and Defenses">
<p>Lecture 3: Buffer Overflow ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-4-privilege-separation/index.htm">
<img src="https://img.youtube.com/vi/dNl22h1kW1k/default.jpg" title="Lecture 4: Privilege Separation" alt="Lecture 4: Privilege Separation">
<p>Lecture 4: Privilege Separa...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-6-capabilities/index.htm">
<img src="https://img.youtube.com/vi/TQhmua7Z2cY/default.jpg" title="Lecture 6: Capabilities" alt="Lecture 6: Capabilities">
<p>Lecture 6: Capabilities</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-7-sandboxing-native-code/index.htm">
<img src="https://img.youtube.com/vi/I0Psvvky-44/default.jpg" title="Lecture 7: Sandboxing Native Code	" alt="Lecture 7: Sandboxing Native Code	">
<p>Lecture 7: Sandboxing Nativ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-8-web-security-model/index.htm">
<img src="https://img.youtube.com/vi/eRJ_r8WF1Y0/default.jpg" title="Lecture 8: Web Security Model" alt="Lecture 8: Web Security Model">
<p>Lecture 8: Web Security Model</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-9-securing-web-applications/index.htm">
<img src="https://img.youtube.com/vi/WlmKwIe9z1Q/default.jpg" title="Lecture 9: Securing Web Applications" alt="Lecture 9: Securing Web Applications">
<p>Lecture 9: Securing Web App...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-10-symbolic-execution/index.htm">
<img src="https://img.youtube.com/vi/yRVZPvHYHzw/default.jpg" title="Lecture 10: Symbolic Execution" alt="Lecture 10: Symbolic Execution">
<p>Lecture 10: Symbolic Execution</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-11-ur-web/index.htm">
<img src="https://img.youtube.com/vi/XMEFdofERLI/default.jpg" title="Lecture 11: Ur/Web" alt="Lecture 11: Ur/Web">
<p>Lecture 11: Ur/Web</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-12-network-security/index.htm">
<img src="https://img.youtube.com/vi/BZTWXl9QNK8/default.jpg" title="Lecture 12: Network Security" alt="Lecture 12: Network Security">
<p>Lecture 12: Network Security</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/QOtA76ga_fY/default.jpg" title="Lecture 13: Network Protocols" alt="Lecture 13: Network Protocols">
<p>Lecture 13: Network Protocols</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-14-ssl-and-https/index.htm">
<img src="https://img.youtube.com/vi/q1OF_0ICt9A/default.jpg" title="Lecture 14: SSL and HTTPS" alt="Lecture 14: SSL and HTTPS">
<p>Lecture 14: SSL and HTTPS</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-15-medical-software/index.htm">
<img src="https://img.youtube.com/vi/bA3xCpYLA34/default.jpg" title="Lecture 15: Medical Software" alt="Lecture 15: Medical Software">
<p>Lecture 15: Medical Software</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-16-side-channel-attacks/index.htm">
<img src="https://img.youtube.com/vi/3v5Von-oNUg/default.jpg" title="Lecture 16: Side-Channel Attacks" alt="Lecture 16: Side-Channel Attacks">
<p>Lecture 16: Side-Channel At...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-17-user-authentication/index.htm">
<img src="https://img.youtube.com/vi/MT7X17ZRo1U/default.jpg" title="Lecture 17: User Authentication" alt="Lecture 17: User Authentication">
<p>Lecture 17: User Authentica...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-18-private-browsing/index.htm">
<img src="https://img.youtube.com/vi/YTWXAFJf8bw/default.jpg" title="Lecture 18: Private Browsing" alt="Lecture 18: Private Browsing">
<p>Lecture 18: Private Browsing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-19-anonymous-communication/index.htm">
<img src="https://img.youtube.com/vi/OgGTJIgNewE/default.jpg" title="Lecture 19: Anonymous Communication" alt="Lecture 19: Anonymous Communication">
<p>Lecture 19: Anonymous Commu...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-20-mobile-phone-security/index.htm">
<img src="https://img.youtube.com/vi/uT7BXusDgDM/default.jpg" title="Lecture 20: Mobile Phone Security" alt="Lecture 20: Mobile Phone Security">
<p>Lecture 20: Mobile Phone Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-21-data-tracking/index.htm">
<img src="https://img.youtube.com/vi/WG5UbMrUiLU/default.jpg" title="Lecture 21: Data Tracking" alt="Lecture 21: Data Tracking">
<p>Lecture 21: Data Tracking</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-22-guest-lecture-by-mit-is-t/index.htm">
<img src="https://img.youtube.com/vi/2PO8h1pVW50/default.jpg" title="Lecture 22: Guest Lecture by MIT IS&amp;T" alt="Lecture 22: Guest Lecture by MIT IS&amp;T">
<p>Lecture 22: Guest Lecture b...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-23-security-economics/index.htm">
<img src="https://img.youtube.com/vi/8PdnOZI7H5E/default.jpg" title="Lecture 23: Security Economics" alt="Lecture 23: Security Economics">
<p>Lecture 23: Security Economics</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/video-lectures/lecture-13-network-protocols/QOtA76ga_fY.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="80">The</span> <span m="170">following</span> <span m="610">content</span> <span m="1120">is</span> <span m="1230">provided</span> <span m="1670">under</span> <span m="1940">a</span> <span m="1980">Creative</span> <span m="2430">Commons</span> <span m="2830">license.</span> <span m="3820">Your</span> <span m="3920">support</span> <span m="4420">will</span> <span m="4560">help</span> <span m="4820">MIT</span> <span m="5310">OpenCourseWare</span> <span m="6060">continue</span> <span m="6540">to</span> <span m="6680">offer</span> <span m="7000">high</span> <span m="7210">quality</span> <span m="7720">educational</span> <span m="8360">resources</span> <span m="8940">for</span> <span m="9080">free.</span> <span m="10150">To</span> <span m="10250">make</span> <span m="10340">a</span> <span m="10400">donation</span> <span m="11090">or</span> <span m="11340">to</span> <span m="11450">view</span> <span m="11660">additional</span> <span m="12070">materials</span> <span m="12690">from</span> <span m="12860">hundreds</span> <span m="13190">of</span> <span m="13300">MIT</span> <span m="13680">courses,</span> <span m="15000">visit</span> <span m="15160">MIT</span> <span m="15690">OpenCourseWare</span> <span m="16600">at</span> <span m="16830">ocw.mit.edu.</span> </p>
<p><span m="26340">PROFESSOR: So</span> <span m="27110">today,</span> <span m="27350">we're</span> <span m="27450">going</span> <span m="27550">to</span> <span m="27830">talk</span> <span m="28010">about</span> <span m="28330">Kerberos,</span> <span m="28910">which</span> <span m="29150">is</span> <span m="29890">a</span> <span m="30610">cryptographically</span> <span m="31450">secure,</span> <span m="32070">in</span> <span m="32189">some</span> <span m="32380">ways,</span> <span m="32750">protocol</span> <span m="33350">for</span> <span m="34130">authenticating</span> <span m="35590">computers</span> <span m="36210">and</span> <span m="36600">applications</span> <span m="37410">to</span> <span m="37500">one</span> <span m="37590">another</span> <span m="37850">over</span> <span m="38060">the</span> <span m="38140">network.</span> <span m="39060">So</span> <span m="39240">this is now</span> <span m="39440">finally</span> <span m="39720">going</span> <span m="39780">to</span> <span m="39870">use</span> <span m="40050">cryptography</span> <span m="40670">whereas</span> <span m="41020">last</span> <span m="41340">lecture,</span> <span m="41800">we</span> <span m="41820">looked</span> <span m="42060">at</span> <span m="42210">just</span> <span m="42490">using</span> <span m="42770">these</span> <span m="43010">TCP</span> <span m="43410">sequence</span> <span m="43770">numbers</span> <span m="44150">to</span> <span m="44720">provide</span> <span m="45060">security.</span> <span m="46410">So</span> <span m="46510">before</span> <span m="46660">we</span> <span m="46750">dive</span> <span m="46920">into</span> <span m="47070">the</span> <span m="47180">details,</span> <span m="47700">I want to</span> <span m="47870">mention</span> <span m="48250">there's</span> <span m="48330">two</span> <span m="48460">bits</span> <span m="48660">of</span> <span m="48720">administrivia</span> <span m="49360">that</span> <span m="51130">you</span> <span m="51260">might</span> <span m="51440">want</span> <span m="51560">to</span> <span m="51600">know.</span> </p>
<p><span m="51970">There's</span> <span m="52160">a</span> <span m="52240">quiz</span> <span m="52460">review</span> <span m="52710">today</span> <span m="53120">7</span> <span m="53420">to</span> <span m="53490">9</span> <span m="53680">o'clock</span> <span m="54200">in</span> <span m="54370">some</span> <span m="54560">room,</span> <span m="55020">I think</span> <span m="55350">32</span> <span m="55550">or</span> <span m="55650">23.</span> <span m="56570">It's</span> <span m="56720">on</span> <span m="56820">schedule</span> <span m="57150">page</span> <span m="57820">and</span> <span m="57930">the</span> <span m="58010">quiz is</span> <span m="58300">next</span> <span m="58530">Wednesday.</span> <span m="59910">And</span> <span m="60250">also,</span> <span m="60600">we</span> <span m="60710">want</span> <span m="60920">you</span> <span m="61000">guys</span> <span m="61270">to</span> <span m="61460">post</span> <span m="61760">some</span> <span m="61960">idea</span> <span m="62310">for</span> <span m="62600">your</span> <span m="62670">final</span> <span m="62910">project</span> <span m="63270">on</span> <span m="63430">Piazza</span> <span m="63900">by</span> <span m="64060">tomorrow</span> <span m="64580">just</span> <span m="64830">so</span> <span m="65220">that</span> <span m="65690">your</span> <span m="66390">classmates</span> <span m="66920">can</span> <span m="67800">know</span> <span m="68280">what</span> <span m="68830">you're</span> <span m="68970">thinking</span> <span m="69400">and</span> <span m="69740">help</span> <span m="70010">you</span> <span m="70120">form</span> <span m="70380">groups.</span> <span m="72610">All</span> <span m="72670">right,</span> <span m="73260">so</span> <span m="73400">let's</span> <span m="73540">talk</span> <span m="73670">about</span> <span m="73880">Kerberos,</span> <span m="74370">all right?</span> </p>
<p><span m="74560">So</span> <span m="74660">what</span> <span m="74800">is</span> <span m="74970">the</span> <span m="75260">setting</span> <span m="75830">that</span> <span m="76150">Kerberos</span> <span m="76580">is</span> <span m="76750">trying</span> <span m="77230">to</span> <span m="78210">support,</span> <span m="78630">here?</span> <span m="79360">So</span> <span m="79490">the</span> <span m="79590">model</span> <span m="80260">for</span> <span m="80480">Kerberos,</span> <span m="80990">what</span> <span m="81360">these</span> <span m="81520">guys</span> <span m="81900">had</span> <span m="82070">in</span> <span m="82150">mind</span> <span m="82650">when</span> <span m="82800">they</span> <span m="82880">were</span> <span m="83120">designing</span> <span m="83680">Athena</span> <span m="84300">guess</span> <span m="84710">25</span> <span m="85160">or</span> <span m="85240">30</span> <span m="85470">years</span> <span m="85690">ago</span> <span m="85910">now,</span> <span m="86600">is</span> <span m="86940">that</span> <span m="87600">they were</span> <span m="87800">imagining</span> <span m="88230">they were</span> <span m="88360">going</span> <span m="88470">to</span> <span m="88510">have</span> <span m="88640">a</span> <span m="88700">network</span> <span m="89180">with</span> <span m="89390">many</span> <span m="89900">server</span> <span m="90210">machines</span> <span m="90680">and</span> <span m="90800">many</span> <span m="91100">client</span> <span m="91500">machines</span> <span m="91910">interacting</span> <span m="92530">with</span> <span m="92670">one</span> <span m="92830">another.</span> <span m="93790">So</span> <span m="93910">you</span> <span m="94120">could</span> <span m="94220">imagine,</span> <span m="94680">well,</span> <span m="94890">you</span> <span m="94940">have</span> <span m="95070">a</span> <span m="95160">file</span> <span m="95510">server</span> <span m="95880">somewhere</span> <span m="96290">out</span> <span m="96510">there.</span> <span m="97150">You</span> <span m="97230">probably</span> <span m="97490">have</span> <span m="97640">a</span> <span m="97700">mail</span> <span m="98010">server</span> <span m="99190">connected</span> <span m="99470">to</span> <span m="99650">the</span> <span m="99690">network,</span> <span m="100860">maybe</span> <span m="101140">other</span> <span m="101500">services--</span> <span m="102320">printer.</span> </p>
<p><span m="105130">And</span> <span m="105800">all</span> <span m="106080">these</span> <span m="106530">are</span> <span m="107210">just</span> <span m="107430">connected</span> <span m="107880">to</span> <span m="108570">some</span> <span m="108750">sort</span> <span m="108910">of</span> <span m="108990">a</span> <span m="109040">network</span> <span m="110510">rather</span> <span m="110950">than</span> <span m="111170">being</span> <span m="112510">processes</span> <span m="113130">on</span> <span m="113250">a</span> <span m="113300">single</span> <span m="113610">machine.</span> <span m="114500">So</span> <span m="114690">the</span> <span m="115620">prelude</span> <span m="116200">to</span> <span m="116620">Athena</span> <span m="116770">and</span> <span m="117040">Kerberos</span> <span m="117610">is</span> <span m="117840">that</span> <span m="118030">you</span> <span m="118150">just</span> <span m="118320">have</span> <span m="118410">a</span> <span m="118490">time</span> <span m="118740">sharing</span> <span m="119030">machine</span> <span m="119430">where</span> <span m="119580">everything</span> <span m="119900">was</span> <span m="120030">a</span> <span m="120100">single</span> <span m="120390">process</span> <span m="120930">and</span> <span m="121400">everyone</span> <span m="121750">would</span> <span m="121850">just</span> <span m="122050">log</span> <span m="122270">into</span> <span m="122450">the</span> <span m="122560">same</span> <span m="122780">system</span> <span m="123290">and</span> <span m="123800">store</span> <span m="124100">their</span> <span m="124260">files</span> <span m="124700">there.</span> <span m="125760">So</span> <span m="125860">these</span> <span m="125920">guys</span> <span m="126110">wanted</span> <span m="126400">a</span> <span m="126540">more</span> <span m="126770">distributed</span> <span m="127240">system.</span> </p>
<p><span m="128830">So</span> <span m="129169">this</span> <span m="129360">meant</span> <span m="129600">that</span> <span m="129770">you'd</span> <span m="129900">have</span> <span m="130180">these</span> <span m="130610">servers</span> <span m="131350">on</span> <span m="131520">one</span> <span m="131720">side</span> <span m="132360">and</span> <span m="132640">you'd</span> <span m="132770">also</span> <span m="132980">have</span> <span m="133130">a</span> <span m="133180">bunch</span> <span m="133380">of</span> <span m="133500">workstations</span> <span m="134730">that</span> <span m="135060">users</span> <span m="135530">would</span> <span m="135710">use</span> <span m="135940">themselves</span> <span m="138040">which</span> <span m="138270">would</span> <span m="138400">run</span> <span m="138620">applications</span> <span m="139290">and</span> <span m="139410">potentially</span> <span m="139790">connect</span> <span m="140110">to</span> <span m="140180">these</span> <span m="140330">servers</span> <span m="140900">and</span> <span m="141180">store</span> <span m="141440">the</span> <span m="141540">user's</span> <span m="141860">files,</span> <span m="142360">get</span> <span m="142500">their</span> <span m="142660">mail</span> <span m="143010">et</span> <span m="143260">cetera.</span> <span m="144560">And</span> <span m="144770">the</span> <span m="144840">problem</span> <span m="145565">that</span> <span m="145910">they</span> <span m="146200">wanted</span> <span m="146390">to</span> <span m="146520">solve</span> <span m="146800">was</span> <span m="146920">how</span> <span m="147040">to</span> <span m="147100">authenticate</span> <span m="147690">the</span> <span m="147790">users</span> <span m="148390">that</span> <span m="148520">are</span> <span m="148620">using</span> <span m="148980">these</span> <span m="149180">workstations</span> <span m="150300">to</span> <span m="150560">all</span> <span m="150720">these</span> <span m="150890">different</span> <span m="151200">servers</span> <span m="151590">in</span> <span m="151640">the</span> <span m="151730">back</span> <span m="152000">end</span> <span m="152610">without</span> <span m="153130">having</span> <span m="153490">to</span> <span m="153630">trust</span> <span m="153920">the</span> <span m="154000">network</span> <span m="154270">to</span> <span m="154360">be</span> <span m="154470">correct,</span> <span m="154860">which</span> <span m="154920">seems</span> <span m="155060">like</span> <span m="155250">a</span> <span m="155740">sensible</span> <span m="156550">design</span> <span m="156890">requirement</span> <span m="158220">in</span> <span m="158350">many</span> <span m="158520">ways.</span> <span m="160010">And</span> <span m="161460">I</span> <span m="161550">should</span> <span m="161680">mention</span> <span m="161930">that</span> <span m="162520">I</span> <span m="162730">guess</span> <span m="162890">the</span> <span m="163310">alternative</span> <span m="163730">to</span> <span m="163840">Kerberos</span> <span m="164180">at</span> <span m="164230">the</span> <span m="164320">time</span> <span m="164580">was</span> <span m="164770">these</span> <span m="164970">R</span> <span m="165200">login</span> <span m="165620">commands</span> <span m="166060">that</span> <span m="166160">we're</span> <span m="166340">looking</span> <span m="166600">at</span> <span m="166700">in</span> <span m="166790">last</span> <span m="167090">lecture,</span> <span m="167480">which</span> <span m="167550">seems</span> <span m="167660">like</span> <span m="167780">a</span> <span m="167830">bad</span> <span m="168160">plan.</span> <span m="168520">They</span> <span m="168620">just</span> <span m="168650">use</span> <span m="168820">IP</span> <span m="169180">addresses</span> <span m="169680">to</span> <span m="169780">authenticate</span> <span m="170300">the</span> <span m="170360">users.</span> </p>
<p><span m="171860">And</span> <span m="172340">Kerberos</span> <span m="173070">was</span> <span m="173450">reasonably</span> <span m="173880">successful.</span> <span m="174330">It actually</span> <span m="174640">still</span> <span m="175000">is</span> <span m="175220">used</span> <span m="175610">at</span> <span m="175670">MIT.</span> <span m="176160">And</span> <span m="176240">actually,</span> <span m="176890">it's</span> <span m="177190">the</span> <span m="177620">basis</span> <span m="177960">of</span> <span m="178220">Microsoft's</span> <span m="178780">Active</span> <span m="179040">Directory</span> <span m="179430">server.</span> <span m="179780">So</span> <span m="179890">pretty</span> <span m="180040">much</span> <span m="180200">every</span> <span m="181200">Microsoft</span> <span m="181820">based</span> <span m="182160">sort of</span> <span m="182250">Windows</span> <span m="182630">Server</span> <span m="183450">uses</span> <span m="183680">Kerberos</span> <span m="184230">in</span> <span m="184320">some</span> <span m="184510">form</span> <span m="184730">or</span> <span m="184820">another.</span> </p>
<p><span m="186070">But</span> <span m="186100">of</span> <span m="186200">course,</span> <span m="186510">because</span> <span m="186880">this</span> <span m="187080">protocol</span> <span m="187420">was</span> <span m="187570">designed</span> <span m="188530">25</span> <span m="189030">or</span> <span m="189120">30</span> <span m="189320">years</span> <span m="189530">ago,</span> <span m="190430">requirements</span> <span m="191120">change.</span> <span m="191720">What</span> <span m="191860">people</span> <span m="192110">assume</span> <span m="192490">change.</span> <span m="194680">People</span> <span m="194960">now</span> <span m="195120">understand</span> <span m="195440">much</span> <span m="195600">more</span> <span m="195760">about</span> <span m="195950">security.</span> </p>
<p><span m="196310">So</span> <span m="196430">their</span> <span m="196710">version</span> <span m="196980">of</span> <span m="197160">Kerberos</span> <span m="197630">that's in</span> <span m="197680">use</span> <span m="197900">today</span> <span m="199050">is</span> <span m="200260">noticeably</span> <span m="200820">different</span> <span m="201100">in</span> <span m="201170">many</span> <span m="201380">ways</span> <span m="201770">from</span> <span m="202150">the</span> <span m="202570">version</span> <span m="202930">in the</span> <span m="203040">paper.</span> <span m="203860">And</span> <span m="203990">we'll</span> <span m="204190">look</span> <span m="204380">at</span> <span m="204590">exactly</span> <span m="205010">what</span> <span m="205880">assumptions</span> <span m="206530">aren't</span> <span m="206860">good</span> <span m="207010">enough</span> <span m="207520">anymore</span> <span m="207910">today</span> <span m="208323">and what did</span> <span m="208736">they get</span> <span m="209150">wrong.</span> <span m="210432">It's</span> <span m="210850">sort of</span> <span m="211070">inevitable</span> <span m="211510">for any</span> <span m="211780">protocol</span> <span m="212250">that</span> <span m="212390">was</span> <span m="212830">the</span> <span m="212940">first</span> <span m="213190">protocol</span> <span m="213540">to</span> <span m="213630">really</span> <span m="213880">use</span> <span m="214240">cryptography</span> <span m="214650">to</span> <span m="214990">authenticate</span> <span m="215500">parties</span> <span m="215810">over the</span> <span m="216210">network</span> <span m="216400">in</span> <span m="216560">this</span> <span m="217205">sort</span> <span m="217460">of</span> <span m="217765">full</span> <span m="218070">system</span> <span m="218360">scale.</span> </p>
<p><span m="220810">Anyway,</span> <span m="221110">so</span> <span m="221230">that's</span> <span m="221440">the</span> <span m="221750">sort</span> <span m="221910">of</span> <span m="221980">setting</span> <span m="222260">for</span> <span m="222370">Kerberos.</span> <span m="223530">And</span> <span m="223940">it</span> <span m="223990">might</span> <span m="224140">be</span> <span m="224240">interesting</span> <span m="224550">to</span> <span m="224780">figure</span> <span m="225020">out</span> <span m="225130">what's</span> <span m="225320">the</span> <span m="225420">trust</span> <span m="225760">model,</span> <span m="226040">right?</span> <span m="226250">So</span> <span m="226760">Kerberos</span> <span m="227130">is</span> <span m="227260">going</span> <span m="227380">to</span> <span m="227450">introduce</span> <span m="228810">this</span> <span m="228980">extra</span> <span m="229470">Kerberos</span> <span m="229910">server</span> <span m="230680">sitting</span> <span m="230990">on</span> <span m="231080">the</span> <span m="231170">side.</span> </p>
<p><span m="235240">So</span> <span m="236220">our</span> <span m="236620">third</span> <span m="236800">model</span> <span m="236990">at</span> <span m="237090">some</span> <span m="237350">level</span> <span m="237720">is</span> <span m="238040">that</span> <span m="238650">the</span> <span m="238790">network</span> <span m="239150">is</span> <span m="239320">untrusted</span> <span m="239980">like</span> <span m="240230">we</span> <span m="240300">were</span> <span m="240710">thinking</span> <span m="240930">about</span> <span m="241210">in</span> <span m="242360">last</span> <span m="242660">lecture.</span> <span m="243420">But</span> <span m="244160">who</span> <span m="244340">do</span> <span m="244400">we</span> <span m="244490">have</span> <span m="244620">to</span> <span m="244720">trust</span> <span m="245070">in</span> <span m="245360">this</span> <span m="246020">Kerberos</span> <span m="246460">setting?</span> <span m="249700">So</span> <span m="249940">of</span> <span m="250020">course,</span> <span m="250230">one</span> <span m="250730">thing</span> <span m="251030">is</span> <span m="251840">everyone--</span> <span m="253680">all</span> <span m="254080">parties</span> <span m="254500">have</span> <span m="254650">to</span> <span m="254770">trust</span> <span m="255190">the</span> <span m="255350">Kerberos</span> <span m="255750">server.</span> </p>
<p><span m="258930">So</span> <span m="258959">that's</span> <span m="259100">an</span> <span m="259190">assumption</span> <span m="259680">these</span> <span m="259850">guys</span> <span m="260029">were willing</span> <span m="260370">to</span> <span m="260440">make</span> <span m="260620">at</span> <span m="260690">the</span> <span m="260779">time</span> <span m="261130">that</span> <span m="261470">this</span> <span m="261760">Kerberos</span> <span m="262110">server</span> <span m="262380">would</span> <span m="262560">be</span> <span m="262720">in</span> <span m="262840">charge</span> <span m="263320">of</span> <span m="263640">all</span> <span m="263960">network</span> <span m="264530">authentication</span> <span m="264915">in</span> <span m="265300">some</span> <span m="265500">form</span> <span m="265720">or</span> <span m="265820">another.</span> <span m="267435">Do</span> <span m="267850">we</span> <span m="267990">have</span> <span m="268100">anyone</span> <span m="268390">else</span> <span m="268650">that has</span> <span m="268810">to</span> <span m="268910">trust</span> <span m="269160">anything</span> <span m="269930">in</span> <span m="270090">the</span> <span m="270190">setting?</span> <span m="273360">For</span> <span m="273410">example,</span> <span m="273710">yeah.</span> </p>
<p><span m="273960">STUDENT: Well</span> <span m="274437">users</span> <span m="274914">should</span> <span m="275391">trust their</span> <span m="275870">own</span> <span m="276220">machines.</span> </p>
<p><span m="277080">PROFESSOR: Yes,</span> <span m="277510">so</span> <span m="277570">that's a good</span> <span m="277710">point,</span> <span m="278050">right?</span> <span m="278220">There's</span> <span m="278740">the</span> <span m="279000">users</span> <span m="279450">that I</span> <span m="279590">didn't</span> <span m="280000">draw</span> <span m="280240">here.</span> <span m="281030">But</span> <span m="281200">these</span> <span m="281380">guys</span> <span m="282110">are</span> <span m="282230">using</span> <span m="282590">some</span> <span m="282750">workstation.</span> </p>
<p><span m="283780">And</span> <span m="284350">it's</span> <span m="284480">actually</span> <span m="284930">pretty</span> <span m="285170">important</span> <span m="285560">in</span> <span m="285670">Kerberos</span> <span m="286150">that the</span> <span m="286340">user</span> <span m="287750">trusts</span> <span m="289030">their</span> <span m="289260">workstation.</span> <span m="290890">So</span> <span m="290920">what</span> <span m="290980">goes</span> <span m="291150">wrong</span> <span m="291350">if</span> <span m="291440">you</span> <span m="291510">don't</span> <span m="291720">trust</span> <span m="291900">your</span> <span m="291980">workstation?</span> <span m="292490">Or</span> <span m="292660">presumably,</span> <span m="292780">it can</span> <span m="293080">just</span> <span m="293150">sniff</span> <span m="293510">your</span> <span m="293640">password</span> <span m="294140">and</span> <span m="294870">do</span> <span m="295090">whatever</span> <span m="295730">you</span> <span m="295910">type--</span> <span m="296260">you</span> <span m="296585">know,</span> <span m="296910">LS,</span> <span m="297595">it tries--</span> <span m="297870">runs</span> <span m="298150">RMX.</span> <span m="299405">That</span> <span m="299660">seems</span> <span m="300130">kind</span> <span m="300270">of</span> <span m="300340">unfortunate.</span> <span m="301950">Yeah.</span> </p>
<p><span m="302664">STUDENT: But it's</span> <span m="303148">more than that</span> <span m="303632">though,</span> <span m="304116">because</span> <span m="304600">they could</span> <span m="305084">even, like,</span> <span m="305568">sniff your</span> <span m="306052">Kerberos</span> <span m="306536">ticket.</span> </p>
<p><span m="307020">PROFESSOR: Yeah,</span> <span m="307305">exactly.</span> <span m="307590">Or</span> <span m="307970">when</span> <span m="308140">you</span> <span m="308240">log</span> <span m="308460">in,</span> <span m="308580">you</span> <span m="308680">type</span> <span m="308900">in</span> <span m="308990">your</span> <span m="309220">password,</span> <span m="309700">which</span> <span m="309710">is</span> <span m="309790">even</span> <span m="309960">worse</span> <span m="310200">than</span> <span m="310320">the</span> <span m="310420">ticket.</span> <span m="310710">Yeah,</span> <span m="311060">absolutely,</span> <span m="311460">yeah.</span> </p>
<p><span m="312240">So</span> <span m="312960">this is</span> <span m="313100">actually</span> <span m="313690">a</span> <span m="313730">bit</span> <span m="314040">of</span> <span m="314110">a</span> <span m="314210">problem</span> <span m="314760">with</span> <span m="315010">Kerberos</span> <span m="315490">in</span> <span m="315550">the</span> <span m="315650">sense</span> <span m="315970">that</span> <span m="316140">if</span> <span m="316270">you</span> <span m="316830">don't</span> <span m="317170">trust</span> <span m="317500">the</span> <span m="317580">workstation,</span> <span m="318340">then</span> <span m="319050">you're</span> <span m="319250">in</span> <span m="319310">a</span> <span m="319350">bit</span> <span m="319480">of</span> <span m="319580">trouble.</span> <span m="321050">So</span> <span m="321080">if</span> <span m="321180">you</span> <span m="321510">have</span> <span m="321730">your</span> <span m="321880">own</span> <span m="322040">laptop,</span> <span m="322560">this</span> <span m="323200">seems</span> <span m="323440">like</span> <span m="323580">a</span> <span m="323640">sensible</span> <span m="323960">assumption</span> <span m="324330">to</span> <span m="324410">make.</span> <span m="325030">If</span> <span m="325170">you're</span> <span m="325360">using</span> <span m="325750">a</span> <span m="325810">public</span> <span m="326120">computer,</span> <span m="327140">this</span> <span m="327230">is</span> <span m="327570">a</span> <span m="327770">bit</span> <span m="327940">more</span> <span m="328110">questionable.</span> <span m="328485">And</span> <span m="328860">we'll</span> <span m="329060">see</span> <span m="329290">exactly</span> <span m="329690">what</span> <span m="330420">could</span> <span m="330510">go</span> <span m="330740">wrong.</span> <span m="330860">Yeah.</span> </p>
<p><span m="331683">STUDENT: You</span> <span m="332176">have to</span> <span m="332669">trust</span> <span m="333162">the people</span> <span m="333655">administrating</span> <span m="334148">aren't</span> <span m="334641">doing anything</span> <span m="335134">bad</span> <span m="335627">with</span> <span m="336120">[INAUDIBLE]</span> <span m="336613">servers</span> <span m="337106">and giving</span> <span m="337599">them privilege</span> <span m="338092">access</span> <span m="338585">to one</span> <span m="339078">another.</span> </p>
<p><span m="340560">STUDENT: So</span> <span m="340870">what do you mean?</span> <span m="341180">So</span> <span m="341810">of</span> <span m="341910">course,</span> <span m="342200">like,</span> <span m="342840">ISNT</span> <span m="343000">is</span> <span m="343100">going</span> <span m="343220">to</span> <span m="343310">run</span> <span m="343500">these</span> <span m="343690">machines</span> <span m="344140">down</span> <span m="344380">here.</span> <span m="346010">But</span> <span m="346930">I</span> <span m="347050">think</span> <span m="347210">the</span> <span m="347280">machines</span> <span m="347650">themselves</span> <span m="348090">don't</span> <span m="348200">necessarily</span> <span m="348300">have</span> <span m="348610">to</span> <span m="348980">trust</span> <span m="349270">one</span> <span m="349420">another.</span> <span m="349850">So</span> <span m="350370">the</span> <span m="350650">mail</span> <span m="350890">server</span> <span m="351150">doesn't</span> <span m="351360">trust</span> <span m="351540">the</span> <span m="351620">print</span> <span m="351840">server</span> <span m="352490">or</span> <span m="352610">the</span> <span m="352720">file</span> <span m="353010">server</span> <span m="353240">necessarily.</span> </p>
<p><span m="354920">STUDENT: Not</span> <span m="355402">to trust,</span> <span m="355884">but he might</span> <span m="356366">be able to</span> <span m="356848">access a</span> <span m="357330">server</span> <span m="357812">you're not</span> <span m="358294">supposed to have</span> <span m="358776">access to by</span> <span m="359258">going through</span> <span m="359740">another</span> <span m="360222">server.</span> </p>
<p><span m="361680">PROFESSOR: Yeah,</span> <span m="362060">that's</span> <span m="362440">true,</span> <span m="362690">I</span> <span m="362780">guess.</span> <span m="363080">Yeah,</span> <span m="363470">so if</span> <span m="363640">you</span> <span m="363810">set</span> <span m="364010">up</span> <span m="364140">any</span> <span m="364340">trust</span> <span m="364630">relationship</span> <span m="365040">between</span> <span m="365370">these</span> <span m="365550">guys--</span> <span m="365770">like,</span> <span m="365900">if</span> <span m="365990">you</span> <span m="366090">give</span> <span m="366310">the</span> <span m="366400">mail</span> <span m="366690">server</span> <span m="367360">some</span> <span m="367640">back</span> <span m="367990">end</span> <span m="368340">to</span> <span m="368750">go</span> <span m="368950">access</span> <span m="369290">your</span> <span m="369520">files</span> <span m="370580">just</span> <span m="370800">for</span> <span m="370930">convenience,</span> <span m="371530">then</span> <span m="372000">this</span> <span m="372170">could</span> <span m="372320">be</span> <span m="372440">abused,</span> <span m="372830">yeah.</span> <span m="373140">So</span> <span m="373450">you</span> <span m="373550">have</span> <span m="373660">to</span> <span m="373730">be</span> <span m="373840">careful</span> <span m="374270">about</span> <span m="375670">not</span> <span m="375890">introducing</span> <span m="376400">additional</span> <span m="377090">sort</span> <span m="377190">of</span> <span m="377280">levels</span> <span m="377600">of</span> <span m="377730">trust</span> <span m="378140">or</span> <span m="378440">trust</span> <span m="378720">relations</span> <span m="379150">here.</span> </p>
<p><span m="380990">All</span> <span m="381060">right,</span> <span m="381800">anything</span> <span m="382020">else</span> <span m="382340">that matters</span> <span m="382780">here?</span> <span m="385100">Do</span> <span m="385280">the</span> <span m="385790">servers</span> <span m="386230">have</span> <span m="386370">to trust</span> <span m="386630">the</span> <span m="386790">users</span> <span m="387090">in</span> <span m="387180">any</span> <span m="387340">way</span> <span m="387770">or</span> <span m="388670">the</span> <span m="388820">workstations?</span> <span m="391970">No, I guess</span> <span m="392300">presumably</span> <span m="392650">not.</span> <span m="392900">So</span> <span m="393020">this was the</span> <span m="393370">whole</span> <span m="393590">goal</span> <span m="393900">that</span> <span m="394110">the</span> <span m="394560">server</span> <span m="395920">doesn't</span> <span m="396170">have</span> <span m="396460">to</span> <span m="396600">a</span> <span m="396890">priori</span> <span m="397180">even</span> <span m="397480">know</span> <span m="397740">necessarily</span> <span m="398160">what</span> <span m="398330">all</span> <span m="398480">these</span> <span m="398630">users</span> <span m="399040">or</span> <span m="399330">how to</span> <span m="399550">authenticate</span> <span m="400080">them</span> <span m="400320">or</span> <span m="400440">what</span> <span m="400620">this</span> <span m="400770">workstation</span> <span m="401070">is</span> <span m="401370">doing</span> <span m="402110">until</span> <span m="402600">it</span> <span m="402760">can</span> <span m="403220">cryptographically</span> <span m="404050">prove</span> <span m="405120">that</span> <span m="405970">this</span> <span m="406090">is</span> <span m="406200">a</span> <span m="406280">legitimate</span> <span m="406650">user</span> <span m="407100">and</span> <span m="407320">they</span> <span m="407420">should</span> <span m="407570">have</span> <span m="407940">access</span> <span m="408260">to</span> <span m="408330">their</span> <span m="409370">data</span> <span m="409620">or</span> <span m="409700">whatnot.</span> </p>
<p><span m="411460">All</span> <span m="411530">right,</span> <span m="411730">so</span> <span m="411800">let's</span> <span m="411950">look</span> <span m="412090">at</span> <span m="412290">how</span> <span m="412470">does</span> <span m="412760">Kerberos</span> <span m="413370">work or</span> <span m="413830">what's</span> <span m="414080">the</span> <span m="414990">overall</span> <span m="415580">architecture,</span> <span m="416170">at</span> <span m="416270">least.</span> <span m="417340">So</span> <span m="417980">the</span> <span m="418460">plan</span> <span m="418820">that</span> <span m="419360">these</span> <span m="419610">guys</span> <span m="419860">had</span> <span m="420000">in</span> <span m="420090">mind</span> <span m="421200">is</span> <span m="421500">that</span> <span m="421790">there</span> <span m="421950">would</span> <span m="422090">be</span> <span m="422220">this</span> <span m="422590">Kerberos</span> <span m="422960">server.</span> <span m="423500">We</span> <span m="423630">have</span> <span m="423860">drawn it up</span> <span m="424190">there</span> <span m="424420">but</span> <span m="424580">let's</span> <span m="424670">draw</span> <span m="424900">it</span> <span m="425470">in</span> <span m="425560">a</span> <span m="425620">slightly</span> <span m="426310">bigger</span> <span m="426650">scale.</span> <span m="427300">So</span> <span m="427380">this</span> <span m="427620">is</span> <span m="427850">the</span> <span m="428060">Kerberos</span> <span m="428530">server.</span> </p>
<p><span m="430540">And</span> <span m="431510">today,</span> <span m="431840">it's</span> <span m="432090">typically</span> <span m="432420">called</span> <span m="432700">KDC--</span> <span m="433400">Key</span> <span m="433750">Distribution</span> <span m="435490">Center.</span> <span m="436650">And</span> <span m="437830">there's</span> <span m="438000">all</span> <span m="438130">these</span> <span m="438350">users</span> <span m="439240">out</span> <span m="439460">here</span> <span m="439690">somewhere</span> <span m="441430">and</span> <span m="442120">also</span> <span m="442430">services</span> <span m="444790">that</span> <span m="444940">you</span> <span m="445020">might</span> <span m="445200">want</span> <span m="445320">to</span> <span m="445390">connect</span> <span m="445720">to.</span> <span m="446840">And</span> <span m="447120">the</span> <span m="447190">plan</span> <span m="447660">is</span> <span m="448000">that</span> <span m="448490">the</span> <span m="449870">Kerberos</span> <span m="450280">server</span> <span m="450860">is</span> <span m="451050">going</span> <span m="451170">to</span> <span m="451380">be</span> <span m="451630">responsible</span> <span m="452320">for</span> <span m="453470">storing</span> <span m="454090">a</span> <span m="454140">shared</span> <span m="454650">key</span> <span m="455220">between</span> <span m="455600">the</span> <span m="455690">Kerberos</span> <span m="456080">server</span> <span m="456650">and</span> <span m="457040">every</span> <span m="457420">entity</span> <span m="458050">in</span> <span m="458180">the</span> <span m="458260">world,</span> <span m="459070">or</span> <span m="459270">in</span> <span m="459370">this</span> <span m="459560">realm</span> <span m="459900">at</span> <span m="459960">least.</span> <span m="461080">So</span> <span m="461520">if</span> <span m="461640">the</span> <span m="461740">user</span> <span m="462310">has</span> <span m="462690">some</span> <span m="462890">sort</span> <span m="463030">of</span> <span m="463110">a</span> <span m="463400">key</span> <span m="464510">KC</span> <span m="464860">for</span> <span m="465210">client,</span> <span m="466060">than</span> <span m="466270">the</span> <span m="466340">Kerberos</span> <span m="466710">server</span> <span m="467040">is</span> <span m="467150">going</span> <span m="467260">to</span> <span m="467300">remember</span> <span m="467650">this</span> <span m="467910">key</span> <span m="468530">somewhere</span> <span m="468930">here.</span> </p>
<p><span m="469720">And</span> <span m="469870">similarly</span> <span m="470230">for</span> <span m="470360">the</span> <span m="470460">server,</span> <span m="471406">the</span> <span m="472080">key</span> <span m="472590">KS</span> <span m="473680">is</span> <span m="473820">going</span> <span m="473920">to</span> <span m="473970">be</span> <span m="474060">known</span> <span m="474440">to</span> <span m="474550">the</span> <span m="475010">service</span> <span m="475390">itself</span> <span m="476080">and</span> <span m="476280">to</span> <span m="476350">the</span> <span m="476450">Kerberos</span> <span m="476840">server</span> <span m="477380">but</span> <span m="477520">hopefully</span> <span m="477920">no</span> <span m="478060">one</span> <span m="478210">else.</span> <span m="479300">So</span> <span m="479400">you</span> <span m="479440">can</span> <span m="479560">think</span> <span m="479720">of</span> <span m="479840">it</span> <span m="479940">as</span> <span m="480460">like</span> <span m="480700">a</span> <span m="480870">generalization</span> <span m="481560">of</span> <span m="481710">passwords,</span> <span m="482330">right?</span> <span m="482520">So</span> <span m="482580">you know</span> <span m="482940">a</span> <span m="483300">password</span> <span m="483730">and</span> <span m="483810">the</span> <span m="483890">Kerberos</span> <span m="484220">server</span> <span m="484440">knows</span> <span m="484670">your</span> <span m="484810">password</span> <span m="485200">but</span> <span m="485310">no</span> <span m="485420">one</span> <span m="485530">else.</span> </p>
<p><span m="485820">And</span> <span m="485910">this</span> <span m="486010">is</span> <span m="486150">how</span> <span m="486290">you</span> <span m="486410">guys</span> <span m="486600">are</span> <span m="486660">going</span> <span m="486760">to</span> <span m="487950">prove</span> <span m="488190">to</span> <span m="488310">each other,</span> <span m="488790">yeah,</span> <span m="489270">I'm</span> <span m="489470">the</span> <span m="489550">right</span> <span m="489740">guy.</span> <span m="490130">I know this</span> <span m="490250">password</span> <span m="491570">and</span> <span m="491790">no</span> <span m="491930">one</span> <span m="492030">else</span> <span m="492230">does.</span> <span m="493000">Makes</span> <span m="493100">sense?</span> </p>
<p><span m="494150">And</span> <span m="495050">the</span> <span m="495180">other</span> <span m="495370">thing</span> <span m="495590">the</span> <span m="497050">Kerberos</span> <span m="497330">server</span> <span m="497430">is</span> <span m="497650">going</span> <span m="497750">to</span> <span m="497790">have</span> <span m="497910">to do is,</span> <span m="498020">of</span> <span m="498220">course,</span> <span m="498430">keep</span> <span m="498620">track</span> <span m="498990">of</span> <span m="499570">who</span> <span m="499850">is</span> <span m="500070">it</span> <span m="500490">that</span> <span m="501390">owns</span> <span m="501670">this</span> <span m="501860">key,</span> <span m="502210">right?</span> <span m="502370">So</span> <span m="502450">it's</span> <span m="503110">going</span> <span m="503240">to</span> <span m="503280">have</span> <span m="503480">this</span> <span m="503670">table</span> <span m="504260">mapping</span> <span m="505210">some</span> <span m="505440">sort</span> <span m="505650">of</span> <span m="505740">a</span> <span m="505800">name.</span> <span m="507080">So</span> <span m="507220">this</span> <span m="507340">is</span> <span m="507550">some</span> <span m="507790">sort</span> <span m="507970">of</span> <span m="508060">a</span> <span m="508110">user.</span> <span m="509080">This</span> <span m="509340">is</span> <span m="510030">maybe</span> <span m="511000">service</span> <span m="511720">maybe</span> <span m="511960">AFS</span> <span m="513270">or</span> <span m="513380">something</span> <span m="513559">like</span> <span m="513700">this.</span> </p>
<p><span m="515630">And</span> <span m="515950">the</span> <span m="516030">KDC</span> <span m="516470">is</span> <span m="516559">responsible</span> <span m="517049">for</span> <span m="517200">storing</span> <span m="517530">the</span> <span m="517669">gigantic</span> <span m="518120">table--</span> <span m="518530">well,</span> <span m="519470">not</span> <span m="519830">very</span> <span m="519990">large</span> <span m="520230">in</span> <span m="520320">terms</span> <span m="520559">of</span> <span m="520750">the</span> <span m="520970">number</span> <span m="521260">of</span> <span m="521340">bytes,</span> <span m="521659">necessarily,</span> <span m="522090">but</span> <span m="522250">one</span> <span m="522480">entry</span> <span m="522870">per</span> <span m="524460">entity</span> <span m="525640">at</span> <span m="525780">MIT</span> <span m="526840">that</span> <span m="528322">the</span> <span m="528790">Kerberos</span> <span m="529080">server</span> <span m="529290">knows</span> <span m="529470">about.</span> <span m="530310">Makes</span> <span m="530570">sense?</span> <span m="532510">All</span> <span m="532580">right,</span> <span m="533500">and</span> <span m="534010">then</span> <span m="534330">we're</span> <span m="534460">going</span> <span m="534570">to</span> <span m="534610">have</span> <span m="535930">sort</span> <span m="536060">of</span> <span m="536210">provide</span> <span m="536720">two</span> <span m="536920">interfaces,</span> <span m="537410">right?</span> </p>
<p><span m="537550">The</span> <span m="537640">paper</span> <span m="537870">is</span> <span m="537940">a</span> <span m="538010">little</span> <span m="538990">fuzzy</span> <span m="539400">above</span> <span m="539710">this</span> <span m="540440">or</span> <span m="540650">it</span> <span m="540750">pretends</span> <span m="541150">like</span> <span m="541290">there's</span> <span m="541480">really</span> <span m="541710">two</span> <span m="541880">services.</span> <span m="542200">But</span> <span m="542400">really,</span> <span m="542590">what's</span> <span m="542760">going</span> <span m="542980">on</span> <span m="543550">is</span> <span m="543820">that</span> <span m="544240">there's</span> <span m="544490">two</span> <span m="544660">interfaces</span> <span m="545260">to</span> <span m="545370">the</span> <span m="545510">same</span> <span m="545860">machine.</span> <span m="546660">One</span> <span m="546950">of</span> <span m="547000">them</span> <span m="547260">is</span> <span m="547430">called</span> <span m="547720">Kerberos</span> <span m="549180">in</span> <span m="549280">the</span> <span m="549370">paper</span> <span m="550980">and</span> <span m="551050">one</span> <span m="551230">of</span> <span m="551300">them</span> <span m="551560">is</span> <span m="551720">called</span> <span m="552330">TGS</span> <span m="553490">for</span> <span m="553740">Ticket</span> <span m="554020">Granting</span> <span m="554410">Service.</span> </p>
<p><span m="555460">And</span> <span m="555530">really,</span> <span m="555890">these are just</span> <span m="556240">two</span> <span m="556450">ways</span> <span m="556980">of</span> <span m="557110">talking</span> <span m="557470">to</span> <span m="557540">the</span> <span m="557630">same</span> <span m="557890">thing</span> <span m="558420">in</span> <span m="558550">the</span> <span m="558640">back</span> <span m="558920">end.</span> <span m="560130">And</span> <span m="560430">the</span> <span m="560510">protocol</span> <span m="562770">is</span> <span m="562940">a</span> <span m="563000">little</span> <span m="563420">different</span> <span m="563750">for</span> <span m="563850">these</span> <span m="564070">things.</span> <span m="564340">So</span> <span m="564560">initially,</span> <span m="565070">when</span> <span m="565220">the</span> <span m="565300">user</span> <span m="565580">logs</span> <span m="565980">in,</span> <span m="566570">they're</span> <span m="566610">going</span> <span m="566720">to</span> <span m="566880">talk</span> <span m="567090">to</span> <span m="567260">this</span> <span m="567600">guy</span> <span m="567770">over</span> <span m="567990">here.</span> <span m="568680">And</span> <span m="569210">they're</span> <span m="569350">going</span> <span m="569460">to</span> <span m="569540">send</span> <span m="570340">their</span> <span m="570660">client</span> <span m="571280">name,</span> <span m="572110">C.</span> <span m="573150">So</span> <span m="573380">this</span> <span m="573540">might</span> <span m="573720">be</span> <span m="573820">your</span> <span m="574060">Athena</span> <span m="574300">username.</span> </p>
<p><span m="575160">And</span> <span m="575450">the</span> <span m="575520">server</span> <span m="575810">is</span> <span m="575900">going</span> <span m="576040">to</span> <span m="576380">respond</span> <span m="576810">to</span> <span m="576870">back</span> <span m="577790">with</span> <span m="578835">a</span> <span m="579240">ticket,</span> <span m="579830">a</span> <span m="579960">TGS</span> <span m="580860">or--</span> <span m="582080">well,</span> <span m="583930">some</span> <span m="584110">sort</span> <span m="584240">of</span> <span m="584320">a</span> <span m="584410">ticket.</span> <span m="584720">We'll</span> <span m="584870">look</span> <span m="585020">at</span> <span m="585100">the</span> <span m="585170">details</span> <span m="585570">in a</span> <span m="585770">bit.</span> <span m="586540">And</span> <span m="586820">then</span> <span m="587590">when</span> <span m="588530">you</span> <span m="588710">want</span> <span m="588850">to</span> <span m="588910">talk</span> <span m="589240">to</span> <span m="589640">some</span> <span m="589840">server</span> <span m="590130">down</span> <span m="590350">here,</span> <span m="591130">KS,</span> <span m="592140">then</span> <span m="592280">you're</span> <span m="592400">going</span> <span m="592530">to</span> <span m="592930">talk</span> <span m="593150">to</span> <span m="593250">this</span> <span m="593460">TGS</span> <span m="593600">first</span> <span m="594040">and</span> <span m="594400">say, oh,</span> <span m="594760">hey,</span> <span m="595430">I</span> <span m="595790">already</span> <span m="596150">logged</span> <span m="596390">in</span> <span m="596530">through</span> <span m="596660">the</span> <span m="596800">Kerberos</span> <span m="597300">interface.</span> <span m="598560">Now,</span> <span m="598760">I</span> <span m="598860">want</span> <span m="598960">to</span> <span m="599060">talk</span> <span m="599120">to</span> <span m="599260">the</span> <span m="599330">server</span> <span m="599690">S.</span> </p>
<p><span m="600770">So</span> <span m="600880">you'd</span> <span m="601010">tell</span> <span m="601440">the</span> <span m="601580">TGS</span> <span m="602000">about</span> <span m="602180">the</span> <span m="602250">server</span> <span m="602540">you</span> <span m="602630">want</span> <span m="602720">to</span> <span m="602780">talk</span> <span m="603030">to.</span> <span m="603560">And</span> <span m="603710">then</span> <span m="604170">it</span> <span m="604330">returns</span> <span m="604700">you</span> <span m="604790">back</span> <span m="605530">some</span> <span m="605710">sort</span> <span m="605910">of</span> <span m="606000">a</span> <span m="607000">ticket</span> <span m="608330">for</span> <span m="609150">talking</span> <span m="609540">to</span> <span m="609700">the</span> <span m="609830">server</span> <span m="610110">S.</span> <span m="611540">And</span> <span m="611680">then</span> <span m="611890">you</span> <span m="611970">can</span> <span m="612300">finally</span> <span m="612780">start</span> <span m="613070">talking</span> <span m="614160">to</span> <span m="614300">the</span> <span m="614450">server</span> <span m="614730">over</span> <span m="614910">here</span> <span m="615600">by</span> <span m="616120">initially</span> <span m="616660">passing</span> <span m="617050">it</span> <span m="617210">this</span> <span m="618100">ticket</span> <span m="618530">for</span> <span m="618800">S.</span> </p>
<p><span m="622230">Does this</span> <span m="622480">all make</span> <span m="622600">sense?</span> <span m="623902">This</span> <span m="624330">is</span> <span m="624650">the</span> <span m="625140">sort</span> <span m="625300">of</span> <span m="625400">high</span> <span m="625870">level</span> <span m="626155">plan.</span> <span m="627270">So</span> <span m="628690">why</span> <span m="628830">do</span> <span m="628980">these</span> <span m="629110">guys</span> <span m="629350">have</span> <span m="629730">two</span> <span m="629860">interfaces?</span> </p>
<p><span m="633580">Well, I</span> <span m="633690">guess</span> <span m="633780">I wanted  to</span> <span m="634180">actually</span> <span m="634370">ask</span> <span m="634550">a</span> <span m="634600">bunch</span> <span m="634730">of</span> <span m="634800">questions.</span> <span m="635150">Like,</span> <span m="636280">in</span> <span m="636400">the</span> <span m="636470">case</span> <span m="636650">of</span> <span m="636720">a</span> <span m="636780">service,</span> <span m="637370">this</span> <span m="637750">service</span> <span m="638080">is</span> <span m="638160">probably</span> <span m="638380">going</span> <span m="638490">to</span> <span m="638530">be</span> <span m="638640">stored</span> <span m="638900">on</span> <span m="639020">disk.</span> <span m="639770">What's</span> <span m="639960">going</span> <span m="640140">on</span> <span m="640240">with</span> <span m="640450">this</span> <span m="640710">KC</span> <span m="641560">on</span> <span m="641700">the</span> <span m="641800">user</span> <span m="642120">side?</span> <span m="642330">Where</span> <span m="642710">does</span> <span m="643070">KC</span> <span m="643470">come</span> <span m="643670">from</span> <span m="644540">in</span> <span m="644690">Kerberos?</span> <span m="646240">Yeah.</span> </p>
<p><span m="647574">STUDENT: KDMS</span> <span m="648930">[INAUDIBLE]</span> <span m="649382">the</span> <span m="649834">database.</span> </p>
<p><span m="650740">PROFESSOR: Yeah,</span> <span m="651310">well,</span> <span m="651530">the</span> <span m="651650">key</span> <span m="651910">C</span> <span m="652100">sits</span> <span m="652460">here.</span> <span m="652930">And</span> <span m="652990">that's</span> <span m="653130">absolutely</span> <span m="653470">true.</span> <span m="653860">It's</span> <span m="654080">sits on</span> <span m="654450">this giant</span> <span m="654610">database.</span> <span m="655420">But it</span> <span m="655670">also</span> <span m="655890">has</span> <span m="656080">to</span> <span m="656180">be</span> <span m="656280">known</span> <span m="656760">to</span> <span m="656850">the</span> <span m="656970">user</span> <span m="657280">because</span> <span m="657590">the</span> <span m="657720">user</span> <span m="657860">has</span> <span m="657960">to</span> <span m="658060">prove</span> <span m="658530">that</span> <span m="658700">they</span> <span m="658910">are</span> <span m="659080">the</span> <span m="659200">user.</span> <span m="659610">Yeah.</span> </p>
<p><span m="660326">STUDENT: Is that a one way</span> <span m="660752">function and then the</span> <span m="661178">password?</span> </p>
<p><span m="662030">PROFESSOR: Yeah,</span> <span m="662460">so</span> <span m="662940">they</span> <span m="663080">actually have</span> <span m="663250">this</span> <span m="663550">sort</span> <span m="663680">of</span> <span m="663800">cute</span> <span m="664145">plan</span> <span m="664490">where</span> <span m="665050">the</span> <span m="665170">KC</span> <span m="665600">is</span> <span m="665700">actually</span> <span m="665930">going</span> <span m="666060">to</span> <span m="666120">be</span> <span m="666230">derived</span> <span m="666880">by</span> <span m="667510">hashing</span> <span m="668130">the</span> <span m="668240">user's</span> <span m="668640">password</span> <span m="669100">or</span> <span m="669240">really</span> <span m="669810">some</span> <span m="669980">sort</span> <span m="670130">of</span> <span m="670240">key</span> <span m="670400">duration</span> <span m="670900">function.</span> <span m="671320">And</span> <span m="671450">there's</span> <span m="671990">several</span> <span m="672540">different</span> <span m="672850">ones</span> <span m="673070">of</span> <span m="673170">perverse</span> <span m="673540">uses.</span> <span m="674690">But</span> <span m="675060">you're</span> <span m="675190">basically</span> <span m="675450">going</span> <span m="675570">to</span> <span m="675620">take</span> <span m="675800">a</span> <span m="675860">password,</span> <span m="676360">transform</span> <span m="676820">it</span> <span m="676890">in</span> <span m="676980">some</span> <span m="677180">way,</span> <span m="677840">and</span> <span m="678270">get</span> <span m="678500">this</span> <span m="678770">key</span> <span m="679320">KC.</span> <span m="680676">All</span> <span m="681130">right,</span> <span m="682030">so</span> <span m="682140">that</span> <span m="682250">seems</span> <span m="682360">good.</span> </p>
<p><span m="685180">Why</span> <span m="685390">do</span> <span m="685480">we</span> <span m="685560">need</span> <span m="686350">two</span> <span m="686530">protocols,</span> <span m="686920">right?</span> <span m="687010">You</span> <span m="687200">could</span> <span m="687400">imagine</span> <span m="687910">that</span> <span m="689660">you just</span> <span m="689940">always</span> <span m="690460">ask</span> <span m="690840">the</span> <span m="690940">Kerberos</span> <span m="691350">server</span> <span m="692020">for</span> <span m="692200">tickets</span> <span m="692610">directly</span> <span m="692990">this</span> <span m="693180">way.</span> <span m="693350">You</span> <span m="693460">say,</span> <span m="693590">well,</span> <span m="693840">hey,</span> <span m="694040">I</span> <span m="694090">want</span> <span m="694290">a</span> <span m="694400">ticket</span> <span m="694750">for</span> <span m="695570">this</span> <span m="695730">particular</span> <span m="696090">principle</span> <span m="696510">name.</span> <span m="696730">And it'll</span> <span m="697040">send</span> <span m="697230">you</span> <span m="697290">back</span> <span m="697480">a</span> <span m="697730">ticket</span> <span m="698290">and</span> <span m="698410">you</span> <span m="698490">can</span> <span m="698620">decrypt</span> <span m="698990">it</span> <span m="699070">with</span> <span m="699210">your</span> <span m="699360">KC</span> <span m="700720">afterwards.</span> <span m="701680">Yeah.</span> </p>
<p><span m="701940">STUDENT: Can you</span> <span m="702423">[INAUDIBLE]</span> <span m="704355">or ask the</span> <span m="704838">user</span> <span m="705321">to reenter</span> <span m="705804">their password each</span> <span m="706287">time they want to</span> <span m="706770">[INAUDIBLE]</span> <span m="707253">service?</span> </p>
<p><span m="707740">PROFESSOR: Right,</span> <span m="708260">so</span> <span m="708360">the</span> <span m="708470">reason</span> <span m="708750">for</span> <span m="708850">the</span> <span m="708940">difference</span> <span m="709260">between</span> <span m="709560">these</span> <span m="709740">two</span> <span m="709840">interfaces</span> <span m="710430">is</span> <span m="710730">that</span> <span m="711340">on</span> <span m="711540">this</span> <span m="711860">interface,</span> <span m="712440">all the</span> <span m="712730">responses</span> <span m="713360">come</span> <span m="713570">back</span> <span m="713810">encrypted</span> <span m="714390">with</span> <span m="714580">your</span> <span m="714760">key</span> <span m="715000">KC.</span> <span m="716170">And</span> <span m="717630">the</span> <span m="717790">Kerberos</span> <span m="718080">designers</span> <span m="718610">are a</span> <span m="718750">little</span> <span m="719020">worried</span> <span m="719500">about</span> <span m="720030">keeping</span> <span m="720380">this</span> <span m="720610">KC</span> <span m="721000">around</span> <span m="721430">for</span> <span m="721600">a</span> <span m="721640">long</span> <span m="721920">time.</span> <span m="723070">Because</span> <span m="723350">either</span> <span m="723660">you</span> <span m="723770">have</span> <span m="723950">to</span> <span m="724030">ask</span> <span m="724260">the</span> <span m="724470">user</span> <span m="724560">to</span> <span m="724800">enter</span> <span m="725140">it,</span> <span m="725260">which</span> <span m="725420">is</span> <span m="725650">just</span> <span m="726190">annoying</span> <span m="726700">for</span> <span m="726850">the</span> <span m="726950">user,</span> <span m="727730">or</span> <span m="728130">it</span> <span m="728340">sits</span> <span m="728580">around</span> <span m="728810">in</span> <span m="728900">memory.</span> </p>
<p><span m="729330">And</span> <span m="729980">this</span> <span m="730190">is</span> <span m="730290">basically</span> <span m="730580">as</span> <span m="730800">good</span> <span m="730970">as</span> <span m="731100">the</span> <span m="731190">user's</span> <span m="731800">password.</span> <span m="732400">So</span> <span m="732910">if</span> <span m="733090">this</span> <span m="733270">gets</span> <span m="733510">disclosed,</span> <span m="734770">then</span> <span m="736040">someone</span> <span m="736570">with</span> <span m="736770">access</span> <span m="737140">to</span> <span m="737280">KC</span> <span m="737730">can</span> <span m="737910">keep</span> <span m="738130">accessing</span> <span m="738550">the</span> <span m="738660">user's</span> <span m="739040">files</span> <span m="740020">until</span> <span m="740340">the</span> <span m="740470">user</span> <span m="740720">maybe</span> <span m="740920">changes</span> <span m="741210">their</span> <span m="741390">password</span> <span m="741800">and</span> <span m="741920">potentially</span> <span m="742270">even</span> <span m="742410">longer.</span> <span m="742800">We'll</span> <span m="742960">see</span> <span m="743610">about</span> <span m="743820">that.</span> </p>
<p><span m="745300">So</span> <span m="745620">this</span> <span m="745810">KC</span> <span m="746070">is</span> <span m="746280">a</span> <span m="746360">really</span> <span m="746730">dangerous</span> <span m="747170">thing</span> <span m="747550">to</span> <span m="747680">leak.</span> <span m="748570">So</span> <span m="748850">the</span> <span m="749270">whole</span> <span m="749500">point</span> <span m="749750">of</span> <span m="750080">using</span> <span m="750410">this</span> <span m="750570">interface</span> <span m="751010">first and</span> <span m="751350">using</span> <span m="751580">this</span> <span m="751740">interface</span> <span m="752200">later</span> <span m="752710">for</span> <span m="752930">all</span> <span m="753070">subsequent</span> <span m="753510">requests</span> <span m="754270">is</span> <span m="754470">that</span> <span m="754810">you</span> <span m="754910">can</span> <span m="755000">actually</span> <span m="755210">forget</span> <span m="755800">KC</span> <span m="756790">as</span> <span m="756940">soon</span> <span m="757250">as</span> <span m="757410">you</span> <span m="757550">decrypt</span> <span m="758470">this</span> <span m="758750">TGS</span> <span m="759240">response</span> <span m="759740">from</span> <span m="759900">the</span> <span m="759990">Kerberos</span> <span m="760430">interface.</span> <span m="761980">And</span> <span m="762780">from</span> <span m="762950">that</span> <span m="763140">point</span> <span m="763330">on,</span> <span m="763490">even</span> <span m="763690">if</span> <span m="763780">you</span> <span m="763910">leak</span> <span m="764210">it,</span> <span m="764600">there</span> <span m="764830">is</span> <span m="765130">a</span> <span m="765190">lifetime</span> <span m="765740">associated</span> <span m="766160">with</span> <span m="766280">this</span> <span m="766450">ticket.</span> <span m="767040">So</span> <span m="767260">worst</span> <span m="767550">case,</span> <span m="767800">someone</span> <span m="768030">gets</span> <span m="768240">access to</span> <span m="768580">your</span> <span m="768700">account</span> <span m="768980">for</span> <span m="769080">a</span> <span m="769110">couple</span> <span m="769330">of</span> <span m="769420">hours,</span> <span m="770160">not</span> <span m="770510">for</span> <span m="771150">an</span> <span m="771390">unbounded</span> <span m="771860">amount</span> <span m="772060">of</span> <span m="772150">time.</span> <span m="773440">So</span> <span m="773530">that's</span> <span m="773680">the</span> <span m="773980">sort of</span> <span m="774330">main</span> <span m="774550">difference</span> <span m="774900">why</span> <span m="775040">you</span> <span m="775240">guys</span> <span m="775520">have</span> <span m="775700">this</span> <span m="776320">slightly</span> <span m="776740">more</span> <span m="777080">complicated</span> <span m="778540">picture</span> <span m="779020">with</span> <span m="779360">two</span> <span m="779610">ways</span> <span m="779910">of</span> <span m="780150">accessing</span> <span m="780590">the</span> <span m="780680">same</span> <span m="780900">thing.</span> </p>
<p><span m="783190">All</span> <span m="783290">right,</span> <span m="783820">so</span> <span m="784140">before</span> <span m="784400">we</span> <span m="784510">dive</span> <span m="784710">into</span> <span m="784970">the</span> <span m="785340">mechanics</span> <span m="785920">of</span> <span m="786090">how</span> <span m="786360">these</span> <span m="786620">protocols</span> <span m="787160">actually</span> <span m="787380">look</span> <span m="787670">like</span> <span m="787910">on</span> <span m="788030">the</span> <span m="788120">wire,</span> <span m="788900">let's</span> <span m="789140">talk</span> <span m="789500">a</span> <span m="789560">little</span> <span m="789890">bit</span> <span m="790020">about</span> <span m="790350">this</span> <span m="790590">naming</span> <span m="791020">aspect</span> <span m="792790">in</span> <span m="792990">Kerberos,</span> <span m="793410">right?</span> <span m="793560">So</span> <span m="794630">at</span> <span m="794700">some</span> <span m="794830">level,</span> <span m="795160">you</span> <span m="795260">could</span> <span m="795360">think</span> <span m="795440">of</span> <span m="795580">Kerberos</span> <span m="796100">as</span> <span m="797010">being</span> <span m="797430">a</span> <span m="797500">name</span> <span m="797810">registry,</span> <span m="798380">right?</span> <span m="798530">So</span> <span m="798600">it's</span> <span m="798890">really</span> <span m="799170">responsible</span> <span m="799770">for</span> <span m="799970">mapping</span> <span m="800680">these</span> <span m="800900">cryptographic</span> <span m="801530">keys</span> <span m="801910">onto</span> <span m="802410">string</span> <span m="802960">names.</span> </p>
<p><span m="804090">And</span> <span m="804410">this is</span> <span m="804630">the</span> <span m="804770">fundamental</span> <span m="806110">sort</span> <span m="806220">of</span> <span m="807000">operation</span> <span m="807550">that</span> <span m="807700">Kerberos</span> <span m="808100">needs</span> <span m="808280">to</span> <span m="808370">provide.</span> <span m="808750">In</span> <span m="809110">fact,</span> <span m="809350">you'll</span> <span m="809580">see</span> <span m="810000">in the</span> <span m="810040">next</span> <span m="810430">lecture</span> <span m="810810">even</span> <span m="811040">on</span> <span m="811150">the</span> <span m="811230">web,</span> <span m="811570">we</span> <span m="811680">need</span> <span m="811890">some</span> <span m="812070">function</span> <span m="812430">like</span> <span m="812630">this.</span> <span m="812800">It's</span> <span m="812900">implemented</span> <span m="813210">differently</span> <span m="813650">from</span> <span m="813820">Kerberos</span> <span m="814230">but</span> <span m="814480">this is</span> <span m="814780">a</span> <span m="815140">fundamentally</span> <span m="815620">very</span> <span m="815820">important</span> <span m="816390">thing</span> <span m="816570">to</span> <span m="816690">have</span> <span m="817200">in</span> <span m="817830">almost</span> <span m="818150">any</span> <span m="818280">distributed</span> <span m="818760">system</span> <span m="819060">for</span> <span m="819200">security.</span> <span m="820510">So</span> <span m="820630">let's look at</span> <span m="820870">how</span> <span m="821160">Kerberos</span> <span m="821580">actually</span> <span m="821810">deals</span> <span m="822280">with</span> <span m="823210">names.</span> </p>
<p><span m="825080">So</span> <span m="825170">in</span> <span m="825270">Kerberos,</span> <span m="828310">the</span> <span m="828570">sort of</span> <span m="828890">system</span> <span m="829440">calls</span> <span m="829760">every</span> <span m="830030">entity</span> <span m="830460">in</span> <span m="830550">this</span> <span m="830730">database</span> <span m="831440">a</span> <span m="831540">principal</span> <span m="833560">And</span> <span m="834290">a</span> <span m="834780">principal</span> <span m="835045">in</span> <span m="835310">Kerberos</span> <span m="835700">is</span> <span m="835820">actually</span> <span m="836050">just</span> <span m="836260">a</span> <span m="836340">string,</span> <span m="836740">right?</span> <span m="836920">So</span> <span m="836980">you</span> <span m="837040">can</span> <span m="837130">actually</span> <span m="837400">have</span> <span m="838100">some</span> <span m="838310">principal</span> <span m="838665">like,</span> <span m="839020">I don't</span> <span m="839340">know,</span> <span m="839780">nickolei.</span> </p>
<p><span m="840885">So</span> <span m="841250">that's a</span> <span m="841330">string.</span> <span m="841720">And</span> <span m="842200">that</span> <span m="842690">could</span> <span m="842860">be</span> <span m="842970">a</span> <span m="843030">principal</span> <span m="843530">in</span> <span m="843890">some</span> <span m="844130">Kerberos</span> <span m="844540">realm.</span> <span m="845170">So</span> <span m="845330">it would</span> <span m="845730">literally</span> <span m="846130">be</span> <span m="846480">the</span> <span m="846580">thing</span> <span m="846850">that</span> <span m="847090">sits</span> <span m="847450">in</span> <span m="847620">this</span> <span m="848230">left</span> <span m="848530">column</span> <span m="848990">of</span> <span m="849350">the</span> <span m="850090">KDC's</span> <span m="850690">table.</span> </p>
<p><span m="852000">And</span> <span m="852660">there's</span> <span m="852840">also</span> <span m="853130">some</span> <span m="853850">extra</span> <span m="855390">instances</span> <span m="856010">that</span> <span m="856200">the</span> <span m="856350">protocl</span> <span m="856690">supports.</span> <span m="857090">I</span> <span m="857170">could</span> <span m="857330">say,</span> <span m="857510">you</span> <span m="857580">know,</span> <span m="858050">nikolai.extra</span> <span m="859760">secure</span> <span m="860200">or</span> <span m="860250">something.</span> <span m="862740">And</span> <span m="863120">I</span> <span m="863180">might</span> <span m="863480">use</span> <span m="863870">this</span> <span m="864230">as</span> <span m="864650">a</span> <span m="864760">different</span> <span m="865490">entity</span> <span m="865930">for</span> <span m="866810">machines</span> <span m="867180">I</span> <span m="867270">really</span> <span m="867480">care</span> <span m="867690">about.</span> <span m="867960">So</span> <span m="868020">maybe</span> <span m="868210">I</span> <span m="868300">will</span> <span m="868850">have</span> <span m="869000">a</span> <span m="869060">different</span> <span m="869370">password</span> <span m="869810">for</span> <span m="870160">really</span> <span m="870410">secure</span> <span m="870720">things</span> <span m="871080">and</span> <span m="871240">a</span> <span m="871300">different</span> <span m="871590">password</span> <span m="871940">for</span> <span m="872090">my</span> <span m="872250">regular</span> <span m="873140">account.</span> <span m="874120">So this is</span> <span m="874290">just</span> <span m="874470">sort</span> <span m="874865">of</span> <span m="876090">how</span> <span m="876480">Kerberos--</span> <span m="877110">this</span> <span m="877340">is</span> <span m="877480">what the</span> <span m="877810">paper</span> <span m="878180">talks</span> <span m="878400">about</span> <span m="878570">with</span> <span m="878700">instances.</span> </p>
<p><span m="880710">So</span> <span m="880860">one</span> <span m="881010">might</span> <span m="881210">actually</span> <span m="881440">wonder--</span> <span m="881830">where</span> <span m="882190">do</span> <span m="882250">you</span> <span m="882330">actually</span> <span m="882660">see</span> <span m="883120">instances?</span> <span m="883390">Where</span> <span m="883500">do</span> <span m="883690">influences</span> <span m="884530">come</span> <span m="884820">from?</span> <span m="885440">So</span> <span m="885990">the</span> <span m="886120">Kerberos</span> <span m="887370">service</span> <span m="888200">maps</span> <span m="888720">names</span> <span m="889230">to</span> <span m="889340">keys</span> <span m="889620">for</span> <span m="889850">you,</span> <span m="889930">but</span> <span m="890360">how</span> <span m="890470">do</span> <span m="890530">you</span> <span m="890590">know</span> <span m="890730">which</span> <span m="890900">name</span> <span m="891090">to</span> <span m="891190">ask</span> <span m="891630">for</span> <span m="891940">or</span> <span m="892560">which</span> <span m="893010">name</span> <span m="893340">to</span> <span m="893480">expect</span> <span m="894990">when</span> <span m="895240">you</span> <span m="895400">are</span> <span m="895740">talking</span> <span m="896090">to</span> <span m="896190">some</span> <span m="896370">machine?</span> </p>
<p><span m="896600">So</span> <span m="897070">I</span> <span m="897130">guess</span> <span m="897280">what</span> <span m="897390">I'm</span> <span m="897520">asking</span> <span m="897770">is,</span> <span m="898250">what</span> <span m="898570">are</span> <span m="898610">names</span> <span m="898940">appear</span> <span m="900220">outside</span> <span m="900720">of</span> <span m="900790">the</span> <span m="900880">Kerberos</span> <span m="901260">machine.</span> <span m="903050">So</span> <span m="903090">I guess</span> <span m="903230">we</span> <span m="903280">could</span> <span m="903400">ask,</span> <span m="903560">OK,</span> <span m="903750">where</span> <span m="904190">do</span> <span m="904380">user</span> <span m="904750">names</span> <span m="904980">appear?</span> <span m="906256">Any</span> <span m="906640">ideas?</span> <span m="907735">Yeah.</span> </p>
<p><span m="908200">STUDENT: You</span> <span m="908665">can ask</span> <span m="909130">the MIT</span> <span m="909595">server for</span> <span m="910060">usernames</span> <span m="910525">presumably.</span> </p>
<p><span m="911920">PROFESSOR: Right,</span> <span m="912345">yeah.</span> <span m="912770">So</span> <span m="912790">you could</span> <span m="912940">enumerate</span> <span m="913370">these</span> <span m="913570">things.</span> <span m="913900">Also,</span> <span m="914060">the</span> <span m="914180">users</span> <span m="914610">just</span> <span m="914820">type</span> <span m="915030">them</span> <span m="915090">in</span> <span m="915250">when</span> <span m="915350">they</span> <span m="915460">log</span> <span m="915680">into a</span> <span m="915910">machine.</span> </p>
<p><span m="916250">So</span> <span m="916505">that's</span> <span m="916760">where it</span> <span m="916930">initially</span> <span m="917340">comes</span> <span m="917640">from.</span> <span m="918480">Do</span> <span m="918610">usernames</span> <span m="919260">appear</span> <span m="919580">anywhere</span> <span m="919950">else?</span> <span m="921020">Should</span> <span m="921260">they</span> <span m="921350">appear</span> <span m="921590">anywhere</span> <span m="921850">else?</span> <span m="923669">Yeah.</span> </p>
<p><span m="924152">STUDENT: Possibly</span> <span m="924635">access</span> <span m="925118">the</span> <span m="925601">[INAUDIBLE]</span> <span m="926084">lists</span> <span m="926567">on the</span> <span m="927050">various</span> <span m="927533">services.</span> </p>
<p><span m="928020">PROFESSOR: Yes,</span> <span m="928305">that's</span> <span m="928590">actually</span> <span m="928810">an</span> <span m="928880">important</span> <span m="929270">point,</span> <span m="929540">right?</span> <span m="929910">The</span> <span m="930030">goal</span> <span m="930280">of</span> <span m="930410">Kerberos</span> <span m="930810">is</span> <span m="931020">just</span> <span m="931400">to</span> <span m="931540">map</span> <span m="932850">keys</span> <span m="933290">to</span> <span m="933410">names.</span> <span m="933850">But it</span> <span m="934000">doesn't</span> <span m="934250">tell</span> <span m="934450">you</span> <span m="934540">what</span> <span m="935100">that</span> <span m="935350">name</span> <span m="935710">should</span> <span m="935860">have</span> <span m="936000">access</span> <span m="936440">to.</span> </p>
<p><span m="937020">In</span> <span m="937200">fact,</span> <span m="937550">the</span> <span m="937570">way</span> <span m="937860">the</span> <span m="937980">applications</span> <span m="938640">typically</span> <span m="938950">use</span> <span m="939180">Kerberos</span> <span m="939720">is</span> <span m="939990">that</span> <span m="940620">one</span> <span m="940760">of</span> <span m="940800">these</span> <span m="940960">servers</span> <span m="942900">uses</span> <span m="943350">Kerberos</span> <span m="943720">to</span> <span m="943820">figure</span> <span m="944090">out,</span> <span m="944390">OK, what</span> <span m="944740">string</span> <span m="945270">name</span> <span m="945640">am I</span> <span m="945730">talking</span> <span m="946130">to?</span> <span m="946290">So</span> <span m="946450">when</span> <span m="946600">the</span> <span m="946680">mail</span> <span m="946890">server</span> <span m="947130">gets</span> <span m="947330">a</span> <span m="947390">connection</span> <span m="948290">from</span> <span m="948710">some</span> <span m="948960">workstation</span> <span m="949800">and it</span> <span m="949960">get</span> <span m="950090">the</span> <span m="950190">Kerberos</span> <span m="950580">ticket</span> <span m="950830">that</span> <span m="950920">prove</span> <span m="951440">that</span> <span m="951580">maybe</span> <span m="951780">this</span> <span m="952010">user</span> <span m="952360">is</span> <span m="952520">called</span> <span m="952780">Nikolai,</span> <span m="954220">then</span> <span m="954740">the</span> <span m="954930">mail</span> <span m="955160">server</span> <span m="955400">internally</span> <span m="955960">now</span> <span m="956110">has</span> <span m="956300">to</span> <span m="956400">figure</span> <span m="956630">out,</span> <span m="956750">OK,</span> <span m="956880">well,</span> <span m="957290">what</span> <span m="957630">should</span> <span m="957890">that</span> <span m="958150">guy</span> <span m="958210">have</span> <span m="958360">access</span> <span m="958710">to?</span> <span m="959280">And</span> <span m="959510">same</span> <span m="959690">for</span> <span m="959820">a</span> <span m="959870">file</span> <span m="960270">server.</span> </p>
<p><span m="960960">So</span> <span m="961510">inside</span> <span m="961960">of</span> <span m="962050">all</span> <span m="962220">these</span> <span m="962480">servers,</span> <span m="962950">there's</span> <span m="963150">probably</span> <span m="963870">things</span> <span m="964140">like</span> <span m="964320">access</span> <span m="964630">control</span> <span m="965060">lists,</span> <span m="966050">maybe</span> <span m="966290">groups,</span> <span m="967900">maybe</span> <span m="968150">other</span> <span m="968380">things</span> <span m="969110">that</span> <span m="969860">actually</span> <span m="970250">do</span> <span m="970440">the</span> <span m="970720">authorization</span> <span m="971460">step.</span> <span m="971770">So</span> <span m="972200">Kerberos</span> <span m="972820">provides</span> <span m="973290">authentication</span> <span m="974770">which</span> <span m="975220">tells</span> <span m="975480">you</span> <span m="975660">who</span> <span m="975890">is</span> <span m="976080">this</span> <span m="976250">person</span> <span m="976540">I'm</span> <span m="976660">talking</span> <span m="977020">to.</span> <span m="977690">And</span> <span m="978210">the</span> <span m="978510">service</span> <span m="978930">itself</span> <span m="979310">is</span> <span m="979440">responsible</span> <span m="980000">for</span> <span m="980140">implementing</span> <span m="980580">the</span> <span m="980670">authorization</span> <span m="981480">part</span> <span m="982130">where</span> <span m="982410">they</span> <span m="982540">decide</span> <span m="983350">what</span> <span m="983540">access</span> <span m="983870">you</span> <span m="983960">should</span> <span m="984110">have</span> <span m="984480">based</span> <span m="984840">on</span> <span m="985060">your</span> <span m="986400">username</span> <span m="986850">here.</span> </p>
<p><span m="988180">Makes</span> <span m="988310">sense?</span> <span m="990440">All</span> <span m="990510">right,</span> <span m="990680">so</span> <span m="990740">that's</span> <span m="990850">where</span> <span m="991010">the</span> <span m="991140">user</span> <span m="991630">names</span> <span m="992350">appear.</span> <span m="993500">There's</span> <span m="993650">also</span> <span m="993890">other</span> <span m="994340">principal</span> <span m="994760">names</span> <span m="995100">the</span> <span m="995300">Kerberos</span> <span m="995670">supports</span> <span m="996240">for</span> <span m="996580">services,</span> <span m="997230">right?</span> </p>
<p><span m="997400">So</span> <span m="997820">services,</span> <span m="998560">I</span> <span m="998610">guess</span> <span m="998770">the</span> <span m="998850">paper</span> <span m="999340">suggests,</span> <span m="999890">look</span> <span m="1000110">something</span> <span m="1000370">like</span> <span m="1000540">this.</span> <span m="1001380">That's</span> <span m="1001825">rcmd.hostname.</span> <span m="1007910">And</span> <span m="1009060">the</span> <span m="1009230">reason</span> <span m="1009530">that</span> <span m="1009740">you</span> <span m="1009830">need</span> <span m="1010030">a</span> <span m="1010620">name</span> <span m="1011080">for</span> <span m="1011340">one</span> <span m="1011510">of</span> <span m="1011570">these</span> <span m="1012870">services</span> <span m="1013840">is</span> <span m="1013960">that</span> <span m="1014050">you</span> <span m="1014140">want</span> <span m="1014270">to</span> <span m="1014320">know,</span> <span m="1014640">for</span> <span m="1014760">example,</span> <span m="1015200">when</span> <span m="1015380">I</span> <span m="1015850">connect</span> <span m="1016430">to</span> <span m="1016640">a</span> <span m="1016780">file</span> <span m="1017240">server,</span> <span m="1018630">I</span> <span m="1018750">actually</span> <span m="1018980">want</span> <span m="1019400">mutual</span> <span m="1019980">authentication.</span> </p>
<p><span m="1021500">It's</span> <span m="1021670">not</span> <span m="1021900">just</span> <span m="1022100">the</span> <span m="1022230">final</span> <span m="1022710">server</span> <span m="1022980">learns</span> <span m="1023320">who</span> <span m="1023470">I</span> <span m="1023580">am,</span> <span m="1024160">but</span> <span m="1024490">I,</span> <span m="1024810">the</span> <span m="1024980">user</span> <span m="1025450">or</span> <span m="1025589">the</span> <span m="1025710">workstation,</span> <span m="1026680">want</span> <span m="1026819">to</span> <span m="1026859">be</span> <span m="1026950">convinced</span> <span m="1027400">that</span> <span m="1027510">I'm</span> <span m="1027619">talking</span> <span m="1027880">to</span> <span m="1027940">the</span> <span m="1028069">right</span> <span m="1028300">file</span> <span m="1028579">server and</span> <span m="1028859">not</span> <span m="1029060">some</span> <span m="1029220">fake</span> <span m="1029859">file</span> <span m="1030170">server</span> <span m="1030420">that's</span> <span m="1030599">impersonating</span> <span m="1031220">my</span> <span m="1031359">files.</span> <span m="1031880">Because</span> <span m="1032960">maybe</span> <span m="1033170">I'll</span> <span m="1033339">look</span> <span m="1033579">at</span> <span m="1033660">the</span> <span m="1033750">grades</span> <span m="1034109">file</span> <span m="1034380">and</span> <span m="1034470">submit it</span> <span m="1034780">to</span> <span m="1034849">the</span> <span m="1034930">registrar.</span> <span m="1035690">It</span> <span m="1035940">would</span> <span m="1036220">be</span> <span m="1036670">too</span> <span m="1036810">bad</span> <span m="1037170">if</span> <span m="1037270">some</span> <span m="1037579">file</span> <span m="1037819">server can</span> <span m="1038109">impersonate</span> <span m="1038770">the</span> <span m="1038910">response</span> <span m="1039780">and</span> <span m="1040069">give</span> <span m="1040230">me</span> <span m="1040380">the</span> <span m="1040530">wrong</span> <span m="1040740">grades</span> <span m="1041060">file</span> <span m="1041319">all of</span> <span m="1041579">a</span> <span m="1041630">sudden.</span> </p>
<p><span m="1043020">So</span> <span m="1043300">this</span> <span m="1043460">is</span> <span m="1043589">why</span> <span m="1043940">the</span> <span m="1044310">service</span> <span m="1044770">principles</span> <span m="1045220">also</span> <span m="1045500">need</span> <span m="1045800">their</span> <span m="1045990">own</span> <span m="1046230">name</span> <span m="1046770">and</span> <span m="1047140">the</span> <span m="1047220">workstations</span> <span m="1048569">need</span> <span m="1048720">to</span> <span m="1048800">figure</span> <span m="1049090">out</span> <span m="1049770">what</span> <span m="1050300">name</span> <span m="1050600">should</span> <span m="1050800">I</span> <span m="1050830">expect</span> <span m="1051490">to</span> <span m="1051570">see</span> <span m="1052330">when</span> <span m="1052550">I</span> <span m="1052610">connect</span> <span m="1052940">to</span> <span m="1053010">the</span> <span m="1053110">service.</span> <span m="1054120">And</span> <span m="1054250">typically,</span> <span m="1054580">this</span> <span m="1054770">comes</span> <span m="1055200">from</span> <span m="1055520">the</span> <span m="1055620">user</span> <span m="1055870">at</span> <span m="1055970">some</span> <span m="1056140">level.</span> <span m="1056500">So for</span> <span m="1056570">example,</span> <span m="1056980">if</span> <span m="1056990">I</span> <span m="1057090">type</span> <span m="1058400">SSH</span> <span m="1059440">some</span> <span m="1059690">machine</span> <span m="1060070">foo,</span> <span m="1061010">then</span> <span m="1061940">this</span> <span m="1062250">means</span> <span m="1062690">that</span> <span m="1063030">I</span> <span m="1063160">should</span> <span m="1063350">be</span> <span m="1063460">expecting</span> <span m="1064150">a</span> <span m="1064480">Kerberos</span> <span m="1064930">principal</span> <span m="1065210">called</span> <span m="1065720">rcmd.foo</span> <span m="1067100">on</span> <span m="1067340">the other</span> <span m="1067810">end</span> <span m="1067990">of</span> <span m="1068070">this</span> <span m="1068210">connection.</span> <span m="1069000">And</span> <span m="1069230">if</span> <span m="1069320">it</span> <span m="1069500">turns</span> <span m="1069750">out</span> <span m="1069870">to</span> <span m="1069930">be</span> <span m="1070030">someone</span> <span m="1070410">else,</span> <span m="1071210">this</span> <span m="1071520">SSH</span> <span m="1072010">client</span> <span m="1072130">should</span> <span m="1072220">abort</span> <span m="1072910">and</span> <span m="1073110">not</span> <span m="1073240">let</span> <span m="1073420">me</span> <span m="1073540">connect</span> <span m="1073820">because</span> <span m="1074070">then</span> <span m="1074200">I</span> <span m="1074250">will</span> <span m="1074360">be</span> <span m="1075050">misled</span> <span m="1075550">into</span> <span m="1075770">talking</span> <span m="1076040">to</span> <span m="1076120">some</span> <span m="1076270">other</span> <span m="1076430">machine.</span> <span m="1077936">That</span> <span m="1078410">make</span> <span m="1078520">sense?</span> </p>
<p><span m="1080660">So</span> <span m="1080690">here's</span> <span m="1080830">one interesting</span> <span m="1081230">question.</span> <span m="1081850">When</span> <span m="1082000">can</span> <span m="1082180">we</span> <span m="1082450">reuse</span> <span m="1082900">names</span> <span m="1083170">in</span> <span m="1083300">Kerberos?</span> <span m="1084365">It's</span> <span m="1084830">like,</span> <span m="1084950">all</span> <span m="1085030">of</span> <span m="1085110">you</span> <span m="1085190">guys</span> <span m="1085390">have</span> <span m="1085570">Athena</span> <span m="1085850">accounts.</span> </p>
<p><span m="1086940">And</span> <span m="1087310">when</span> <span m="1087480">you</span> <span m="1087560">graduate,</span> <span m="1088390">could</span> <span m="1088540">MIT,</span> <span m="1088960">like,</span> <span m="1089160">wipe</span> <span m="1089460">out</span> <span m="1090240">your</span> <span m="1090450">database</span> <span m="1090850">entry</span> <span m="1091480">and</span> <span m="1091800">allow</span> <span m="1092080">someone</span> <span m="1092350">else</span> <span m="1092540">to register</span> <span m="1093150">that same</span> <span m="1093300">username?</span> <span m="1094130">Would that</span> <span m="1094500">be</span> <span m="1094600">a good</span> <span m="1094890">idea?</span> <span m="1096600">Well,</span> <span m="1096840">aside</span> <span m="1096950">from</span> <span m="1097080">the</span> <span m="1097220">fact</span> <span m="1097540">that you</span> <span m="1097640">guys</span> <span m="1097740">want</span> <span m="1097870">accounts.</span> <span m="1099380">Yeah.</span> </p>
<p><span m="1099790">STUDENT: Updated</span> <span m="1101570">services</span> <span m="1101880">as</span> <span m="1102110">well</span> <span m="1102520">so that they</span> <span m="1102977">would, like</span> <span m="1103434">map</span> <span m="1103891">that username</span> <span m="1104348">to</span> <span m="1104805">[INAUDIBLE]</span> <span m="1105262">permission</span> <span m="1105719">theoretically?</span> </p>
<p><span m="1106176">PROFESSOR: Yeah,</span> <span m="1106640">because</span> <span m="1107270">these</span> <span m="1107550">guys</span> <span m="1107850">are</span> <span m="1108070">actually</span> <span m="1108470">just</span> <span m="1108710">string</span> <span m="1109350">entries</span> <span m="1109840">somewhere</span> <span m="1110330">in</span> <span m="1110410">some</span> <span m="1111040">ACL</span> <span m="1112070">on</span> <span m="1112240">a</span> <span m="1112300">file</span> <span m="1112580">server</span> <span m="1112980">on a mail</span> <span m="1113270">server.</span> <span m="1113950">And</span> <span m="1114540">just</span> <span m="1114700">because</span> <span m="1114920">you</span> <span m="1115020">wipe</span> <span m="1115330">out</span> <span m="1115480">this</span> <span m="1115610">entry</span> <span m="1115990">in</span> <span m="1116090">the</span> <span m="1116360">Kerberos</span> <span m="1117340">database</span> <span m="1118200">doesn't</span> <span m="1118440">mean</span> <span m="1118640">that</span> <span m="1118730">this</span> <span m="1118930">entry is</span> <span m="1119330">gone.</span> <span m="1120210">And</span> <span m="1120660">they're not</span> <span m="1120980">versioning</span> <span m="1121360">in any way,</span> <span m="1121790">right?</span> </p>
<p><span m="1121950">This</span> <span m="1122090">entry</span> <span m="1122390">could</span> <span m="1122520">literally</span> <span m="1122860">say,</span> <span m="1123070">you</span> <span m="1123160">know,</span> <span m="1123630">Alice</span> <span m="1124070">has</span> <span m="1124240">access</span> <span m="1124760">to</span> <span m="1125290">some</span> <span m="1125580">Athena</span> <span m="1125880">locker.</span> <span m="1127270">And</span> <span m="1128170">if</span> <span m="1128360">this</span> <span m="1128600">Alice</span> <span m="1128940">graduates</span> <span m="1129620">and</span> <span m="1129750">her</span> <span m="1129980">entry</span> <span m="1130300">gets</span> <span m="1130550">removed,</span> <span m="1131010">then</span> <span m="1131160">some</span> <span m="1131330">new</span> <span m="1131490">Alice</span> <span m="1131790">comes</span> <span m="1131970">along,</span> <span m="1132260">registers,</span> <span m="1132790">in</span> <span m="1132870">the</span> <span m="1132950">Kerberos</span> <span m="1133340">database.</span> <span m="1134770">But</span> <span m="1135280">she</span> <span m="1135570">gets</span> <span m="1135800">a</span> <span m="1135870">principal</span> <span m="1136240">that</span> <span m="1136380">looks</span> <span m="1136570">identical</span> <span m="1137120">to</span> <span m="1137210">the</span> <span m="1137530">old</span> <span m="1137790">Alice.</span> <span m="1138040">It's</span> <span m="1138150">the</span> <span m="1138240">same</span> <span m="1138440">string.</span> </p>
<p><span m="1138770">So</span> <span m="1139290">all</span> <span m="1139440">of</span> <span m="1139500">a</span> <span m="1139560">sudden,</span> <span m="1139730">the</span> <span m="1139810">file</span> <span m="1140110">server</span> <span m="1140370">will</span> <span m="1140550">give</span> <span m="1140720">access</span> <span m="1141180">to</span> <span m="1141810">the</span> <span m="1141920">new</span> <span m="1142070">Alice</span> <span m="1142450">to</span> <span m="1142620">old</span> <span m="1143180">Alice's</span> <span m="1143520">data.</span> <span m="1144740">So</span> <span m="1144850">there's a</span> <span m="1144890">bit</span> <span m="1145030">of</span> <span m="1145110">a</span> <span m="1145440">complicated</span> <span m="1146110">process</span> <span m="1146620">for</span> <span m="1147090">reclaiming</span> <span m="1147820">principal</span> <span m="1148210">names</span> <span m="1148560">in</span> <span m="1148750">Kerberos</span> <span m="1149650">because</span> <span m="1150070">there's</span> <span m="1150280">no</span> <span m="1150460">real</span> <span m="1150710">connection</span> <span m="1151160">or</span> <span m="1151250">versioning</span> <span m="1151710">between</span> <span m="1152020">these</span> <span m="1152240">guys.</span> <span m="1153170">So</span> <span m="1153320">as a</span> <span m="1153390">result,</span> <span m="1153770">it's</span> <span m="1153860">actually</span> <span m="1154180">kind</span> <span m="1154340">of</span> <span m="1154410">hard</span> <span m="1154690">to</span> <span m="1154820">reuse</span> <span m="1155210">principal</span> <span m="1155570">names.</span> <span m="1156750">Once</span> <span m="1157010">you</span> <span m="1157090">register</span> <span m="1157600">a</span> <span m="1157660">principal,</span> <span m="1158240">you</span> <span m="1158320">probably</span> <span m="1158540">don't</span> <span m="1158770">want</span> <span m="1158900">to</span> <span m="1159810">reuse it</span> <span m="1160200">very</span> <span m="1160430">often.</span> </p>
<p><span m="1162160">And</span> <span m="1162290">same</span> <span m="1162600">for,</span> <span m="1163140">in</span> <span m="1163280">some</span> <span m="1163480">sense,</span> <span m="1163940">these</span> <span m="1165310">principal</span> <span m="1165700">names</span> <span m="1165930">for</span> <span m="1166080">service</span> <span m="1166370">as</span> <span m="1166600">well.</span> <span m="1167020">As</span> <span m="1167410">long</span> <span m="1167730">as</span> <span m="1167890">this</span> <span m="1168720">hostname</span> <span m="1169280">remain</span> <span m="1169810">some</span> <span m="1170100">well-known</span> <span m="1170480">service</span> <span m="1170910">that</span> <span m="1171020">people</span> <span m="1171380">expect</span> <span m="1171910">to</span> <span m="1171990">function</span> <span m="1172410">in</span> <span m="1172500">a</span> <span m="1172570">certain</span> <span m="1172850">way,</span> <span m="1173040">you</span> <span m="1173130">probably</span> <span m="1173380">don't</span> <span m="1173610">want</span> <span m="1173760">to</span> <span m="1174170">get</span> <span m="1174350">rid</span> <span m="1174490">of</span> <span m="1174570">its</span> <span m="1174750">key</span> <span m="1174920">even</span> <span m="1175100">if</span> <span m="1175170">the</span> <span m="1175280">service</span> <span m="1175550">goes</span> <span m="1175780">on.</span> <span m="1175940">Because</span> <span m="1176280">maybe</span> <span m="1176560">a</span> <span m="1176620">year</span> <span m="1176840">later,</span> <span m="1177090">some</span> <span m="1177220">guy tries</span> <span m="1177570">to</span> <span m="1177620">connect to it</span> <span m="1178030">and</span> <span m="1178120">expects</span> <span m="1178580">certain</span> <span m="1178900">things.</span> </p>
<p><span m="1179780">And</span> <span m="1180070">if it's</span> <span m="1180210">been</span> <span m="1180370">reused</span> <span m="1180660">for a</span> <span m="1180810">different</span> <span m="1181140">service,</span> <span m="1181580">that</span> <span m="1181960">guy</span> <span m="1182200">can</span> <span m="1182960">impersonate</span> <span m="1183570">things.</span> <span m="1184130">Probably</span> <span m="1184340">not</span> <span m="1184590">as</span> <span m="1185280">dramatic</span> <span m="1185820">or</span> <span m="1186070">as</span> <span m="1186180">bad,</span> <span m="1186490">but</span> <span m="1187260">still,</span> <span m="1187620">you</span> <span m="1187700">have</span> <span m="1187830">to</span> <span m="1187900">be</span> <span m="1188010">careful</span> <span m="1188390">with</span> <span m="1188560">reusing</span> <span m="1189750">principal</span> <span m="1190160">names</span> <span m="1190420">in</span> <span m="1190500">this</span> <span m="1190910">kind</span> <span m="1191060">of</span> <span m="1191170">protocol.</span> <span m="1192910">Makes</span> <span m="1193030">sense?</span> </p>
<p><span m="1193940">Any</span> <span m="1194250">questions?</span> <span m="1196140">All</span> <span m="1196220">right,</span> <span m="1196890">so</span> <span m="1197030">let's</span> <span m="1197140">look</span> <span m="1197280">at</span> <span m="1197360">how</span> <span m="1197870">the</span> <span m="1198090">protocol</span> <span m="1198560">itself</span> <span m="1199080">now</span> <span m="1199210">works.</span> <span m="1199590">So</span> <span m="1199690">we'll</span> <span m="1199960">look</span> <span m="1200240">first</span> <span m="1201190">and</span> <span m="1201580">this</span> <span m="1202040">step of</span> <span m="1202370">the protocol</span> <span m="1202780">where</span> <span m="1202950">you</span> <span m="1203020">initially</span> <span m="1203380">get</span> <span m="1203650">your</span> <span m="1204140">ticket</span> <span m="1204880">with</span> <span m="1205150">your</span> <span m="1205440">password.</span> <span m="1206160">And</span> <span m="1206260">then</span> <span m="1206380">we'll</span> <span m="1206550">look</span> <span m="1206730">at</span> <span m="1206810">how</span> <span m="1207070">this</span> <span m="1207350">TGS</span> <span m="1208270">interface</span> <span m="1208790">works</span> <span m="1209170">and</span> <span m="1209740">how</span> <span m="1209970">it</span> <span m="1210330">differs</span> <span m="1210750">then a</span> <span m="1210880">little</span> <span m="1211060">bit.</span> </p>
<p><span m="1212660">All</span> <span m="1212720">right,</span> <span m="1212940">so</span> <span m="1213560">I</span> <span m="1213630">guess</span> <span m="1213780">there's</span> <span m="1214510">this</span> <span m="1214790">main</span> <span m="1215050">data</span> <span m="1215280">structure</span> <span m="1215700">that</span> <span m="1215900">Kerberos</span> <span m="1216330">uses</span> <span m="1216650">called</span> <span m="1216860">a</span> <span m="1217010">ticket.</span> <span m="1217790">And</span> <span m="1218580">this</span> <span m="1218930">ticket</span> <span m="1220900">looks</span> <span m="1221190">like</span> <span m="1221340">this.</span> <span m="1221660">So</span> <span m="1222370">there's</span> <span m="1222530">a</span> <span m="1222670">ticket</span> <span m="1223040">to</span> <span m="1223200">between</span> <span m="1223510">a</span> <span m="1223620">client</span> <span m="1224100">and</span> <span m="1224210">a</span> <span m="1224280">server.</span> </p>
<p><span m="1225270">And</span> <span m="1226350">this</span> <span m="1226560">guy</span> <span m="1226740">is</span> <span m="1226840">basically</span> <span m="1227380">the</span> <span m="1227790">names</span> <span m="1228510">of</span> <span m="1228590">the</span> <span m="1228940">server</span> <span m="1229470">and</span> <span m="1229700">the</span> <span m="1229800">client</span> <span m="1230200">that</span> <span m="1230350">we're</span> <span m="1230550">talking</span> <span m="1230860">about--</span> <span m="1231660">the</span> <span m="1231910">IP</span> <span m="1232350">address</span> <span m="1233340">of</span> <span m="1233660">the</span> <span m="1234050">client,</span> <span m="1236190">some</span> <span m="1236410">kind</span> <span m="1236600">of</span> <span m="1236700">timestamp,</span> <span m="1239150">and</span> <span m="1240530">an</span> <span m="1240950">expiration</span> <span m="1241550">time</span> <span m="1242380">for</span> <span m="1242580">how</span> <span m="1242810">long</span> <span m="1243050">the</span> <span m="1243160">stick</span> <span m="1243330">is</span> <span m="1243510">valid.</span> <span m="1244260">And</span> <span m="1244410">there's</span> <span m="1244570">also</span> <span m="1244930">a</span> <span m="1246230">key,</span> <span m="1246900">KCS,</span> <span m="1248290">that's</span> <span m="1248400">going</span> <span m="1248500">to</span> <span m="1248540">be</span> <span m="1248610">shared</span> <span m="1249090">between</span> <span m="1249330">the</span> <span m="1249430">client</span> <span m="1249800">and</span> <span m="1249950">the</span> <span m="1250020">server.</span> <span m="1251860">So</span> <span m="1251960">that's</span> <span m="1251990">what's</span> <span m="1252450">in a</span> <span m="1252890">ticket.</span> </p>
<p><span m="1253790">And</span> <span m="1254000">there's</span> <span m="1254320">also</span> <span m="1254680">this</span> <span m="1254840">other</span> <span m="1255110">weird</span> <span m="1255460">data</span> <span m="1255740">structure</span> <span m="1256610">that</span> <span m="1257070">Kerberos</span> <span m="1257410">introduces</span> <span m="1258730">called</span> <span m="1258950">an</span> <span m="1259030">authenticator.</span> <span m="1259380">And</span> <span m="1259730">an</span> <span m="1260120">authenticator</span> <span m="1261000">goes</span> <span m="1261360">with a</span> <span m="1261480">particular</span> <span m="1262130">client</span> <span m="1262670">C.</span> <span m="1263590">And</span> <span m="1264000">this</span> <span m="1264160">thing</span> <span m="1264420">is</span> <span m="1264580">just</span> <span m="1264860">the</span> <span m="1265510">client's</span> <span m="1266050">name,</span> <span m="1266530">the</span> <span m="1266620">IP</span> <span m="1266980">address</span> <span m="1267250">of</span> <span m="1267360">the</span> <span m="1267470">client,</span> <span m="1268790">and</span> <span m="1269370">the</span> <span m="1269890">time</span> <span m="1270390">stamp</span> <span m="1271640">when</span> <span m="1271870">the</span> <span m="1271970">client</span> <span m="1272380">generated</span> <span m="1272920">this</span> <span m="1273690">authenticator.</span> <span m="1275210">And</span> <span m="1275470">typically,</span> <span m="1275860">both</span> <span m="1276120">of</span> <span m="1276300">these</span> <span m="1276560">things</span> <span m="1276880">are</span> <span m="1277320">encrypted.</span> </p>
<p><span m="1278270">And</span> <span m="1278480">authenticator</span> <span m="1279050">is</span> <span m="1279130">typically</span> <span m="1279610">scripted</span> <span m="1280520">with</span> <span m="1281150">the</span> <span m="1281580">key</span> <span m="1282240">between</span> <span m="1282560">the</span> <span m="1282670">client</span> <span m="1283020">on</span> <span m="1283100">the</span> <span m="1283180">server.</span> <span m="1283760">So</span> <span m="1283900">the</span> <span m="1284060">authenticator</span> <span m="1284710">sort of</span> <span m="1285080">has</span> <span m="1285330">to</span> <span m="1285420">do</span> <span m="1285670">with</span> <span m="1285920">a</span> <span m="1286000">particular</span> <span m="1286550">connection</span> <span m="1286950">between</span> <span m="1287190">a</span> <span m="1287240">client</span> <span m="1287690">and</span> <span m="1287790">a</span> <span m="1287890">server.</span> <span m="1289110">And</span> <span m="1289580">the</span> <span m="1289900">Kerberos</span> <span m="1290310">ticket</span> <span m="1290540">itself</span> <span m="1290930">here</span> <span m="1291550">is</span> <span m="1291840">typically</span> <span m="1292200">encrypted</span> <span m="1292970">with</span> <span m="1293470">the</span> <span m="1293600">key</span> <span m="1294250">for</span> <span m="1294790">the</span> <span m="1295100">service</span> <span m="1296350">KS.</span> <span m="1298140">So</span> <span m="1298430">the</span> <span m="1298550">subscript</span> <span m="1299330">notation</span> <span m="1300080">denotes</span> <span m="1300770">here</span> <span m="1301010">encryption</span> <span m="1301460">with</span> <span m="1301590">a</span> <span m="1301650">particular</span> <span m="1302620">key.</span> </p>
<p><span m="1305050">All</span> <span m="1305120">right,</span> <span m="1305430">so</span> <span m="1306040">what</span> <span m="1306190">does</span> <span m="1306260">this--</span> <span m="1306800">so</span> <span m="1306930">using</span> <span m="1307470">this</span> <span m="1307860">sort</span> <span m="1307990">of</span> <span m="1308070">notation</span> <span m="1308470">here,</span> <span m="1308960">let's</span> <span m="1309080">try</span> <span m="1309210">to</span> <span m="1309290">figure</span> <span m="1309520">out</span> <span m="1309650">what</span> <span m="1309820">is</span> <span m="1309980">the</span> <span m="1310160">protocol.</span> <span m="1310670">By</span> <span m="1310820">which</span> <span m="1311150">the</span> <span m="1311250">user</span> <span m="1311520">initially</span> <span m="1311990">logs</span> <span m="1312390">into</span> <span m="1312620">this</span> <span m="1312930">Kerberos</span> <span m="1313650">and</span> <span m="1313780">gets</span> <span m="1313990">their</span> <span m="1314380">TGS</span> <span m="1314730">ticket.</span> <span m="1316010">So</span> <span m="1316820">as</span> <span m="1316980">we</span> <span m="1317130">saw</span> <span m="1317330">here</span> <span m="1317570">before,</span> <span m="1317980">right,</span> <span m="1318230">the</span> <span m="1318900">plan</span> <span m="1319240">is</span> <span m="1319510">the</span> <span m="1319930">client</span> <span m="1320920">is</span> <span m="1321100">going</span> <span m="1321220">to</span> <span m="1321950">send</span> <span m="1323940">their</span> <span m="1324880">username</span> <span m="1325730">over</span> <span m="1326030">to</span> <span m="1326140">the</span> <span m="1326260">Kerberos</span> <span m="1326680">server</span> <span m="1328800">or</span> <span m="1328960">that</span> <span m="1329140">interface.</span> <span m="1330130">And</span> <span m="1330240">the</span> <span m="1330300">response</span> <span m="1330690">is</span> <span m="1330790">going</span> <span m="1330890">to</span> <span m="1330940">be</span> <span m="1331050">a</span> <span m="1331170">ticket.</span> </p>
<p><span m="1332140">And</span> <span m="1332420">what</span> <span m="1332550">precisely</span> <span m="1332950">the</span> <span m="1333130">client</span> <span m="1333530">actually</span> <span m="1333760">sends</span> <span m="1334000">over--</span> <span m="1334200">both</span> <span m="1334610">the</span> <span m="1335220">username</span> <span m="1335890">C</span> <span m="1336650">of</span> <span m="1336870">the</span> <span m="1337080">client</span> <span m="1337550">that's</span> <span m="1337710">issuing</span> <span m="1338040">the</span> <span m="1338130">request</span> <span m="1339000">as</span> <span m="1339210">well</span> <span m="1339530">as</span> <span m="1339880">the</span> <span m="1340560">principal</span> <span m="1341200">name--</span> <span m="1341950">well,</span> <span m="1342150">the</span> <span m="1342230">client is</span> <span m="1342510">also a</span> <span m="1342770">principal</span> <span m="1343140">name.</span> <span m="1343760">But</span> <span m="1344140">the</span> <span m="1344240">client</span> <span m="1344530">also</span> <span m="1344850">sends</span> <span m="1345080">the</span> <span m="1345190">principal</span> <span m="1345590">name</span> <span m="1345840">of</span> <span m="1346090">the</span> <span m="1346450">service</span> <span m="1347390">for</span> <span m="1347650">which</span> <span m="1347830">it</span> <span m="1347870">would</span> <span m="1348250">like</span> <span m="1348470">to</span> <span m="1348560">get</span> <span m="1348710">a</span> <span m="1348790">ticket.</span> <span m="1349720">And</span> <span m="1350240">typically,</span> <span m="1350710">the</span> <span m="1350840">service</span> <span m="1351350">name</span> <span m="1351550">is</span> <span m="1351620">actually</span> <span m="1351830">the</span> <span m="1351950">service</span> <span m="1352330">name</span> <span m="1352880">of</span> <span m="1353020">this</span> <span m="1353220">TGS</span> <span m="1353850">guy</span> <span m="1354160">over</span> <span m="1354410">here.</span> <span m="1354700">So</span> <span m="1354790">you</span> <span m="1354880">get</span> <span m="1355040">a</span> <span m="1355110">ticket</span> <span m="1355400">for</span> <span m="1355610">them.</span> <span m="1356150">But</span> <span m="1356310">you</span> <span m="1356380">could</span> <span m="1356510">get</span> <span m="1356620">a</span> <span m="1356680">ticket</span> <span m="1356930">for</span> <span m="1357160">almost</span> <span m="1357440">any</span> <span m="1357600">service</span> <span m="1357900">you</span> <span m="1357990">want</span> <span m="1358200">in</span> <span m="1358270">this</span> <span m="1358440">way.</span> </p>
<p><span m="1359700">And</span> <span m="1360080">their</span> <span m="1360290">response</span> <span m="1361060">is</span> <span m="1361260">going</span> <span m="1361390">to</span> <span m="1361470">be</span> <span m="1362430">this</span> <span m="1362745">sort of</span> <span m="1363060">interesting</span> <span m="1363670">tuple.</span> <span m="1364380">It's</span> <span m="1364540">going</span> <span m="1364650">to</span> <span m="1364720">be</span> <span m="1364970">your</span> <span m="1365240">ticket</span> <span m="1366230">between</span> <span m="1366610">the</span> <span m="1366710">client</span> <span m="1367030">and</span> <span m="1367140">the</span> <span m="1367240">server</span> <span m="1368100">encrypted</span> <span m="1368690">just</span> <span m="1368930">with</span> <span m="1369770">that</span> <span m="1370030">key</span> <span m="1370200">KS</span> <span m="1370930">as</span> <span m="1371200">shown</span> <span m="1371470">above.</span> <span m="1373560">I</span> <span m="1373610">guess</span> <span m="1373790">we</span> <span m="1373870">should</span> <span m="1374290">write</span> <span m="1374490">that</span> <span m="1374620">down</span> <span m="1375290">with</span> <span m="1375460">KS</span> </p>
<p><span m="1376170">And</span> <span m="1376450">also,</span> <span m="1377470">you</span> <span m="1377580">get</span> <span m="1377850">to</span> <span m="1377930">this</span> <span m="1378140">shared</span> <span m="1378470">key--</span> <span m="1379396">key</span> <span m="1379860">CS.</span> <span m="1381140">And</span> <span m="1381250">this</span> <span m="1381380">whole</span> <span m="1381650">thing</span> <span m="1382440">is</span> <span m="1382610">encrypted</span> <span m="1382970">with</span> <span m="1384230">KC.</span> <span m="1386180">So that's</span> <span m="1386340">the</span> <span m="1386820">wire</span> <span m="1387040">protocol.</span> </p>
<p><span m="1388690">So</span> <span m="1388820">I guess</span> <span m="1389010">let's</span> <span m="1389840">try</span> <span m="1390040">to</span> <span m="1390150">figure</span> <span m="1390360">out</span> <span m="1390460">a</span> <span m="1390490">couple</span> <span m="1390760">things.</span> <span m="1391190">So</span> <span m="1391970">first</span> <span m="1392280">of</span> <span m="1392350">all,</span> <span m="1394050">how</span> <span m="1394200">does</span> <span m="1394380">the</span> <span m="1396220">Kerberos</span> <span m="1396750">server</span> <span m="1397770">authenticate</span> <span m="1398280">the</span> <span m="1398370">client</span> <span m="1398730">here?</span> <span m="1399020">How</span> <span m="1399220">does it</span> <span m="1399360">know that</span> <span m="1399570">this</span> <span m="1399750">is</span> <span m="1399870">the</span> <span m="1399960">right</span> <span m="1400160">user</span> <span m="1400630">making</span> <span m="1400910">this</span> <span m="1401060">request?</span> <span m="1404630">Yeah.</span> </p>
<p><span m="1404895">STUDENT: It</span> <span m="1405160">can</span> <span m="1405652">make sure</span> <span m="1406144">that the</span> <span m="1406636">ticket</span> <span m="1407128">that it sent</span> <span m="1407620">because it</span> <span m="1408112">has</span> <span m="1408604">KC.</span> </p>
<p><span m="1409100">PROFESSOR: Yes,</span> <span m="1409475">I think</span> <span m="1409850">that's</span> <span m="1410310">what's</span> <span m="1410650">going</span> <span m="1410880">on</span> <span m="1411020">is</span> <span m="1411080">that the</span> <span m="1411290">Kerberos</span> <span m="1411570">server</span> <span m="1412060">again</span> <span m="1412160">on</span> <span m="1412350">some</span> <span m="1412510">level</span> <span m="1412760">actually</span> <span m="1412960">doesn't</span> <span m="1413210">know</span> <span m="1413490">whether</span> <span m="1413720">this</span> <span m="1413880">is</span> <span m="1413990">the</span> <span m="1414080">right</span> <span m="1414310">client</span> <span m="1414640">or</span> <span m="1414740">not.</span> <span m="1415540">But</span> <span m="1415700">it</span> <span m="1415720">thinks</span> <span m="1415950">oh,</span> <span m="1416160">well,</span> <span m="1416390">sure,</span> <span m="1416900">it</span> <span m="1417060">doesn't</span> <span m="1417250">matter</span> <span m="1417500">who</span> <span m="1417580">is</span> <span m="1417950">making</span> <span m="1418180">this</span> <span m="1418340">request.</span> <span m="1418930">I'll</span> <span m="1419080">just</span> <span m="1419310">send</span> <span m="1419410">this</span> <span m="1419510">blob</span> <span m="1419780">out</span> <span m="1420520">and</span> <span m="1421000">the</span> <span m="1421100">only</span> <span m="1421460">person</span> <span m="1421780">who</span> <span m="1421890">should</span> <span m="1422040">be</span> <span m="1422140">able</span> <span m="1422360">to</span> <span m="1422460">make</span> <span m="1422680">any</span> <span m="1422850">use</span> <span m="1423040">of</span> <span m="1423140">this</span> <span m="1423250">blob</span> <span m="1424010">is</span> <span m="1424250">the</span> <span m="1424350">person</span> <span m="1424730">that</span> <span m="1424870">knows</span> <span m="1425200">this</span> <span m="1425460">key</span> <span m="1426250">KC</span> <span m="1426670">over</span> <span m="1426860">here.</span> <span m="1428170">So</span> <span m="1429100">that's</span> <span m="1429170">actually</span> <span m="1429310">kind</span> <span m="1429460">of</span> <span m="1429580">cool</span> <span m="1429800">because</span> <span m="1430040">the</span> <span m="1430160">client</span> <span m="1430530">doesn't</span> <span m="1430700">have</span> <span m="1430830">to</span> <span m="1430940">send</span> <span m="1431170">their</span> <span m="1431390">password</span> <span m="1431890">over the</span> <span m="1432150">network</span> <span m="1432410">at</span> <span m="1432480">all.</span> </p>
<p><span m="1433790">So</span> <span m="1433880">in</span> <span m="1434110">some</span> <span m="1434350">ways,</span> <span m="1434590">this</span> <span m="1434710">is</span> <span m="1434770">actually</span> <span m="1434990">better</span> <span m="1435500">than</span> <span m="1436180">the</span> <span m="1436310">client</span> <span m="1436650">sending</span> <span m="1436910">a</span> <span m="1436960">password</span> <span m="1437350">to</span> <span m="1437420">the</span> <span m="1437530">Kerberos</span> <span m="1437920">server</span> <span m="1438800">because</span> <span m="1439690">even</span> <span m="1439890">if</span> <span m="1439950">the</span> <span m="1440040">Kerberos</span> <span m="1440370">server</span> <span m="1440660">here</span> <span m="1441710">was</span> <span m="1442280">listening</span> <span m="1442910">for</span> <span m="1443200">these</span> <span m="1443420">passwords</span> <span m="1443960">and</span> <span m="1443980">trying</span> <span m="1444180">to</span> <span m="1444230">record</span> <span m="1444620">them,</span> <span m="1445060">it</span> <span m="1445180">would</span> <span m="1445280">never</span> <span m="1445470">get</span> <span m="1445630">your</span> <span m="1445770">password.</span> <span m="1446710">Or</span> <span m="1447120">maybe if</span> <span m="1447440">someone</span> <span m="1447670">was</span> <span m="1447820">impersonating</span> <span m="1448410">the</span> <span m="1448500">Kerberos</span> <span m="1448900">server,</span> <span m="1449530">they</span> <span m="1449630">wouldn't</span> <span m="1449850">get</span> <span m="1449970">a</span> <span m="1450030">copy</span> <span m="1450270">of</span> <span m="1450360">your</span> <span m="1450490">password.</span> <span m="1453000">All</span> <span m="1453090">right,</span> <span m="1453850">yeah.</span> </p>
<p><span m="1454090">STUDENT: [INAUDIBLE]</span> <span m="1455030">adversary</span> <span m="1455970">wants to</span> <span m="1456440">[INAUDIBLE]</span> <span m="1457380">your</span> <span m="1457850">password</span> <span m="1458320">offline</span> <span m="1458790">without--</span> </p>
<p><span m="1460200">PROFESSOR: Yeah,</span> <span m="1460670">so this</span> <span m="1461000">is</span> <span m="1461240">actually</span> <span m="1461570">not</span> <span m="1462000">a</span> <span m="1462070">great</span> <span m="1462550">aspect</span> <span m="1463020">of</span> <span m="1463140">Kerberos,</span> <span m="1463740">in</span> <span m="1463880">fact,</span> <span m="1464230">right?</span> <span m="1464420">So</span> <span m="1464780">does</span> <span m="1464930">everyone</span> <span m="1465130">see</span> <span m="1465320">what</span> <span m="1465430">the</span> <span m="1465500">problem</span> <span m="1465790">is?</span> <span m="1466030">The</span> <span m="1466230">problem</span> <span m="1466530">is</span> <span m="1466650">that</span> <span m="1467260">the</span> <span m="1467420">way</span> <span m="1467560">the</span> <span m="1467720">client</span> <span m="1468240">could</span> <span m="1468440">tell</span> <span m="1468710">if</span> <span m="1468800">they</span> <span m="1468910">got</span> <span m="1469130">the</span> <span m="1469210">right</span> <span m="1469450">password</span> <span m="1469810">or</span> <span m="1469920">not</span> <span m="1470180">or</span> <span m="1470560">the</span> <span m="1470690">workstation</span> <span m="1471390">tells</span> <span m="1471700">if</span> <span m="1471810">the</span> <span m="1471920">client</span> <span m="1472340">supplied</span> <span m="1472520">the</span> <span m="1472580">right</span> <span m="1472760">password</span> <span m="1473550">is</span> <span m="1473650">they</span> <span m="1473780">try</span> <span m="1474000">to</span> <span m="1474130">decrypt</span> <span m="1474470">this</span> <span m="1474570">ticket</span> <span m="1475320">and</span> <span m="1475470">they</span> <span m="1475560">see</span> <span m="1475670">if</span> <span m="1475740">it</span> <span m="1475830">works</span> <span m="1476100">or</span> <span m="1476170">not.</span> </p>
<p><span m="1477760">And</span> <span m="1479630">decryption</span> <span m="1479960">is</span> <span m="1480220">fairly</span> <span m="1480640">cheap.</span> <span m="1481080">This</span> <span m="1481340">is</span> <span m="1481610">symmetric</span> <span m="1482020">encryption</span> <span m="1482510">and</span> <span m="1482600">you</span> <span m="1482700">can</span> <span m="1482950">do</span> <span m="1483400">probably</span> <span m="1483720">millions</span> <span m="1484400">of</span> <span m="1484510">decryptions</span> <span m="1485060">a</span> <span m="1485120">second</span> <span m="1485520">if</span> <span m="1485610">you</span> <span m="1485850">try</span> <span m="1486110">hard</span> <span m="1487860">on</span> <span m="1488080">modern</span> <span m="1488370">machines.</span> <span m="1489460">And</span> <span m="1490650">this</span> <span m="1490790">means</span> <span m="1490980">that</span> <span m="1491060">you</span> <span m="1491130">can</span> <span m="1491230">try</span> <span m="1491690">millions</span> <span m="1492300">of</span> <span m="1492420">potential</span> <span m="1492830">passwords</span> <span m="1493400">per</span> <span m="1493620">second</span> <span m="1494020">to</span> <span m="1494100">guess</span> <span m="1494360">what</span> <span m="1494540">the</span> <span m="1494640">person's</span> <span m="1495040">password</span> <span m="1495390">is.</span> <span m="1496600">And</span> <span m="1496790">you</span> <span m="1496870">could</span> <span m="1496970">do</span> <span m="1497040">this</span> <span m="1497210">for</span> <span m="1497330">any</span> <span m="1497780">person</span> <span m="1498050">at</span> <span m="1498120">all.</span> <span m="1498330">You</span> <span m="1498410">could</span> <span m="1498500">just</span> <span m="1498720">send</span> <span m="1498890">their</span> <span m="1500010">principal</span> <span m="1500530">to</span> <span m="1500630">the</span> <span m="1500730">Kerberos</span> <span m="1501050">server.</span> </p>
<p><span m="1501330">It'll</span> <span m="1502150">very</span> <span m="1502320">happily</span> <span m="1502710">give</span> <span m="1502890">you</span> <span m="1502990">back</span> <span m="1503300">this</span> <span m="1503480">response</span> <span m="1503860">encrypted</span> <span m="1504100">with</span> <span m="1504300">the</span> <span m="1504390">user's</span> <span m="1504710">password.</span> <span m="1505040">Then you</span> <span m="1505190">can just</span> <span m="1505480">try</span> <span m="1505730">different</span> <span m="1506000">passwords</span> <span m="1506820">and just</span> <span m="1507030">see</span> <span m="1507470">what</span> <span m="1507590">works</span> <span m="1507880">or what</span> <span m="1508060">doesn't.</span> <span m="1508740">Yeah.</span> </p>
<p><span m="1509798">STUDENT: But</span> <span m="1510794">won't</span> <span m="1511292">the content</span> <span m="1511790">[INAUDIBLE]</span> <span m="1512786">decrypted</span> <span m="1513284">[INAUDIBLE]</span> <span m="1514280">advantage?</span> <span m="1514778">How can we</span> <span m="1515276">be sure</span> <span m="1515774">that</span> <span m="1516272">you directly--</span> </p>
<p><span m="1516770">PROFESSOR: Yes,</span> <span m="1517280">this is actually</span> <span m="1517580">another</span> <span m="1518040">interesting</span> <span m="1518710">aspect</span> <span m="1519210">where</span> <span m="1519450">the</span> <span m="1519600">Kerberos</span> <span m="1520020">4</span> <span m="1520220">developers</span> <span m="1520820">didn't</span> <span m="1521100">quite</span> <span m="1521360">realize</span> <span m="1521810">that</span> <span m="1521890">the</span> <span m="1521970">time</span> <span m="1522200">they</span> <span m="1522280">were</span> <span m="1522400">building</span> <span m="1522700">this</span> <span m="1522930">that</span> <span m="1523900">they</span> <span m="1524080">really</span> <span m="1524300">should</span> <span m="1524460">have</span> <span m="1524680">been</span> <span m="1525080">very</span> <span m="1525370">careful</span> <span m="1525790">about</span> <span m="1526090">separating</span> <span m="1526620">encryption</span> <span m="1527270">from</span> <span m="1527530">authentication.</span> <span m="1529110">So</span> <span m="1529240">in</span> <span m="1529320">the</span> <span m="1529420">paper,</span> <span m="1530290">there's</span> <span m="1530880">this</span> <span m="1531730">implicit</span> <span m="1532210">assumption</span> <span m="1533150">that--</span> <span m="1536570">hopefully,</span> <span m="1536740">that's not</span> <span m="1537030">us.</span> <span m="1537790">All right,</span> <span m="1537960">sorry.</span> </p>
<p><span m="1538150">So</span> <span m="1538290">in</span> <span m="1538440">the</span> <span m="1538510">paper,</span> <span m="1538740">there's</span> <span m="1538950">this</span> <span m="1539070">implicit</span> <span m="1539430">assumption</span> <span m="1540150">that</span> <span m="1540800">whenever</span> <span m="1541140">you</span> <span m="1541300">encrypt</span> <span m="1541790">a</span> <span m="1541860">piece</span> <span m="1542070">of</span> <span m="1542260">data</span> <span m="1543220">and</span> <span m="1543420">you</span> <span m="1543530">send</span> <span m="1543770">it</span> <span m="1543850">to</span> <span m="1543920">someone</span> <span m="1544220">else,</span> <span m="1544950">if</span> <span m="1545150">that</span> <span m="1545260">person</span> <span m="1545600">can</span> <span m="1545770">decrypt</span> <span m="1546210">the</span> <span m="1546320">data</span> <span m="1546580">and</span> <span m="1546790">it</span> <span m="1547080">sort</span> <span m="1547210">of</span> <span m="1547420">looks</span> <span m="1547840">OK,</span> <span m="1548350">then</span> <span m="1548830">no,</span> <span m="1549060">they</span> <span m="1549150">must</span> <span m="1549340">have</span> <span m="1549430">gotten</span> <span m="1549650">the</span> <span m="1549730">right</span> <span m="1549990">key</span> <span m="1550210">and</span> <span m="1550300">the</span> <span m="1550380">data</span> <span m="1550620">wasn't</span> <span m="1550890">tampered</span> <span m="1551220">with</span> <span m="1551450">in</span> <span m="1551630">flight.</span> <span m="1552520">But</span> <span m="1552830">it</span> <span m="1552860">seems</span> <span m="1553020">like</span> <span m="1553240">a</span> <span m="1553530">totally</span> <span m="1553770">bad</span> <span m="1554090">plan</span> <span m="1554350">now</span> <span m="1554430">that</span> <span m="1554560">we</span> <span m="1554680">think</span> <span m="1554880">of</span> <span m="1554970">it</span> <span m="1555440">30</span> <span m="1555630">years</span> <span m="1555860">later.</span> <span m="1556590">But</span> <span m="1556730">at</span> <span m="1556780">the</span> <span m="1556850">time,</span> <span m="1557040">it</span> <span m="1557110">wasn't</span> <span m="1557340">so</span> <span m="1557530">clear.</span> </p>
<p><span m="1558230">So</span> <span m="1558340">in</span> <span m="1558430">order</span> <span m="1558580">to</span> <span m="1558690">do</span> <span m="1558900">Kerberos</span> <span m="1559350">right,</span> <span m="1559610">and in</span> <span m="1559760">fact,</span> <span m="1560070">what Kerberos</span> <span m="1560460">5</span> <span m="1560850">does</span> <span m="1561080">now,</span> <span m="1561730">is</span> <span m="1561920">they</span> <span m="1562320">both</span> <span m="1562830">encrypt</span> <span m="1563290">all</span> <span m="1563430">the</span> <span m="1563520">pieces</span> <span m="1563760">of</span> <span m="1563880">data</span> <span m="1564470">and</span> <span m="1564700">they</span> <span m="1564830">also</span> <span m="1565100">authenticate</span> <span m="1565450">the</span> <span m="1565530">message</span> <span m="1565860">by</span> <span m="1566080">basically</span> <span m="1566510">computing</span> <span m="1567160">a</span> <span m="1567260">hash</span> <span m="1567980">with</span> <span m="1568190">a</span> <span m="1568260">key.</span> <span m="1569350">And</span> <span m="1569510">then</span> <span m="1569710">the</span> <span m="1569850">result</span> <span m="1570660">actually</span> <span m="1570940">tells</span> <span m="1571200">you</span> <span m="1571320">that,</span> <span m="1571540">oh,</span> <span m="1571990">that</span> <span m="1572590">piece</span> <span m="1572740">of</span> <span m="1572780">data</span> <span m="1572950">just</span> <span m="1573190">wasn't</span> <span m="1573530">tampered</span> <span m="1573840">with.</span> <span m="1573960">It was</span> <span m="1574300">correctly</span> <span m="1574640">signed</span> <span m="1574960">with</span> <span m="1575060">this</span> <span m="1575220">key,</span> <span m="1575400">et</span> <span m="1575490">cetera.</span> <span m="1576560">And</span> <span m="1576870">what</span> <span m="1577020">actually</span> <span m="1577210">happens</span> <span m="1577470">in</span> <span m="1577600">Kerberos</span> <span m="1577930">version</span> <span m="1578200">4</span> <span m="1578710">is</span> <span m="1578850">there</span> <span m="1578990">are some</span> <span m="1579160">extra</span> <span m="1579500">bits</span> <span m="1580030">in</span> <span m="1580260">this</span> <span m="1580610">thing</span> <span m="1580810">that</span> <span m="1580920">was</span> <span m="1581050">encrypted</span> <span m="1582180">that</span> <span m="1582790">should</span> <span m="1582970">all</span> <span m="1583110">be</span> <span m="1583350">some</span> <span m="1583570">pattern</span> <span m="1583980">like</span> <span m="1584180">zeros.</span> </p>
<p><span m="1585350">And</span> <span m="1586170">typically,</span> <span m="1586700">if</span> <span m="1586810">you</span> <span m="1586890">get</span> <span m="1587090">the</span> <span m="1587200">key</span> <span m="1587470">wrong,</span> <span m="1588150">that</span> <span m="1588380">pattern</span> <span m="1588710">will</span> <span m="1589230">not</span> <span m="1589460">look</span> <span m="1589660">like</span> <span m="1589910">all</span> <span m="1590100">zeros</span> <span m="1590780">just</span> <span m="1590990">by</span> <span m="1591100">chance.</span> <span m="1591510">It's</span> <span m="1591650">not</span> <span m="1591880">cryptographically</span> <span m="1592630">guaranteed</span> <span m="1593180">to</span> <span m="1593260">be</span> <span m="1593360">that.</span> <span m="1594210">But</span> <span m="1594920">most</span> <span m="1595160">times,</span> <span m="1595480">it</span> <span m="1595550">will</span> <span m="1595690">not</span> <span m="1595880">look</span> <span m="1596090">like</span> <span m="1596240">zeros</span> <span m="1596690">and</span> <span m="1597070">you</span> <span m="1597190">will</span> <span m="1597310">be</span> <span m="1597470">able</span> <span m="1597760">to</span> <span m="1598330">decide</span> <span m="1598740">whether</span> <span m="1599050">you</span> <span m="1599210">got</span> <span m="1599410">the</span> <span m="1599520">correct</span> <span m="1599880">key</span> <span m="1600030">or</span> <span m="1600100">not.</span> </p>
<p><span m="1602490">All</span> <span m="1602570">right,</span> <span m="1603840">so</span> <span m="1604480">that's</span> <span m="1604770">sort</span> <span m="1604940">of</span> <span m="1605030">the</span> <span m="1605130">plan</span> <span m="1605400">for</span> <span m="1605520">how the</span> <span m="1605810">clients</span> <span m="1606760">tells,</span> <span m="1607680">I</span> <span m="1607740">guess,</span> <span m="1607920">whether</span> <span m="1608190">the</span> <span m="1608370">ticket</span> <span m="1608580">is</span> <span m="1608680">valid.</span> <span m="1608910">They</span> <span m="1609080">just</span> <span m="1609350">try</span> <span m="1609530">to</span> <span m="1609620">decrypt</span> <span m="1609970">it</span> <span m="1610120">and</span> <span m="1610250">see</span> <span m="1610940">how</span> <span m="1611090">it</span> <span m="1611200">works.</span> <span m="1612580">So</span> <span m="1612680">another</span> <span m="1613000">interesting</span> <span m="1613300">question is</span> <span m="1613800">why</span> <span m="1614890">is</span> <span m="1615080">this</span> <span m="1615300">key</span> <span m="1616260">KCS</span> <span m="1616610">included</span> <span m="1617080">twice</span> <span m="1617460">in</span> <span m="1617540">the</span> <span m="1617640">ticket</span> <span m="1617860">in</span> <span m="1617970">some</span> <span m="1618160">form,</span> <span m="1618450">right?</span> <span m="1618630">So</span> <span m="1619250">it's</span> <span m="1619380">included</span> <span m="1619780">once</span> <span m="1620250">here</span> <span m="1621320">and</span> <span m="1621750">another</span> <span m="1622090">time</span> <span m="1622350">actually</span> <span m="1622400">sort of</span> <span m="1622770">implicitly</span> <span m="1623070">in</span> <span m="1623370">this</span> <span m="1623550">ticket</span> <span m="1623920">T.</span> <span m="1625890">Why</span> <span m="1626060">do</span> <span m="1626140">we</span> <span m="1626200">have</span> <span m="1626350">two</span> <span m="1626480">copies</span> <span m="1626800">of</span> <span m="1626860">the</span> <span m="1626950">same</span> <span m="1627300">key</span> <span m="1627900">KCS?</span> <span m="1630303">Yeah.</span> </p>
<p><span m="1630774">STUDENT: The client</span> <span m="1631245">can't decrypt</span> <span m="1631716">that</span> <span m="1632187">ticket</span> <span m="1632658">because</span> <span m="1633129">it's encrypted</span> <span m="1633600">with a</span> <span m="1634071">service</span> <span m="1634542">key.</span> </p>
<p><span m="1635013">PROFESSOR: Yeah,</span> <span m="1635484">so it's</span> <span m="1635955">actually kind of</span> <span m="1636440">cute,</span> <span m="1636780">right?</span> <span m="1636930">Like,</span> <span m="1637090">there's</span> <span m="1637480">this</span> <span m="1637700">key</span> <span m="1637900">that</span> <span m="1637980">the</span> <span m="1638070">client</span> <span m="1638400">can</span> <span m="1638690">get</span> <span m="1638940">to.</span> <span m="1639390">But then</span> <span m="1639480">there's</span> <span m="1639630">another</span> <span m="1639980">copy</span> <span m="1640240">of</span> <span m="1640320">it</span> <span m="1640400">in</span> <span m="1640530">here.</span> <span m="1640900">It's</span> <span m="1640980">encrypted</span> <span m="1641480">with</span> <span m="1642110">KS.</span> </p>
<p><span m="1643300">And</span> <span m="1643530">the</span> <span m="1643620">reason</span> <span m="1643910">for</span> <span m="1644130">this</span> <span m="1644330">is</span> <span m="1644500">that</span> <span m="1645590">the</span> <span m="1646340">Kerberos</span> <span m="1646710">server</span> <span m="1647040">is</span> <span m="1647120">actually</span> <span m="1647400">trying</span> <span m="1647740">to</span> <span m="1648020">set</span> <span m="1648350">up</span> <span m="1648560">the</span> <span m="1648700">client</span> <span m="1649060">and</span> <span m="1649160">this</span> <span m="1649290">other</span> <span m="1649520">guy</span> <span m="1649670">to</span> <span m="1649770">talk</span> <span m="1649940">to</span> <span m="1650020">each</span> <span m="1650170">other</span> <span m="1650430">securely.</span> <span m="1651350">So</span> <span m="1651490">the</span> <span m="1651600">Kerberos</span> <span m="1652160">generates</span> <span m="1652770">this</span> <span m="1653370">hopefully</span> <span m="1653830">random</span> <span m="1654290">key</span> <span m="1654630">KCS</span> <span m="1655650">and</span> <span m="1655860">wants</span> <span m="1656060">to</span> <span m="1656160">give</span> <span m="1656450">one</span> <span m="1656690">copy</span> <span m="1657080">to</span> <span m="1657180">the</span> <span m="1657290">client and</span> <span m="1657750">one</span> <span m="1657900">copy</span> <span m="1658180">to</span> <span m="1658260">the</span> <span m="1658510">write</span> <span m="1658760">other</span> <span m="1659060">server</span> <span m="1659350">that</span> <span m="1659490">you</span> <span m="1659580">want</span> <span m="1659690">to</span> <span m="1659750">talk</span> <span m="1660030">to.</span> <span m="1660640">And</span> <span m="1661470">one</span> <span m="1661700">thing</span> <span m="1661820">you</span> <span m="1661910">could</span> <span m="1662020">imagine</span> <span m="1662340">doing</span> <span m="1662580">naively</span> <span m="1662840">is</span> <span m="1663100">maybe</span> <span m="1663290">the</span> <span m="1663390">Kerberos</span> <span m="1663750">will</span> <span m="1664180">just</span> <span m="1664330">go</span> <span m="1664500">and</span> <span m="1664650">say,</span> <span m="1665170">hey</span> <span m="1665340">service,</span> <span m="1665980">this guy</span> <span m="1666310">wants</span> <span m="1666450">to</span> <span m="1666530">talk</span> <span m="1666730">to you.</span> <span m="1666850">Here's</span> <span m="1667130">the</span> <span m="1667210">key</span> <span m="1667420">for</span> <span m="1667690">it.</span> </p>
<p><span m="1668300">But</span> <span m="1668540">that would be</span> <span m="1668630">kind</span> <span m="1668790">of</span> <span m="1668850">unfortunate.</span> <span m="1669320">You'd</span> <span m="1669490">have</span> <span m="1669650">to</span> <span m="1670140">have</span> <span m="1670330">the</span> <span m="1670420">Kerberos</span> <span m="1670750">server</span> <span m="1670870">call</span> <span m="1671230">back</span> <span m="1671540">to</span> <span m="1671630">the</span> <span m="1671740">service</span> <span m="1672380">and</span> <span m="1672610">so</span> <span m="1672780">on.</span> <span m="1673380">So</span> <span m="1673390">instead,</span> <span m="1673700">these</span> <span m="1673880">guys</span> <span m="1674130">have</span> <span m="1674290">this</span> <span m="1674920">nice</span> <span m="1675170">trick</span> <span m="1675460">where</span> <span m="1675660">they</span> <span m="1675820">just</span> <span m="1676610">to</span> <span m="1677120">give</span> <span m="1677410">the</span> <span m="1677520">client</span> <span m="1677840">does</span> <span m="1678010">blob</span> <span m="1678460">that</span> <span m="1678530">the</span> <span m="1678610">client</span> <span m="1678990">can't</span> <span m="1679180">actually</span> <span m="1679390">do</span> <span m="1679520">anything</span> <span m="1679930">with</span> <span m="1680150">other</span> <span m="1680440">than</span> <span m="1680630">give</span> <span m="1680880">to</span> <span m="1680990">the</span> <span m="1681130">right</span> <span m="1681370">service.</span> <span m="1682290">And</span> <span m="1682450">if</span> <span m="1682550">the</span> <span m="1682640">service</span> <span m="1682950">has</span> <span m="1683200">the</span> <span m="1683280">right</span> <span m="1683540">key</span> <span m="1683700">KS,</span> <span m="1684470">they'll</span> <span m="1684660">decrypt</span> <span m="1685100">it</span> <span m="1685550">and</span> <span m="1685740">say,</span> <span m="1685900">aha.</span> <span m="1686260">Well,</span> <span m="1686500">here's</span> <span m="1686790">the</span> <span m="1686870">key</span> <span m="1687040">I</span> <span m="1687100">should</span> <span m="1687260">be</span> <span m="1687360">using</span> <span m="1687980">to</span> <span m="1688310">speak</span> <span m="1688580">to</span> <span m="1688660">this</span> <span m="1688820">client.</span> <span m="1690420">And</span> <span m="1691150">that's</span> <span m="1691350">how</span> <span m="1691520">these</span> <span m="1691740">two</span> <span m="1691890">guys,</span> <span m="1692250">the</span> <span m="1692350">client</span> <span m="1692660">and</span> <span m="1692730">the</span> <span m="1692820">service,</span> <span m="1693970">are</span> <span m="1694110">going</span> <span m="1694230">to</span> <span m="1694270">establish</span> <span m="1694770">a</span> <span m="1694810">shared</span> <span m="1695180">key</span> <span m="1695430">for</span> <span m="1695930">protecting</span> <span m="1696320">their</span> <span m="1696580">communication.</span> <span m="1697200">Yeah.</span> </p>
<p><span m="1697490">STUDENT: So what exactly</span> <span m="1697930">is</span> <span m="1698370">TGS?</span> </p>
<p><span m="1699670">PROFESSOR: So</span> <span m="1699830">TGS</span> <span m="1700670">is--</span> <span m="1703330">OK,</span> <span m="1703540">so</span> <span m="1703960">there's</span> <span m="1704160">sort</span> <span m="1704290">of</span> <span m="1704390">two</span> <span m="1704540">sides</span> <span m="1704880">to</span> <span m="1704970">it.</span> <span m="1705820">From</span> <span m="1706030">the</span> <span m="1706230">client's</span> <span m="1706620">point</span> <span m="1706840">of</span> <span m="1706900">view,</span> <span m="1707380">it's</span> <span m="1707680">just</span> <span m="1707910">another</span> <span m="1708190">service</span> <span m="1708620">that</span> <span m="1708720">you</span> <span m="1708810">can</span> <span m="1708970">get</span> <span m="1709100">a</span> <span m="1709210">ticket</span> <span m="1709500">for.</span> <span m="1710290">And</span> <span m="1710910">the</span> <span m="1711060">kinds of</span> <span m="1711300">operations</span> <span m="1711830">it</span> <span m="1711920">supports</span> <span m="1712540">is</span> <span m="1712790">getting</span> <span m="1713040">more</span> <span m="1713220">tickets.</span> <span m="1713690">It's a</span> <span m="1713840">Ticket</span> <span m="1714090">Granting</span> <span m="1714380">Service.</span> </p>
<p><span m="1715010">STUDENT: Sorry,</span> <span m="1715470">I meant what is the ticket</span> <span m="1715930">called</span> <span m="1716390">TGS.</span> </p>
<p><span m="1717310">PROFESSOR: Oh,</span> <span m="1717470">yeah,</span> <span m="1717830">sorry.</span> <span m="1718520">This</span> <span m="1719030">TGS</span> <span m="1719480">is</span> <span m="1719610">just</span> <span m="1719750">shorthand</span> <span m="1720270">for</span> <span m="1720710">this</span> <span m="1720880">whole</span> <span m="1721050">blob</span> <span m="1721760">except</span> <span m="1722120">where</span> <span m="1722350">S</span> <span m="1722700">is</span> <span m="1722870">actually</span> <span m="1723530">the</span> <span m="1723730">principal</span> <span m="1724240">name</span> <span m="1724800">of</span> <span m="1725070">this</span> <span m="1725280">TGS</span> <span m="1725700">service.</span> <span m="1728650">So</span> <span m="1729250">you</span> <span m="1729370">can</span> <span m="1729490">think</span> <span m="1729640">of</span> <span m="1729740">it as</span> <span m="1729950">like,</span> <span m="1730090">well,</span> <span m="1730270">there's</span> <span m="1730430">a</span> <span m="1730490">Kerberos</span> <span m="1730860">server,</span> <span m="1731150">there's</span> <span m="1731360">this</span> <span m="1731490">TGS</span> <span m="1731970">service</span> <span m="1732330">out</span> <span m="1732520">there,</span> <span m="1732770">and</span> <span m="1732870">then</span> <span m="1732970">there's</span> <span m="1733070">the</span> <span m="1733170">real</span> <span m="1733390">thing</span> <span m="1733560">I</span> <span m="1733590">want</span> <span m="1733720">to</span> <span m="1733770">get</span> <span m="1734010">to.</span> <span m="1734230">So</span> <span m="1734450">you</span> <span m="1734600">first</span> <span m="1735180">ask</span> <span m="1735440">this</span> <span m="1735630">guy</span> <span m="1735810">to</span> <span m="1735880">give</span> <span m="1736040">me</span> <span m="1736170">a</span> <span m="1736260">ticket</span> <span m="1736580">for</span> <span m="1736790">some</span> <span m="1736990">service.</span> </p>
<p><span m="1737950">You</span> <span m="1738070">could</span> <span m="1738230">ask</span> <span m="1738430">it</span> <span m="1738790">to give</span> <span m="1739050">you</span> <span m="1739365">directly</span> <span m="1739680">a</span> <span m="1739770">ticket</span> <span m="1740030">for</span> <span m="1740170">the</span> <span m="1740260">file</span> <span m="1740530">server.</span> <span m="1741550">And</span> <span m="1741650">this</span> <span m="1741760">would</span> <span m="1741810">work.</span> <span m="1742400">But</span> <span m="1742580">you'd</span> <span m="1742650">need</span> <span m="1742870">your</span> <span m="1743050">KC</span> <span m="1743490">to</span> <span m="1743590">decrypt</span> <span m="1743930">it</span> <span m="1744040">and</span> <span m="1744130">then</span> <span m="1744230">you'd</span> <span m="1744360">need</span> <span m="1744640">your</span> <span m="1744750">KC</span> <span m="1745060">around</span> <span m="1745370">all</span> <span m="1745500">the</span> <span m="1745580">time.</span> </p>
<p><span m="1746270">So</span> <span m="1746380">instead,</span> <span m="1746680">what</span> <span m="1746780">you</span> <span m="1746860">do</span> <span m="1747040">is you</span> <span m="1747230">get</span> <span m="1747460">a</span> <span m="1747720">ticket</span> <span m="1748090">for</span> <span m="1748380">this</span> <span m="1748880">special</span> <span m="1749320">service</span> <span m="1749630">over</span> <span m="1749810">here.</span> <span m="1750950">It</span> <span m="1751080">looks</span> <span m="1751290">just</span> <span m="1751490">like</span> <span m="1751640">a</span> <span m="1751690">service</span> <span m="1752010">except</span> <span m="1752110">that</span> <span m="1752220">it</span> <span m="1752430">happens</span> <span m="1752720">to</span> <span m="1752780">be</span> <span m="1752890">provided</span> <span m="1753380">by</span> <span m="1753480">the</span> <span m="1753610">same</span> <span m="1753850">box.</span> <span m="1755630">And</span> <span m="1756180">then</span> <span m="1756350">this</span> <span m="1756530">guy</span> <span m="1756770">will</span> <span m="1757130">happily</span> <span m="1757520">give</span> <span m="1757670">you</span> <span m="1757780">more</span> <span m="1758000">tickets</span> <span m="1758310">later</span> <span m="1759570">without</span> <span m="1760030">having</span> <span m="1760290">to</span> <span m="1760520">present</span> <span m="1760910">your</span> <span m="1761240">initial</span> <span m="1761630">KC</span> <span m="1762210">again.</span> </p>
<p><span m="1763210">Makes</span> <span m="1763340">sense?</span> <span m="1764143">All right,</span> <span m="1765110">other</span> <span m="1765260">questions?</span> <span m="1766830">Yeah.</span> </p>
<p><span m="1767662">STUDENT: So</span> <span m="1768144">[INAUDIBLE]</span> <span m="1769108">the</span> <span m="1769590">idea is</span> <span m="1770072">once you</span> <span m="1770554">get the</span> <span m="1771036">TGS</span> <span m="1771518">ticket,</span> <span m="1772482">you can just</span> <span m="1772964">get rid of</span> <span m="1773446">your KC?</span> </p>
<p><span m="1773940">PROFESSOR: Yes,</span> <span m="1774150">so that's</span> <span m="1774590">actually</span> <span m="1774840">the</span> <span m="1774940">cool</span> <span m="1775160">thing</span> <span m="1775330">about</span> <span m="1775600">it</span> <span m="1775710">is</span> <span m="1775920">that</span> <span m="1776350">once</span> <span m="1776660">you</span> <span m="1776750">get</span> <span m="1777070">this</span> <span m="1777250">ticket--</span> <span m="1777720">well,</span> <span m="1778300">this</span> <span m="1778470">ticket</span> <span m="1778790">with the S</span> <span m="1779200">being</span> <span m="1779410">TGS,</span> <span m="1780250">then</span> <span m="1780870">you're</span> <span m="1781000">going to</span> <span m="1781070">get rid</span> <span m="1781190">of</span> <span m="1781575">the</span> <span m="1781960">password</span> <span m="1782390">and</span> <span m="1782680">KC.</span> <span m="1783450">So</span> <span m="1784560">you</span> <span m="1784750">log</span> <span m="1784960">into</span> <span m="1785190">Athena</span> <span m="1785460">workstation</span> <span m="1786290">and</span> <span m="1786770">a</span> <span m="1786860">couple of</span> <span m="1787130">seconds</span> <span m="1787440">into</span> <span m="1787580">the</span> <span m="1787680">boot</span> <span m="1787880">process,</span> <span m="1788210">you</span> <span m="1788320">already</span> <span m="1788530">get</span> <span m="1788700">your</span> <span m="1788820">ticket</span> <span m="1789020">here.</span> <span m="1789550">It</span> <span m="1789870">scrubs</span> <span m="1790370">the</span> <span m="1790460">password</span> <span m="1790810">from</span> <span m="1790970">memory.</span> </p>
<p><span m="1791280">So even</span> <span m="1791550">if</span> <span m="1791610">someone,</span> <span m="1792180">like,</span> <span m="1793280">grabs</span> <span m="1793610">you and</span> <span m="1793800">grab</span> <span m="1794020">the</span> <span m="1794090">machine and</span> <span m="1794390">runs</span> <span m="1794670">off,</span> <span m="1795500">all</span> <span m="1795690">they</span> <span m="1795780">got</span> <span m="1796090">was</span> <span m="1796250">your</span> <span m="1796370">ticket.</span> <span m="1796870">And</span> <span m="1797300">OK,</span> <span m="1797490">well,</span> <span m="1797670">maybe</span> <span m="1798050">they</span> <span m="1798190">can</span> <span m="1798360">access</span> <span m="1798630">your</span> <span m="1798810">stuff</span> <span m="1799040">for</span> <span m="1799160">10</span> <span m="1799370">hours</span> <span m="1799830">or</span> <span m="1799950">whatever</span> <span m="1800210">the</span> <span m="1800320">ticket</span> <span m="1800540">lifetime</span> <span m="1800930">was,</span> <span m="1801410">but</span> <span m="1801620">not</span> <span m="1801790">for</span> <span m="1801900">longer</span> <span m="1802190">than</span> <span m="1802360">that.</span> <span m="1802760">The</span> <span m="1802870">password</span> <span m="1803190">is</span> <span m="1803310">gone.</span> <span m="1805608">Yeah.</span> </p>
<p><span m="1806080">So if the</span> <span m="1806552">password's gone,</span> <span m="1807024">then</span> <span m="1807968">on that</span> <span m="1808440">picture</span> <span m="1808912">there when</span> <span m="1809384">Kerberos</span> <span m="1809860">sends</span> <span m="1810200">a</span> <span m="1810540">reply</span> <span m="1811000">encrypted</span> <span m="1811460">with KC,</span> <span m="1812380">how does</span> <span m="1812840">the client--</span> </p>
<p><span m="1814220">Oh yeah,</span> <span m="1814590">so this is</span> <span m="1814810">the</span> <span m="1814900">one</span> <span m="1815380">place</span> <span m="1815720">you need</span> <span m="1815900">your</span> <span m="1816040">password.</span> <span m="1816680">So</span> <span m="1816970">you</span> <span m="1817100">send</span> <span m="1817280">this</span> <span m="1817430">message,</span> <span m="1818250">you</span> <span m="1818410">get</span> <span m="1818600">this</span> <span m="1818770">reply,</span> <span m="1819650">you</span> <span m="1819800">decrypt</span> <span m="1820310">this,</span> <span m="1821110">and</span> <span m="1821270">then</span> <span m="1821390">you</span> <span m="1821470">forget</span> <span m="1821720">the</span> <span m="1821810">password.</span> <span m="1823290">So you</span> <span m="1823420">can't</span> <span m="1823590">forget</span> <span m="1823820">about</span> <span m="1823990">the</span> <span m="1824090">password before you</span> <span m="1824380">use</span> <span m="1824610">it</span> <span m="1824770">for</span> <span m="1824950">decryption</span> <span m="1825620">of</span> <span m="1825710">course.</span> </p>
<p><span m="1826220">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="1828150">PROFESSOR: Ah,</span> <span m="1828450">no,</span> <span m="1828780">so</span> <span m="1828970">this</span> <span m="1829150">is</span> <span m="1829330">just</span> <span m="1829600">this</span> <span m="1829880">interface,</span> <span m="1830400">right?</span> <span m="1830590">So</span> <span m="1831010">this</span> <span m="1831190">is</span> <span m="1831400">the</span> <span m="1831820">thing</span> <span m="1831980">you</span> <span m="1832090">do</span> <span m="1832230">initially.</span> <span m="1833470">And</span> <span m="1833680">we'll</span> <span m="1833860">talk</span> <span m="1834050">in</span> <span m="1834130">a</span> <span m="1834190">second</span> <span m="1834470">about</span> <span m="1834700">how</span> <span m="1834870">you</span> <span m="1835070">basically</span> <span m="1835700">also</span> <span m="1836220">can</span> <span m="1836430">get</span> <span m="1836660">any</span> <span m="1836970">ticket</span> <span m="1837110">you</span> <span m="1837220">want</span> <span m="1837700">from</span> <span m="1837890">the</span> <span m="1838010">second</span> <span m="1838400">interface</span> <span m="1838840">without</span> <span m="1839450">needing</span> <span m="1839890">the</span> <span m="1841470">initial</span> <span m="1841910">key</span> <span m="1842400">KC.</span> </p>
<p><span m="1843924">Right,</span> <span m="1844740">make</span> <span m="1845230">sense?</span> <span m="1846760">All</span> <span m="1846830">right,</span> <span m="1847420">so</span> <span m="1848500">I</span> <span m="1848570">guess</span> <span m="1848740">we</span> <span m="1848990">already</span> <span m="1849310">talked</span> <span m="1849530">about</span> <span m="1849830">two</span> <span m="1850120">particular</span> <span m="1851320">problems</span> <span m="1851850">that</span> <span m="1852010">the</span> <span m="1852100">Kerberos</span> <span m="1852470">protocol</span> <span m="1852990">had</span> <span m="1853920">sort</span> <span m="1854060">of</span> <span m="1854160">baked</span> <span m="1854480">into</span> <span m="1854690">it,</span> <span m="1854960">which</span> <span m="1855140">is</span> <span m="1855210">a</span> <span m="1855260">little</span> <span m="1855420">unfortunate.</span> <span m="1856830">One</span> <span m="1857290">is</span> <span m="1857590">that</span> <span m="1857900">they</span> <span m="1858040">assumed</span> <span m="1858470">that</span> <span m="1858640">encryption</span> <span m="1859240">also</span> <span m="1859520">provides</span> <span m="1860010">authentication</span> <span m="1860680">or</span> <span m="1860810">integrity</span> <span m="1861220">of</span> <span m="1861310">messages.</span> <span m="1862440">So</span> <span m="1862590">don't</span> <span m="1862800">do</span> <span m="1862910">that.</span> <span m="1863270">And</span> <span m="1863580">Kerberos</span> <span m="1863930">version</span> <span m="1864200">5</span> <span m="1864500">fixes</span> <span m="1864840">this</span> <span m="1865040">by</span> <span m="1865550">explicitly</span> <span m="1866150">authenticating</span> <span m="1866700">messages.</span> <span m="1867770">Another</span> <span m="1868050">thing</span> <span m="1868310">they</span> <span m="1869010">sort</span> <span m="1869110">of</span> <span m="1870880">had</span> <span m="1871250">a</span> <span m="1871320">problem</span> <span m="1871720">with</span> <span m="1871940">is</span> <span m="1872250">the</span> <span m="1872430">ability</span> <span m="1873340">for</span> <span m="1873920">arbitrary</span> <span m="1874410">clients</span> <span m="1874820">to</span> <span m="1874930">guess</span> <span m="1875330">people's</span> <span m="1875670">passwords.</span> </p>
<p><span m="1877220">So</span> <span m="1877330">any</span> <span m="1877550">suggestions</span> <span m="1877880">of</span> <span m="1877970">how</span> <span m="1878200">we</span> <span m="1878420">could</span> <span m="1878610">fix</span> <span m="1878840">this?</span> <span m="1881450">How</span> <span m="1881580">do you</span> <span m="1881700">prevent</span> <span m="1882270">guessing</span> <span m="1882480">attacks</span> <span m="1882560">in a</span> <span m="1882620">protocol</span> <span m="1883200">like</span> <span m="1883600">this?</span> <span m="1884826">What</span> <span m="1885240">could we</span> <span m="1885430">try?</span> <span m="1886242">Yeah.</span> </p>
<p><span m="1887108">STUDENT: Some sort of</span> <span m="1887566">salting?</span> <span m="1888024">I'm</span> <span m="1888482">not sure.</span> </p>
<p><span m="1889400">PROFESSOR: Well,</span> <span m="1889690">so</span> <span m="1889880">salting</span> <span m="1891150">would</span> <span m="1891320">just</span> <span m="1891540">means</span> <span m="1891820">that</span> <span m="1892120">the</span> <span m="1892380">client</span> <span m="1892730">has to</span> <span m="1893080">hash</span> <span m="1893400">the</span> <span m="1893520">password</span> <span m="1893900">in</span> <span m="1894010">different</span> <span m="1894320">ways,</span> <span m="1894590">maybe.</span> <span m="1895350">But it</span> <span m="1895580">still</span> <span m="1895850">doesn't</span> <span m="1896080">prevent</span> <span m="1896330">them</span> <span m="1896440">from</span> <span m="1896630">trying</span> <span m="1897070">lots</span> <span m="1897280">of</span> <span m="1897390">things.</span> <span m="1898210">So</span> <span m="1898240">maybe</span> <span m="1898470">it'll be</span> <span m="1898600">more</span> <span m="1898830">expensive</span> <span m="1899300">to build</span> <span m="1899400">a</span> <span m="1899500">dictionary.</span> <span m="1899950">Yeah.</span> </p>
<p><span m="1900395">STUDENT: You could</span> <span m="1900840">[INAUDIBLE]</span> <span m="1902175">derivation</span> <span m="1902620">function?</span> </p>
<p><span m="1903510">PROFESSOR: Yeah,</span> <span m="1903890">so another good</span> <span m="1904270">idea</span> <span m="1904650">is</span> <span m="1904960">to</span> <span m="1905550">make</span> <span m="1905840">this</span> <span m="1906090">hashing</span> <span m="1906520">process</span> <span m="1906890">super</span> <span m="1907170">expensive.</span> <span m="1908200">So</span> <span m="1908300">that</span> <span m="1908350">might</span> <span m="1908550">be</span> <span m="1908630">kind</span> <span m="1908810">of</span> <span m="1908890">nice,</span> <span m="1909160">right?</span> <span m="1909490">So if this</span> <span m="1909920">hash</span> <span m="1910180">function</span> <span m="1910630">took</span> <span m="1910860">a</span> <span m="1910930">second</span> <span m="1911380">to</span> <span m="1911490">compute</span> <span m="1912430">like</span> <span m="1912560">you</span> <span m="1912650">guys</span> <span m="1912860">did</span> <span m="1913030">in</span> <span m="1913090">lab</span> <span m="1913380">two,</span> <span m="1913820">then</span> <span m="1914130">OK,</span> <span m="1914300">wow,</span> <span m="1914540">this</span> <span m="1914650">would</span> <span m="1914730">be</span> <span m="1914810">actually</span> <span m="1915180">really</span> <span m="1915420">expensive</span> <span m="1915820">to</span> <span m="1915950">try</span> <span m="1916130">different</span> <span m="1916450">passwords.</span> <span m="1916810">So that</span> <span m="1916970">seems</span> <span m="1917140">like</span> <span m="1917280">a</span> <span m="1917500">reasonable</span> <span m="1917900">plan.</span> <span m="1918160">So</span> <span m="1918820">in</span> <span m="1918940">combination</span> <span m="1919360">with</span> <span m="1919480">salting,</span> <span m="1920330">those</span> <span m="1920500">would</span> <span m="1920620">be</span> <span m="1921380">make</span> <span m="1921680">it</span> <span m="1921830">pretty</span> <span m="1921980">expensive</span> <span m="1922360">to</span> <span m="1922450">do</span> <span m="1922570">password</span> <span m="1922880">guessing</span> <span m="1923110">attacks.</span> <span m="1924010">Anything</span> <span m="1924210">else?</span> </p>
<p><span m="1927420">So</span> <span m="1927550">another</span> <span m="1927800">thing</span> <span m="1927950">is,</span> <span m="1928120">yeah,</span> <span m="1928210">challenge</span> <span m="1928480">respond.</span> <span m="1928910">So</span> <span m="1928970">you</span> <span m="1929150">could</span> <span m="1929330">actually</span> <span m="1930070">hear</span> <span m="1930640">in</span> <span m="1930800">the</span> <span m="1930870">initial</span> <span m="1931200">protocol,</span> <span m="1931620">the Kerberos</span> <span m="1931710">server</span> <span m="1932600">doesn't</span> <span m="1932900">have</span> <span m="1933190">any</span> <span m="1933440">idea</span> <span m="1933790">if</span> <span m="1933950">this</span> <span m="1934100">was</span> <span m="1934220">the</span> <span m="1934320">right</span> <span m="1934540">client</span> <span m="1934830">or</span> <span m="1934910">not.</span> </p>
<p><span m="1935720">But</span> <span m="1935890">in</span> <span m="1935960">fact,</span> <span m="1936130">what</span> <span m="1936270">you</span> <span m="1936410">could</span> <span m="1936680">do</span> <span m="1937170">is</span> <span m="1937670">maybe</span> <span m="1938450">give</span> <span m="1938660">a</span> <span m="1938730">little</span> <span m="1938970">bit</span> <span m="1939090">of</span> <span m="1939180">a</span> <span m="1939270">proof</span> <span m="1939630">that,</span> <span m="1939790">well,</span> <span m="1940010">you're</span> <span m="1940160">probably</span> <span m="1940480">the</span> <span m="1940580">right</span> <span m="1940800">client.</span> <span m="1942010">So</span> <span m="1942160">maybe</span> <span m="1942390">you</span> <span m="1942490">could</span> <span m="1942740">encrypt</span> <span m="1943180">the</span> <span m="1943340">current</span> <span m="1943880">time</span> <span m="1944210">stamp</span> <span m="1944980">with</span> <span m="1945550">your</span> <span m="1946790">hash</span> <span m="1947220">password</span> <span m="1947620">or</span> <span m="1947700">something</span> <span m="1947890">like</span> <span m="1948040">this--</span> <span m="1948370">has them</span> <span m="1948750">together.</span> <span m="1949800">And</span> <span m="1949920">then</span> <span m="1950010">the</span> <span m="1950100">Kerberos</span> <span m="1950440">server</span> <span m="1950720">could</span> <span m="1950830">just</span> <span m="1951080">check</span> <span m="1951330">if</span> <span m="1951460">that's</span> <span m="1951730">the</span> <span m="1951840">right--</span> <span m="1952460">if</span> <span m="1952580">that</span> <span m="1952790">matches,</span> <span m="1953330">and</span> <span m="1953570">if</span> <span m="1953640">so,</span> <span m="1953910">return</span> <span m="1954250">you</span> <span m="1954350">back</span> <span m="1954690">a</span> <span m="1954800">ticket.</span> </p>
<p><span m="1955870">You</span> <span m="1955980">probably</span> <span m="1956200">don't</span> <span m="1956340">want</span> <span m="1956610">to</span> <span m="1956670">necessarily</span> <span m="1956830">add</span> <span m="1957090">more</span> <span m="1957240">rounds</span> <span m="1957580">but</span> <span m="1957750">this</span> <span m="1958080">could</span> <span m="1958230">work.</span> <span m="1958450">So</span> <span m="1958540">just</span> <span m="1958760">to</span> <span m="1959260">precise</span> <span m="1959610">about</span> <span m="1959780">what</span> <span m="1959910">I'm</span> <span m="1960130">sort</span> <span m="1960270">of</span> <span m="1960330">suggesting.</span> <span m="1960760">OK,</span> <span m="1960980">well,</span> <span m="1961130">maybe</span> <span m="1961330">you</span> <span m="1961750">take</span> <span m="1961920">the</span> <span m="1962030">current</span> <span m="1962300">time</span> <span m="1962490">stamp</span> <span m="1964460">and</span> <span m="1965500">maybe</span> <span m="1965640">you</span> <span m="1965840">hash</span> <span m="1966680">the</span> <span m="1966810">current</span> <span m="1967090">time</span> <span m="1967300">stamp</span> <span m="1968000">and</span> <span m="1968570">the</span> <span m="1969390">KC</span> <span m="1970460">together.</span> <span m="1971550">And</span> <span m="1971700">maybe</span> <span m="1971970">you include</span> <span m="1972240">the</span> <span m="1972320">timestamp</span> <span m="1972580">as</span> <span m="1972840">well.</span> </p>
<p><span m="1973570">And then the</span> <span m="1973640">server</span> <span m="1974340">could</span> <span m="1974520">see,</span> <span m="1974860">well,</span> <span m="1975330">it</span> <span m="1975420">has</span> <span m="1975710">your</span> <span m="1975870">KC.</span> <span m="1976090">It</span> <span m="1976355">could</span> <span m="1976620">hash</span> <span m="1976830">the</span> <span m="1976930">current</span> <span m="1977140">timestamp</span> <span m="1977490">as</span> <span m="1977580">well.</span> <span m="1977790">If it</span> <span m="1977950">gets</span> <span m="1978100">the</span> <span m="1978200">same</span> <span m="1978400">value,</span> <span m="1978720">then</span> <span m="1979020">yeah,</span> <span m="1979490">it's</span> <span m="1979590">probably</span> <span m="1979840">the</span> <span m="1979920">right</span> <span m="1980080">user</span> <span m="1980340">requesting</span> <span m="1980730">it.</span> </p>
<p><span m="1980880">And I</span> <span m="1980960">can</span> <span m="1981130">send</span> <span m="1981340">back</span> <span m="1981510">the</span> <span m="1981610">ticket.</span> <span m="1982870">If</span> <span m="1983040">not,</span> <span m="1983420">then</span> <span m="1985010">it</span> <span m="1985090">wasn't the</span> <span m="1985320">right</span> <span m="1985490">password</span> <span m="1985765">at all.</span> <span m="1986420">Question?</span> </p>
<p><span m="1986970">STUDENT: [INAUDIBLE]</span> <span m="1987437">you just</span> <span m="1987904">do</span> <span m="1988371">[INAUDIBLE]</span> <span m="1991640">if</span> <span m="1992107">the</span> <span m="1992574">servers see</span> <span m="1993041">too many</span> <span m="1993508">requests</span> <span m="1993980">[INAUDIBLE]</span> </p>
<p><span m="1995270">PROFESSOR: That's right.</span> <span m="1995545">So</span> <span m="1995820">the problem</span> <span m="1996270">is</span> <span m="1996590">that we</span> <span m="1996720">could</span> <span m="1996920">write</span> <span m="1997150">limit.</span> <span m="1997850">But</span> <span m="1997990">there's</span> <span m="1998180">no</span> <span m="1998350">reason</span> <span m="1998640">for</span> <span m="1998740">the</span> <span m="1998910">hacker</span> <span m="1999070">to</span> <span m="1999180">request</span> <span m="1999550">this</span> <span m="1999630">more</span> <span m="1999800">than</span> <span m="1999950">once.</span> </p>
<p><span m="2001120">That</span> <span m="2001240">hacker</span> <span m="2001510">requests</span> <span m="2002080">a</span> <span m="2002160">particular</span> <span m="2002580">user</span> <span m="2002970">more than</span> <span m="2003305">once</span> <span m="2003980">and</span> <span m="2004100">then</span> <span m="2004200">it</span> <span m="2004330">gets</span> <span m="2004550">this</span> <span m="2004710">encrypted</span> <span m="2005150">blob.</span> <span m="2006240">And</span> <span m="2006370">then</span> <span m="2006460">it</span> <span m="2006510">can</span> <span m="2006720">try</span> <span m="2006960">decrypting</span> <span m="2007520">it</span> <span m="2007630">offline</span> <span m="2008340">as</span> <span m="2008500">many</span> <span m="2008710">times</span> <span m="2008980">as</span> <span m="2009000">it</span> <span m="2009180">wants</span> <span m="2009450">with</span> <span m="2009590">different</span> <span m="2009900">passwords</span> <span m="2011000">without</span> <span m="2011450">having</span> <span m="2011730">to</span> <span m="2011850">re</span> <span m="2012100">request</span> <span m="2012385">it.</span> <span m="2013080">So</span> <span m="2013160">I</span> <span m="2013210">think</span> <span m="2013370">the</span> <span m="2013440">whole</span> <span m="2013670">point</span> <span m="2013880">of</span> <span m="2014290">including</span> <span m="2014950">some</span> <span m="2015430">sort</span> <span m="2015570">of</span> <span m="2015650">a</span> <span m="2015800">challenge</span> <span m="2016310">response</span> <span m="2016680">thing</span> <span m="2016840">like</span> <span m="2017020">this</span> <span m="2017180">in</span> <span m="2017290">the</span> <span m="2017370">particle</span> <span m="2018110">is</span> <span m="2018240">so</span> <span m="2018480">that the</span> <span m="2018960">server</span> <span m="2019990">will--</span> <span m="2021130">you'll</span> <span m="2021240">have</span> <span m="2021410">to</span> <span m="2021490">actually</span> <span m="2021810">ask</span> <span m="2022100">the</span> <span m="2022220">server</span> <span m="2022580">again</span> <span m="2022890">and</span> <span m="2022980">again</span> <span m="2023760">to</span> <span m="2024210">try</span> <span m="2024410">to</span> <span m="2024510">log</span> <span m="2024740">in</span> <span m="2025540">with</span> <span m="2025700">different</span> <span m="2025960">passwords.</span> <span m="2026900">And</span> <span m="2027100">then</span> <span m="2027270">you</span> <span m="2027370">could</span> <span m="2027570">rate</span> <span m="2027810">limit</span> <span m="2028050">of</span> <span m="2028130">the</span> <span m="2028220">server</span> <span m="2028600">and</span> <span m="2028840">get</span> <span m="2028990">a</span> <span m="2029030">much</span> <span m="2029500">better</span> <span m="2029740">defense.</span> <span m="2030700">Yeah.</span> </p>
<p><span m="2031640">STUDENT: [INAUDIBLE]</span> <span m="2033520">Kerberos?</span> </p>
<p><span m="2034930">PROFESSOR: So</span> <span m="2035400">I</span> <span m="2035670">think</span> <span m="2037660">you</span> <span m="2037820">could</span> <span m="2038260">certainly</span> <span m="2038610">replay</span> <span m="2039040">this</span> <span m="2039240">message</span> <span m="2040210">so</span> <span m="2040430">if</span> <span m="2040760">I</span> <span m="2040970">sent</span> <span m="2041220">this</span> <span m="2041360">message</span> <span m="2041680">now,</span> <span m="2042280">you</span> <span m="2042460">could</span> <span m="2042590">probably</span> <span m="2043330">look</span> <span m="2043590">at</span> <span m="2043670">that</span> <span m="2043830">message</span> <span m="2044110">and</span> <span m="2044240">send</span> <span m="2044450">it</span> <span m="2044590">as</span> <span m="2044750">well</span> <span m="2045420">and</span> <span m="2045850">get</span> <span m="2045990">a</span> <span m="2046030">response</span> <span m="2046400">back</span> <span m="2046590">from</span> <span m="2046720">the</span> <span m="2046810">Kerberos</span> <span m="2047180">server.</span> <span m="2047980">I</span> <span m="2048040">guess</span> <span m="2048210">if you're</span> <span m="2048380">watching</span> <span m="2048770">the</span> <span m="2048850">network,</span> <span m="2049159">you</span> <span m="2049260">could</span> <span m="2049460">observe</span> <span m="2049880">this</span> <span m="2050060">thing</span> <span m="2050219">on</span> <span m="2050330">the</span> <span m="2050409">wire</span> <span m="2050750">as</span> <span m="2050840">well.</span> <span m="2052429">So</span> <span m="2052540">I</span> <span m="2052610">think</span> <span m="2052810">this</span> <span m="2052949">is</span> <span m="2053239">sort</span> <span m="2053580">of</span> <span m="2053969">a</span> <span m="2054850">bit</span> <span m="2055050">of</span> <span m="2055120">a</span> <span m="2055179">stopgap</span> <span m="2055670">measure--</span> <span m="2056270">improves</span> <span m="2056780">security</span> <span m="2057139">a bit.</span> </p>
<p><span m="2057420">But</span> <span m="2057989">certainly</span> <span m="2058280">if</span> <span m="2058370">you're</span> <span m="2058560">watching</span> <span m="2059469">someone</span> <span m="2059880">else's</span> <span m="2060810">network,</span> <span m="2061290">then</span> <span m="2061440">you're</span> <span m="2061570">going</span> <span m="2061670">to</span> <span m="2061730">see</span> <span m="2061920">this</span> <span m="2062110">packet</span> <span m="2062449">coming</span> <span m="2062710">back</span> <span m="2062980">regardless</span> <span m="2063460">of</span> <span m="2063560">what</span> <span m="2063690">happened</span> <span m="2063960">in</span> <span m="2064389">this</span> <span m="2064540">step.</span> <span m="2065719">So</span> <span m="2065909">coming</span> <span m="2066159">back,</span> <span m="2066400">you'll</span> <span m="2066530">see</span> <span m="2066670">this</span> <span m="2066850">guy and</span> <span m="2067159">you</span> <span m="2067250">can</span> <span m="2067420">then</span> <span m="2067600">try</span> <span m="2067800">to</span> <span m="2067889">attack</span> <span m="2068219">it.</span> <span m="2069219">There's</span> <span m="2069370">probably</span> <span m="2069610">some</span> <span m="2069790">more</span> <span m="2069969">elaborate</span> <span m="2070389">schemes</span> <span m="2070650">you</span> <span m="2070710">could</span> <span m="2070860">design</span> <span m="2071239">but</span> <span m="2071880">I</span> <span m="2071980">didn't</span> <span m="2072170">think</span> <span m="2072500">Kerberos</span> <span m="2072880">5</span> <span m="2073219">even</span> <span m="2073469">implements</span> <span m="2073880">anything</span> <span m="2074270">more</span> <span m="2074469">elaborate</span> <span m="2074949">than</span> <span m="2075150">roughly</span> <span m="2075500">this</span> <span m="2075710">plan,</span> <span m="2076650">which</span> <span m="2076940">seems</span> <span m="2077179">good</span> <span m="2077330">enough</span> <span m="2077590">to</span> <span m="2077850">prevent</span> <span m="2078219">arbitrary</span> <span m="2078690">people</span> <span m="2079010">from</span> <span m="2079239">trying</span> <span m="2079460">to</span> <span m="2079530">break</span> <span m="2079820">anyone's</span> <span m="2081070">or</span> <span m="2081219">brute</span> <span m="2081449">force</span> <span m="2081650">anyone's</span> <span m="2081940">password.</span> <span m="2083130">Make</span> <span m="2083380">sense?</span> <span m="2084344">Yeah.</span> </p>
<p><span m="2084826">STUDENT: So</span> <span m="2085308">presume</span> <span m="2085790">that you</span> <span m="2086272">could do</span> <span m="2086754">authenticated</span> <span m="2087236">[INAUDIBLE]</span> <span m="2087718">or something</span> <span m="2088200">here</span> <span m="2090610">to</span> <span m="2091092">establish the</span> <span m="2091574">shared key.</span> <span m="2091694">And</span> <span m="2091815">then</span> <span m="2091935">you</span> <span m="2092056">could encrypt</span> <span m="2092538">this thing</span> <span m="2093020">with KC</span> <span m="2093502">and the</span> <span m="2094000">shared key.</span> </p>
<p><span m="2094474">PROFESSOR: That's right,</span> <span m="2094949">yeah.</span> <span m="2095300">So if</span> <span m="2095550">you're</span> <span m="2095739">really</span> <span m="2096000">doing</span> <span m="2096219">this</span> <span m="2096420">right,</span> <span m="2096710">there's</span> <span m="2096870">all</span> <span m="2097000">these</span> <span m="2097220">nice</span> <span m="2097510">particles</span> <span m="2098010">out</span> <span m="2098290">there</span> <span m="2099630">that</span> <span m="2099840">are</span> <span m="2100010">basically</span> <span m="2100410">called</span> <span m="2100960">password</span> <span m="2101350">authenticated</span> <span m="2101880">key</span> <span m="2102080">exchange</span> <span m="2102530">particles,</span> <span m="2102930">which</span> <span m="2103040">is</span> <span m="2103120">exactly</span> <span m="2103390">what's</span> <span m="2103540">going</span> <span m="2103730">on</span> <span m="2103860">here.</span> <span m="2104170">So</span> <span m="2104420">if</span> <span m="2104530">you're</span> <span m="2104620">actually</span> <span m="2104930">building</span> <span m="2105220">a</span> <span m="2105280">system,</span> <span m="2105830">you</span> <span m="2105920">should</span> <span m="2106080">basically</span> <span m="2106370">Google</span> <span m="2106690">for</span> <span m="2106980">SRP</span> <span m="2107880">or</span> <span m="2108030">PAKE.</span> <span m="2108800">And</span> <span m="2109820">these</span> <span m="2110420">protocols</span> <span m="2111050">and</span> <span m="2111280">related</span> <span m="2111750">particles</span> <span m="2112680">will</span> <span m="2112830">actually</span> <span m="2113220">do</span> <span m="2113800">this</span> <span m="2113990">in</span> <span m="2114140">a</span> <span m="2114200">much</span> <span m="2114620">better</span> <span m="2114890">way</span> <span m="2115150">where</span> <span m="2115480">you</span> <span m="2115690">can</span> <span m="2116490">prove</span> <span m="2116940">to</span> <span m="2117160">both</span> <span m="2117470">parties</span> <span m="2117930">that</span> <span m="2118070">you</span> <span m="2118210">established</span> <span m="2118760">a</span> <span m="2118790">new</span> <span m="2119030">key</span> <span m="2119460">and</span> <span m="2119690">both</span> <span m="2119930">parties</span> <span m="2120210">are</span> <span m="2120280">convinced</span> <span m="2120620">that</span> <span m="2120730">it's</span> <span m="2120850">the</span> <span m="2120950">right</span> <span m="2121150">other</span> <span m="2121390">party</span> <span m="2122150">and</span> <span m="2122790">there's</span> <span m="2123090">no</span> <span m="2123360">way</span> <span m="2123610">to</span> <span m="2123900">mount</span> <span m="2124230">these</span> <span m="2124430">offline</span> <span m="2124900">password</span> <span m="2125320">guessing</span> <span m="2125590">attacks</span> <span m="2126240">on</span> <span m="2126460">the</span> <span m="2127010">set</span> <span m="2127260">of</span> <span m="2127350">network</span> <span m="2127620">packets</span> <span m="2127980">that</span> <span m="2128070">you</span> <span m="2128230">observe</span> <span m="2128650">and</span> <span m="2128950">so</span> <span m="2129070">on.</span> </p>
<p><span m="2129870">So</span> <span m="2129900">these</span> <span m="2130130">are</span> <span m="2130260">the</span> <span m="2130550">sort</span> <span m="2130710">of</span> <span m="2130780">protocols.</span> <span m="2131140">And</span> <span m="2131200">they're</span> <span m="2131880">much</span> <span m="2132050">more</span> <span m="2132480">elaborate</span> <span m="2132860">in</span> <span m="2132990">terms</span> <span m="2133220">of</span> <span m="2133350">crypto</span> <span m="2133720">they</span> <span m="2133890">rely</span> <span m="2134200">on.</span> <span m="2134310">So</span> <span m="2134390">it's</span> <span m="2134480">hard</span> <span m="2134670">to</span> <span m="2134720">explain</span> <span m="2135100">on</span> <span m="2135160">a</span> <span m="2135220">board</span> <span m="2135460">exactly</span> <span m="2135770">why</span> <span m="2135920">they</span> <span m="2136010">work.</span> <span m="2136690">Yeah.</span> </p>
<p><span m="2137162">STUDENT: [INAUDIBLE]</span> <span m="2138578">part of the reason</span> <span m="2139050">they did it</span> <span m="2139522">this way</span> <span m="2139994">is because</span> <span m="2140466">they</span> <span m="2140938">wanted to</span> <span m="2141410">maintain</span> <span m="2141882">the</span> <span m="2142354">ability of</span> <span m="2142826">just sending</span> <span m="2143298">the</span> <span m="2143770">password.</span> <span m="2144714">And</span> <span m="2145200">protocols</span> <span m="2145650">just</span> <span m="2145955">allow</span> <span m="2146360">you</span> <span m="2146410">to</span> <span m="2146590">send a</span> <span m="2146830">single</span> <span m="2148140">thing as</span> <span m="2148590">your authentication</span> <span m="2149040">[INAUDIBLE].</span> </p>
<p><span m="2150840">PROFESSOR: Well,</span> <span m="2152120">yeah,</span> <span m="2152310">there's</span> <span m="2152560">lots</span> <span m="2152820">of</span> <span m="2153040">sort</span> <span m="2153230">of</span> <span m="2153640">weird</span> <span m="2154160">requirements</span> <span m="2154730">that</span> <span m="2154800">these</span> <span m="2154990">guys</span> <span m="2155280">had</span> <span m="2155430">in</span> <span m="2155510">mind.</span> <span m="2156950">I</span> <span m="2157090">think</span> <span m="2157740">they--</span> <span m="2159430">well,</span> <span m="2159990">certainly</span> <span m="2160250">in</span> <span m="2160340">practice,</span> <span m="2161540">these</span> <span m="2161870">servers</span> <span m="2163630">could</span> <span m="2163810">accept</span> <span m="2164200">both</span> <span m="2164500">Kerberos</span> <span m="2165140">and</span> <span m="2165540">non</span> <span m="2165780">Kerberos</span> <span m="2166340">connections.</span> <span m="2166950">And</span> <span m="2167200">for</span> <span m="2167300">non</span> <span m="2167500">Kerberos</span> <span m="2167850">connections,</span> <span m="2168240">you</span> <span m="2168330">get--</span> <span m="2168810">like</span> <span m="2168930">someone</span> <span m="2169150">connects</span> <span m="2169410">to</span> <span m="2169490">the</span> <span m="2169570">mail</span> <span m="2169790">server</span> <span m="2170030">but</span> <span m="2170150">they're</span> <span m="2170290">not</span> <span m="2170450">using</span> <span m="2170770">an Athena</span> <span m="2170950">workstation.</span> </p>
<p><span m="2171520">They</span> <span m="2171640">just want</span> <span m="2171950">to send</span> <span m="2172060">their</span> <span m="2172190">password.</span> <span m="2173180">And</span> <span m="2173220">then</span> <span m="2173280">the</span> <span m="2173350">mail</span> <span m="2173650">client</span> <span m="2174120">here,</span> <span m="2174480">let's</span> <span m="2174710">say,</span> <span m="2175190">is</span> <span m="2175320">going</span> <span m="2175420">to</span> <span m="2175480">take</span> <span m="2175680">your</span> <span m="2175820">password</span> <span m="2176190">and is</span> <span m="2176320">going</span> <span m="2176420">to</span> <span m="2176470">get</span> <span m="2176660">a</span> <span m="2176740">ticket</span> <span m="2176970">on</span> <span m="2177060">your</span> <span m="2177190">behalf</span> <span m="2177590">just</span> <span m="2177760">to</span> <span m="2177850">check</span> <span m="2178080">it.</span> <span m="2178770">And</span> <span m="2178910">then</span> <span m="2179090">it's going to</span> <span m="2179200">allow you</span> <span m="2179650">to</span> <span m="2179700">use</span> <span m="2179880">it.</span> <span m="2179990">So</span> <span m="2180090">you</span> <span m="2180190">certainly</span> <span m="2180460">want</span> <span m="2180710">conversion</span> <span m="2181160">from</span> <span m="2181300">Kerberos</span> <span m="2181860">from</span> <span m="2182050">passwords</span> <span m="2182530">into</span> <span m="2183630">checking</span> <span m="2183960">against</span> <span m="2184310">Kerberos.</span> <span m="2185190">I</span> <span m="2185330">don't</span> <span m="2185680">think</span> <span m="2185980">this</span> <span m="2186180">precludes it</span> <span m="2186610">because</span> <span m="2186840">certainly</span> <span m="2187160">Kerberos</span> <span m="2187510">5</span> <span m="2187840">deploys</span> <span m="2188320">although</span> <span m="2188640">this</span> <span m="2189550">hashes</span> <span m="2190270">of</span> <span m="2190390">timestamps,</span> <span m="2190870">et cetera.</span> </p>
<p><span m="2191332">STUDENT: Yeah but it's because</span> <span m="2191794">they wouldn't</span> <span m="2192256">want</span> <span m="2192718">multiple</span> <span m="2193180">[INAUDIBLE].</span> </p>
<p><span m="2195028">PROFESSOR: Yeah,</span> <span m="2195490">well,</span> <span m="2195890">I</span> <span m="2196170">think</span> <span m="2196950">that</span> <span m="2197390">probably</span> <span m="2197620">doesn't</span> <span m="2197970">matter</span> <span m="2198450">quite</span> <span m="2198680">as</span> <span m="2198800">much.</span> <span m="2199200">You</span> <span m="2199340">could</span> <span m="2199500">certainly</span> <span m="2199700">have</span> <span m="2199910">multiple</span> <span m="2200230">rounds</span> <span m="2200520">in</span> <span m="2200580">the</span> <span m="2200660">back</span> <span m="2200920">end</span> <span m="2201300">behind</span> <span m="2201700">your</span> <span m="2201830">library.</span> <span m="2203380">But</span> <span m="2204220">there's</span> <span m="2204980">some</span> <span m="2205390">downsides</span> <span m="2205850">to these</span> <span m="2206010">particles--</span> <span m="2206670">probably</span> <span m="2207190">not</span> <span m="2207360">significant</span> <span m="2207730">enough</span> <span m="2207910">to</span> <span m="2208060">stop</span> <span m="2208310">you</span> <span m="2208400">from</span> <span m="2208530">using</span> <span m="2208870">them.</span> <span m="2210180">Other</span> <span m="2210360">questions?</span> </p>
<p><span m="2213040">All</span> <span m="2213110">right,</span> <span m="2214160">I</span> <span m="2214250">guess</span> <span m="2214390">the</span> <span m="2214450">other</span> <span m="2214660">thing</span> <span m="2214880">I</span> <span m="2214910">want</span> <span m="2215040">to</span> <span m="2215090">mention</span> <span m="2215460">that</span> <span m="2216390">you</span> <span m="2216510">should</span> <span m="2216660">watch</span> <span m="2216880">out</span> <span m="2217040">for</span> <span m="2217200">in</span> <span m="2217250">the</span> <span m="2217340">paper</span> <span m="2218090">is</span> <span m="2218320">that</span> <span m="2219370">these</span> <span m="2219580">guys,</span> <span m="2219790">in</span> <span m="2219910">designing</span> <span m="2220310">Kerberos</span> <span m="2220760">4,</span> <span m="2221080">they</span> <span m="2221340">picked</span> <span m="2221670">a</span> <span m="2221730">single</span> <span m="2222210">encryption</span> <span m="2222690">scheme.</span> <span m="2223550">And</span> <span m="2223880">at</span> <span m="2223960">the</span> <span m="2224040">time,</span> <span m="2224340">they</span> <span m="2224630">basically</span> <span m="2225070">picked</span> <span m="2225740">DES,</span> <span m="2226530">which</span> <span m="2226720">was</span> <span m="2226880">a</span> <span m="2227150">popular</span> <span m="2227610">encryption</span> <span m="2228190">scheme</span> <span m="2228520">of</span> <span m="2228620">the</span> <span m="2228700">time.</span> <span m="2229260">It's</span> <span m="2229400">a</span> <span m="2229460">symmetric</span> <span m="2230380">block</span> <span m="2230750">cypher.</span> </p>
<p><span m="2231590">It</span> <span m="2231840">goes</span> <span m="2232020">pretty</span> <span m="2232340">fast.</span> <span m="2232820">It</span> <span m="2233010">was</span> <span m="2233540">reasonably</span> <span m="2234180">secure,</span> <span m="2235040">not</span> <span m="2235320">necessarily</span> <span m="2235720">the</span> <span m="2235800">best,</span> <span m="2236090">but</span> <span m="2236850">certainly</span> <span m="2237150">good</span> <span m="2237380">enough</span> <span m="2237530">at</span> <span m="2237610">the</span> <span m="2237690">time.</span> <span m="2238700">And</span> <span m="2238890">they</span> <span m="2238980">just</span> <span m="2239130">baked</span> <span m="2239400">it into</span> <span m="2239600">the</span> <span m="2239710">protocol.</span> </p>
<p><span m="2240100">Everything in</span> <span m="2240520">Kerberos</span> <span m="2241030">has</span> <span m="2241270">to</span> <span m="2241360">use</span> <span m="2241990">single</span> <span m="2242400">DES</span> <span m="2242770">or at least</span> <span m="2242880">everything in</span> <span m="2243270">Kerberos</span> <span m="2243620">version</span> <span m="2243910">4.</span> <span m="2244890">And</span> <span m="2245050">this</span> <span m="2245270">was</span> <span m="2245570">a</span> <span m="2245870">bit</span> <span m="2246050">problematic</span> <span m="2246690">because</span> <span m="2247110">25</span> <span m="2247520">years</span> <span m="2247750">later,</span> <span m="2248080">30</span> <span m="2248300">years</span> <span m="2248520">later</span> <span m="2248770">now,</span> <span m="2248940">it's</span> <span m="2249070">actually</span> <span m="2249310">very</span> <span m="2249610">cheap</span> <span m="2250230">to</span> <span m="2250760">brute</span> <span m="2251050">force</span> <span m="2251830">DES</span> <span m="2252370">encryption</span> <span m="2252820">because</span> <span m="2253070">the</span> <span m="2253160">keys</span> <span m="2253430">are</span> <span m="2253560">actually</span> <span m="2253900">very</span> <span m="2254200">small.</span> <span m="2254690">They're</span> <span m="2255110">56</span> <span m="2255530">bits.</span> </p>
<p><span m="2256570">So</span> <span m="2256690">you</span> <span m="2256790">could</span> <span m="2256920">just</span> <span m="2257110">search</span> <span m="2257670">build</span> <span m="2257990">some</span> <span m="2258140">custom</span> <span m="2258430">hardware</span> <span m="2258870">that</span> <span m="2259140">iterates</span> <span m="2259520">over</span> <span m="2259720">all</span> <span m="2259850">the</span> <span m="2259940">possible</span> <span m="2260320">2 to the</span> <span m="2260590">56</span> <span m="2261530">combinations</span> <span m="2262090">and</span> <span m="2262250">tries</span> <span m="2262440">them</span> <span m="2262610">all</span> <span m="2263130">and</span> <span m="2263410">figures</span> <span m="2263750">out</span> <span m="2263910">what</span> <span m="2264070">someone's</span> <span m="2264350">password</span> <span m="2264710">is.</span> <span m="2266680">So this is</span> <span m="2266950">something</span> <span m="2267300">also</span> <span m="2267450">you</span> <span m="2267580">want</span> <span m="2267720">to</span> <span m="2267780">avoid</span> <span m="2268170">in</span> <span m="2268560">any</span> <span m="2268700">protocol</span> <span m="2269090">you</span> <span m="2269170">design</span> <span m="2269490">now.</span> <span m="2269710">Kerberos</span> <span m="2270020">version</span> <span m="2270270">5</span> <span m="2270960">actually</span> <span m="2271200">supports</span> <span m="2271550">multiple</span> <span m="2272170">different</span> <span m="2272620">encryption</span> <span m="2273070">schemes</span> <span m="2274300">including</span> <span m="2274730">AES</span> <span m="2275330">and</span> <span m="2275480">other</span> <span m="2275700">things</span> <span m="2276020">as</span> <span m="2276120">well.</span> <span m="2276885">So</span> <span m="2277250">that</span> <span m="2277350">seems</span> <span m="2277400">like</span> <span m="2277550">a</span> <span m="2277740">much</span> <span m="2277910">better</span> <span m="2278100">way</span> <span m="2278190">to</span> <span m="2278270">do</span> <span m="2278400">it.</span> </p>
<p><span m="2279350">On</span> <span m="2279690">the other</span> <span m="2279910">hand,</span> <span m="2280020">MIT</span> <span m="2280370">actually</span> <span m="2280840">kept</span> <span m="2281100">supporting</span> <span m="2281720">DES</span> <span m="2282230">up</span> <span m="2282320">until</span> <span m="2282700">two</span> <span m="2282820">years</span> <span m="2283070">ago,</span> <span m="2283600">which</span> <span m="2283830">is a little</span> <span m="2284100">unfortunate.</span> <span m="2286540">But</span> <span m="2286980">now</span> <span m="2287170">they</span> <span m="2287270">don't.</span> <span m="2287560">So that's</span> <span m="2287880">good.</span> <span m="2288530">Your</span> <span m="2288770">principal</span> <span m="2289230">is</span> <span m="2289300">secure</span> <span m="2289590">at least</span> <span m="2289880">from</span> <span m="2290020">this</span> <span m="2290160">kind</span> <span m="2290310">of</span> <span m="2290380">attack.</span> </p>
<p><span m="2292860">All</span> <span m="2292920">right,</span> <span m="2293870">so does</span> <span m="2294130">that</span> <span m="2294320">make</span> <span m="2294470">sense?</span> <span m="2294680">This</span> <span m="2295090">is</span> <span m="2295150">the</span> <span m="2295280">initial</span> <span m="2295660">way</span> <span m="2295890">you'd</span> <span m="2296000">get</span> <span m="2296350">any</span> <span m="2296610">ticket</span> <span m="2296760">at</span> <span m="2296920">all</span> <span m="2297250">in</span> <span m="2297490">Kerberos.</span> <span m="2298210">And</span> <span m="2298400">typically,</span> <span m="2298720">you'd</span> <span m="2298800">get</span> <span m="2299000">this</span> <span m="2299130">ticket</span> <span m="2299360">from</span> <span m="2299460">this</span> <span m="2299610">TGS</span> <span m="2300040">service.</span> </p>
<p><span m="2300810">So</span> <span m="2301020">now let's</span> <span m="2301210">look</span> <span m="2301370">at</span> <span m="2301770">what's</span> <span m="2302010">going</span> <span m="2302210">on</span> <span m="2302470">in</span> <span m="2302650">this</span> <span m="2302970">TGS</span> <span m="2303670">service.</span> <span m="2304090">So</span> <span m="2304740">here,</span> <span m="2305190">the</span> <span m="2305510">interaction</span> <span m="2306490">with</span> <span m="2306810">the</span> <span m="2306900">TGS</span> <span m="2307310">service</span> <span m="2307700">is</span> <span m="2307800">going</span> <span m="2307910">to</span> <span m="2307960">be</span> <span m="2308060">a</span> <span m="2308120">little</span> <span m="2308350">different.</span> <span m="2309350">On</span> <span m="2309500">one</span> <span m="2309670">hand,</span> <span m="2310330">you're</span> <span m="2310530">going to--</span> <span m="2311140">as</span> <span m="2311550">a</span> <span m="2311700">client,</span> <span m="2312150">you're</span> <span m="2312240">going</span> <span m="2312340">to</span> <span m="2312380">have</span> <span m="2312540">to</span> <span m="2312650">speak</span> <span m="2313040">to</span> <span m="2313150">it</span> <span m="2313670">as</span> <span m="2313900">if</span> <span m="2314040">you're</span> <span m="2314200">speaking</span> <span m="2314540">to</span> <span m="2314600">any</span> <span m="2314860">other</span> <span m="2315210">Kerberos</span> <span m="2315820">enabled</span> <span m="2316830">service.</span> </p>
<p><span m="2318000">So</span> <span m="2318150">we'll</span> <span m="2318280">see</span> <span m="2318480">how</span> <span m="2318680">you</span> <span m="2318800">authenticate</span> <span m="2319260">yourself</span> <span m="2319660">with</span> <span m="2319870">a</span> <span m="2319950">ticket</span> <span m="2320450">to</span> <span m="2320780">some</span> <span m="2320990">machine.</span> <span m="2322150">But</span> <span m="2322260">then</span> <span m="2322370">the</span> <span m="2322440">response</span> <span m="2322820">you're</span> <span m="2322910">going</span> <span m="2323020">to</span> <span m="2323070">get</span> <span m="2323260">back</span> <span m="2323630">is</span> <span m="2324100">just</span> <span m="2324420">a</span> <span m="2324520">ticket</span> <span m="2324880">for</span> <span m="2325240">some</span> <span m="2325450">other</span> <span m="2325730">principle</span> <span m="2326280">that</span> <span m="2326390">you're</span> <span m="2326530">going</span> <span m="2326650">to</span> <span m="2327070">want</span> <span m="2327220">to</span> <span m="2327260">communicate</span> <span m="2327710">with</span> <span m="2327890">like</span> <span m="2328110">your</span> <span m="2328290">file</span> <span m="2328570">server.</span> <span m="2330230">So</span> <span m="2330390">the</span> <span m="2330930">protocol</span> <span m="2331260">level</span> <span m="2331840">messages</span> <span m="2332300">that</span> <span m="2332610">show</span> <span m="2332800">up</span> <span m="2332950">here</span> <span m="2333970">kind</span> <span m="2334120">of</span> <span m="2334210">look</span> <span m="2334350">like</span> <span m="2334520">this.</span> </p>
<p><span m="2334910">So</span> <span m="2335040">here's</span> <span m="2335360">your</span> <span m="2335660">TGS</span> <span m="2336080">service.</span> <span m="2337050">And</span> <span m="2337800">here's</span> <span m="2338050">a</span> <span m="2338210">client.</span> <span m="2339230">The</span> <span m="2339340">client</span> <span m="2339700">already</span> <span m="2340900">got</span> <span m="2341280">a</span> <span m="2341510">ticket</span> <span m="2341880">for</span> <span m="2342370">TGS</span> <span m="2342750">using</span> <span m="2343030">this</span> <span m="2343190">protocol</span> <span m="2343520">above.</span> <span m="2344090">So what</span> <span m="2344510">the</span> <span m="2344660">client</span> <span m="2345000">is</span> <span m="2345100">actually</span> <span m="2345320">going</span> <span m="2345450">to</span> <span m="2345530">send</span> <span m="2345810">over</span> <span m="2346580">is</span> <span m="2348350">some</span> <span m="2348560">combination</span> <span m="2349000">of</span> <span m="2349050">messages</span> <span m="2349480">that</span> <span m="2350190">prove</span> <span m="2351240">that</span> <span m="2351770">this</span> <span m="2351910">is</span> <span m="2352020">the</span> <span m="2352100">right</span> <span m="2352320">client</span> <span m="2352690">and</span> <span m="2352870">they're</span> <span m="2353160">issuing</span> <span m="2353620">a</span> <span m="2353710">request</span> <span m="2354140">for</span> <span m="2354330">some</span> <span m="2354490">particular</span> <span m="2355840">principle</span> <span m="2356900">through</span> <span m="2357040">TGS.</span> </p>
<p><span m="2357490">So</span> <span m="2357970">what</span> <span m="2358060">the</span> <span m="2358170">client</span> <span m="2358450">is</span> <span m="2358540">going</span> <span m="2358650">to</span> <span m="2358700">send</span> <span m="2358890">to</span> <span m="2358960">TGS</span> <span m="2359820">is</span> <span m="2360020">this</span> <span m="2360250">tuple.</span> <span m="2360760">So</span> <span m="2360950">first,</span> <span m="2361220">it's</span> <span m="2361280">going</span> <span m="2361430">to</span> <span m="2361500">say,</span> <span m="2361680">well,</span> <span m="2361830">here's</span> <span m="2362110">the</span> <span m="2362200">service</span> <span m="2362630">that</span> <span m="2362750">I</span> <span m="2362790">want</span> <span m="2362970">to</span> <span m="2363020">talk</span> <span m="2363260">to</span> <span m="2363350">next.</span> <span m="2364000">So</span> <span m="2364230">this</span> <span m="2364390">might</span> <span m="2364570">be</span> <span m="2364650">your</span> <span m="2364780">mail</span> <span m="2365030">server</span> <span m="2365420">or your</span> <span m="2365520">file</span> <span m="2365840">server.</span> <span m="2367130">Then</span> <span m="2367440">is</span> <span m="2367570">going</span> <span m="2367690">to</span> <span m="2367730">include</span> <span m="2368610">the</span> <span m="2369100">ticket.</span> <span m="2369440">It</span> <span m="2369550">already</span> <span m="2369810">got</span> <span m="2370140">4TGS.</span> </p>
<p><span m="2370970">So</span> <span m="2371080">this</span> <span m="2371260">is</span> <span m="2371330">going</span> <span m="2371470">to</span> <span m="2371550">be</span> <span m="2372360">TC</span> <span m="2372745">of</span> <span m="2373130">TGS</span> <span m="2375660">encrypted</span> <span m="2376230">with</span> <span m="2376570">KTGS.</span> <span m="2378100">So</span> <span m="2378480">this is</span> <span m="2378670">just</span> <span m="2378900">this</span> <span m="2379110">thing</span> <span m="2379420">where</span> <span m="2379610">S</span> <span m="2379780">is</span> <span m="2379910">TGS.</span> <span m="2381430">And</span> <span m="2381570">then</span> <span m="2381840">you're</span> <span m="2382000">going</span> <span m="2382100">to</span> <span m="2382150">have</span> <span m="2382390">to</span> <span m="2382470">include</span> <span m="2382990">this</span> <span m="2383250">authenticator</span> <span m="2383890">blob.</span> <span m="2384890">This</span> <span m="2385000">is</span> <span m="2385180">this</span> <span m="2385450">AC</span> <span m="2386300">thing</span> <span m="2387070">from</span> <span m="2387380">up</span> <span m="2387500">there.</span> </p>
<p><span m="2388330">And</span> <span m="2388730">this</span> <span m="2388860">thing</span> <span m="2389010">is</span> <span m="2389100">going</span> <span m="2389210">to</span> <span m="2389280">be</span> <span m="2389370">encrypted</span> <span m="2389780">with</span> <span m="2390010">a</span> <span m="2390070">shared</span> <span m="2390450">key</span> <span m="2391220">between</span> <span m="2391770">the</span> <span m="2391870">client</span> <span m="2392350">and</span> <span m="2392590">the</span> <span m="2392670">TGS</span> <span m="2393720">service.</span> <span m="2394892">So</span> <span m="2395230">this</span> <span m="2395490">is</span> <span m="2395630">the</span> <span m="2395740">message</span> <span m="2396100">that</span> <span m="2396230">you're</span> <span m="2396340">going</span> <span m="2396430">to</span> <span m="2396490">send</span> <span m="2396800">to</span> <span m="2396940">TGS.</span> <span m="2398360">It's</span> <span m="2398530">going</span> <span m="2398640">to</span> <span m="2399320">look</span> <span m="2399510">at</span> <span m="2399550">this</span> <span m="2399690">message,</span> <span m="2400650">do</span> <span m="2400780">something</span> <span m="2401060">with</span> <span m="2401200">it that</span> <span m="2401370">we'll</span> <span m="2401620">talk</span> <span m="2401780">about</span> <span m="2402020">in a</span> <span m="2402070">second,</span> <span m="2402690">and</span> <span m="2403030">respond</span> <span m="2403500">back</span> <span m="2404200">with</span> <span m="2404690">a</span> <span m="2404870">ticket</span> <span m="2405260">for</span> <span m="2405660">this</span> <span m="2405920">new</span> <span m="2406160">service</span> <span m="2406580">S.</span> <span m="2407770">So</span> <span m="2407890">the</span> <span m="2407980">response</span> <span m="2408350">here</span> <span m="2408570">looks</span> <span m="2409090">almost</span> <span m="2409360">exactly</span> <span m="2409720">like</span> <span m="2409940">here.</span> <span m="2410700">In</span> <span m="2410710">fact,</span> <span m="2411120">it is</span> <span m="2411280">exactly</span> <span m="2411600">the</span> <span m="2411670">same</span> <span m="2411850">thing.</span> </p>
<p><span m="2412490">It's</span> <span m="2412630">going</span> <span m="2412760">to</span> <span m="2412830">be</span> <span m="2413180">a</span> <span m="2413280">ticket</span> <span m="2413780">between</span> <span m="2414110">the</span> <span m="2414220">client</span> <span m="2414610">and</span> <span m="2414700">this</span> <span m="2414870">new</span> <span m="2415000">service</span> <span m="2415350">S</span> <span m="2416400">encrypted</span> <span m="2416920">with</span> <span m="2417320">KS</span> <span m="2418310">and</span> <span m="2418580">the</span> <span m="2418650">shared</span> <span m="2419000">key</span> <span m="2419210">between</span> <span m="2420100">the</span> <span m="2420210">client</span> <span m="2420610">and</span> <span m="2420750">this</span> <span m="2420910">new</span> <span m="2421010">service</span> <span m="2421320">S</span> <span m="2422160">encrypted--</span> <span m="2423370">well,</span> <span m="2423670">now,</span> <span m="2424090">here's</span> <span m="2424430">a</span> <span m="2424490">little</span> <span m="2424650">bit</span> <span m="2424750">different.</span> <span m="2425040">Instead</span> <span m="2425150">of</span> <span m="2425460">encrypting</span> <span m="2425750">with</span> <span m="2425930">KC,</span> <span m="2426610">which</span> <span m="2426790">the</span> <span m="2426880">client</span> <span m="2427170">has</span> <span m="2427290">probably</span> <span m="2427550">forgotten</span> <span m="2427940">since</span> <span m="2428190">then,</span> <span m="2428870">now</span> <span m="2429060">we're</span> <span m="2429180">going</span> <span m="2429280">to</span> <span m="2429340">encrypt it</span> <span m="2429760">with</span> <span m="2429940">this</span> <span m="2430100">shared</span> <span m="2430380">key</span> <span m="2430560">between</span> <span m="2431230">the</span> <span m="2431340">client</span> <span m="2431800">and</span> <span m="2432125">the</span> <span m="2432940">TGS</span> <span m="2433460">service.</span> <span m="2435510">Makes</span> <span m="2436000">sense?</span> </p>
<p><span m="2438030">All</span> <span m="2438100">right,</span> <span m="2438700">so in</span> <span m="2438840">this--</span> <span m="2441350">how</span> <span m="2441500">does</span> <span m="2441690">the</span> <span m="2443720">server</span> <span m="2444300">actually</span> <span m="2444540">figure</span> <span m="2444750">out</span> <span m="2444850">what</span> <span m="2444970">the</span> <span m="2445050">client</span> <span m="2445360">wants</span> <span m="2445570">to</span> <span m="2445650">do?</span> <span m="2446590">Or,</span> <span m="2446720">how</span> <span m="2446860">does</span> <span m="2447100">server</span> <span m="2447380">authenticate</span> <span m="2447880">the</span> <span m="2447980">client?</span> <span m="2449120">Well,</span> <span m="2449300">in</span> <span m="2449340">this</span> <span m="2449500">case,</span> <span m="2449900">it's</span> <span m="2450060">going</span> <span m="2450180">to--</span> <span m="2451800">TGS</span> <span m="2452150">server</span> <span m="2452430">actually</span> <span m="2452650">knows</span> <span m="2453020">its</span> <span m="2453180">own</span> <span m="2453380">key,</span> <span m="2453800">KTGS.</span> <span m="2454840">So it's</span> <span m="2455270">going</span> <span m="2455380">to</span> <span m="2455440">first</span> <span m="2455830">decrypt</span> <span m="2456220">this</span> <span m="2456460">blob</span> <span m="2457390">and</span> <span m="2457640">look</span> <span m="2457800">inside</span> <span m="2458100">the</span> <span m="2458190">ticket</span> <span m="2458460">and</span> <span m="2458600">figure</span> <span m="2458770">out</span> <span m="2458860">what's</span> <span m="2459040">going</span> <span m="2459300">on.</span> </p>
<p><span m="2460090">And</span> <span m="2460450">there's</span> <span m="2460610">all</span> <span m="2460850">those</span> <span m="2461250">nice</span> <span m="2461550">fields</span> <span m="2461800">in</span> <span m="2461890">the</span> <span m="2461990">ticket.</span> <span m="2463190">So</span> <span m="2463620">let's</span> <span m="2463750">just</span> <span m="2463950">double</span> <span m="2464160">check.</span> <span m="2464400">Why</span> <span m="2464550">do</span> <span m="2464630">we</span> <span m="2464710">need</span> <span m="2464890">all</span> <span m="2465010">those</span> <span m="2465190">fields</span> <span m="2465500">in the</span> <span m="2465680">ticket?</span> </p>
<p><span m="2467100">So</span> <span m="2468670">is</span> <span m="2468790">it</span> <span m="2468850">important</span> <span m="2469210">to</span> <span m="2469250">have</span> <span m="2469430">the</span> <span m="2469520">server</span> <span m="2469830">name</span> <span m="2470030">S</span> <span m="2470520">in</span> <span m="2470640">the</span> <span m="2470730">ticket?</span> <span m="2472710">What</span> <span m="2472990">would</span> <span m="2473050">go</span> <span m="2473180">wrong</span> <span m="2473430">if</span> <span m="2473510">you</span> <span m="2473570">didn't</span> <span m="2473780">have</span> <span m="2474150">S</span> <span m="2474320">in</span> <span m="2474440">there?</span> <span m="2477722">Anything?</span> <span m="2479690">Yeah.</span> </p>
<p><span m="2480182">STUDENT: They</span> <span m="2480674">could potentially</span> <span m="2481166">get authorized</span> <span m="2481658">to use</span> <span m="2482150">any</span> <span m="2482642">server.</span> </p>
<p><span m="2484610">PROFESSOR: Yeah,</span> <span m="2485030">so</span> <span m="2485140">it's</span> <span m="2486080">in</span> <span m="2486230">general</span> <span m="2486790">a</span> <span m="2486870">good</span> <span m="2487030">idea</span> <span m="2487370">to</span> <span m="2487480">be</span> <span m="2487730">very</span> <span m="2487980">explicit</span> <span m="2488260">in</span> <span m="2488540">network</span> <span m="2488790">protocols</span> <span m="2489300">and</span> <span m="2489430">to</span> <span m="2489680">say</span> <span m="2490020">exactly</span> <span m="2490460">what</span> <span m="2490640">a</span> <span m="2490690">message</span> <span m="2491030">means.</span> <span m="2491580">So</span> <span m="2491850">in</span> <span m="2491970">this</span> <span m="2492120">case,</span> <span m="2492360">if</span> <span m="2492460">you</span> <span m="2492590">omit</span> <span m="2492880">an</span> <span m="2492960">S,</span> <span m="2493910">you</span> <span m="2494080">might</span> <span m="2494510">be</span> <span m="2494680">relying</span> <span m="2495230">on</span> <span m="2495390">the</span> <span m="2495480">fact</span> <span m="2495850">that,</span> <span m="2496200">well,</span> <span m="2497460">if</span> <span m="2497640">it's</span> <span m="2497830">the</span> <span m="2497930">wrong</span> <span m="2498170">S that</span> <span m="2498520">you're</span> <span m="2498670">trying</span> <span m="2498890">to</span> <span m="2498960">use</span> <span m="2499110">the</span> <span m="2499190">ticket</span> <span m="2499450">for,</span> <span m="2499730">then</span> <span m="2499890">maybe</span> <span m="2500120">you'll</span> <span m="2500270">have</span> <span m="2500490">a</span> <span m="2500570">different</span> <span m="2501020">key</span> <span m="2501310">over</span> <span m="2501530">here</span> <span m="2502320">and</span> <span m="2502610">then</span> <span m="2502970">it</span> <span m="2503070">wouldn't</span> <span m="2503310">decrypt</span> <span m="2503570">or</span> <span m="2503830">something</span> <span m="2504090">like</span> <span m="2504260">this.</span> <span m="2504490">But</span> <span m="2504590">it</span> <span m="2504650">seems</span> <span m="2504810">like</span> <span m="2504920">a</span> <span m="2504940">good</span> <span m="2505090">idea</span> <span m="2505350">to</span> <span m="2505440">include</span> <span m="2505920">it to</span> <span m="2506000">make</span> <span m="2506190">sure</span> <span m="2506510">that the</span> <span m="2507160">server</span> <span m="2507500">that</span> <span m="2507620">receives</span> <span m="2507730">this</span> <span m="2508050">tickets</span> <span m="2508630">decrypts</span> <span m="2509480">and</span> <span m="2509660">checks.</span> <span m="2509960">Is</span> <span m="2510090">that</span> <span m="2510250">a</span> <span m="2510320">ticket</span> <span m="2510600">for</span> <span m="2511020">me</span> <span m="2511310">or</span> <span m="2511430">for</span> <span m="2511590">someone</span> <span m="2511820">else?</span> <span m="2512680">Yeah.</span> </p>
<p><span m="2512970">STUDENT: What does</span> <span m="2513393">the client</span> <span m="2513816">get</span> <span m="2514240">KTGS</span> <span m="2515110">on?</span> </p>
<p><span m="2515990">PROFESSOR: Ah, good</span> <span m="2516130">question.</span> <span m="2516730">The client</span> <span m="2517000">has</span> <span m="2517160">no</span> <span m="2517250">idea</span> <span m="2517550">what</span> <span m="2517660">this</span> <span m="2517800">is.</span> <span m="2517930">Because</span> <span m="2518230">this</span> <span m="2518420">is</span> <span m="2518790">like</span> <span m="2518960">a</span> <span m="2519030">super</span> <span m="2519430">secret</span> <span m="2519770">key.</span> <span m="2520060">If</span> <span m="2520150">you</span> <span m="2520250">knew</span> <span m="2520570">this,</span> <span m="2520880">you'd</span> <span m="2521070">probably</span> <span m="2521670">be</span> <span m="2521770">able</span> <span m="2521930">to</span> <span m="2522180">break</span> <span m="2522610">all of</span> <span m="2522870">Kerberos.</span> <span m="2523480">So the</span> <span m="2523940">client</span> <span m="2524190">has</span> <span m="2524360">no</span> <span m="2524550">idea</span> <span m="2524840">what</span> <span m="2525000">KTGS</span> <span m="2525260">is.</span> </p>
<p><span m="2526478">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="2527294">PROFESSOR: Ah,</span> <span m="2527702">yeah, yeah.</span> <span m="2528110">And</span> <span m="2528460">then</span> <span m="2528590">the</span> <span m="2528690">where</span> <span m="2528890">you</span> <span m="2528960">get it</span> <span m="2529250">from is</span> <span m="2529420">actually--</span> <span m="2529660">it's</span> <span m="2529790">the</span> <span m="2529900">Kerberos</span> <span m="2530280">server</span> <span m="2530520">itself</span> <span m="2531050">that</span> <span m="2531450">generates</span> <span m="2531940">this</span> <span m="2532120">whole</span> <span m="2532500">blob</span> <span m="2532920">for</span> <span m="2533220">you</span> <span m="2533650">where</span> <span m="2533850">this</span> <span m="2534000">is</span> <span m="2534110">actually</span> <span m="2534830">TGS</span> <span m="2535440">and</span> <span m="2535550">this</span> <span m="2535710">is</span> <span m="2535920">KTGS</span> <span m="2537710">over</span> <span m="2537930">here.</span> <span m="2538780">So</span> <span m="2539230">you</span> <span m="2539390">don't</span> <span m="2539540">construct</span> <span m="2539870">this</span> <span m="2540010">yourself.</span> <span m="2540450">You</span> <span m="2540600">just</span> <span m="2540820">copy it</span> <span m="2541160">over.</span> <span m="2542830">OK</span> </p>
<p><span m="2543660">So</span> <span m="2544060">what</span> <span m="2544240">is</span> <span m="2544270">the</span> <span m="2544450">client</span> <span m="2545840">name</span> <span m="2546060">there</span> <span m="2546350">important</span> <span m="2546770">for?</span> <span m="2547210">That should</span> <span m="2547530">be</span> <span m="2547850">fairly</span> <span m="2548000">easy,</span> <span m="2548340">right?</span> <span m="2548570">If</span> <span m="2548690">you</span> <span m="2548850">don't</span> <span m="2549050">put</span> <span m="2549160">the</span> <span m="2549240">client</span> <span m="2549520">name in</span> <span m="2549660">the</span> <span m="2549740">ticket,</span> <span m="2550020">then</span> <span m="2550140">the</span> <span m="2550230">server</span> <span m="2551000">gets</span> <span m="2551250">this</span> <span m="2551380">nice</span> <span m="2551600">blob</span> <span m="2551830">but</span> <span m="2552000">it</span> <span m="2552050">has</span> <span m="2552200">no</span> <span m="2552280">idea</span> <span m="2552540">who</span> <span m="2552820">it's</span> <span m="2552990">trying</span> <span m="2553320">to</span> <span m="2553410">talk</span> <span m="2553680">to.</span> </p>
<p><span m="2554620">So</span> <span m="2554730">it</span> <span m="2554820">has</span> <span m="2555010">no</span> <span m="2555080">idea</span> <span m="2555380">whether</span> <span m="2555680">it should</span> <span m="2555840">issue</span> <span m="2556090">a</span> <span m="2556170">ticket</span> <span m="2556490">for</span> <span m="2557140">my</span> <span m="2557550">principal</span> <span m="2558170">or</span> <span m="2558270">for</span> <span m="2558410">someone</span> <span m="2558600">else's</span> <span m="2558890">principle,</span> <span m="2559470">et</span> <span m="2559630">cetera.</span> <span m="2561250">So</span> <span m="2561360">what's</span> <span m="2561710">the</span> <span m="2561800">deal</span> <span m="2561970">with</span> <span m="2562120">the</span> <span m="2562370">other</span> <span m="2562690">fields?</span> <span m="2564470">Why</span> <span m="2564610">do</span> <span m="2564960">these guys</span> <span m="2565120">stick</span> <span m="2565490">an</span> <span m="2565700">address</span> <span m="2566150">in</span> <span m="2566240">the</span> <span m="2566350">ticket?</span> </p>
<p><span m="2569190">This is</span> <span m="2569650">the</span> <span m="2570020">client's</span> <span m="2570400">IP</span> <span m="2570640">address.</span> <span m="2571475">Does</span> <span m="2571860">it</span> <span m="2571990">matter?</span> <span m="2573840">Yeah.</span> </p>
<p><span m="2574240">STUDENT: Can they</span> <span m="2574640">use</span> <span m="2575138">that</span> <span m="2575636">address</span> <span m="2576632">with the</span> <span m="2577130">ticket to</span> <span m="2577628">verify</span> <span m="2578126">against the</span> <span m="2578624">[INAUDIBLE]?</span> </p>
<p><span m="2580120">PROFESSOR: Sort of.</span> <span m="2580690">Well,</span> <span m="2581160">so</span> <span m="2581310">I</span> <span m="2581470">think</span> <span m="2581680">the</span> <span m="2581790">general</span> <span m="2582140">plan</span> <span m="2582360">for</span> <span m="2582480">why</span> <span m="2582680">there's</span> <span m="2582920">addresses</span> <span m="2583390">appearing</span> <span m="2583780">everywhere</span> <span m="2584110">here,</span> <span m="2584360">these</span> <span m="2584550">IP</span> <span m="2584820">addresses,</span> <span m="2585290">is</span> <span m="2585550">that</span> <span m="2586130">these</span> <span m="2586360">guys</span> <span m="2586560">at</span> <span m="2586590">the</span> <span m="2586700">time</span> <span m="2586900">were</span> <span m="2587040">still</span> <span m="2587550">slightly</span> <span m="2588220">confused</span> <span m="2589170">and--</span> <span m="2590270">well,</span> <span m="2590590">in</span> <span m="2590680">some</span> <span m="2590850">ways--</span> <span m="2591610">they</span> <span m="2591690">were</span> <span m="2591800">still</span> <span m="2592130">thinking,</span> <span m="2592490">OK,</span> <span m="2592660">well,</span> <span m="2592860">we're</span> <span m="2592970">going</span> <span m="2593080">to</span> <span m="2593150">rely</span> <span m="2593450">on</span> <span m="2593540">IP</span> <span m="2593850">addresses</span> <span m="2594260">for</span> <span m="2594420">a</span> <span m="2594460">little</span> <span m="2594670">bit</span> <span m="2594780">of</span> <span m="2594870">security.</span> <span m="2595800">So</span> <span m="2595900">they</span> <span m="2595960">wanted</span> <span m="2596160">to</span> <span m="2596310">make</span> <span m="2596530">sure</span> <span m="2596910">that</span> <span m="2598180">if</span> <span m="2598410">the</span> <span m="2598540">client</span> <span m="2598950">logged</span> <span m="2599220">in</span> <span m="2599350">from</span> <span m="2599530">some</span> <span m="2599760">IP</span> <span m="2600050">address,</span> <span m="2600480">then</span> <span m="2600660">everything</span> <span m="2601090">else</span> <span m="2601300">going</span> <span m="2601540">on</span> <span m="2601830">with</span> <span m="2602010">that</span> <span m="2602270">ticket</span> <span m="2602910">happen</span> <span m="2603200">from</span> <span m="2603370">that</span> <span m="2603440">same</span> <span m="2603620">IP</span> <span m="2603900">address.</span> </p>
<p><span m="2604300">So</span> <span m="2604790">if</span> <span m="2604920">you</span> <span m="2605010">logged</span> <span m="2605270">in</span> <span m="2605400">from</span> <span m="2605660">some</span> <span m="2606380">IP</span> <span m="2606730">address</span> <span m="2607070">on</span> <span m="2607460">18.26.4.9</span> <span m="2609030">or</span> <span m="2609110">something,</span> <span m="2609920">then</span> <span m="2610600">every</span> <span m="2610920">connection</span> <span m="2611350">you</span> <span m="2611440">make</span> <span m="2611740">to a</span> <span m="2611860">file</span> <span m="2612200">server</span> <span m="2612420">or to a</span> <span m="2612830">mail server</span> <span m="2612940">has</span> <span m="2613330">to be</span> <span m="2613410">from the</span> <span m="2613580">same</span> <span m="2613690">IP</span> <span m="2613910">address.</span> <span m="2614280">Otherwise,</span> <span m="2614640">the</span> <span m="2614810">server</span> <span m="2615090">should</span> <span m="2615290">reject</span> <span m="2615555">your</span> <span m="2615820">connection</span> <span m="2616240">as</span> <span m="2616420">being</span> <span m="2617710">stolen</span> <span m="2618200">by--</span> <span m="2618450">or</span> <span m="2618620">someone</span> <span m="2618880">stole</span> <span m="2619120">your</span> <span m="2619210">ticket.</span> <span m="2619570">So</span> <span m="2619950">we're</span> <span m="2620120">thinking,</span> <span m="2620350">OK,</span> <span m="2620910">well,</span> <span m="2621230">maybe we'll</span> <span m="2621500">defend</span> <span m="2621850">against</span> <span m="2622160">ticket</span> <span m="2622430">theft</span> <span m="2622650">this</span> <span m="2622810">way.</span> </p>
<p><span m="2623350">If you</span> <span m="2623480">still</span> <span m="2623820">a ticket,</span> <span m="2624110">well,</span> <span m="2624820">but</span> <span m="2624940">you're</span> <span m="2625070">not</span> <span m="2625240">using</span> <span m="2625440">the</span> <span m="2625560">same</span> <span m="2625730">IP</span> <span m="2625820">address.</span> <span m="2626260">So</span> <span m="2626720">it</span> <span m="2626830">won't</span> <span m="2627000">work.</span> <span m="2627685">It's</span> <span m="2628030">probably</span> <span m="2628260">a</span> <span m="2628320">little</span> <span m="2628550">bit</span> <span m="2628760">misguided</span> <span m="2629040">at</span> <span m="2629140">this</span> <span m="2629360">point</span> <span m="2629830">but--</span> <span m="2630650">that sort</span> <span m="2630770">of gets</span> <span m="2630940">in the way</span> <span m="2631130">And</span> <span m="2631440">Kerberos</span> <span m="2631880">5</span> <span m="2632530">still</span> <span m="2632780">has it</span> <span m="2632980">but it's</span> <span m="2633400">largely</span> <span m="2633730">optional.</span> <span m="2634350">Really,</span> <span m="2634690">you should</span> <span m="2635270">just</span> <span m="2635320">rely</span> <span m="2635550">on</span> <span m="2635990">cryptography</span> <span m="2637300">instead</span> <span m="2637640">of</span> <span m="2637820">any</span> <span m="2638110">IP</span> <span m="2638410">address</span> <span m="2638670">security.</span> </p>
<p><span m="2640430">So</span> <span m="2640560">what's</span> <span m="2640640">the</span> <span m="2640740">point</span> <span m="2640950">of</span> <span m="2641030">the</span> <span m="2641130">time</span> <span m="2641370">stamp</span> <span m="2641690">and</span> <span m="2641810">lifetime</span> <span m="2642470">things</span> <span m="2642890">in</span> <span m="2643040">the</span> <span m="2643130">ticket</span> <span m="2643410">up</span> <span m="2643530">there?</span> <span m="2644760">One</span> <span m="2644920">are</span> <span m="2644970">those</span> <span m="2645160">guys</span> <span m="2645430">good for?</span> <span m="2646445">Are</span> <span m="2646800">they</span> <span m="2646990">useful?</span> <span m="2648790">Yeah.</span> </p>
<p><span m="2649095">STUDENT: Preventing</span> <span m="2649400">replay</span> <span m="2649867">attacks.</span> </p>
<p><span m="2651270">PROFESSOR: Well,</span> <span m="2652090">so</span> <span m="2652360">the</span> <span m="2652620">syndicator</span> <span m="2653170">is</span> <span m="2653280">the</span> <span m="2653390">thing</span> <span m="2653550">that's</span> <span m="2653690">going</span> <span m="2653800">to</span> <span m="2653840">help</span> <span m="2654070">us</span> <span m="2654190">prevent</span> <span m="2654500">replay</span> <span m="2654720">attacks</span> <span m="2655040">in</span> <span m="2655130">a</span> <span m="2655190">second.</span> <span m="2656080">Because</span> <span m="2656320">that</span> <span m="2656530">thing</span> <span m="2656680">gets</span> <span m="2657350">generated</span> <span m="2657840">every</span> <span m="2658180">time</span> <span m="2658470">you</span> <span m="2658640">do</span> <span m="2658780">a</span> <span m="2658900">new</span> <span m="2659030">request.</span> <span m="2660370">On</span> <span m="2660520">the other</span> <span m="2660670">hand,</span> <span m="2661220">the</span> <span m="2661240">ticket</span> <span m="2661580">just</span> <span m="2661750">stays</span> <span m="2662030">the</span> <span m="2662110">same.</span> <span m="2662490">So</span> <span m="2662540">it's</span> <span m="2662670">certainly</span> <span m="2662910">not</span> <span m="2663080">preventing</span> <span m="2663400">replay</span> <span m="2663550">attacks</span> <span m="2663970">there.</span> <span m="2664320">Yeah.</span> </p>
<p><span m="2665304">STUDENT: It prevents</span> <span m="2665796">somebody from</span> <span m="2666288">stealing</span> <span m="2666780">your ticket</span> <span m="2667272">then using</span> <span m="2667764">it</span> <span m="2668256">[INAUDIBLE]</span> </p>
<p><span m="2669240">PROFESSOR: Oh, sorry,</span> <span m="2669370">yes.</span> <span m="2669550">This</span> <span m="2669730">just</span> <span m="2669920">bounds</span> <span m="2670530">the</span> <span m="2670640">time</span> <span m="2670930">for</span> <span m="2671060">which</span> <span m="2671230">a</span> <span m="2671250">ticket</span> <span m="2671470">is</span> <span m="2671610">valid,</span> <span m="2672050">meaning</span> <span m="2672410">that</span> <span m="2673260">the</span> <span m="2673360">damage</span> <span m="2673810">from</span> <span m="2673950">disclosing</span> <span m="2674540">it</span> <span m="2674630">is</span> <span m="2674930">hopefully</span> <span m="2675680">reduced.</span> <span m="2677110">So</span> <span m="2677240">the</span> <span m="2677370">plan</span> <span m="2677700">is</span> <span m="2677870">the</span> <span m="2677980">timestamp</span> <span m="2678810">is</span> <span m="2679110">roughly</span> <span m="2679400">the</span> <span m="2679510">time</span> <span m="2679770">when</span> <span m="2679900">you</span> <span m="2680010">initially</span> <span m="2680370">got</span> <span m="2680570">the</span> <span m="2680670">ticket.</span> </p>
<p><span m="2681370">And</span> <span m="2682030">a</span> <span m="2682090">lifetime</span> <span m="2682720">in</span> <span m="2682840">the</span> <span m="2682950">ticket</span> <span m="2683530">represents</span> <span m="2684070">how</span> <span m="2685240">many</span> <span m="2685460">hours,</span> <span m="2685910">let's</span> <span m="2686110">say,</span> <span m="2686250">it's</span> <span m="2686450">valid</span> <span m="2687030">from</span> <span m="2687420">that</span> <span m="2687570">initial</span> <span m="2687920">timestamp.</span> <span m="2688900">So</span> <span m="2689000">if</span> <span m="2689080">you</span> <span m="2689160">try</span> <span m="2689330">to</span> <span m="2689410">use</span> <span m="2689640">it</span> <span m="2689800">too</span> <span m="2690020">early</span> <span m="2690300">or</span> <span m="2690480">too</span> <span m="2690620">late,</span> <span m="2691050">then</span> <span m="2691920">every</span> <span m="2692250">server</span> <span m="2692590">should</span> <span m="2692820">reject</span> <span m="2693250">such</span> <span m="2693450">a</span> <span m="2693520">ticket</span> <span m="2694100">in</span> <span m="2694300">the</span> <span m="2694390">Kerberos</span> <span m="2694590">protocol.</span> <span m="2696040">So</span> <span m="2696060">this</span> <span m="2696150">kind</span> <span m="2696300">of</span> <span m="2696370">means</span> <span m="2696610">that</span> <span m="2697570">every</span> <span m="2697860">server</span> <span m="2698180">has</span> <span m="2698360">to</span> <span m="2698440">have</span> <span m="2698700">a</span> <span m="2698780">loosely</span> <span m="2699280">synchronized,</span> <span m="2699830">clock</span> <span m="2702960">which</span> <span m="2703100">is</span> <span m="2703160">a</span> <span m="2703210">bit</span> <span m="2703320">of</span> <span m="2703390">a--</span> <span m="2703590">well,</span> <span m="2703970">maybe</span> <span m="2704180">you've</span> <span m="2704370">run</span> <span m="2704560">into</span> <span m="2704710">this.</span> </p>
<p><span m="2704900">Like,</span> <span m="2705050">your</span> <span m="2705170">laptop</span> <span m="2705550">clock</span> <span m="2705660">is</span> <span m="2705810">off and</span> <span m="2706070">you</span> <span m="2706170">can't</span> <span m="2706330">log</span> <span m="2706540">into</span> <span m="2706690">Kerberos</span> <span m="2707040">anymore.</span> <span m="2708220">Question?</span> <span m="2708620">Yeah.</span> </p>
<p><span m="2709190">STUDENT: You said</span> <span m="2709655">before that</span> <span m="2710120">the client</span> <span m="2710585">discards</span> <span m="2711515">KC</span> <span m="2711980">but</span> <span m="2712450">they're</span> <span m="2712780">still</span> <span m="2713280">keeping</span> <span m="2713780">KCS</span> <span m="2714280">[INAUDIBLE]</span> <span m="2714780">the</span> <span m="2715280">TGS.</span> <span m="2715780">[INAUDIBLE]</span> </p>
<p><span m="2716780">PROFESSOR: That's</span> <span m="2717040">right,</span> <span m="2717410">yeah. So</span> <span m="2717700">the</span> <span m="2717880">client</span> <span m="2718210">discards</span> <span m="2718770">KC</span> <span m="2719240">after</span> <span m="2719480">logging</span> <span m="2719910">in.</span> <span m="2720310">But</span> <span m="2720470">it</span> <span m="2720590">still</span> <span m="2720810">keeps</span> <span m="2721090">KCS.</span> <span m="2721600">You're</span> <span m="2721770">exactly</span> <span m="2722120">right.</span> </p>
<p><span m="2723080">STUDENT: So if someone</span> <span m="2723580">steals</span> <span m="2724080">the KCS,</span> <span m="2724580">then they</span> <span m="2725080">have access</span> <span m="2725580">to</span> <span m="2726080">[INAUDIBLE].</span> </p>
<p><span m="2727580">PROFESSOR: Yeah,</span> <span m="2727950">OK.</span> <span m="2728320">So how</span> <span m="2728500">bad</span> <span m="2728730">is that?</span> <span m="2729010">Like,</span> <span m="2730010">why</span> <span m="2730300">is</span> <span m="2730420">it</span> <span m="2730830">better</span> <span m="2731300">to</span> <span m="2731400">disclose</span> <span m="2731950">this</span> <span m="2732240">KCS</span> <span m="2732910">fof--</span> <span m="2733130">actually,</span> <span m="2733330">well,</span> <span m="2733490">this</span> <span m="2733610">is</span> <span m="2733750">TGS,</span> <span m="2734210">right?</span> <span m="2734600">Why</span> <span m="2734800">is it</span> <span m="2734910">better</span> <span m="2735130">to</span> <span m="2735330">disclose</span> <span m="2735600">KCTGS</span> <span m="2736650">than</span> <span m="2736940">KC?</span> <span m="2739980">Yeah.</span> </p>
<p><span m="2740918">STUDENT: Someone</span> <span m="2741356">[INAUDIBLE]</span> <span m="2742232">somewhere</span> <span m="2743108">[INAUDIBLE].</span> </p>
<p><span m="2743550">PROFESSOR: It's the</span> <span m="2743893">kind of</span> <span m="2744236">thing</span> <span m="2744580">that they're</span> <span m="2744700">both</span> <span m="2744920">keys, though.</span> <span m="2745390">So</span> <span m="2745520">neither of</span> <span m="2745820">them</span> <span m="2745930">are</span> <span m="2746030">really</span> <span m="2746200">hashed,</span> <span m="2746450">yeah.</span> </p>
<p><span m="2746906">STUDENT: You</span> <span m="2747282">would</span> <span m="2747660">take</span> <span m="2747910">KCS</span> <span m="2748385">and you'd</span> <span m="2748860">just</span> <span m="2749290">steal that</span> <span m="2749777">session</span> <span m="2750264">between those</span> <span m="2750751">two.</span> <span m="2751238">But if you</span> <span m="2751725">steal KC,</span> <span m="2752212">you can</span> <span m="2752699">impersonate</span> <span m="2753186">the</span> <span m="2753673">client.</span> </p>
<p><span m="2754160">PROFESSOR: That's</span> <span m="2754650">right.</span> <span m="2754740">Yeah.</span> <span m="2754990">So</span> <span m="2755370">I</span> <span m="2755600">guess</span> <span m="2755810">one</span> <span m="2756030">way</span> <span m="2756150">to</span> <span m="2756290">answer</span> <span m="2756510">this</span> <span m="2756730">is</span> <span m="2757030">that</span> <span m="2757460">KCTGS,</span> <span m="2758750">this</span> <span m="2758890">is</span> <span m="2759030">actually</span> <span m="2759340">a new</span> <span m="2759480">key</span> <span m="2759940">generated</span> <span m="2760370">every</span> <span m="2760580">time</span> <span m="2760820">you</span> <span m="2761410">log</span> <span m="2761730">in</span> <span m="2761830">initially.</span> <span m="2762820">And</span> <span m="2763115">this</span> <span m="2763410">thing</span> <span m="2763790">is</span> <span m="2763920">only</span> <span m="2764260">good</span> <span m="2764700">because</span> <span m="2765560">you</span> <span m="2765700">have</span> <span m="2765930">this</span> <span m="2766250">ticket</span> <span m="2766550">that</span> <span m="2766700">goes</span> <span m="2766880">along</span> <span m="2767140">with</span> <span m="2767300">it.</span> <span m="2768620">If</span> <span m="2768680">you</span> <span m="2768810">lose</span> <span m="2769080">this</span> <span m="2769180">ticket</span> <span m="2769500">or if this</span> <span m="2769890">ticket is</span> <span m="2770060">no</span> <span m="2770200">longer</span> <span m="2770480">valid,</span> <span m="2771550">then</span> <span m="2772020">yeah,</span> <span m="2772250">you</span> <span m="2772330">have</span> <span m="2772520">these</span> <span m="2772730">56</span> <span m="2773020">bits</span> <span m="2773460">in</span> <span m="2773570">this</span> <span m="2773730">key.</span> </p>
<p><span m="2774500">But</span> <span m="2774710">no</span> <span m="2774840">one</span> <span m="2774950">is</span> <span m="2775040">going</span> <span m="2775160">to</span> <span m="2775730">assume</span> <span m="2776170">anything</span> <span m="2777550">from</span> <span m="2777840">those</span> <span m="2778040">bits.</span> <span m="2778880">The</span> <span m="2778950">only</span> <span m="2779160">reason</span> <span m="2779470">these</span> <span m="2779690">bits</span> <span m="2779910">are</span> <span m="2780040">interesting</span> <span m="2780760">is</span> <span m="2780910">because</span> <span m="2781260">this</span> <span m="2781520">ticket</span> <span m="2782200">talks</span> <span m="2782500">about</span> <span m="2782840">this</span> <span m="2783050">KCS</span> <span m="2783630">being</span> <span m="2783840">valid</span> <span m="2784200">right</span> <span m="2784430">now.</span> <span m="2785160">And</span> <span m="2785460">there's</span> <span m="2785630">a</span> <span m="2785680">bound</span> <span m="2785990">on</span> <span m="2786080">it.</span> </p>
<p><span m="2786886">STUDENT: Yeah,</span> <span m="2787362">so</span> <span m="2787838">if they</span> <span m="2788314">stole both of those</span> <span m="2788790">[INAUDIBLE]</span> <span m="2789488">be</span> <span m="2789946">bounded.</span> </p>
<p><span m="2790862">PROFESSOR: Yeah,</span> <span m="2791320">if someone</span> <span m="2791540">steals</span> <span m="2791780">both of</span> <span m="2792180">these</span> <span m="2792360">blogs,</span> <span m="2792870">than</span> <span m="2793700">they</span> <span m="2793920">can</span> <span m="2794080">impersonate</span> <span m="2794640">you</span> <span m="2794880">or,</span> <span m="2795020">like,</span> <span m="2795260">log</span> <span m="2795460">into</span> <span m="2795590">your</span> <span m="2795740">file</span> <span m="2796040">server,</span> <span m="2796270">mail</span> <span m="2796490">server</span> <span m="2796730">for</span> <span m="2797510">the</span> <span m="2797760">lifetime</span> <span m="2798240">of</span> <span m="2798360">that</span> <span m="2798550">ticket,</span> <span m="2799210">which</span> <span m="2799450">is</span> <span m="2799610">a</span> <span m="2799670">couple</span> <span m="2799900">of</span> <span m="2799980">hours</span> <span m="2800270">or</span> <span m="2800370">10</span> <span m="2800560">hours.</span> <span m="2801990">Stealing</span> <span m="2802360">this,</span> <span m="2802750">there's</span> <span m="2803120">no</span> <span m="2803370">time</span> <span m="2803590">bound</span> <span m="2803900">on that</span> <span m="2804110">until</span> <span m="2804410">you</span> <span m="2804520">change</span> <span m="2804760">your</span> <span m="2804840">password</span> <span m="2805250">and</span> <span m="2805340">maybe</span> <span m="2805570">worse.</span> <span m="2807355">Make</span> <span m="2807800">sense?</span> </p>
<p><span m="2809720">All</span> <span m="2809800">right,</span> <span m="2812360">so</span> <span m="2812460">it</span> <span m="2812580">seems</span> <span m="2812780">like, yeah,</span> <span m="2813050">all</span> <span m="2813250">those</span> <span m="2813450">fields</span> <span m="2813710">are</span> <span m="2813790">kind</span> <span m="2813970">of</span> <span m="2814040">important,</span> <span m="2814840">IP</span> <span m="2815130">address</span> <span m="2815630">maybe</span> <span m="2816020">less</span> <span m="2816290">so.</span> <span m="2817810">And</span> <span m="2818810">now</span> <span m="2818970">in</span> <span m="2819240">response,</span> <span m="2819495">right,</span> <span m="2819750">we</span> <span m="2819830">can</span> <span m="2821020">get</span> <span m="2821350">this</span> <span m="2821540">ticket</span> <span m="2821830">finally.</span> <span m="2822220">And</span> <span m="2822390">because</span> <span m="2822710">we</span> <span m="2822800">know</span> <span m="2823040">KCTGS,</span> <span m="2824770">we</span> <span m="2824940">can</span> <span m="2825120">decrypt</span> <span m="2825510">the</span> <span m="2825580">response</span> <span m="2825950">from</span> <span m="2826080">this</span> <span m="2826230">TGS</span> <span m="2826610">server.</span> <span m="2827120">And</span> <span m="2827750">now</span> <span m="2827910">we</span> <span m="2827990">have</span> <span m="2828140">a</span> <span m="2828260">ticket</span> <span m="2828570">for</span> <span m="2828850">any</span> <span m="2829440">server</span> <span m="2829790">we</span> <span m="2829870">want--</span> <span m="2830150">a</span> <span m="2830230">file</span> <span m="2830510">server,</span> <span m="2831500">mail</span> <span m="2831710">server,</span> <span m="2832150">whatever</span> <span m="2832350">it</span> <span m="2832400">is</span> <span m="2832550">that</span> <span m="2832670">we</span> <span m="2833230">finally</span> <span m="2833560">care</span> <span m="2833720">about</span> <span m="2833920">connecting</span> <span m="2834290">to.</span> <span m="2835840">Make</span> <span m="2836320">sense?</span> </p>
<p><span m="2838470">All</span> <span m="2838550">right,</span> <span m="2839500">so</span> <span m="2840590">let's</span> <span m="2840790">look</span> <span m="2840930">at</span> <span m="2841050">how</span> <span m="2841820">you</span> <span m="2841960">might</span> <span m="2842210">sort</span> <span m="2842580">of</span> <span m="2842650">finally</span> <span m="2843050">use</span> <span m="2843370">this</span> <span m="2843670">in</span> <span m="2844000">some</span> <span m="2844700">application</span> <span m="2845200">level</span> <span m="2845470">protocol.</span> <span m="2846510">So</span> <span m="2846660">suppose</span> <span m="2847020">that</span> <span m="2848500">maybe</span> <span m="2848740">I'm</span> <span m="2848890">talking</span> <span m="2849250">to</span> <span m="2849340">a</span> <span m="2849400">mail</span> <span m="2849680">server</span> <span m="2850090">to</span> <span m="2850250">fetch</span> <span m="2850490">my</span> <span m="2850600">messages.</span> <span m="2851610">So</span> <span m="2851650">presumably,</span> <span m="2852130">what</span> <span m="2852460">my</span> <span m="2853070">client</span> <span m="2853590">workstation</span> <span m="2853900">is</span> <span m="2854210">going</span> <span m="2854320">to</span> <span m="2854400">do</span> <span m="2854850">is</span> <span m="2855010">going</span> <span m="2855120">to</span> <span m="2855170">send</span> <span m="2855370">a</span> <span m="2855500">tickets</span> <span m="2855940">requesting</span> <span m="2856220">for,</span> <span m="2856500">I</span> <span m="2856840">don't</span> <span m="2856980">know,</span> <span m="2857245">mail.po12.</span> </p>
<p><span m="2859770">And</span> <span m="2859980">it'll</span> <span m="2860180">get</span> <span m="2860400">back</span> <span m="2860750">a</span> <span m="2860890">ticket</span> <span m="2861270">for</span> <span m="2861680">the</span> <span m="2861800">principal</span> <span m="2862210">mail.po12</span> <span m="2863380">or</span> <span m="2863450">something</span> <span m="2863650">like</span> <span m="2863820">this.</span> <span m="2864850">And</span> <span m="2865000">then</span> <span m="2865690">inside</span> <span m="2866140">of</span> <span m="2866280">this</span> <span m="2866970">ticket</span> <span m="2867710">or</span> <span m="2867910">inside</span> <span m="2868190">of</span> <span m="2868280">this</span> <span m="2868440">response,</span> <span m="2869340">now</span> <span m="2869620">I</span> <span m="2869730">have</span> <span m="2870330">a</span> <span m="2870420">shared</span> <span m="2870830">key</span> <span m="2871080">between</span> <span m="2871530">me</span> <span m="2871930">and</span> <span m="2872080">the</span> <span m="2872140">mail</span> <span m="2872350">server--</span> <span m="2873350">S</span> <span m="2873600">is</span> <span m="2873760">the</span> <span m="2873830">male</span> <span m="2874000">server</span> <span m="2874250">over</span> <span m="2874380">here--</span> <span m="2875080">and</span> <span m="2875810">this</span> <span m="2876130">ticket</span> <span m="2876290">a</span> <span m="2876340">blob</span> <span m="2876780">that</span> <span m="2876880">I</span> <span m="2876920">can</span> <span m="2877350">to</span> <span m="2877410">the</span> <span m="2877510">mail</span> <span m="2877720">server</span> <span m="2877940">to</span> <span m="2878020">convince</span> <span m="2878420">it</span> <span m="2878540">that</span> <span m="2878770">I'm</span> <span m="2878990">the</span> <span m="2879070">right</span> <span m="2879280">guy</span> <span m="2879870">or</span> <span m="2880130">anyone</span> <span m="2880480">with</span> <span m="2880620">this</span> <span m="2880840">key</span> <span m="2881570">is</span> <span m="2882000">the</span> <span m="2882750">right</span> <span m="2883020">principle.</span> <span m="2884860">And</span> <span m="2884960">then</span> <span m="2885110">we</span> <span m="2885200">can</span> <span m="2885300">actually</span> <span m="2885840">have</span> <span m="2886000">an</span> <span m="2886060">encrypted</span> <span m="2886430">conversation</span> <span m="2886970">with</span> <span m="2887080">the</span> <span m="2887150">mail</span> <span m="2887380">server</span> <span m="2888140">using</span> <span m="2888920">this</span> <span m="2889270">new</span> <span m="2889670">key</span> <span m="2890350">KCS.</span> </p>
<p><span m="2892220">So</span> <span m="2892650">what</span> <span m="2892800">I might</span> <span m="2892990">do</span> <span m="2893300">as</span> <span m="2893400">a</span> <span m="2893490">client</span> <span m="2894480">is--</span> <span m="2896820">well,</span> <span m="2896990">initially,</span> <span m="2897770">I</span> <span m="2897920">send</span> <span m="2898920">some</span> <span m="2899180">message</span> <span m="2899480">to</span> <span m="2899550">the</span> <span m="2899630">mail</span> <span m="2899850">server</span> <span m="2900200">that</span> <span m="2900340">includes</span> <span m="2901340">this</span> <span m="2901590">ticket</span> <span m="2902680">TC</span> <span m="2903690">mail</span> <span m="2905420">encrypted</span> <span m="2905980">with</span> <span m="2906220">the</span> <span m="2906310">key</span> <span m="2906630">of</span> <span m="2906730">the</span> <span m="2906810">mail</span> <span m="2907020">server.</span> <span m="2908880">And</span> <span m="2909590">then</span> <span m="2909750">I</span> <span m="2909800">can</span> <span m="2909910">actually</span> <span m="2910160">send</span> <span m="2910390">some</span> <span m="2910590">message</span> <span m="2910920">along</span> <span m="2911510">with</span> <span m="2911740">this</span> <span m="2911910">request</span> <span m="2912910">that</span> <span m="2913810">maybe</span> <span m="2914130">says</span> <span m="2914310">something</span> <span m="2914750">like,</span> <span m="2915890">well,</span> <span m="2916180">delete</span> <span m="2916510">some</span> <span m="2916660">message--</span> <span m="2919070">delete</span> <span m="2919430">5.</span> <span m="2920640">And</span> <span m="2920770">I can</span> <span m="2921050">encrypt</span> <span m="2921355">this</span> <span m="2922560">with</span> <span m="2923440">KC</span> <span m="2923890">mail.</span> </p>
<p><span m="2926360">Does</span> <span m="2926780">that</span> <span m="2927200">make</span> <span m="2927340">sense?</span> <span m="2929050">OK,</span> <span m="2929240">so</span> <span m="2929330">what</span> <span m="2929690">happens</span> <span m="2930030">in this</span> <span m="2930150">protocol</span> <span m="2930680">on</span> <span m="2930860">the</span> <span m="2930920">mail</span> <span m="2931090">server</span> <span m="2931340">side?</span> <span m="2932060">The</span> <span m="2932160">mail</span> <span m="2932330">server</span> <span m="2932920">is</span> <span m="2933050">going</span> <span m="2933220">to</span> <span m="2933280">use</span> <span m="2933640">its</span> <span m="2933980">secret</span> <span m="2934520">key</span> <span m="2934730">K</span> <span m="2934930">mail</span> <span m="2935540">to</span> <span m="2935640">decrypt</span> <span m="2936110">this</span> <span m="2936360">ticket</span> <span m="2936640">first.</span> </p>
<p><span m="2937780">And</span> <span m="2937890">then</span> <span m="2937980">it</span> <span m="2938080">looks</span> <span m="2938270">inside</span> <span m="2938630">there</span> <span m="2938750">and</span> <span m="2938840">finds</span> <span m="2939140">two</span> <span m="2939270">important</span> <span m="2939700">things--</span> <span m="2940850">the</span> <span m="2941370">principal</span> <span m="2941740">name</span> <span m="2941970">C</span> <span m="2942250">of</span> <span m="2942530">who</span> <span m="2942800">is</span> <span m="2942920">it</span> <span m="2943010">that's</span> <span m="2943400">talking</span> <span m="2943730">to</span> <span m="2943810">it</span> <span m="2943870">in</span> <span m="2943950">the</span> <span m="2944020">first</span> <span m="2944290">place</span> <span m="2945310">and</span> <span m="2945900">the</span> <span m="2946030">key</span> <span m="2946390">KCS</span> <span m="2947380">that</span> <span m="2947590">it</span> <span m="2947690">should</span> <span m="2947830">be</span> <span m="2947930">using</span> <span m="2948230">to</span> <span m="2948310">decrypt</span> <span m="2948430">all the</span> <span m="2948860">subsequent</span> <span m="2949300">traffic</span> <span m="2950170">and</span> <span m="2950360">authenticate</span> <span m="2950620">it</span> <span m="2950880">ideally</span> <span m="2951155">in</span> <span m="2951430">Kerberos</span> <span m="2951750">5,</span> <span m="2951900">at least.</span> <span m="2953160">And</span> <span m="2953270">then</span> <span m="2953450">you</span> <span m="2953530">can</span> <span m="2953650">decrypt</span> <span m="2953910">this</span> <span m="2954040">message and</span> <span m="2954480">say oh,</span> <span m="2954690">well,</span> <span m="2954920">yeah.</span> <span m="2955150">User</span> <span m="2955470">C</span> <span m="2955840">is</span> <span m="2956040">trying</span> <span m="2956250">to</span> <span m="2956320">delete</span> <span m="2956590">message</span> <span m="2956890">five.</span> <span m="2957370">So</span> <span m="2957800">I'll</span> <span m="2958020">run</span> <span m="2958170">this</span> <span m="2958350">command.</span> <span m="2959720">Make sense?</span> <span m="2959985">You</span> <span m="2960250">had a</span> <span m="2960450">question?</span> </p>
<p><span m="2961316">STUDENT: Yeah,</span> <span m="2962774">so</span> <span m="2963260">Kerberos</span> <span m="2963980">initially</span> <span m="2964500">sends</span> <span m="2965954">the</span> <span m="2966386">TGS</span> <span m="2966818">ticket</span> <span m="2967682">in</span> <span m="2968120">KCTGS.</span> <span m="2970370">Where's</span> <span m="2970665">[INAUDIBLE]?</span> </p>
<p><span m="2972620">PROFESSOR: So</span> <span m="2972850">AC,</span> <span m="2973290">those</span> <span m="2974340">authenticators</span> <span m="2975190">are</span> <span m="2975270">actually</span> <span m="2975500">generated</span> <span m="2975990">by</span> <span m="2976190">the</span> <span m="2976340">client.</span> <span m="2977110">Note</span> <span m="2977290">that</span> <span m="2977510">the</span> <span m="2977770">client</span> <span m="2978740">only</span> <span m="2979040">needs</span> <span m="2979580">KCS</span> <span m="2980280">to</span> <span m="2980450">generate</span> <span m="2980705">an</span> <span m="2980960">authenticator.</span> <span m="2982390">So</span> <span m="2982600">the</span> <span m="2982730">client</span> <span m="2983120">can</span> <span m="2983260">make</span> <span m="2983440">these</span> <span m="2983640">up</span> <span m="2984050">any</span> <span m="2984210">time</span> <span m="2984400">it</span> <span m="2984490">wants.</span> </p>
<p><span m="2985340">So</span> <span m="2985440">the</span> <span m="2985550">general</span> <span m="2986360">plan</span> <span m="2986820">for</span> <span m="2987120">indicators</span> <span m="2987700">or</span> <span m="2987830">the</span> <span m="2987980">reason</span> <span m="2988250">to use</span> <span m="2988630">authenticators</span> <span m="2989100">is</span> <span m="2989220">roughly</span> <span m="2989630">to</span> <span m="2990030">prevent</span> <span m="2990490">replay</span> <span m="2990890">attack.</span> <span m="2991970">So</span> <span m="2992790">the</span> <span m="2993080">client,</span> <span m="2993740">or</span> <span m="2993850">at least</span> <span m="2994060">in</span> <span m="2994180">the</span> <span m="2994270">way</span> <span m="2994450">that the</span> <span m="2994670">Kerberos</span> <span m="2995090">4</span> <span m="2995470">developers</span> <span m="2995970">were</span> <span m="2996110">intending</span> <span m="2996540">it,</span> <span m="2997220">the</span> <span m="2997380">client,</span> <span m="2997840">every</span> <span m="2998050">time</span> <span m="2998250">it</span> <span m="2998370">sends</span> <span m="2998610">a</span> <span m="2998660">new</span> <span m="2998930">request</span> <span m="2999425">,</span> <span m="2999920">it</span> <span m="3000090">would</span> <span m="3000220">generate</span> <span m="3000590">a</span> <span m="3000640">new</span> <span m="3000860">authenticator</span> <span m="3002030">to</span> <span m="3002290">say</span> <span m="3002480">OK,</span> <span m="3002650">well,</span> <span m="3002980">this</span> <span m="3003150">is</span> <span m="3003350">a</span> <span m="3003420">new</span> <span m="3003580">request.</span> <span m="3004030">I'm</span> <span m="3004190">issuing</span> <span m="3004490">it</span> <span m="3004610">now.</span> <span m="3004790">It's</span> <span m="3004950">different</span> <span m="3005230">from</span> <span m="3005370">all the</span> <span m="3005510">previous</span> <span m="3005850">requests.</span> <span m="3006600">Go</span> <span m="3006770">do</span> <span m="3006920">it.</span> </p>
<p><span m="3007740">And</span> <span m="3008320">the</span> <span m="3008650">general</span> <span m="3008960">plan</span> <span m="3009240">was</span> <span m="3009490">that</span> <span m="3009940">the</span> <span m="3010270">server</span> <span m="3011110">would</span> <span m="3011380">keep</span> <span m="3011640">a</span> <span m="3011910">cache</span> <span m="3012270">of</span> <span m="3013220">these</span> <span m="3013480">authenticators</span> <span m="3014920">that</span> <span m="3015550">were</span> <span m="3016140">sent</span> <span m="3016620">within the</span> <span m="3016720">last</span> <span m="3017380">five</span> <span m="3017750">minutes</span> <span m="3018030">or</span> <span m="3018160">so.</span> <span m="3018830">So</span> <span m="3018930">if</span> <span m="3019010">it</span> <span m="3019080">ever</span> <span m="3019290">sees</span> <span m="3019440">a</span> <span m="3019550">duplicate</span> <span m="3019980">authenticator,</span> <span m="3020710">it</span> <span m="3020930">says</span> <span m="3021140">oh,</span> <span m="3021380">that's</span> <span m="3021470">a</span> <span m="3021530">replay</span> <span m="3021860">request.</span> <span m="3022310">I'm</span> <span m="3022410">going</span> <span m="3022560">to</span> <span m="3022630">reject</span> <span m="3023070">it.</span> <span m="3024130">And</span> <span m="3024930">if</span> <span m="3025120">it</span> <span m="3025260">sees</span> <span m="3025490">an</span> <span m="3025590">authenticator</span> <span m="3026150">that's</span> <span m="3026350">outside</span> <span m="3026780">of</span> <span m="3026850">a</span> <span m="3026930">five</span> <span m="3027180">minute</span> <span m="3027420">boundary,</span> <span m="3028380">it</span> <span m="3028480">doesn't</span> <span m="3028560">have</span> <span m="3028680">it</span> <span m="3028730">in</span> <span m="3028830">the</span> <span m="3028940">cache.</span> </p>
<p><span m="3029970">But</span> <span m="3031080">it</span> <span m="3031360">will</span> <span m="3031960">look</span> <span m="3032210">at</span> <span m="3032270">the</span> <span m="3032390">time</span> <span m="3032640">stamp</span> <span m="3032890">in the</span> <span m="3033030">authenticator</span> <span m="3033500">and</span> <span m="3033590">say,</span> <span m="3033790">well,</span> <span m="3034190">this is a</span> <span m="3034230">very</span> <span m="3034530">old</span> <span m="3034750">authenticator.</span> <span m="3035220">I'll</span> <span m="3035360">just</span> <span m="3035510">reject your</span> <span m="3035940">request</span> <span m="3036280">because</span> <span m="3036770">it's</span> <span m="3036960">too</span> <span m="3037130">old.</span> <span m="3037700">Send it</span> <span m="3038000">again</span> <span m="3038230">if</span> <span m="3038310">you</span> <span m="3038420">really</span> <span m="3038580">care.</span> </p>
<p><span m="3039700">So</span> <span m="3039820">that's</span> <span m="3039980">the</span> <span m="3040090">general</span> <span m="3040350">plan</span> <span m="3040550">for</span> <span m="3040770">indicators.</span> <span m="3042170">As</span> <span m="3042360">with</span> <span m="3043210">many</span> <span m="3043490">things</span> <span m="3043710">in</span> <span m="3043820">Kerberos,</span> <span m="3044310">they</span> <span m="3044410">were</span> <span m="3044630">slightly</span> <span m="3044980">broken--</span> <span m="3045540">in</span> <span m="3045680">Kerberos</span> <span m="3046110">4,</span> <span m="3046480">at least.</span> <span m="3047160">Because</span> <span m="3047920">this</span> <span m="3048200">authenticator</span> <span m="3048640">actually</span> <span m="3048890">says</span> <span m="3049080">nothing</span> <span m="3049370">about</span> <span m="3049550">the</span> <span m="3049620">message</span> <span m="3049910">you're</span> <span m="3050070">sending,</span> <span m="3050380">right?</span> <span m="3050490">It's</span> <span m="3050840">some</span> <span m="3051210">blob.</span> </p>
<p><span m="3052110">So</span> <span m="3052540">the</span> <span m="3052660">way</span> <span m="3052780">you</span> <span m="3052890">would</span> <span m="3052990">use</span> <span m="3053180">it,</span> <span m="3053260">for</span> <span m="3053370">example,</span> <span m="3053730">in this</span> <span m="3053870">mail</span> <span m="3054120">server</span> <span m="3054360">protocol</span> <span m="3055700">is--</span> <span m="3056300">or at</span> <span m="3056500">least</span> <span m="3056690">in</span> <span m="3057140">Kerberos</span> <span m="3057610">4--</span> <span m="3058210">well,</span> <span m="3058480">you</span> <span m="3058580">would</span> <span m="3058690">generate some</span> <span m="3059080">authenticator</span> <span m="3060050">and</span> <span m="3060270">you</span> <span m="3060390">would</span> <span m="3060530">be</span> <span m="3060840">to</span> <span m="3061140">take</span> <span m="3061320">the</span> <span m="3061400">authenticator</span> <span m="3062380">and</span> <span m="3062780">you</span> <span m="3062930">would</span> <span m="3063680">encrypt</span> <span m="3063935">it</span> <span m="3064190">with</span> <span m="3064430">also</span> <span m="3064740">KC</span> <span m="3065050">mail.</span> <span m="3066572">And</span> <span m="3067070">the</span> <span m="3067260">mail</span> <span m="3067480">server</span> <span m="3067790">would</span> <span m="3067970">keep</span> <span m="3068140">track</span> <span m="3068430">of,</span> <span m="3068550">well,</span> <span m="3069070">yeah,</span> <span m="3069190">you've</span> <span m="3069350">sent</span> <span m="3069520">this</span> <span m="3069660">[INAUDIBLE]</span> <span m="3069700">indicator</span> <span m="3070020">before.</span> <span m="3070490">No,</span> <span m="3070630">you</span> <span m="3070720">haven't.</span> </p>
<p><span m="3072220">But</span> <span m="3072340">there's</span> <span m="3072520">nothing</span> <span m="3072810">here</span> <span m="3073090">that</span> <span m="3073260">connects</span> <span m="3073690">the</span> <span m="3073910">authenticator</span> <span m="3074340">to</span> <span m="3074430">the</span> <span m="3074530">message</span> <span m="3074810">you are</span> <span m="3074990">sending.</span> <span m="3075770">So</span> <span m="3076370">for</span> <span m="3076470">the</span> <span m="3076560">first</span> <span m="3076830">message,</span> <span m="3077140">this</span> <span m="3077210">was</span> <span m="3077360">great.</span> <span m="3078070">But</span> <span m="3078220">when</span> <span m="3078350">you</span> <span m="3078420">send</span> <span m="3078590">a</span> <span m="3078650">second</span> <span m="3079070">message,</span> <span m="3079370">you're</span> <span m="3079500">going</span> <span m="3079590">to</span> <span m="3079640">generate</span> <span m="3079970">a</span> <span m="3080040">second</span> <span m="3080430">authenticator.</span> </p>
<p><span m="3081440">And</span> <span m="3081630">someone</span> <span m="3081860">on</span> <span m="3081950">the</span> <span m="3082040">network</span> <span m="3082400">can</span> <span m="3082510">say,</span> <span m="3082620">oh,</span> <span m="3082820">yeah,</span> <span m="3082980">I</span> <span m="3083100">got</span> <span m="3083290">your</span> <span m="3083330">new</span> <span m="3083530">authenticator.</span> <span m="3084310">I</span> <span m="3084420">can</span> <span m="3084550">take</span> <span m="3084720">your</span> <span m="3084860">new</span> <span m="3085140">authenticator</span> <span m="3085740">and</span> <span m="3086010">splice</span> <span m="3086390">in</span> <span m="3086570">the</span> <span m="3086840">old</span> <span m="3087190">delete</span> <span m="3087480">message.</span> <span m="3088130">So I'll</span> <span m="3088400">force</span> <span m="3088730">you</span> <span m="3088820">to</span> <span m="3088900">delete</span> <span m="3089190">the</span> <span m="3089270">fifth</span> <span m="3089530">message</span> <span m="3089880">twice,</span> <span m="3091180">even</span> <span m="3091340">though</span> <span m="3091680">the</span> <span m="3091810">second</span> <span m="3092190">command</span> <span m="3092570">meant</span> <span m="3092950">to</span> <span m="3093040">send</span> <span m="3093250">some</span> <span m="3093500">other</span> <span m="3093710">operation.</span> </p>
<p><span m="3095960">So</span> <span m="3096290">Kerberos</span> <span m="3096650">5</span> <span m="3096970">gets</span> <span m="3097220">this</span> <span m="3097840">right</span> <span m="3099020">where</span> <span m="3099450">you</span> <span m="3099580">actually</span> <span m="3100910">stick</span> <span m="3101270">something</span> <span m="3101590">in</span> <span m="3101660">the</span> <span m="3101720">authenticator</span> <span m="3102015">that</span> <span m="3102490">relates</span> <span m="3102860">to</span> <span m="3102950">the</span> <span m="3103060">command</span> <span m="3103315">you're</span> <span m="3103570">issuing.</span> <span m="3105100">You</span> <span m="3105230">could</span> <span m="3105350">do</span> <span m="3105440">this,</span> <span m="3105610">of</span> <span m="3105710">course,</span> <span m="3106120">but</span> <span m="3106430">sort</span> <span m="3106720">of</span> <span m="3107250">took</span> <span m="3107400">a</span> <span m="3107450">while</span> <span m="3107790">for</span> <span m="3108040">people</span> <span m="3108250">to</span> <span m="3108320">realize</span> <span m="3108670">that,</span> <span m="3108820">well,</span> <span m="3109130">here's</span> <span m="3109390">how</span> <span m="3109480">you</span> <span m="3109540">should</span> <span m="3109710">design</span> <span m="3109970">a protocol</span> <span m="3110290">correctly.</span> <span m="3112800">Make</span> <span m="3112920">sense?</span> <span m="3113540">Yeah,</span> <span m="3113730">other</span> <span m="3114222">question.</span> </p>
<p><span m="3114714">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="3118158">PROFESSOR: Ah,</span> <span m="3118650">so</span> <span m="3119110">the</span> <span m="3119370">client</span> <span m="3119850">gets</span> <span m="3120120">case</span> <span m="3120420">email</span> <span m="3121050">from</span> <span m="3121470">this</span> <span m="3121770">response.</span> <span m="3122340">So</span> <span m="3122890">the</span> <span m="3123080">client,</span> <span m="3123450">when it</span> <span m="3123590">wants</span> <span m="3123830">to</span> <span m="3123940">talk</span> <span m="3124110">to</span> <span m="3124180">the</span> <span m="3124270">mail</span> <span m="3124520">server,</span> <span m="3125180">it's</span> <span m="3125340">going</span> <span m="3125460">to</span> <span m="3125510">ask</span> <span m="3125840">the</span> <span m="3126000">TGS</span> <span m="3126650">for</span> <span m="3126840">a</span> <span m="3126940">ticket</span> <span m="3127230">for</span> <span m="3127420">the</span> <span m="3127510">mail</span> <span m="3127720">server.</span> <span m="3128240">And</span> <span m="3128450">here,</span> <span m="3129060">S</span> <span m="3129380">is</span> <span m="3129680">basically</span> <span m="3130140">this</span> <span m="3130360">mail</span> <span m="3130630">server's</span> <span m="3130960">principal</span> <span m="3131370">name.</span> </p>
<p><span m="3132500">So</span> <span m="3132560">when</span> <span m="3132690">it</span> <span m="3132800">comes</span> <span m="3133030">back,</span> <span m="3133660">this</span> <span m="3134010">says</span> <span m="3134990">S</span> <span m="3135290">equals</span> <span m="3135640">mail</span> <span m="3136370">and</span> <span m="3136850">this</span> <span m="3136970">server</span> <span m="3137610">key</span> <span m="3137940">S</span> <span m="3138200">is</span> <span m="3138360">equal</span> <span m="3138580">to</span> <span m="3138660">mail.</span> <span m="3139660">And</span> <span m="3139940">this</span> <span m="3140120">KCS</span> <span m="3140710">is</span> <span m="3140810">actually</span> <span m="3141530">KC</span> <span m="3142060">mail.</span> <span m="3145920">So this is</span> <span m="3146270">how</span> <span m="3146510">the</span> <span m="3146680">client</span> <span m="3147240">learns</span> <span m="3147670">of</span> <span m="3148180">the</span> <span m="3148260">shared</span> <span m="3148620">key</span> <span m="3148830">that</span> <span m="3148960">it</span> <span m="3149030">has</span> <span m="3149240">between</span> <span m="3149550">it</span> <span m="3149710">and</span> <span m="3149830">the</span> <span m="3149910">files</span> <span m="3150250">and</span> <span m="3150430">the</span> <span m="3150560">mail</span> <span m="3150770">server</span> <span m="3151020">here.</span> <span m="3152870">And</span> <span m="3153000">there's</span> <span m="3153160">a</span> <span m="3153310">copy</span> <span m="3153550">of</span> <span m="3153650">it</span> <span m="3153750">inside</span> <span m="3154130">the</span> <span m="3154210">ticket.</span> <span m="3154850">Question</span> <span m="3155130">back</span> <span m="3155270">there?</span> </p>
<p><span m="3155690">STUDENT: How does</span> <span m="3156124">the mail</span> <span m="3156558">server get</span> <span m="3156992">KC</span> <span m="3157426">mail?</span> </p>
<p><span m="3158294">PROFESSOR: Ah,</span> <span m="3158730">yes.</span> <span m="3158850">So</span> <span m="3159280">how</span> <span m="3159450">does</span> <span m="3159530">the</span> <span m="3159610">mail</span> <span m="3160010">server get</span> <span m="3160300">this</span> <span m="3160450">shared</span> <span m="3160690">key?</span> <span m="3160980">Like,</span> <span m="3161870">the</span> <span m="3162020">mail</span> <span m="3162240">server</span> <span m="3162350">might</span> <span m="3162490">have</span> <span m="3162610">never</span> <span m="3162830">heard</span> <span m="3163010">of</span> <span m="3163130">your</span> <span m="3163300">connection</span> <span m="3163680">before,</span> <span m="3164020">never</span> <span m="3164180">heard</span> <span m="3164330">of</span> <span m="3164390">you.</span> <span m="3164510">Where</span> <span m="3164710">does</span> <span m="3164880">KC</span> <span m="3165140">mail</span> <span m="3165330">come</span> <span m="3165510">from</span> <span m="3165850">on the</span> <span m="3166030">mail</span> <span m="3166240">server</span> <span m="3166480">side?</span> <span m="3167760">Yeah.</span> </p>
<p><span m="3169062">STUDENT: Isn't it</span> <span m="3169518">part of the</span> <span m="3169974">ticket?</span> </p>
<p><span m="3170430">PROFESSOR: Yeah, yeah,</span> <span m="3170890">so this is the</span> <span m="3170970">cool</span> <span m="3171180">thing.</span> <span m="3171440">You</span> <span m="3171530">send</span> <span m="3171740">this</span> <span m="3171950">ticket</span> <span m="3172210">over</span> <span m="3172420">to</span> <span m="3172520">the</span> <span m="3172600">mail</span> <span m="3172820">server</span> <span m="3173120">and</span> <span m="3173190">the</span> <span m="3173260">mail</span> <span m="3173430">server</span> <span m="3173640">knows</span> <span m="3173930">its</span> <span m="3174170">own</span> <span m="3174580">secret</span> <span m="3174970">key</span> <span m="3175130">K</span> <span m="3175380">mail.</span> <span m="3176180">And it</span> <span m="3176400">uses</span> <span m="3176660">that</span> <span m="3176820">to</span> <span m="3176890">decrypt</span> <span m="3177240">the</span> <span m="3177360">ticket</span> <span m="3178340">TC</span> <span m="3178620">mail</span> <span m="3179310">and</span> <span m="3180280">the</span> <span m="3180650">shared</span> <span m="3180980">key</span> <span m="3181180">is</span> <span m="3181280">in</span> <span m="3181460">there</span> <span m="3181700">along</span> <span m="3182180">with</span> <span m="3182350">the</span> <span m="3182430">name</span> <span m="3182810">of</span> <span m="3183060">whoever</span> <span m="3183430">it is</span> <span m="3183600">that</span> <span m="3183830">you're</span> <span m="3183940">sharing</span> <span m="3184400">this</span> <span m="3184540">key</span> <span m="3184690">with.</span> </p>
<p><span m="3185740">That's</span> <span m="3185900">how</span> <span m="3186030">it</span> <span m="3186140">finds</span> <span m="3186420">out,</span> <span m="3186700">oh,</span> <span m="3186940">I'm</span> <span m="3187110">talking</span> <span m="3187370">to</span> <span m="3187420">the</span> <span m="3187590">guy</span> <span m="3187780">and</span> <span m="3188350">that's</span> <span m="3188510">the</span> <span m="3188580">shared key</span> <span m="3188950">we</span> <span m="3189040">should</span> <span m="3189180">use.</span> <span m="3191010">Makes</span> <span m="3191410">sense?</span> <span m="3192930">All</span> <span m="3193010">right,</span> <span m="3194170">so</span> <span m="3194330">that's</span> <span m="3194520">the</span> <span m="3195060">sort</span> <span m="3195190">of</span> <span m="3195350">basic</span> <span m="3195760">plan</span> <span m="3195970">for</span> <span m="3196090">how</span> <span m="3196190">you</span> <span m="3196290">use</span> <span m="3196550">this</span> <span m="3197260">protocol</span> <span m="3197890">in</span> <span m="3198100">some</span> <span m="3198700">actual</span> <span m="3199050">application.</span> </p>
<p><span m="3200950">There's--</span> <span m="3203880">well,</span> <span m="3205150">there's</span> <span m="3205300">a</span> <span m="3205340">bunch</span> <span m="3205540">of</span> <span m="3205900">problems</span> <span m="3206360">with</span> <span m="3206500">this.</span> <span m="3207490">So</span> <span m="3207650">Kerberos</span> <span m="3208000">is--</span> <span m="3209310">it's</span> <span m="3209440">a</span> <span m="3209490">nice</span> <span m="3209700">paper</span> <span m="3209940">to</span> <span m="3210030">read</span> <span m="3210350">but</span> <span m="3210660">then</span> <span m="3210930">there's</span> <span m="3211150">all</span> <span m="3211290">these</span> <span m="3211480">problems</span> <span m="3212040">these</span> <span m="3212230">guys</span> <span m="3212430">didn't</span> <span m="3212570">know</span> <span m="3212730">about</span> <span m="3213010">30</span> <span m="3213190">years</span> <span m="3213400">ago.</span> <span m="3213620">So</span> <span m="3214380">it's</span> <span m="3214790">sort</span> <span m="3214960">of</span> <span m="3215040">inevitable</span> <span m="3215365">that</span> <span m="3215690">there's</span> <span m="3216170">problems</span> <span m="3216810">you</span> <span m="3216890">have</span> <span m="3217020">to</span> <span m="3217090">go</span> <span m="3217260">through.</span> <span m="3218240">So</span> <span m="3218370">one</span> <span m="3218570">interesting</span> <span m="3218910">problem</span> <span m="3219390">in</span> <span m="3220970">the</span> <span m="3221050">way</span> <span m="3221180">Kerberos</span> <span m="3221660">4</span> <span m="3223900">encrypted</span> <span m="3224470">and</span> <span m="3224590">authenticated</span> <span m="3225130">messages</span> <span m="3225820">for</span> <span m="3226050">applications</span> <span m="3226670">is</span> <span m="3226880">that</span> <span m="3227490">they</span> <span m="3227620">use</span> <span m="3227780">the</span> <span m="3227870">same</span> <span m="3228270">key</span> <span m="3229140">for</span> <span m="3229590">encrypting</span> <span m="3230500">messages</span> <span m="3231170">from</span> <span m="3231400">the</span> <span m="3231490">client</span> <span m="3231870">to</span> <span m="3231940">the</span> <span m="3232080">server</span> <span m="3232960">as</span> <span m="3233160">well</span> <span m="3233430">as</span> <span m="3233510">messages</span> <span m="3233940">from</span> <span m="3234100">the</span> <span m="3234190">server</span> <span m="3234510">back</span> <span m="3234830">to</span> <span m="3234920">the</span> <span m="3235040">client.</span> <span m="3236580">So</span> <span m="3237290">suppose</span> <span m="3237680">that</span> <span m="3237850">the</span> <span m="3237970">client</span> <span m="3238840">issues,</span> <span m="3240900">I</span> <span m="3241020">don't</span> <span m="3241100">know,</span> <span m="3241300">a</span> <span m="3241730">request</span> <span m="3242610">to</span> <span m="3242920">fetch</span> <span m="3243280">a</span> <span m="3243340">particular</span> <span m="3243730">message.</span> <span m="3244110">So</span> <span m="3244490">then I</span> <span m="3244900">say,</span> <span m="3245160">you</span> <span m="3245280">know,</span> <span m="3245790">fetch</span> <span m="3247000">the</span> <span m="3247150">message</span> <span m="3247500">7.</span> <span m="3248720">And</span> <span m="3248910">I</span> <span m="3249000">encrypt</span> <span m="3249360">this</span> <span m="3249700">thing</span> <span m="3250360">with</span> <span m="3250820">KC</span> <span m="3251250">mail.</span> <span m="3253720">That</span> <span m="3253840">seems</span> <span m="3254200">all</span> <span m="3254680">great.</span> </p>
<p><span m="3255170">The</span> <span m="3255360">mail</span> <span m="3255620">server</span> <span m="3255870">has</span> <span m="3256240">the</span> <span m="3256450">shared</span> <span m="3256890">key</span> <span m="3257450">that's</span> <span m="3257590">going</span> <span m="3257690">to</span> <span m="3257780">decrypt</span> <span m="3258180">this</span> <span m="3258350">message.</span> <span m="3259040">And</span> <span m="3259210">it's</span> <span m="3259280">going</span> <span m="3259450">to</span> <span m="3259530">send</span> <span m="3259740">me</span> <span m="3259830">back</span> <span m="3260200">the</span> <span m="3260300">body</span> <span m="3261170">of</span> <span m="3261460">this</span> <span m="3261930">email</span> <span m="3262260">message</span> <span m="3263690">also</span> <span m="3263970">encrypted</span> <span m="3264430">with</span> <span m="3264670">KC</span> <span m="3265090">mail.</span> <span m="3266910">Does</span> <span m="3267300">anyone</span> <span m="3268020">see</span> <span m="3268100">a</span> <span m="3268160">problem</span> <span m="3268730">with</span> <span m="3268900">this?</span> </p>
<p><span m="3269500">Why</span> <span m="3269770">is</span> <span m="3269870">this</span> <span m="3270460">is</span> <span m="3270510">potentially</span> <span m="3270770">a</span> <span m="3270810">bad</span> <span m="3271060">thing</span> <span m="3271590">to</span> <span m="3271710">do?</span> <span m="3273180">Anyone</span> <span m="3273570">else?</span> <span m="3274870">Sure.</span> </p>
<p><span m="3276421">STUDENT: So</span> <span m="3276830">there's a</span> <span m="3277190">chapter</span> <span m="3277658">[INAUDIBLE]</span> <span m="3279530">they can</span> <span m="3279998">make</span> <span m="3280466">[INAUDIBLE]</span> <span m="3280934">look like some</span> <span m="3281402">other things</span> <span m="3281870">they want</span> <span m="3282338">[INAUDIBLE]</span> </p>
<p><span m="3282806">PROFESSOR: Yes,</span> <span m="3283274">so those are actually</span> <span m="3283750">worrisome</span> <span m="3284180">because</span> <span m="3284880">I</span> <span m="3285030">could</span> <span m="3285220">send</span> <span m="3285430">you any</span> <span m="3285600">email</span> <span m="3285850">message</span> <span m="3286160">I</span> <span m="3286200">want.</span> <span m="3286500">So suppose</span> <span m="3286800">I</span> <span m="3286900">really</span> <span m="3287160">want</span> <span m="3287310">to</span> <span m="3287370">delete</span> <span m="3287710">some</span> <span m="3287880">message</span> <span m="3288360">that</span> <span m="3288610">is</span> <span m="3288770">sitting</span> <span m="3289120">here</span> <span m="3289290">in</span> <span m="3289420">your inbox and I</span> <span m="3289800">don't</span> <span m="3289940">want</span> <span m="3290170">you to</span> <span m="3290270">read</span> <span m="3290450">it.</span> <span m="3291250">I</span> <span m="3291340">know</span> <span m="3291490">it's</span> <span m="3291580">maybe</span> <span m="3291780">message,</span> <span m="3292160">I don't</span> <span m="3292270">know,</span> <span m="3292490">23.</span> </p>
<p><span m="3293640">So</span> <span m="3293720">I'm</span> <span m="3293790">going</span> <span m="3293900">to</span> <span m="3293940">send</span> <span m="3294150">you an</span> <span m="3294260">email</span> <span m="3294550">that</span> <span m="3294660">says,</span> <span m="3294880">delete</span> <span m="3295170">23.</span> <span m="3296260">You're</span> <span m="3296360">going</span> <span m="3296460">to</span> <span m="3296570">read</span> <span m="3296780">it.</span> <span m="3296930">You're</span> <span m="3297040">going</span> <span m="3297130">to</span> <span m="3297180">fetch</span> <span m="3297500">it</span> <span m="3297730">and</span> <span m="3298300">a</span> <span m="3298360">response</span> <span m="3298800">is</span> <span m="3298910">going</span> <span m="3299030">to</span> <span m="3299080">come</span> <span m="3299300">from</span> <span m="3299460">the</span> <span m="3299530">mail</span> <span m="3299740">server</span> <span m="3299980">saying,</span> <span m="3300100">delete</span> <span m="3300440">23</span> <span m="3301250">encrypted</span> <span m="3301710">with</span> <span m="3301810">this</span> <span m="3301980">key.</span> <span m="3303170">And</span> <span m="3303810">so</span> <span m="3304010">far,</span> <span m="3304230">it's not being</span> <span m="3304620">sent to</span> <span m="3304770">the</span> <span m="3304850">mail</span> <span m="3305070">server.</span> </p>
<p><span m="3305210">But</span> <span m="3305330">if</span> <span m="3305440">I</span> <span m="3305780">look</span> <span m="3306040">at</span> <span m="3306090">the</span> <span m="3306160">network</span> <span m="3306430">at</span> <span m="3306500">the</span> <span m="3306560">right</span> <span m="3306730">time</span> <span m="3306960">and</span> <span m="3307060">capture</span> <span m="3307420">this</span> <span m="3307620">packet,</span> <span m="3308430">I</span> <span m="3308530">can</span> <span m="3308700">send</span> <span m="3308850">the</span> <span m="3308950">packet</span> <span m="3309310">back</span> <span m="3309540">to</span> <span m="3309620">the</span> <span m="3309700">mail</span> <span m="3309920">server.</span> <span m="3310690">It would</span> <span m="3310900">look</span> <span m="3311120">like</span> <span m="3311510">a</span> <span m="3311580">message</span> <span m="3311910">saying delete</span> <span m="3312300">23</span> <span m="3313190">encrypted</span> <span m="3313900">with</span> <span m="3314170">the</span> <span m="3314250">right</span> <span m="3314500">key.</span> <span m="3315600">And</span> <span m="3315750">the</span> <span m="3315820">mail server</span> <span m="3316040">will</span> <span m="3316160">say, oh yeah,</span> <span m="3316620">sure.</span> </p>
<p><span m="3316900">You're</span> <span m="3317050">trying</span> <span m="3317230">to</span> <span m="3317320">delete</span> <span m="3317420">this</span> <span m="3317640">message.</span> <span m="3317960">I'll</span> <span m="3318280">do</span> <span m="3318600">it.</span> <span m="3319190">So</span> <span m="3319300">this is</span> <span m="3319380">a</span> <span m="3319650">bit</span> <span m="3319890">of</span> <span m="3319950">a</span> <span m="3320020">problem</span> <span m="3320400">because</span> <span m="3321620">we</span> <span m="3321970">are</span> <span m="3322690">allowing</span> <span m="3322975">an</span> <span m="3323260">adversary</span> <span m="3323950">to</span> <span m="3324210">confuse</span> <span m="3324800">the</span> <span m="3324870">mail</span> <span m="3325070">server</span> <span m="3325340">into</span> <span m="3325610">whether our</span> <span m="3325940">message</span> <span m="3326740">was</span> <span m="3326970">generated</span> <span m="3327420">by</span> <span m="3327630">it</span> <span m="3327860">or</span> <span m="3328120">was</span> <span m="3328280">sent</span> <span m="3328570">to</span> <span m="3328730">it</span> <span m="3329050">in</span> <span m="3329140">the</span> <span m="3329220">first</span> <span m="3329460">place.</span> <span m="3330592">So</span> <span m="3330950">this is</span> <span m="3331390">quite</span> <span m="3331740">troublesome.</span> </p>
<p><span m="3332220">So</span> <span m="3332300">these</span> <span m="3332470">are</span> <span m="3332680">what's</span> <span m="3332920">typically</span> <span m="3333260">called</span> <span m="3333520">in</span> <span m="3333720">cryptography</span> <span m="3333995">and</span> <span m="3334270">protocol</span> <span m="3334620">literature</span> <span m="3335080">as</span> <span m="3335270">reflection</span> <span m="3335830">attacks.</span> <span m="3338000">So</span> <span m="3338100">you</span> <span m="3338180">have</span> <span m="3338330">any</span> <span m="3338450">suggestions</span> <span m="3338890">for</span> <span m="3338980">how</span> <span m="3339150">we</span> <span m="3339240">can</span> <span m="3339370">avoid</span> <span m="3339670">this</span> <span m="3339920">problem?</span> <span m="3340260">Yeah.</span> </p>
<p><span m="3340660">STUDENT: Can't you</span> <span m="3341125">just include a</span> <span m="3341590">header saying</span> <span m="3342055">its</span> <span m="3342520">origins?</span> </p>
<p><span m="3342985">PROFESSOR: Yeah,</span> <span m="3343450">so</span> <span m="3343920">typically,</span> <span m="3344340">you</span> <span m="3344440">want</span> <span m="3344590">to</span> <span m="3344810">have</span> <span m="3345120">some</span> <span m="3345340">very</span> <span m="3345700">unambiguous</span> <span m="3346200">way</span> <span m="3346370">to</span> <span m="3346480">state</span> <span m="3346760">what's</span> <span m="3346950">going</span> <span m="3347180">on.</span> <span m="3347900">One</span> <span m="3348100">way</span> <span m="3348340">is</span> <span m="3348560">to</span> <span m="3348800">have</span> <span m="3349140">a</span> <span m="3349190">header</span> <span m="3349530">in</span> <span m="3349640">every</span> <span m="3349840">message</span> <span m="3350170">that</span> <span m="3350370">says,</span> <span m="3350800">this</span> <span m="3350960">is</span> <span m="3351100">going</span> <span m="3351320">from</span> <span m="3351550">the</span> <span m="3351640">client</span> <span m="3351900">to</span> <span m="3351960">the</span> <span m="3352060">server or</span> <span m="3352400">from</span> <span m="3352550">server</span> <span m="3352780">to</span> <span m="3352890">the</span> <span m="3352960">client.</span> <span m="3353720">And</span> <span m="3353960">even</span> <span m="3354160">better</span> <span m="3354460">plan</span> <span m="3354800">in</span> <span m="3355040">practice</span> <span m="3355500">turns</span> <span m="3355720">out</span> <span m="3355860">to</span> <span m="3355930">be</span> <span m="3356040">just</span> <span m="3356400">use</span> <span m="3356670">two</span> <span m="3356780">separate</span> <span m="3357160">keys.</span> </p>
<p><span m="3357520">Because</span> <span m="3358170">you</span> <span m="3358300">might</span> <span m="3358490">want</span> <span m="3358650">to</span> <span m="3358690">have</span> <span m="3358950">a</span> <span m="3359050">long</span> <span m="3359350">stream</span> <span m="3359780">of</span> <span m="3359900">data</span> <span m="3360170">where</span> <span m="3360290">you</span> <span m="3360350">don't</span> <span m="3360520">really</span> <span m="3360670">have</span> <span m="3360840">space</span> <span m="3361220">for</span> <span m="3361360">this</span> <span m="3361480">header</span> <span m="3361730">bit.</span> <span m="3362860">So</span> <span m="3363030">instead,</span> <span m="3363800">what</span> <span m="3364030">Kerberos</span> <span m="3364410">5</span> <span m="3364750">does</span> <span m="3365130">is</span> <span m="3365360">every</span> <span m="3365600">time</span> <span m="3365790">you</span> <span m="3365880">establish</span> <span m="3366380">a</span> <span m="3366450">connection</span> <span m="3366870">with</span> <span m="3367020">some</span> <span m="3367170">service</span> <span m="3367515">,</span> <span m="3367860">you</span> <span m="3368030">actually</span> <span m="3368240">negotiate</span> <span m="3368830">two</span> <span m="3369010">keys</span> <span m="3369230">instead</span> <span m="3369480">of</span> <span m="3369560">just</span> <span m="3369770">one</span> <span m="3369960">key.</span> <span m="3370690">And</span> <span m="3371090">the</span> <span m="3371160">first</span> <span m="3371480">key</span> <span m="3371950">is</span> <span m="3372050">going</span> <span m="3372150">to</span> <span m="3372190">be</span> <span m="3372280">used</span> <span m="3372520">for</span> <span m="3372840">encrypting</span> <span m="3373330">stuff</span> <span m="3373530">from</span> <span m="3373650">client to</span> <span m="3374000">server</span> <span m="3374270">and other</span> <span m="3374640">from</span> <span m="3374860">server</span> <span m="3375170">back</span> <span m="3375440">to</span> <span m="3375530">the</span> <span m="3376220">client.</span> <span m="3376780">So</span> <span m="3376880">that</span> <span m="3376980">seems</span> <span m="3377030">like</span> <span m="3377180">a</span> <span m="3377430">much</span> <span m="3377700">better</span> <span m="3377940">way</span> <span m="3378040">to</span> <span m="3378150">do</span> <span m="3378260">it</span> <span m="3378970">in</span> <span m="3379110">practice.</span> </p>
<p><span m="3381010">Make</span> <span m="3381480">sense?</span> <span m="3384220">All</span> <span m="3384280">right,</span> <span m="3385350">so</span> <span m="3388260">I</span> <span m="3388340">guess</span> <span m="3388550">let's</span> <span m="3389910">now</span> <span m="3390080">talk</span> <span m="3390360">a</span> <span m="3390410">little</span> <span m="3390610">bit</span> <span m="3390750">about</span> <span m="3391550">what</span> <span m="3391790">happens</span> <span m="3392370">with</span> <span m="3392810">KDC.</span> <span m="3393780">So</span> <span m="3394510">the</span> <span m="3395080">Kerberos</span> <span m="3395380">server</span> <span m="3396690">is</span> <span m="3396830">pretty</span> <span m="3396990">important</span> <span m="3397420">to</span> <span m="3397490">the</span> <span m="3397610">system.</span> </p>
<p><span m="3398870">But</span> <span m="3400260">what</span> <span m="3400390">happens</span> <span m="3400640">if</span> <span m="3400710">this</span> <span m="3400880">KDC</span> <span m="3401330">goes</span> <span m="3401550">down?</span> <span m="3402000">So</span> <span m="3402620">how</span> <span m="3402780">bad</span> <span m="3403030">is</span> <span m="3403150">it</span> <span m="3403310">to</span> <span m="3403410">our</span> <span m="3404060">system.</span> <span m="3404360">Like,</span> <span m="3404480">in</span> <span m="3404750">Athena,</span> <span m="3405200">suppose</span> <span m="3405570">if</span> <span m="3405710">KDC</span> <span m="3406140">crashes,</span> <span m="3407730">does</span> <span m="3408190">this</span> <span m="3408420">affect your</span> <span m="3408740">life?</span> <span m="3409330">Well,</span> <span m="3409490">if you</span> <span m="3409560">use Athena.</span> </p>
<p><span m="3410514">STUDENT:  Is that why you</span> <span m="3410958">can't log in?</span> </p>
<p><span m="3411846">PROFESSOR: Yeah,</span> <span m="3412290">so you</span> <span m="3412400">can't</span> <span m="3412580">log</span> <span m="3412945">in.</span> <span m="3413970">I</span> <span m="3414080">guess</span> <span m="3414250">the</span> <span m="3414320">other</span> <span m="3414520">thing</span> <span m="3414700">is</span> <span m="3414800">you</span> <span m="3414950">also</span> <span m="3415230">can't</span> <span m="3415470">get</span> <span m="3415740">tickets</span> <span m="3416030">to</span> <span m="3416130">new</span> <span m="3416340">things</span> <span m="3416630">as</span> <span m="3416730">well.</span> <span m="3418010">But</span> <span m="3418470">kind</span> <span m="3418640">of</span> <span m="3418700">the</span> <span m="3418780">cool</span> <span m="3418970">thing</span> <span m="3419120">is</span> <span m="3419240">that</span> <span m="3419300">the</span> <span m="3419400">KDC</span> <span m="3419830">is</span> <span m="3420260">largely</span> <span m="3420780">off</span> <span m="3421060">the</span> <span m="3421170">critical</span> <span m="3421540">path</span> <span m="3421850">for</span> <span m="3422020">existing</span> <span m="3422420">connection.</span> <span m="3422820">So</span> <span m="3422960">no</span> <span m="3423300">data</span> <span m="3423560">passes</span> <span m="3423850">through</span> <span m="3424140">the</span> <span m="3424310">KDC.</span> </p>
<p><span m="3424870">And</span> <span m="3425010">if</span> <span m="3425080">you</span> <span m="3425160">already</span> <span m="3425400">have</span> <span m="3425540">a</span> <span m="3425640">ticket</span> <span m="3425870">for</span> <span m="3425970">something,</span> <span m="3426270">you can</span> <span m="3426410">keep</span> <span m="3426630">using</span> <span m="3427010">it</span> <span m="3427140">and</span> <span m="3427270">keep</span> <span m="3427470">logging</span> <span m="3427800">into</span> <span m="3427970">some</span> <span m="3428110">service</span> <span m="3428890">over</span> <span m="3429090">the</span> <span m="3429200">network.</span> <span m="3430220">So</span> <span m="3430280">in</span> <span m="3430350">that</span> <span m="3430510">way,</span> <span m="3430700">it's</span> <span m="3430820">actually</span> <span m="3431210">quite</span> <span m="3431480">nicely</span> <span m="3431780">cacheable.</span> <span m="3433370">I</span> <span m="3433500">guess</span> <span m="3433630">the</span> <span m="3433700">other</span> <span m="3433900">nice</span> <span m="3434120">thing</span> <span m="3434290">these</span> <span m="3434480">guys</span> <span m="3434680">do</span> <span m="3434840">is</span> <span m="3434960">they</span> <span m="3435020">actually</span> <span m="3435900">have</span> <span m="3436180">a way</span> <span m="3436570">of</span> <span m="3436870">replicating</span> <span m="3437430">the</span> <span m="3437530">KDC</span> <span m="3437940">potentially.</span> </p>
<p><span m="3438880">So</span> <span m="3439040">they</span> <span m="3439160">have</span> <span m="3439570">one</span> <span m="3440020">master</span> <span m="3440480">Kerberos</span> <span m="3440880">server</span> <span m="3441140">that</span> <span m="3441310">stores</span> <span m="3441800">the</span> <span m="3443140">sort</span> <span m="3443260">of</span> <span m="3443840">primary</span> <span m="3444370">copy</span> <span m="3444670">of</span> <span m="3444790">this</span> <span m="3444910">whole</span> <span m="3445150">database.</span> <span m="3445800">And</span> <span m="3446075">then</span> <span m="3446350">they can</span> <span m="3446430">have</span> <span m="3446630">read</span> <span m="3446880">only</span> <span m="3447220">replicas</span> <span m="3448210">that</span> <span m="3449220">hold</span> <span m="3449530">a</span> <span m="3449610">copy</span> <span m="3449890">of</span> <span m="3450000">this</span> <span m="3450130">database.</span> <span m="3450560">They</span> <span m="3450640">don't</span> <span m="3450790">allow</span> <span m="3451030">any</span> <span m="3451230">updates</span> <span m="3451730">to</span> <span m="3451830">this</span> <span m="3452080">like</span> <span m="3452270">registering</span> <span m="3452740">users</span> <span m="3453400">or</span> <span m="3453980">updating</span> <span m="3454490">keys.</span> </p>
<p><span m="3455270">But</span> <span m="3455450">they</span> <span m="3455560">do</span> <span m="3455880">allow</span> <span m="3456220">responding</span> <span m="3456890">to</span> <span m="3457060">login</span> <span m="3457540">and</span> <span m="3457670">TJS</span> <span m="3458090">requests.</span> <span m="3459600">So</span> <span m="3459630">this</span> <span m="3459800">way,</span> <span m="3460290">these</span> <span m="3460560">backup</span> <span m="3461050">clones</span> <span m="3461335">of</span> <span m="3461620">this</span> <span m="3461800">Kerberos</span> <span m="3462190">database</span> <span m="3463030">allow</span> <span m="3463450">you</span> <span m="3463600">to</span> <span m="3463710">keep</span> <span m="3464040">logging</span> <span m="3464440">in</span> <span m="3464690">and</span> <span m="3464820">keep</span> <span m="3465050">talking</span> <span m="3465360">to</span> <span m="3465450">services</span> <span m="3465860">even</span> <span m="3466040">if</span> <span m="3466110">the</span> <span m="3466180">master</span> <span m="3466540">crashed</span> <span m="3467940">and</span> <span m="3469110">hopefully</span> <span m="3469850">make</span> <span m="3470010">it</span> <span m="3470130">possible</span> <span m="3470450">to</span> <span m="3470860">upgrade</span> <span m="3471240">to</span> <span m="3471300">master</span> <span m="3471640">without</span> <span m="3473130">breaking</span> <span m="3473590">everything</span> <span m="3474680">at</span> <span m="3474770">the</span> <span m="3474860">same</span> <span m="3475030">time.</span> <span m="3476060">Makes</span> <span m="3476170">sense?</span> <span m="3476640">Any questions?</span> <span m="3476900">Yeah.</span> </p>
<p><span m="3477200">STUDENT: How</span> <span m="3477500">hard is it</span> <span m="3477930">to</span> <span m="3478360">compromise</span> <span m="3478655">the</span> <span m="3478950">KDC</span> <span m="3479340">server</span> <span m="3479828">and</span> <span m="3480316">[INAUDIBLE]?</span> </p>
<p><span m="3481292">PROFESSOR: Well, yes,</span> <span m="3481780">this</span> <span m="3482060">is a</span> <span m="3482340">huge</span> <span m="3483410">sort</span> <span m="3483560">of</span> <span m="3483760">target</span> <span m="3484210">for</span> <span m="3484450">any</span> <span m="3484760">system</span> <span m="3485080">that</span> <span m="3485170">runs</span> <span m="3485460">Kerberos.</span> <span m="3485960">Because</span> <span m="3486290">if</span> <span m="3486370">you</span> <span m="3486460">compromise</span> <span m="3486920">this</span> <span m="3487110">guy,</span> <span m="3487310">you're</span> <span m="3488030">in</span> <span m="3488320">complete</span> <span m="3488600">control</span> <span m="3488940">of the</span> <span m="3489040">system.</span> <span m="3489350">You</span> <span m="3489510">can</span> <span m="3490220">mint</span> <span m="3490910">tickets</span> <span m="3491400">for</span> <span m="3491660">any</span> <span m="3491870">service</span> <span m="3492180">you</span> <span m="3492280">want,</span> <span m="3492620">pretending</span> <span m="3493000">to</span> <span m="3493090">be</span> <span m="3493350">client</span> <span m="3493790">you</span> <span m="3493900">want.</span> </p>
<p><span m="3495100">So this</span> <span m="3495436">is</span> <span m="3496110">pretty</span> <span m="3496280">bad.</span> <span m="3496600">So</span> <span m="3496680">you</span> <span m="3496780">really</span> <span m="3496940">want</span> <span m="3497080">to</span> <span m="3497140">keep</span> <span m="3497310">this</span> <span m="3497470">guy</span> <span m="3497600">secure.</span> <span m="3498870">Now,</span> <span m="3499100">how hard</span> <span m="3499410">is it to</span> <span m="3499570">compromise?</span> <span m="3500070">Well,</span> <span m="3500170">ideally,</span> <span m="3500540">it's</span> <span m="3500640">hard.</span> </p>
<p><span m="3501600">And</span> <span m="3503826">I</span> <span m="3504280">don't</span> <span m="3504540">know</span> <span m="3504820">of any</span> <span m="3505010">instances</span> <span m="3505450">where</span> <span m="3505710">the</span> <span m="3506050">MIT</span> <span m="3506670">KDC</span> <span m="3507020">has</span> <span m="3507210">actually</span> <span m="3507590">been</span> <span m="3508130">compromised</span> <span m="3508850">in,</span> <span m="3509290">I</span> <span m="3509410">guess,</span> <span m="3509890">20</span> <span m="3510130">years</span> <span m="3510390">or</span> <span m="3510490">so.</span> <span m="3511700">So</span> <span m="3512290">it's ,</span> <span m="3512700">I</span> <span m="3513030">think,</span> <span m="3513120">possible</span> <span m="3513580">to</span> <span m="3513680">run</span> <span m="3513900">this</span> <span m="3514130">reasonably</span> <span m="3514490">security.</span> <span m="3514910">But</span> <span m="3515590">presumably,</span> <span m="3515970">the</span> <span m="3516040">things</span> <span m="3516220">you</span> <span m="3516310">would</span> <span m="3516420">worry</span> <span m="3516710">about</span> <span m="3517070">are</span> <span m="3518520">just</span> <span m="3518940">software</span> <span m="3519430">implementation</span> <span m="3520020">security</span> <span m="3520440">of</span> <span m="3520640">the</span> <span m="3520830">things</span> <span m="3521110">that's</span> <span m="3521310">listening</span> <span m="3521620">on</span> <span m="3521750">these</span> <span m="3522020">two</span> <span m="3522310">services,</span> <span m="3522850">right?</span> </p>
<p><span m="3523010">So</span> <span m="3523080">if</span> <span m="3523180">there's</span> <span m="3523380">buffer</span> <span m="3523650">overflows</span> <span m="3524030">on</span> <span m="3524110">this</span> <span m="3524280">guys</span> <span m="3524990">or</span> <span m="3525280">some</span> <span m="3525510">other</span> <span m="3525760">vulnerability</span> <span m="3526370">like</span> <span m="3526590">that,</span> <span m="3527550">that's</span> <span m="3527810">really</span> <span m="3528040">bad.</span> <span m="3528850">Or</span> <span m="3529180">if</span> <span m="3529500">there's</span> <span m="3529790">an</span> <span m="3529970">SSH</span> <span m="3530290">server</span> <span m="3530470">running</span> <span m="3530820">on</span> <span m="3530890">the</span> <span m="3530980">Kerberos</span> <span m="3531610">KDC</span> <span m="3532270">and</span> <span m="3532630">someone</span> <span m="3532930">guesses</span> <span m="3533380">the</span> <span m="3533470">root</span> <span m="3533670">password</span> <span m="3534110">on</span> <span m="3534240">that</span> <span m="3534350">SSH</span> <span m="3534680">server,</span> <span m="3535430">they'll</span> <span m="3535570">just</span> <span m="3535740">log</span> <span m="3535970">in</span> <span m="3536100">and</span> <span m="3536250">copy</span> <span m="3536510">the</span> <span m="3536600">database</span> <span m="3537010">over.</span> <span m="3537940">So</span> <span m="3538030">I</span> <span m="3538100">think</span> <span m="3538300">you</span> <span m="3538390">really</span> <span m="3538570">want</span> <span m="3538700">to</span> <span m="3538740">be</span> <span m="3538820">careful</span> <span m="3539400">in</span> <span m="3539530">minimizing</span> <span m="3540110">the</span> <span m="3540210">attack</span> <span m="3540470">surface</span> <span m="3540750">there.</span> </p>
<p><span m="3541040">Maybe</span> <span m="3541650">be</span> <span m="3541770">very</span> <span m="3541960">careful</span> <span m="3542270">writing</span> <span m="3542540">the</span> <span m="3542640">KDC</span> <span m="3543070">code.</span> <span m="3544040">Don't</span> <span m="3544240">allow</span> <span m="3544470">you</span> <span m="3544680">to</span> <span m="3544750">log</span> <span m="3544980">into it</span> <span m="3545220">directly.</span> <span m="3546300">Maybe</span> <span m="3546490">you</span> <span m="3546700">even</span> <span m="3546910">worry</span> <span m="3547110">about</span> <span m="3547290">physical</span> <span m="3547600">security,</span> <span m="3548550">et</span> <span m="3548968">cetera.</span> <span m="3551060">Absolutely.</span> </p>
<p><span m="3551690">Luckily,</span> <span m="3552140">this</span> <span m="3552280">is</span> <span m="3552360">actually</span> <span m="3552700">one</span> <span m="3553290">of</span> <span m="3553390">the</span> <span m="3553600">few</span> <span m="3553830">places</span> <span m="3554180">where</span> <span m="3554360">you</span> <span m="3554410">have</span> <span m="3554580">to</span> <span m="3554680">be</span> <span m="3554840">super</span> <span m="3555180">paranoid,</span> <span m="3555650">though.</span> <span m="3556210">Right,</span> <span m="3556350">so</span> <span m="3556470">the</span> <span m="3556570">servers,</span> <span m="3557620">unlike</span> <span m="3558050">in</span> <span m="3558300">some</span> <span m="3558480">other</span> <span m="3558700">systems</span> <span m="3559020">that</span> <span m="3559160">do</span> <span m="3559320">trust all</span> <span m="3559760">the</span> <span m="3559820">machines,</span> <span m="3560490">the</span> <span m="3560600">servers</span> <span m="3560940">are</span> <span m="3560980">actually</span> <span m="3561220">not</span> <span m="3561630">that</span> <span m="3561790">important.</span> <span m="3562770">They</span> <span m="3562860">of course</span> <span m="3563130">store</span> <span m="3563280">some</span> <span m="3563430">data.</span> </p>
<p><span m="3564410">But</span> <span m="3564700">if</span> <span m="3564830">someone</span> <span m="3565090">compromises</span> <span m="3565700">a</span> <span m="3565770">mail</span> <span m="3566020">server</span> <span m="3566420">or a</span> <span m="3566520">print</span> <span m="3566770">server,</span> <span m="3568540">you</span> <span m="3568660">can</span> <span m="3568760">probably</span> <span m="3569040">recover</span> <span m="3569360">reasonably</span> <span m="3569740">well.</span> <span m="3570902">So</span> <span m="3571310">actually,</span> <span m="3571510">here's</span> <span m="3571910">an interesting</span> <span m="3571970">question.</span> <span m="3572170">Like,</span> <span m="3572280">suppose</span> <span m="3572550">someone</span> <span m="3572770">compromised</span> <span m="3573260">the</span> <span m="3573350">mail</span> <span m="3573580">server.</span> </p>
<p><span m="3574210">What</span> <span m="3574460">should you</span> <span m="3574730">do</span> <span m="3575380">to</span> <span m="3575550">recover</span> <span m="3575890">from</span> <span m="3576050">this</span> <span m="3576130">attack?</span> <span m="3577490">Like, if</span> <span m="3577610">someone</span> <span m="3577830">stole your</span> <span m="3578170">mail,</span> <span m="3578530">I</span> <span m="3578600">guess</span> <span m="3578750">that's</span> <span m="3578900">kind of</span> <span m="3579010">unfortunate.</span> <span m="3579290">But</span> <span m="3579550">what</span> <span m="3579650">do</span> <span m="3579680">you</span> <span m="3579970">do</span> <span m="3580080">so</span> <span m="3580720">that</span> <span m="3581160">the</span> <span m="3581260">attacker</span> <span m="3581810">doesn't</span> <span m="3582110">keep</span> <span m="3582350">accessing</span> <span m="3582710">your</span> <span m="3582830">mail</span> <span m="3583040">in</span> <span m="3583090">the</span> <span m="3583160">future?</span> <span m="3584150">Yeah.</span> </p>
<p><span m="3584660">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="3585980">PROFESSOR: Yeah,</span> <span m="3586430">so in</span> <span m="3586880">Kerberos,</span> <span m="3587290">there's</span> <span m="3587510">no</span> <span m="3588120">sort</span> <span m="3588260">of</span> <span m="3588340">revoke</span> <span m="3588850">operation.</span> <span m="3589830">But</span> <span m="3590290">what</span> <span m="3590440">you</span> <span m="3590590">could</span> <span m="3590810">do</span> <span m="3590910">is</span> <span m="3591030">you</span> <span m="3591120">could</span> <span m="3591350">change</span> <span m="3592030">generate</span> <span m="3592310">a</span> <span m="3592590">new</span> <span m="3592820">key</span> <span m="3593030">for</span> <span m="3593160">the</span> <span m="3593240">mail</span> <span m="3593440">server</span> <span m="3593690">and</span> <span m="3593810">stick</span> <span m="3594030">it</span> <span m="3594100">in</span> <span m="3594190">this</span> <span m="3594320">database</span> <span m="3594710">over</span> <span m="3594890">here.</span> <span m="3596000">And</span> <span m="3596520">then</span> <span m="3596750">you</span> <span m="3597250">install</span> <span m="3597590">a</span> <span m="3597630">new</span> <span m="3597790">mail</span> <span m="3597990">server,</span> <span m="3598210">give</span> <span m="3598360">it</span> <span m="3598420">the</span> <span m="3598490">new</span> <span m="3598750">key,</span> <span m="3599490">and</span> <span m="3599680">then</span> <span m="3600050">some</span> <span m="3600250">attacker</span> <span m="3600610">that</span> <span m="3600650">has</span> <span m="3601060">the</span> <span m="3601220">mail</span> <span m="3601440">server's</span> <span m="3601700">old</span> <span m="3602050">key</span> <span m="3602880">has</span> <span m="3603300">no</span> <span m="3603680">way</span> <span m="3603960">of--</span> <span m="3604820">like,</span> <span m="3604980">no</span> <span m="3605150">influence</span> <span m="3605490">at</span> <span m="3605550">all</span> <span m="3605760">on</span> <span m="3605820">this</span> <span m="3605920">mail</span> <span m="3606200">server</span> <span m="3606380">now,</span> <span m="3606740">right?</span> <span m="3608370">On the</span> <span m="3608500">other</span> <span m="3608660">hand,</span> <span m="3609080">suppose</span> <span m="3609250">you</span> <span m="3609340">didn't</span> <span m="3609710">change</span> <span m="3609960">the</span> <span m="3610040">mail</span> <span m="3610260">server's</span> <span m="3610750">key,</span> <span m="3611190">K</span> <span m="3611390">mail.</span> <span m="3613220">How</span> <span m="3613480">that</span> <span m="3613700">is</span> <span m="3613830">that?</span> </p>
<p><span m="3614726">STUDENT: [INAUDIBLE]</span> <span m="3615174">fine.</span> </p>
<p><span m="3617870">PROFESSOR: OK,</span> <span m="3618200">so</span> <span m="3618400">suppose</span> <span m="3618680">you</span> <span m="3618780">didn't</span> <span m="3618990">change</span> <span m="3619200">the</span> <span m="3619280">mail.</span> <span m="3619500">You,</span> <span m="3619660">like,</span> <span m="3619820">install the</span> <span m="3620300">new</span> <span m="3620420">mail</span> <span m="3620620">server.</span> <span m="3620990">You</span> <span m="3621090">patch</span> <span m="3621240">whatever</span> <span m="3621520">bug</span> <span m="3621770">that</span> <span m="3621930">hacker</span> <span m="3622260">exploited.</span> </p>
<p><span m="3623200">But</span> <span m="3623350">it</span> <span m="3623430">still</span> <span m="3623570">has</span> <span m="3623740">the</span> <span m="3623830">same</span> <span m="3624070">key</span> <span m="3624540">K mail.</span> <span m="3625130">And maybe</span> <span m="3625555">it's</span> <span m="3625870">taken</span> <span m="3626130">a</span> <span m="3626220">day</span> <span m="3626640">so all</span> <span m="3626790">the</span> <span m="3626860">tickets</span> <span m="3627150">are</span> <span m="3627270">expired.</span> <span m="3628580">Can that</span> <span m="3628835">hacker</span> <span m="3629090">do</span> <span m="3629230">anything</span> <span m="3629610">interesting</span> <span m="3630010">in</span> <span m="3630080">the</span> <span m="3630140">system</span> <span m="3630380">anymore?</span> <span m="3630610">Yeah.</span> </p>
<p><span m="3630920">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="3633780">PROFESSOR: Yeah,</span> <span m="3634160">OK,</span> <span m="3634280">so</span> <span m="3634520">you give</span> <span m="3634610">the</span> <span m="3635080">new mail</span> <span m="3635350">server</span> <span m="3635570">the</span> <span m="3635650">old</span> <span m="3635950">K</span> <span m="3636245">mail.</span> <span m="3637960">Is</span> <span m="3638100">that</span> <span m="3638240">bad?</span> <span m="3639880">Yeah.</span> </p>
<p><span m="3640210">STUDENT: This</span> <span m="3640652">is--</span> </p>
<p></p>
<p><span m="3643830">PROFESSOR: Sure.</span> </p>
<p><span m="3644260">STUDENT: [INAUDIBLE]</span> <span m="3647625">mail</span> <span m="3648098">server.</span> <span m="3648571">And</span> <span m="3649044">[INAUDIBLE]</span> <span m="3649990">mail</span> <span m="3650463">server</span> <span m="3650936">because you</span> <span m="3651409">can encrypt that</span> <span m="3651882">initial</span> <span m="3652355">ticket.</span> </p>
<p><span m="3652840">PROFESSOR: Right.</span> <span m="3653130">So K mail</span> <span m="3653420">is</span> <span m="3653580">actually</span> <span m="3653820">super</span> <span m="3654180">important.</span> <span m="3654780">And,</span> <span m="3655300">OK,</span> <span m="3655630">so</span> <span m="3655740">you're</span> <span m="3655950">saying</span> <span m="3656200">you</span> <span m="3656290">can</span> <span m="3656430">decrypt</span> <span m="3656780">all</span> <span m="3656910">the</span> <span m="3656990">things</span> <span m="3657240">going</span> <span m="3657420">on</span> <span m="3657610">to</span> <span m="3657730">the</span> <span m="3657840">mail</span> <span m="3658020">server.</span> <span m="3658890">So</span> <span m="3659130">suppose the</span> <span m="3659350">client</span> <span m="3659590">now</span> <span m="3659760">connects</span> <span m="3660110">to the</span> <span m="3660170">mail</span> <span m="3660380">server</span> <span m="3660670">after</span> <span m="3661000">it's</span> <span m="3661100">been</span> <span m="3661240">fixed</span> <span m="3661560">up.</span> </p>
<p><span m="3662060">But</span> <span m="3662260">the</span> <span m="3662320">attacker</span> <span m="3662880">still</span> <span m="3663190">knows</span> <span m="3663490">K</span> <span m="3663640">mail</span> <span m="3663890">from the</span> <span m="3664040">last</span> <span m="3664280">time</span> <span m="3664390">they</span> <span m="3664520">compromised</span> <span m="3664970">the</span> <span m="3665060">system.</span> <span m="3665850">They</span> <span m="3665870">can</span> <span m="3666020">now</span> <span m="3666180">decrypt</span> <span m="3666550">this</span> <span m="3666700">ticket</span> <span m="3666950">k</span> <span m="3667120">mail</span> <span m="3668070">and</span> <span m="3668220">they</span> <span m="3668300">can</span> <span m="3668460">now</span> <span m="3669000">look</span> <span m="3669710">inside</span> <span m="3670150">the</span> <span m="3670230">ticket</span> <span m="3670570">to</span> <span m="3670640">get</span> <span m="3670780">the</span> <span m="3670860">session</span> <span m="3671190">key</span> <span m="3671850">and</span> <span m="3671980">they</span> <span m="3672060">can</span> <span m="3672190">use</span> <span m="3672380">that</span> <span m="3672520">to</span> <span m="3672590">decrypt</span> <span m="3672700">all</span> <span m="3673060">the</span> <span m="3673110">messages</span> <span m="3673480">you</span> <span m="3673590">send,</span> <span m="3673870">all</span> <span m="3673960">the</span> <span m="3674030">responses</span> <span m="3674510">you</span> <span m="3674600">get</span> <span m="3674750">back,</span> <span m="3675000">and</span> <span m="3675130">so</span> <span m="3675260">on.</span> <span m="3675930">So</span> <span m="3676040">it's</span> <span m="3676160">pretty</span> <span m="3676330">important</span> <span m="3676670">to</span> <span m="3676730">change</span> <span m="3676970">this</span> <span m="3677460">key K</span> <span m="3677840">mail.</span> </p>
<p><span m="3678950">And</span> <span m="3679550">in</span> <span m="3679890">many</span> <span m="3680070">ways,</span> <span m="3680270">it's actually</span> <span m="3680450">even</span> <span m="3680700">worse</span> <span m="3681170">than</span> <span m="3681330">just</span> <span m="3681630">looking</span> <span m="3681990">at</span> <span m="3682080">the</span> <span m="3682160">traffic.</span> <span m="3682700">Because</span> <span m="3683680">if</span> <span m="3684150">the</span> <span m="3684330">attacker</span> <span m="3684670">know</span> <span m="3684970">this</span> <span m="3685200">key</span> <span m="3685620">K mail,</span> <span m="3686440">they</span> <span m="3686560">can</span> <span m="3686790">synthesize</span> <span m="3687770">new</span> <span m="3688020">tickets</span> <span m="3688470">for</span> <span m="3688650">the</span> <span m="3688730">mail</span> <span m="3688940">server</span> <span m="3689180">without</span> <span m="3689490">talking</span> <span m="3689780">to</span> <span m="3689860">the</span> <span m="3689980">key</span> <span m="3690130">DC.</span> <span m="3691100">So</span> <span m="3691230">suppose</span> <span m="3691540">that</span> <span m="3691730">I</span> <span m="3691810">know</span> <span m="3692050">K</span> <span m="3692250">mail</span> <span m="3692580">and</span> <span m="3692670">I</span> <span m="3692710">want</span> <span m="3692870">to</span> <span m="3692970">read</span> <span m="3693410">your</span> <span m="3693630">mail</span> <span m="3693890">from</span> <span m="3694030">the</span> <span m="3694090">mail</span> <span m="3694300">server.</span> <span m="3695100">I'll</span> <span m="3695270">just</span> <span m="3695560">make</span> <span m="3695810">up</span> <span m="3695940">this</span> <span m="3696110">ticket.</span> </p>
<p><span m="3696430">I'll</span> <span m="3696670">plop</span> <span m="3696980">down</span> <span m="3697160">all those</span> <span m="3697270">five</span> <span m="3697670">fields</span> <span m="3698090">in</span> <span m="3698190">the</span> <span m="3698280">right</span> <span m="3698450">order.</span> <span m="3699030">I'll</span> <span m="3699210">generate a</span> <span m="3699620">new</span> <span m="3700000">key.</span> <span m="3700950">I'll</span> <span m="3701180">encrypt it</span> <span m="3701560">with</span> <span m="3701710">K</span> <span m="3701880">mail.</span> </p>
<p><span m="3702280">It'll</span> <span m="3702360">look</span> <span m="3702640">like</span> <span m="3702820">the</span> <span m="3702930">real</span> <span m="3703170">thing</span> <span m="3703780">generated</span> <span m="3704330">by</span> <span m="3704490">the</span> <span m="3704600">KDC.</span> <span m="3705580">And</span> <span m="3705710">I'll</span> <span m="3705790">just</span> <span m="3705930">connect</span> <span m="3706110">to</span> <span m="3706190">the</span> <span m="3706260">mail</span> <span m="3706450">server.</span> <span m="3706780">And it'll</span> <span m="3707020">decrypt it.</span> </p>
<p><span m="3707450">It'll</span> <span m="3707740">decrypt</span> <span m="3708120">correctly</span> <span m="3708880">and</span> <span m="3709040">then</span> <span m="3709130">it'll</span> <span m="3709320">think,</span> <span m="3709510">oh,</span> <span m="3709640">yeah,</span> <span m="3709890">this</span> <span m="3710120">is</span> <span m="3712070">some</span> <span m="3712375">particular</span> <span m="3712680">user.</span> <span m="3712980">And</span> <span m="3713340">you</span> <span m="3713440">can</span> <span m="3713640">read</span> <span m="3713830">all</span> <span m="3713950">their</span> <span m="3714070">mail</span> <span m="3714690">and you</span> <span m="3714890">know the</span> <span m="3715010">shared</span> <span m="3715250">key</span> <span m="3715480">and</span> <span m="3715770">so</span> <span m="3715900">on.</span> <span m="3716590">So</span> <span m="3716790">it's</span> <span m="3717130">critically</span> <span m="3717490">important</span> <span m="3717990">too</span> <span m="3718700">that</span> <span m="3718960">no</span> <span m="3719290">one</span> <span m="3719490">knows</span> <span m="3719870">the</span> <span m="3720090">secret</span> <span m="3720600">key</span> <span m="3721110">of</span> <span m="3721340">a</span> <span m="3721420">service.</span> </p>
<p><span m="3721770">Because</span> <span m="3721980">otherwise,</span> <span m="3722400">not</span> <span m="3722540">only</span> <span m="3723360">is</span> <span m="3723620">the</span> <span m="3723730">traffic</span> <span m="3724120">to</span> <span m="3724250">the</span> <span m="3724370">service</span> <span m="3724920">decryptable</span> <span m="3725560">and</span> <span m="3725680">observable,</span> <span m="3726330">but</span> <span m="3726500">also</span> <span m="3726790">you</span> <span m="3726940">could</span> <span m="3727070">impersonate</span> <span m="3727415">anyone</span> <span m="3727890">to</span> <span m="3728000">that</span> <span m="3728200">service.</span> <span m="3730410">So</span> <span m="3730500">this</span> <span m="3730660">is</span> <span m="3730940">actually all</span> <span m="3731270">pretty</span> <span m="3731420">important</span> <span m="3731750">in</span> <span m="3732120">Kerberos.</span> <span m="3733730">Makes</span> <span m="3733830">sense?</span> <span m="3735320">Any</span> <span m="3735810">questions?</span> <span m="3737146">Yeah.</span> </p>
<p><span m="3738118">STUDENT: So</span> <span m="3738604">if the</span> <span m="3739090">attacker has</span> <span m="3739576">to</span> <span m="3740062">[INAUDIBLE],</span> <span m="3740548">what's</span> <span m="3741034">stopping him</span> <span m="3741520">from</span> <span m="3742006">changing</span> <span m="3742492">the</span> <span m="3742978">[INAUDIBLE]</span> <span m="3743950">key</span> <span m="3744436">[INAUDIBLE]?</span> </p>
<p><span m="3745900">PROFESSOR: Yeah,</span> <span m="3746235">so</span> <span m="3746570">presumably,</span> <span m="3747120">how</span> <span m="3747280">you'd</span> <span m="3747460">recover--</span> <span m="3747830">like,</span> <span m="3748160">ISNT</span> <span m="3748680">would,</span> <span m="3748790">like,</span> <span m="3749110">call</span> <span m="3749300">up</span> <span m="3749430">the</span> <span m="3749520">guy</span> <span m="3749690">that</span> <span m="3749800">runs</span> <span m="3750020">this</span> <span m="3750130">KDC</span> <span m="3750380">and</span> <span m="3750520">say,</span> <span m="3750800">oh</span> <span m="3751080">man,</span> <span m="3751460">our</span> <span m="3751770">mail</span> <span m="3751990">server</span> <span m="3752220">got</span> <span m="3752390">compromised.</span> <span m="3752645">Why</span> <span m="3752900">don't</span> <span m="3753050">you</span> <span m="3753140">go</span> <span m="3753370">and,</span> <span m="3753580">like,</span> <span m="3753790">delete</span> <span m="3754080">this</span> <span m="3754260">key</span> <span m="3754420">from</span> <span m="3754560">there</span> <span m="3754820">and</span> <span m="3754920">put</span> <span m="3755050">in</span> <span m="3755130">this</span> <span m="3755280">new</span> <span m="3755410">key</span> <span m="3755590">instead?</span> <span m="3756380">So</span> <span m="3756470">you'd</span> <span m="3756570">probably</span> <span m="3756850">want</span> <span m="3757010">to</span> <span m="3757080">have</span> <span m="3757340">some</span> <span m="3757620">out</span> <span m="3757790">of</span> <span m="3757900">bounds</span> <span m="3758330">mechanism</span> <span m="3758850">for</span> <span m="3759530">proving</span> <span m="3760230">that</span> <span m="3760490">you're</span> <span m="3760750">really</span> <span m="3761020">the</span> <span m="3761100">mail</span> <span m="3761290">server.</span> </p>
<p><span m="3761570">Because</span> <span m="3762630">we'll</span> <span m="3762840">look</span> <span m="3762980">at</span> <span m="3763040">a</span> <span m="3763100">second</span> <span m="3763360">on</span> <span m="3763450">how do you</span> <span m="3763780">change</span> <span m="3764160">keys--</span> <span m="3764420">like</span> <span m="3764560">a</span> <span m="3764620">password</span> <span m="3764920">changing</span> <span m="3765260">protocol,</span> <span m="3765600">for</span> <span m="3765710">example.</span> <span m="3766410">And</span> <span m="3766660">you</span> <span m="3766740">can</span> <span m="3766930">in</span> <span m="3767010">general</span> <span m="3767350">change</span> <span m="3767630">passwords</span> <span m="3768120">in</span> <span m="3768470">Kerberos.</span> <span m="3769410">So</span> <span m="3769530">if</span> <span m="3769670">you</span> <span m="3769820">know</span> <span m="3770010">the</span> <span m="3770090">old</span> <span m="3770390">password,</span> <span m="3770870">you</span> <span m="3771020">can</span> <span m="3771200">change</span> <span m="3771620">the</span> <span m="3771710">user's</span> <span m="3772000">password</span> <span m="3772290">to</span> <span m="3772360">a</span> <span m="3772400">new</span> <span m="3772550">password</span> <span m="3772920">here.</span> <span m="3773920">So</span> <span m="3774400">in</span> <span m="3774530">order</span> <span m="3774870">to recover,</span> <span m="3775700">you</span> <span m="3775830">probably--</span> <span m="3776080">like</span> <span m="3776260">the</span> <span m="3776370">attacker,</span> <span m="3776710">might</span> <span m="3776980">get</span> <span m="3777110">your key</span> <span m="3777440">mail,</span> <span m="3777730">change</span> <span m="3777960">it</span> <span m="3778020">to</span> <span m="3778090">something</span> <span m="3778380">else.</span> </p>
<p><span m="3778910">Someone</span> <span m="3779180">with</span> <span m="3779455">ISNT</span> <span m="3779730">basically</span> <span m="3780000">has</span> <span m="3780170">to</span> <span m="3780260">go</span> <span m="3780490">to</span> <span m="3780750">the</span> <span m="3781030">Accounts</span> <span m="3781450">office</span> <span m="3781750">and</span> <span m="3781850">say,</span> <span m="3781980">hey,</span> <span m="3783140">we're hear</span> <span m="3783290">at ISNT.</span> <span m="3784150">Could</span> <span m="3784310">you</span> <span m="3784390">please</span> <span m="3784760">change</span> <span m="3785190">the</span> <span m="3785500">password</span> <span m="3785870">of</span> <span m="3785950">the</span> <span m="3786040">mail</span> <span m="3786200">server</span> <span m="3786420">for</span> <span m="3786660">us?</span> <span m="3787300">And</span> <span m="3787420">they're</span> <span m="3787530">going</span> <span m="3787650">to</span> <span m="3787730">generate</span> <span m="3788130">some</span> <span m="3788180">new</span> <span m="3788350">password</span> <span m="3788790">the</span> <span m="3788830">attacker</span> <span m="3789160">doesn't</span> <span m="3789430">know.</span> </p>
<p><span m="3790320">So</span> <span m="3790490">yeah,</span> <span m="3791340">otherwise,</span> <span m="3791960">if</span> <span m="3792220">the</span> <span m="3792490">attacker</span> <span m="3792830">knows</span> <span m="3793030">this</span> <span m="3793190">key</span> <span m="3793510">K</span> <span m="3793960">mail,</span> <span m="3794330">there's</span> <span m="3794570">nothing</span> <span m="3794880">differentiating</span> <span m="3795470">the</span> <span m="3795550">attacker</span> <span m="3795900">from</span> <span m="3796050">you,</span> <span m="3796480">from</span> <span m="3796680">the</span> <span m="3796780">real</span> <span m="3796970">mail</span> <span m="3797180">server</span> <span m="3797420">operator.</span> <span m="3798240">In</span> <span m="3798300">fact,</span> <span m="3798470">the</span> <span m="3799610">attacker</span> <span m="3799970">probably</span> <span m="3800200">changed</span> <span m="3800430">the</span> <span m="3800540">key</span> <span m="3800900">so</span> <span m="3801000">now</span> <span m="3801160">they</span> <span m="3801300">know</span> <span m="3801470">the</span> <span m="3801560">new</span> <span m="3801690">thing</span> <span m="3801900">and</span> <span m="3801980">you</span> <span m="3802080">don't.</span> <span m="3802350">It's</span> <span m="3802500">like</span> <span m="3802650">you're</span> <span m="3803120">not</span> <span m="3803340">on the mail</span> <span m="3803730">server anymore.</span> <span m="3804440">So</span> <span m="3804860">absolutely,</span> <span m="3805130">you</span> <span m="3805400">need</span> <span m="3805680">some</span> <span m="3806020">out</span> <span m="3806220">of</span> <span m="3806320">band</span> <span m="3806670">protocol</span> <span m="3807210">for</span> <span m="3808750">initially</span> <span m="3809230">registering</span> <span m="3809740">principles</span> <span m="3810360">in</span> <span m="3810570">the</span> <span m="3810940">database</span> <span m="3811460">and</span> <span m="3811840">for</span> <span m="3812060">changing</span> <span m="3812450">keys</span> <span m="3812780">if</span> <span m="3812920">you</span> <span m="3813060">forget</span> <span m="3813340">your</span> <span m="3813450">password</span> <span m="3813850">or</span> <span m="3813960">someone</span> <span m="3814360">changes</span> <span m="3814770">for</span> <span m="3815010">you</span> <span m="3815170">and</span> <span m="3815320">you</span> <span m="3815460">lose</span> <span m="3815810">it</span> <span m="3816600">as</span> <span m="3816690">well.</span> </p>
<p><span m="3817400">So</span> <span m="3818360">there's</span> <span m="3818580">someone</span> <span m="3818880">at</span> <span m="3818970">MIT</span> <span m="3819490">or</span> <span m="3819740">there's</span> <span m="3820020">a</span> <span m="3820860">group</span> <span m="3821070">of</span> <span m="3821160">people</span> <span m="3821430">at</span> <span m="3821480">MIT</span> <span m="3821890">that</span> <span m="3822190">help</span> <span m="3822560">users</span> <span m="3822950">register</span> <span m="3823390">for</span> <span m="3823550">accounts</span> <span m="3823940">and</span> <span m="3824200">change</span> <span m="3824430">their</span> <span m="3824570">passwords</span> <span m="3825000">by,</span> <span m="3825260">you know,</span> <span m="3825630">you</span> <span m="3825780">present</span> <span m="3826050">your</span> <span m="3826150">MIT</span> <span m="3826480">ID</span> <span m="3826900">and</span> <span m="3827210">say,</span> <span m="3827680">oh, well,</span> <span m="3828150">OK.</span> <span m="3828440">Well,</span> <span m="3828710">whatever</span> <span m="3829020">happened,</span> <span m="3829400">we'll</span> <span m="3829700">be</span> <span m="3829840">able</span> <span m="3829970">to</span> <span m="3830040">change</span> <span m="3830270">your</span> <span m="3830420">key</span> <span m="3830610">for</span> <span m="3830800">you</span> <span m="3831010">then.</span> <span m="3831740">Make</span> <span m="3832100">sense?</span> </p>
<p><span m="3833980">So</span> <span m="3834130">it's</span> <span m="3834680">pretty</span> <span m="3834840">important,</span> <span m="3835130">of</span> <span m="3835210">course,</span> <span m="3835390">to do</span> <span m="3835520">that</span> <span m="3835730">right</span> <span m="3836010">so</span> <span m="3836110">if</span> <span m="3836400">the</span> <span m="3836770">person</span> <span m="3837570">that</span> <span m="3837990">is</span> <span m="3838710">allowing</span> <span m="3839230">password</span> <span m="3839580">resets</span> <span m="3840160">does</span> <span m="3840380">the</span> <span m="3840470">wrong</span> <span m="3840680">thing</span> <span m="3840930">when</span> <span m="3841070">checking</span> <span m="3841310">your</span> <span m="3841450">MIT</span> <span m="3841800">ID,</span> <span m="3842570">you'll</span> <span m="3842700">be</span> <span m="3842800">able</span> <span m="3842930">to</span> <span m="3843000">compromise</span> <span m="3843480">the</span> <span m="3843580">system</span> <span m="3843860">as</span> <span m="3843940">well,</span> <span m="3844140">right?</span> <span m="3844280">So</span> <span m="3844350">they</span> <span m="3844450">are</span> <span m="3844530">sort</span> <span m="3844650">of</span> <span m="3844730">part</span> <span m="3844940">of</span> <span m="3845000">the</span> <span m="3845090">trusted</span> <span m="3845420">computing</span> <span m="3845800">base</span> <span m="3846470">in</span> <span m="3846680">Kerberos,</span> <span m="3847310">right?</span> <span m="3847570">Like,</span> <span m="3847875">anyone that</span> <span m="3848180">can</span> <span m="3848340">go</span> <span m="3848580">and</span> <span m="3848770">muck</span> <span m="3848970">with</span> <span m="3849090">the</span> <span m="3849170">database</span> <span m="3849530">is</span> <span m="3849890">pretty</span> <span m="3850090">important</span> <span m="3851080">for</span> <span m="3851250">security</span> <span m="3851650">here.</span> </p>
<p><span m="3853990">All</span> <span m="3854040">right,</span> <span m="3855120">so</span> <span m="3855540">let's</span> <span m="3855730">look</span> <span m="3855850">at</span> <span m="3855930">another</span> <span m="3856440">sort</span> <span m="3856550">of</span> <span m="3856630">interesting</span> <span m="3856970">use</span> <span m="3857200">of</span> <span m="3857350">Kerberos,</span> <span m="3857790">right?</span> <span m="3857940">So</span> <span m="3858070">you</span> <span m="3858310">could</span> <span m="3858500">use</span> <span m="3858830">Kerberos</span> <span m="3859240">to</span> <span m="3859340">try</span> <span m="3859600">to</span> <span m="3860630">log</span> <span m="3860970">into</span> <span m="3861640">some</span> <span m="3861950">remote</span> <span m="3862340">machine</span> <span m="3862750">over</span> <span m="3863010">SSH.</span> <span m="3864920">And</span> <span m="3865200">the</span> <span m="3865270">way</span> <span m="3865370">this</span> <span m="3865510">would</span> <span m="3865600">work is,</span> <span m="3865820">of</span> <span m="3865970">course,</span> <span m="3866200">very</span> <span m="3866350">similar</span> <span m="3866620">to a</span> <span m="3866770">mail</span> <span m="3867000">server.</span> </p>
<p><span m="3867340">You'd</span> <span m="3867440">get</span> <span m="3867530">a</span> <span m="3867600">ticket</span> <span m="3867860">for</span> <span m="3867980">the</span> <span m="3868280">SSH</span> <span m="3868440">server</span> <span m="3868690">and</span> <span m="3868760">you'd</span> <span m="3868840">send</span> <span m="3869100">the</span> <span m="3869180">ticket</span> <span m="3869430">along</span> <span m="3869680">with</span> <span m="3869790">your</span> <span m="3869920">SSH</span> <span m="3870280">connection.</span> <span m="3872080">But</span> <span m="3872250">what</span> <span m="3872430">if</span> <span m="3872490">you're</span> <span m="3872630">SSHing</span> <span m="3873210">into</span> <span m="3873500">Athena</span> <span m="3873820">dot</span> <span m="3874000">dial-up</span> <span m="3874860">and</span> <span m="3875410">you</span> <span m="3875550">don't</span> <span m="3875690">have</span> <span m="3875800">a</span> <span m="3875980">Kerberos</span> <span m="3876450">client</span> <span m="3876650">on</span> <span m="3876720">your</span> <span m="3876830">machine?</span> <span m="3877210">You</span> <span m="3877310">just</span> <span m="3877340">want</span> <span m="3877470">to</span> <span m="3877570">log</span> <span m="3877860">into</span> <span m="3878040">Athena</span> <span m="3878140">dot</span> <span m="3878500">dial-up</span> <span m="3879270">with</span> <span m="3879710">your</span> <span m="3880030">regular</span> <span m="3880420">password.</span> </p>
<p><span m="3882360">So</span> <span m="3882470">how</span> <span m="3882610">would</span> <span m="3882800">Athena</span> <span m="3882970">dial-up</span> <span m="3883330">authenticate</span> <span m="3883860">you,</span> <span m="3883980">then,</span> <span m="3884840">if</span> <span m="3884970">you're</span> <span m="3885100">just</span> <span m="3885270">plugging</span> <span m="3885700">into</span> <span m="3885860">this</span> <span m="3886030">machine</span> <span m="3886500">with</span> <span m="3886690">a</span> <span m="3886740">password?</span> <span m="3888060">But</span> <span m="3888440">you</span> <span m="3888610">have</span> <span m="3888720">no</span> <span m="3888870">password</span> <span m="3889080">for</span> <span m="3889350">Athena</span> <span m="3889430">dot</span> <span m="3889660">dial-up.</span> <span m="3890120">It's on</span> <span m="3890230">a</span> <span m="3890300">Kerberos</span> <span m="3890660">server.</span> <span m="3892010">So</span> <span m="3892100">which</span> <span m="3892240">should</span> <span m="3892310">the</span> <span m="3892420">dial-up</span> <span m="3892900">machine</span> <span m="3893230">do</span> <span m="3893400">when</span> <span m="3893560">you</span> <span m="3893680">log</span> <span m="3893930">into</span> <span m="3894160">it with a</span> <span m="3894350">password?</span> <span m="3894880">Yeah.</span> </p>
<p><span m="3895250">STUDENT: You can access</span> <span m="3895685">the</span> <span m="3896120">[INAUDIBLE].</span> </p>
<p><span m="3896990">PROFESSOR: Yeah,</span> <span m="3897280">so</span> <span m="3897420">the</span> <span m="3898160">dial-up</span> <span m="3898550">is</span> <span m="3898680">then</span> <span m="3898770">going</span> <span m="3898910">to</span> <span m="3898990">basically</span> <span m="3899500">play</span> <span m="3899730">the</span> <span m="3899850">same</span> <span m="3900100">protocol</span> <span m="3900550">logging</span> <span m="3900830">you in.</span> <span m="3901200">So it's</span> <span m="3901350">going</span> <span m="3901480">to</span> <span m="3901780">send</span> <span m="3902060">a</span> <span m="3902090">request.</span> <span m="3904000">This</span> <span m="3904190">thing,</span> <span m="3904400">right?</span> </p>
<p><span m="3904600">It's</span> <span m="3904730">going</span> <span m="3904840">to</span> <span m="3904900">send</span> <span m="3905140">a</span> <span m="3905170">request</span> <span m="3905730">to</span> <span m="3905990">the</span> <span m="3906090">Kerberos</span> <span m="3906470">service</span> <span m="3907280">asking,</span> <span m="3907960">give</span> <span m="3908120">me</span> <span m="3908240">a</span> <span m="3908310">ticket</span> <span m="3908700">for,</span> <span m="3909270">I</span> <span m="3909500">don't</span> <span m="3909640">know,</span> <span m="3909930">this</span> <span m="3910110">user</span> <span m="3910550">Alice.</span> <span m="3911550">And</span> <span m="3912510">in</span> <span m="3912670">response,</span> <span m="3913080">it's</span> <span m="3913200">going</span> <span m="3913310">to</span> <span m="3913370">get</span> <span m="3913540">back</span> <span m="3913890">this</span> <span m="3914140">reply</span> <span m="3914610">encrypted</span> <span m="3915050">with Alice's</span> <span m="3915500">password.</span> <span m="3916280">And then</span> <span m="3916430">it's</span> <span m="3916500">going</span> <span m="3916630">to</span> <span m="3916700">try</span> <span m="3917250">the</span> <span m="3917330">password</span> <span m="3917640">you</span> <span m="3917740">just</span> <span m="3917970">applied</span> <span m="3919250">and</span> <span m="3919420">see if</span> <span m="3919570">it</span> <span m="3919650">decrypts</span> <span m="3920100">correctly.</span> <span m="3921050">And</span> <span m="3921160">if it</span> <span m="3921390">decrypts</span> <span m="3921640">correctly,</span> <span m="3922510">it's</span> <span m="3922650">going</span> <span m="3922760">to</span> <span m="3922820">let</span> <span m="3922960">you</span> <span m="3923150">log in,</span> <span m="3923380">right?</span> <span m="3925560">Yeah.</span> </p>
<p><span m="3925770">STUDENT: You don't</span> <span m="3925990">even really</span> <span m="3926473">have to send</span> <span m="3926956">your</span> <span m="3927439">key</span> <span m="3927922">to the</span> <span m="3928405">SSH</span> <span m="3929390">server.</span> <span m="3930370">Because</span> <span m="3930530">it</span> <span m="3930720">could</span> <span m="3931125">relay</span> <span m="3931750">this</span> <span m="3932490">back--</span> <span m="3932840">the</span> <span m="3933318">dot</span> <span m="3933796">encrypted</span> <span m="3934274">thing with</span> <span m="3934752">KC.</span> <span m="3935230">It</span> <span m="3935708">could</span> <span m="3936186">relay that</span> <span m="3936664">back to the</span> <span m="3937150">user</span> <span m="3937520">over the</span> <span m="3937996">SSH</span> <span m="3938472">connection.</span> </p>
<p><span m="3938948">PROFESSOR: Potentially,</span> <span m="3939424">yeah.</span> <span m="3940380">Right,</span> <span m="3940630">so</span> <span m="3940780">this</span> <span m="3940940">requires</span> <span m="3941330">some</span> <span m="3941730">fancy</span> <span m="3941970">SSH</span> <span m="3942170">client</span> <span m="3942560">that</span> <span m="3943180">you</span> <span m="3943340">might</span> <span m="3943510">not</span> <span m="3943650">have.</span> <span m="3943810">But--</span> <span m="3944200">so</span> <span m="3944300">yeah,</span> <span m="3944700">absolutely</span> <span m="3945000">right.</span> <span m="3945400">If</span> <span m="3945510">you</span> <span m="3945630">want</span> <span m="3945740">to</span> <span m="3945790">do</span> <span m="3945880">this</span> <span m="3946080">right,</span> <span m="3946620">you</span> <span m="3946790">probably</span> <span m="3947030">want</span> <span m="3947180">to</span> <span m="3947220">have</span> <span m="3947380">a</span> <span m="3947450">Kerberos</span> <span m="3947740">client</span> <span m="3948030">on</span> <span m="3948160">your</span> <span m="3948290">machine</span> <span m="3949040">and</span> <span m="3949710">get</span> <span m="3949910">a</span> <span m="3949960">ticket</span> <span m="3950200">yourself</span> <span m="3950960">or</span> <span m="3951130">maybe</span> <span m="3951370">proxy</span> <span m="3951750">it</span> <span m="3951880">somehow</span> <span m="3952220">through</span> <span m="3952410">the</span> <span m="3952630">SSH</span> <span m="3952780">server</span> <span m="3953460">but</span> <span m="3953740">not</span> <span m="3954120">allow</span> <span m="3954450">the</span> <span m="3954710">SSH</span> <span m="3954790">server to</span> <span m="3955100">have</span> <span m="3955260">your</span> <span m="3955410">key.</span> <span m="3956190">That's</span> <span m="3956340">probably a</span> <span m="3956610">good</span> <span m="3956800">plan.</span> </p>
<p><span m="3957270">STUDENT: [INAUDIBLE]</span> <span m="3959630">just,</span> <span m="3960102">the</span> <span m="3960574">server</span> <span m="3961046">could get</span> <span m="3961518">through this</span> <span m="3961990">wall</span> <span m="3962462">[INAUDIBLE]</span> </p>
<p><span m="3962940">PROFESSOR: That's right. Then you</span> <span m="3963220">might</span> <span m="3963600">decrypt</span> <span m="3963920">it</span> <span m="3964240">and</span> <span m="3964380">send</span> <span m="3964640">back.</span> <span m="3965340">OK,</span> <span m="3965510">but</span> <span m="3965650">in</span> <span m="3965730">either</span> <span m="3965930">case,</span> <span m="3966170">right,</span> <span m="3966470">all</span> <span m="3966650">we're</span> <span m="3966780">doing</span> <span m="3967000">here</span> <span m="3967290">is</span> <span m="3967730">someone</span> <span m="3968310">is</span> <span m="3968400">going</span> <span m="3968530">to</span> <span m="3968610">try</span> <span m="3968910">to</span> <span m="3969030">decrypt</span> <span m="3969500">this</span> <span m="3969630">blob</span> <span m="3970070">with</span> <span m="3970430">KC.</span> <span m="3971640">And</span> <span m="3971800">then</span> <span m="3971920">the</span> <span m="3972010">server</span> <span m="3972310">is</span> <span m="3972390">going</span> <span m="3972500">to</span> <span m="3972580">get</span> <span m="3972810">this</span> <span m="3972970">resolved</span> <span m="3973320">and</span> <span m="3973420">see</span> <span m="3973570">if</span> <span m="3973660">it</span> <span m="3973730">looks</span> <span m="3973980">right.</span> <span m="3974275">It's</span> <span m="3974710">going</span> <span m="3975090">to allow you</span> <span m="3975200">in.</span> </p>
<p><span m="3976476">Seem</span> <span m="3976850">like a</span> <span m="3977170">good</span> <span m="3977270">plan?</span> <span m="3979350">So,</span> <span m="3979760">turns</span> <span m="3979980">out</span> <span m="3980080">this is</span> <span m="3980220">actually</span> <span m="3980560">a</span> <span m="3980610">fairly</span> <span m="3981010">dangerous</span> <span m="3981410">thing</span> <span m="3981560">to</span> <span m="3981620">do</span> <span m="3981760">and</span> <span m="3981960">allows</span> <span m="3982430">you</span> <span m="3982620">to</span> <span m="3982950">potentially</span> <span m="3983350">log</span> <span m="3983610">into</span> <span m="3983750">the</span> <span m="3983890">SSH</span> <span m="3984120">server as</span> <span m="3984510">anyone.</span> <span m="3986020">And</span> <span m="3986160">the</span> <span m="3986240">reason</span> <span m="3986690">is</span> <span m="3986990">that</span> <span m="3987950">previously,</span> <span m="3988650">when we</span> <span m="3988810">were</span> <span m="3989110">talking</span> <span m="3989450">about</span> <span m="3989580">a</span> <span m="3989680">client</span> <span m="3990110">trying</span> <span m="3990420">to</span> <span m="3990510">log</span> <span m="3990860">in,</span> <span m="3991930">the</span> <span m="3992050">client</span> <span m="3992340">basically</span> <span m="3992670">knew</span> <span m="3992940">that</span> <span m="3993470">it</span> <span m="3993600">was</span> <span m="3993760">trying</span> <span m="3994010">to</span> <span m="3994100">supply</span> <span m="3994520">a legitimate</span> <span m="3994880">password,</span> <span m="3995340">it was</span> <span m="3995470">getting</span> <span m="3995720">a</span> <span m="3995780">reply</span> <span m="3996140">from</span> <span m="3996320">the</span> <span m="3996420">right</span> <span m="3996640">Kerberos</span> <span m="3997020">server,</span> <span m="3997780">and</span> <span m="3998360">if</span> <span m="3998530">it</span> <span m="3998650">can</span> <span m="3998790">decrypt it,</span> <span m="3999320">then</span> <span m="3999570">probably</span> <span m="3999960">the</span> <span m="4000120">password</span> <span m="4000450">works</span> <span m="4000730">out</span> <span m="4000870">correctly.</span> </p>
<p><span m="4002010">However,</span> <span m="4002970">there's</span> <span m="4003230">nothing</span> <span m="4003570">here</span> <span m="4003800">in</span> <span m="4003850">this</span> <span m="4004020">protocol</span> <span m="4004440">that</span> <span m="4004650">authenticates</span> <span m="4005330">the</span> <span m="4005420">fact</span> <span m="4005770">that</span> <span m="4005850">this</span> <span m="4006030">reply</span> <span m="4007030">is</span> <span m="4007210">coming</span> <span m="4007500">from</span> <span m="4007660">the</span> <span m="4007750">right</span> <span m="4007980">Kerberos</span> <span m="4008350">server.</span> <span m="4010670">So</span> <span m="4011750">if</span> <span m="4012180">I</span> <span m="4012420">try</span> <span m="4012730">to</span> <span m="4012890">log</span> <span m="4013370">into</span> <span m="4013590">a</span> <span m="4013660">machine</span> <span m="4015340">by</span> <span m="4015750">typing</span> <span m="4016200">in</span> <span m="4016260">a</span> <span m="4016320">password</span> <span m="4017470">and</span> <span m="4017610">the</span> <span m="4017660">machine</span> <span m="4017990">sends</span> <span m="4018280">out</span> <span m="4018420">this</span> <span m="4018580">request</span> <span m="4020080">and</span> <span m="4020270">some</span> <span m="4020640">response</span> <span m="4021180">comes</span> <span m="4021430">back</span> <span m="4022280">that</span> <span m="4022480">seems</span> <span m="4022700">to</span> <span m="4022780">be</span> <span m="4022870">encrypted</span> <span m="4023260">with</span> <span m="4023400">the</span> <span m="4023490">password</span> <span m="4023840">I</span> <span m="4023910">typed</span> <span m="4024170">in,</span> <span m="4026170">this</span> <span m="4026350">response</span> <span m="4026680">might</span> <span m="4026850">not</span> <span m="4027010">be</span> <span m="4027120">from</span> <span m="4027340">the</span> <span m="4028090">Kerberos</span> <span m="4028470">server.</span> <span m="4029750">So</span> <span m="4029870">suppose</span> <span m="4030150">I</span> <span m="4030740">have</span> <span m="4030930">some</span> <span m="4031060">machine</span> <span m="4031360">I</span> <span m="4031400">want</span> <span m="4031530">to</span> <span m="4031580">log</span> <span m="4031820">into.</span> <span m="4032090">I</span> <span m="4032200">type</span> <span m="4032450">a</span> <span m="4032530">password</span> <span m="4032970">X</span> <span m="4033250">into</span> <span m="4033480">it.</span> <span m="4034510">And</span> <span m="4034680">then</span> <span m="4035490">the</span> <span m="4035580">machine</span> <span m="4035840">sends out</span> <span m="4036180">this</span> <span m="4036380">response.</span> </p>
<p><span m="4036960">And</span> <span m="4037140">before</span> <span m="4037490">the</span> <span m="4037600">Kerberos</span> <span m="4038070">server</span> <span m="4038340">can</span> <span m="4038530">respond</span> <span m="4039020">back</span> <span m="4039280">with</span> <span m="4039450">the</span> <span m="4039560">real</span> <span m="4039840">reply,</span> <span m="4040770">I'll</span> <span m="4041000">send</span> <span m="4041210">my own</span> <span m="4041540">reply</span> <span m="4043010">that</span> <span m="4043210">looks</span> <span m="4043470">like</span> <span m="4043680">this</span> <span m="4044000">real</span> <span m="4044260">response</span> <span m="4044770">encrypted</span> <span m="4045210">with</span> <span m="4045350">my</span> <span m="4045480">password</span> <span m="4045860">X.</span> <span m="4047640">And</span> <span m="4047990">the</span> <span m="4048070">workstation</span> <span m="4048690">to</span> <span m="4048770">which</span> <span m="4048960">I</span> <span m="4049030">try</span> <span m="4049220">to</span> <span m="4049310">log</span> <span m="4049665">in</span> <span m="4050020">or</span> <span m="4050170">the</span> <span m="4050340">SSH</span> <span m="4050730">server</span> <span m="4051540">is</span> <span m="4051670">going</span> <span m="4051770">to</span> <span m="4051840">decrypt</span> <span m="4052260">it</span> <span m="4052470">with</span> <span m="4052680">my</span> <span m="4052880">fake</span> <span m="4053190">password.</span> <span m="4053780">It's</span> <span m="4054130">going to</span> <span m="4054590">look</span> <span m="4054780">OK</span> <span m="4055070">because</span> <span m="4055360">this</span> <span m="4055520">response</span> <span m="4056020">was</span> <span m="4056180">generated</span> <span m="4056490">by</span> <span m="4056590">me</span> <span m="4057320">rather</span> <span m="4057620">than the</span> <span m="4057720">real</span> <span m="4057910">Kerberos</span> <span m="4058250">server.</span> </p>
<p><span m="4059880">And</span> <span m="4061330">you'll</span> <span m="4061480">be</span> <span m="4061570">able</span> <span m="4061730">to</span> <span m="4061810">log</span> <span m="4062240">in</span> <span m="4063200">This</span> <span m="4063680">make</span> <span m="4064000">sense?</span> <span m="4065440">Why does</span> <span m="4065610">this</span> <span m="4065800">happen?</span> <span m="4071704">Yeah.</span> </p>
<p><span m="4072692">STUDENT: [INAUDIBLE]</span> <span m="4073186">there's</span> <span m="4073680">no</span> <span m="4074174">authentication</span> <span m="4074668">from the</span> <span m="4075162">Kerberos</span> <span m="4075656">server</span> <span m="4076150">[INAUDIBLE]</span> </p>
<p><span m="4076660">PROFESSOR: Right,</span> <span m="4077050">yeah,</span> <span m="4077240">so</span> <span m="4077340">there's</span> <span m="4077550">nothing</span> <span m="4077900">really</span> <span m="4078100">here</span> <span m="4078420">that's</span> <span m="4078640">tying</span> <span m="4078930">this</span> <span m="4079080">to</span> <span m="4079170">the</span> <span m="4079290">real</span> <span m="4079580">Kerberos</span> <span m="4079940">server.</span> <span m="4080250">So</span> <span m="4081270">the</span> <span m="4081790">way</span> <span m="4082100">that</span> <span m="4082790">Kerberos</span> <span m="4083990">fixes</span> <span m="4084350">this</span> <span m="4084850">for</span> <span m="4086160">remotely</span> <span m="4086860">accessible</span> <span m="4087280">machines</span> <span m="4087710">like</span> <span m="4087880">Athena</span> <span m="4088300">dot</span> <span m="4088610">dial-up</span> <span m="4089110">is</span> <span m="4089400">that</span> <span m="4089990">the</span> <span m="4090130">dial-ups</span> <span m="4090600">themselves</span> <span m="4091100">have</span> <span m="4091290">some</span> <span m="4091470">sort</span> <span m="4091650">of</span> <span m="4091740">a</span> <span m="4091800">secret</span> <span m="4092190">key</span> <span m="4092840">that</span> <span m="4093020">they</span> <span m="4093130">share</span> <span m="4093400">with</span> <span m="4093530">the</span> <span m="4093640">KDC.</span> <span m="4094700">So</span> <span m="4094800">in</span> <span m="4094900">order</span> <span m="4095070">to</span> <span m="4095190">log</span> <span m="4095500">you</span> <span m="4095640">in</span> <span m="4096000">into</span> <span m="4096240">a</span> <span m="4096330">dial-up</span> <span m="4096720">or to</span> <span m="4096960">any</span> <span m="4097180">workstation</span> <span m="4097770">that</span> <span m="4097840">really</span> <span m="4098060">cares</span> <span m="4098370">about</span> <span m="4098930">checking</span> <span m="4099210">whether</span> <span m="4099430">you</span> <span m="4099569">are</span> <span m="4099670">really</span> <span m="4100010">the</span> <span m="4100120">right</span> <span m="4100310">user,</span> <span m="4101250">it's</span> <span m="4101439">actually</span> <span m="4101609">going</span> <span m="4101710">to</span> <span m="4101790">do</span> <span m="4101979">two</span> <span m="4102319">things.</span> </p>
<p><span m="4102700">It's</span> <span m="4102750">going</span> <span m="4102920">to</span> <span m="4102979">first</span> <span m="4103819">log you</span> <span m="4104160">into</span> <span m="4104450">Kerberos</span> <span m="4104930">like</span> <span m="4105130">this.</span> <span m="4106229">But</span> <span m="4106439">then</span> <span m="4106670">just</span> <span m="4106929">because</span> <span m="4107189">this</span> <span m="4107310">reply</span> <span m="4108020">decrypts</span> <span m="4108520">correctly,</span> <span m="4108880">it's</span> <span m="4109020">not</span> <span m="4109140">going</span> <span m="4109220">to</span> <span m="4109290">trust</span> <span m="4109580">that.</span> <span m="4110439">It's</span> <span m="4110590">going</span> <span m="4110800">to</span> <span m="4110920">try</span> <span m="4111240">to</span> <span m="4111340">get</span> <span m="4111520">a</span> <span m="4111569">service</span> <span m="4113090">ticket</span> <span m="4113310">for</span> <span m="4113520">itself</span> <span m="4114340">using</span> <span m="4114740">TGS.</span> <span m="4115910">So</span> <span m="4116609">the</span> <span m="4117050">dial-up</span> <span m="4117580">machine</span> <span m="4117910">here</span> <span m="4118460">has</span> <span m="4118750">its</span> <span m="4118880">own</span> <span m="4119029">secret</span> <span m="4119410">key.</span> </p>
<p><span m="4119899">And</span> <span m="4120319">it</span> <span m="4120420">logs you</span> <span m="4120819">in</span> <span m="4121100">with</span> <span m="4121340">this</span> <span m="4121520">round</span> <span m="4121810">one.</span> <span m="4122229">Then</span> <span m="4122560">it</span> <span m="4122590">talks</span> <span m="4122840">to</span> <span m="4122950">TGS</span> <span m="4123310">saying,</span> <span m="4123910">oh,</span> <span m="4124189">please</span> <span m="4125020">give</span> <span m="4125340">me</span> <span m="4125569">a</span> <span m="4125640">service</span> <span m="4126290">ticket</span> <span m="4126930">for</span> <span m="4127960">my</span> <span m="4128149">own</span> <span m="4128330">principle,</span> <span m="4128740">from</span> <span m="4128880">the</span> <span m="4128970">dial-up</span> <span m="4129300">principle,</span> <span m="4130130">for</span> <span m="4130399">this</span> <span m="4130630">client.</span> <span m="4131359">Then it</span> <span m="4131590">gets</span> <span m="4131800">the</span> <span m="4131880">response</span> <span m="4132350">back.</span> </p>
<p><span m="4132880">And</span> <span m="4133100">then</span> <span m="4133220">it</span> <span m="4133319">checks</span> <span m="4133540">if</span> <span m="4133649">it</span> <span m="4133760">can</span> <span m="4133910">decrypt</span> <span m="4134290">the</span> <span m="4134390">response</span> <span m="4135060">correctly.</span> <span m="4135479">Because</span> <span m="4135740">it</span> <span m="4135960">knows</span> <span m="4136370">the</span> <span m="4136870">dial-up</span> <span m="4137380">key</span> <span m="4137670">for</span> <span m="4137840">this</span> <span m="4138040">KS.</span> <span m="4139220">And</span> <span m="4139810">if</span> <span m="4140010">this</span> <span m="4140120">decrpyts,</span> <span m="4140590">that</span> <span m="4140770">it</span> <span m="4140899">knows,</span> <span m="4141140">oh</span> <span m="4141260">yeah,</span> <span m="4141410">I</span> <span m="4141720">must have</span> <span m="4141899">talked</span> <span m="4142149">to</span> <span m="4142250">the</span> <span m="4142500">right</span> <span m="4142760">Kerberos</span> <span m="4143149">server.</span> <span m="4143390">Because</span> <span m="4143649">only</span> <span m="4143920">the</span> <span m="4144010">right</span> <span m="4144109">Kerberos</span> <span m="4144550">server</span> <span m="4144700">would have</span> <span m="4144910">sent</span> <span m="4145090">me</span> <span m="4145180">this</span> <span m="4145300">second</span> <span m="4145779">round</span> <span m="4146229">ticket</span> <span m="4146910">encrypted</span> <span m="4147200">with</span> <span m="4147560">my</span> <span m="4148020">secret</span> <span m="4148460">key</span> <span m="4148680">K</span> <span m="4148859">dial-up.</span> </p>
<p><span m="4150665">So</span> <span m="4151090">this is</span> <span m="4151270">actually</span> <span m="4151510">pretty</span> <span m="4151710">important.</span> <span m="4152779">And</span> <span m="4153569">typically,</span> <span m="4153890">Athena</span> <span m="4154180">workstations</span> <span m="4154770">don't</span> <span m="4155010">do</span> <span m="4155109">this</span> <span m="4155340">extra</span> <span m="4155640">step</span> <span m="4155830">because</span> <span m="4156080">Athena</span> <span m="4156340">workstations</span> <span m="4156920">don't</span> <span m="4157160">have</span> <span m="4157340">any</span> <span m="4157899">secret</span> <span m="4158330">key</span> <span m="4158529">stored</span> <span m="4158830">on</span> <span m="4158979">them</span> <span m="4159100">that's</span> <span m="4159310">shared</span> <span m="4159649">with</span> <span m="4159790">the</span> <span m="4159880">KDC.</span> <span m="4161630">Why</span> <span m="4161800">is this</span> <span m="4161970">OK</span> <span m="4162029">for</span> <span m="4162250">Athena</span> <span m="4162649">workstations</span> <span m="4163130">to let</span> <span m="4163430">you log</span> <span m="4163640">in</span> <span m="4163930">in</span> <span m="4164029">this</span> <span m="4164170">one</span> <span m="4164399">round</span> <span m="4164660">trip</span> <span m="4164890">and</span> <span m="4165029">not</span> <span m="4165340">for</span> <span m="4166260">dial-ups?</span> <span m="4166740">Yeah.</span> </p>
<p><span m="4167035">STUDENT: If you</span> <span m="4167330">don't have</span> <span m="4167796">access to any</span> <span m="4168262">services</span> <span m="4168728">because the</span> <span m="4169194">attacker</span> <span m="4169660">couldn't forge</span> <span m="4170126">the</span> <span m="4170592">ticket.</span> </p>
<p><span m="4171529">PROFESSOR: That's</span> <span m="4171720">right,</span> <span m="4171930">yeah.</span> <span m="4172200">So</span> <span m="4172290">there's</span> <span m="4172529">nothing</span> <span m="4172930">interesting</span> <span m="4173420">on</span> <span m="4173590">the</span> <span m="4173689">dial-up</span> <span m="4174069">machine</span> <span m="4174370">itself--</span> <span m="4175060">sorry,</span> <span m="4175250">on</span> <span m="4175410">the</span> <span m="4175590">workstation</span> <span m="4176270">itself.</span> <span m="4176510">So</span> <span m="4176920">workstation,</span> <span m="4177840">whenever--</span> <span m="4178160">you</span> <span m="4178490">have</span> <span m="4178649">root</span> <span m="4178760">access</span> <span m="4179080">on it</span> <span m="4179270">anyway.</span> <span m="4179660">So</span> <span m="4179960">if</span> <span m="4180069">you</span> <span m="4180170">log</span> <span m="4180410">into</span> <span m="4180649">it</span> <span m="4180770">with</span> <span m="4180899">a</span> <span m="4180950">fake</span> <span m="4181380">password,</span> <span m="4181830">who</span> <span m="4181970">cares?</span> </p>
<p><span m="4182930">It's</span> <span m="4183040">not</span> <span m="4183200">like</span> <span m="4183370">you'll</span> <span m="4183520">be</span> <span m="4183640">able</span> <span m="4183890">to</span> <span m="4184340">do</span> <span m="4184510">anything</span> <span m="4184850">else</span> <span m="4185010">outside</span> <span m="4185460">of</span> <span m="4185540">your</span> <span m="4185660">workstation.</span> <span m="4186649">Whereas</span> <span m="4186960">on a</span> <span m="4187109">dial-up,</span> <span m="4187680">things</span> <span m="4187950">are</span> <span m="4188090">much</span> <span m="4188310">more</span> <span m="4188460">interesting.</span> <span m="4188810">It</span> <span m="4188930">might</span> <span m="4189120">be</span> <span m="4189210">that</span> <span m="4189319">you</span> <span m="4189410">have</span> <span m="4189609">other</span> <span m="4189880">processes</span> <span m="4190460">running</span> <span m="4190729">on</span> <span m="4190800">the</span> <span m="4190880">dial-up</span> <span m="4191220">from</span> <span m="4191470">other</span> <span m="4191720">login</span> <span m="4192080">sessions.</span> <span m="4192920">And</span> <span m="4193270">there,</span> <span m="4193770">the</span> <span m="4193870">fact</span> <span m="4194050">that</span> <span m="4194140">you</span> <span m="4194250">log</span> <span m="4194550">in</span> <span m="4194630">with</span> <span m="4194750">a</span> <span m="4194790">particular</span> <span m="4195130">Unix</span> <span m="4195570">UID</span> <span m="4196440">is</span> <span m="4196540">actually</span> <span m="4196800">pretty</span> <span m="4197110">important.</span> </p>
<p><span m="4198070">And</span> <span m="4198790">there,</span> <span m="4199060">they</span> <span m="4199200">really</span> <span m="4199440">want</span> <span m="4199600">to</span> <span m="4199640">authenticate</span> <span m="4200230">that</span> <span m="4200750">you</span> <span m="4201000">are</span> <span m="4201160">the</span> <span m="4201300">right</span> <span m="4201730">entity.</span> <span m="4202360">So</span> <span m="4202460">that's</span> <span m="4202610">why</span> <span m="4202760">they</span> <span m="4202880">do</span> <span m="4203000">this</span> <span m="4203150">sort</span> <span m="4203300">of</span> <span m="4203430">2-step</span> <span m="4204670">process</span> <span m="4205190">for</span> <span m="4205370">logging</span> <span m="4205780">into</span> <span m="4205900">some</span> <span m="4206420">shared</span> <span m="4207050">time-sharing</span> <span m="4207650">machine.</span> <span m="4209140">Make</span> <span m="4209230">sense?</span> </p>
<p><span m="4212020">All</span> <span m="4212060">right,</span> <span m="4212990">so</span> <span m="4213500">the</span> <span m="4214040">last</span> <span m="4214290">thing</span> <span m="4214430">I</span> <span m="4214470">want</span> <span m="4214570">to</span> <span m="4214630">talk</span> <span m="4214840">about</span> <span m="4215230">is</span> <span m="4215690">how</span> <span m="4215830">do</span> <span m="4215900">we</span> <span m="4216080">change</span> <span m="4216570">keys.</span> <span m="4216840">So</span> <span m="4216920">we</span> <span m="4217060">sort</span> <span m="4217340">of</span> <span m="4217460">talked</span> <span m="4217650">about</span> <span m="4217830">it</span> <span m="4217910">briefly</span> <span m="4218370">here</span> <span m="4218670">with</span> <span m="4218860">the</span> <span m="4218930">idea</span> <span m="4219230">that</span> <span m="4219430">the</span> <span m="4219510">mail</span> <span m="4219780">server's</span> <span m="4220170">key</span> <span m="4220400">might</span> <span m="4220630">get</span> <span m="4220790">compromised.</span> <span m="4222070">But</span> <span m="4222360">as</span> <span m="4222450">a</span> <span m="4222530">user,</span> <span m="4222840">you</span> <span m="4222930">probably</span> <span m="4223170">also</span> <span m="4223410">want</span> <span m="4223570">to</span> <span m="4223640">change</span> <span m="4224540">passwords</span> <span m="4225660">as</span> <span m="4225780">well.</span> <span m="4226080">Like,</span> <span m="4226240">maybe</span> <span m="4227200">you're</span> <span m="4227340">thinking,</span> <span m="4227570">oh, that</span> <span m="4228020">password</span> <span m="4228340">is</span> <span m="4228430">not so</span> <span m="4228670">great</span> <span m="4228900">anymore.</span> </p>
<p><span m="4229360">Maybe I</span> <span m="4229560">accidentally</span> <span m="4230080">wrote</span> <span m="4230380">it on</span> <span m="4230480">a</span> <span m="4230530">piece</span> <span m="4230690">of</span> <span m="4230790">paper</span> <span m="4231070">and</span> <span m="4231160">someone</span> <span m="4231390">looked</span> <span m="4231610">at</span> <span m="4231660">it.</span> <span m="4232280">So</span> <span m="4232520">you</span> <span m="4232640">probably</span> <span m="4232860">want</span> <span m="4232980">to</span> <span m="4233040">change</span> <span m="4233260">it.</span> <span m="4234100">So</span> <span m="4234520">the</span> <span m="4234660">way</span> <span m="4234780">this</span> <span m="4234950">works is</span> <span m="4235240">actually</span> <span m="4236120">at</span> <span m="4236220">some</span> <span m="4236380">level</span> <span m="4237110">fairly</span> <span m="4237490">straightforward.</span> </p>
<p><span m="4238150">So</span> <span m="4238260">there's</span> <span m="4238500">an</span> <span m="4238640">extra</span> <span m="4238950">interface</span> <span m="4239520">to</span> <span m="4239700">this</span> <span m="4240440">Kerberos</span> <span m="4240790">server.</span> <span m="4241440">In</span> <span m="4241570">addition</span> <span m="4241860">to</span> <span m="4241970">Kerberos</span> <span m="4242410">and</span> <span m="4242660">TGS,</span> <span m="4243380">there's</span> <span m="4243570">this</span> <span m="4243690">extra</span> <span m="4244000">service</span> <span m="4244410">called</span> <span m="4245070">kpassword.</span> <span m="4248720">And</span> <span m="4248960">the</span> <span m="4249070">service</span> <span m="4249630">lets</span> <span m="4249950">you</span> <span m="4250700">change</span> <span m="4250900">your</span> <span m="4250980">password.</span> </p>
<p><span m="4252690">And</span> <span m="4253100">the</span> <span m="4253180">way</span> <span m="4253780">it</span> <span m="4253910">works</span> <span m="4254200">is</span> <span m="4254300">you</span> <span m="4254380">get</span> <span m="4254540">a</span> <span m="4254710">ticket</span> <span m="4255290">for</span> <span m="4255540">this</span> <span m="4255670">service</span> <span m="4256050">very</span> <span m="4256200">much</span> <span m="4256410">like</span> <span m="4256540">you'd</span> <span m="4256630">get</span> <span m="4256810">a</span> <span m="4256870">ticket</span> <span m="4257110">for</span> <span m="4257220">the</span> <span m="4257320">mail</span> <span m="4257660">server</span> <span m="4258100">or</span> <span m="4258190">any</span> <span m="4258310">other</span> <span m="4258560">service.</span> <span m="4259750">And</span> <span m="4259910">then</span> <span m="4260050">you</span> <span m="4260710">send</span> <span m="4261020">your</span> <span m="4261180">new</span> <span m="4261350">password</span> <span m="4261780">to</span> <span m="4261860">this</span> <span m="4261970">kpassword</span> <span m="4262510">service</span> <span m="4262830">encrypted</span> <span m="4263190">with</span> <span m="4263320">your</span> <span m="4263500">session</span> <span m="4263800">key.</span> <span m="4264910">And</span> <span m="4265030">then</span> <span m="4265720">if</span> <span m="4266280">everything</span> <span m="4266880">checks</span> <span m="4267130">out,</span> <span m="4267410">your</span> <span m="4267940">key</span> <span m="4268340">in</span> <span m="4268430">the</span> <span m="4268500">database</span> <span m="4268900">is</span> <span m="4269010">going</span> <span m="4269130">to</span> <span m="4269190">be</span> <span m="4269360">updated</span> <span m="4269870">to</span> <span m="4270490">the</span> <span m="4271400">new key.</span> <span m="4272330">Question.</span> </p>
<p><span m="4273070">STUDENT:</span> <span m="4273530">[INAUDIBLE]</span> <span m="4273990">if there was, like,</span> <span m="4274450">no</span> <span m="4274910">[INAUDIBLE]</span> <span m="4275370">they wanted to</span> <span m="4275830">have them</span> <span m="4276290">use a</span> <span m="4276750">[INAUDIBLE]</span> <span m="4277210">had to go</span> <span m="4277670">through this.</span> </p>
<p><span m="4278130">PROFESSOR: That's right.</span> <span m="4278590">OK,</span> <span m="4278790">yeah,</span> <span m="4278940">OK.</span> <span m="4279170">So this is</span> <span m="4279370">a</span> <span m="4279440">good</span> <span m="4279580">point.</span> </p>
<p><span m="4280060">So</span> <span m="4280880">for</span> <span m="4281130">changing</span> <span m="4281510">your</span> <span m="4281680">password,</span> <span m="4282540">remember</span> <span m="4282830">that</span> <span m="4282960">we</span> <span m="4283030">have</span> <span m="4283160">this</span> <span m="4283260">whole</span> <span m="4283540">goal</span> <span m="4283800">that</span> <span m="4283900">if</span> <span m="4283980">someone</span> <span m="4284280">steals</span> <span m="4284720">your</span> <span m="4285140">ticket,</span> <span m="4286130">it</span> <span m="4286250">shouldn't</span> <span m="4286530">be</span> <span m="4286620">good</span> <span m="4286860">enough</span> <span m="4287190">to</span> <span m="4287670">completely</span> <span m="4288070">take</span> <span m="4288270">over</span> <span m="4288440">your</span> <span m="4288590">account.</span> <span m="4289750">So</span> <span m="4290000">for</span> <span m="4290180">this</span> <span m="4290430">reason,</span> <span m="4290940">the</span> <span m="4291070">key</span> <span m="4291260">password</span> <span m="4291660">service</span> <span m="4291990">actually</span> <span m="4292860">doesn't</span> <span m="4293050">accept</span> <span m="4293400">just</span> <span m="4293640">any</span> <span m="4293870">ticket.</span> <span m="4294140">It</span> <span m="4294240">accepts</span> <span m="4294710">a</span> <span m="4295180">ticket</span> <span m="4295430">that you</span> <span m="4295570">initially</span> <span m="4296010">get</span> <span m="4296210">from</span> <span m="4296390">the</span> <span m="4296500">Kerberos</span> <span m="4296900">service</span> <span m="4297490">with</span> <span m="4297720">your</span> <span m="4298610">KC.</span> </p>
<p><span m="4299740">So</span> <span m="4299850">the</span> <span m="4299930">way</span> <span m="4300050">this</span> <span m="4300160">actually</span> <span m="4300370">works</span> <span m="4300780">is</span> <span m="4300990">that</span> <span m="4301370">inside</span> <span m="4301720">of</span> <span m="4301810">every</span> <span m="4302080">ticket,</span> <span m="4302430">in</span> <span m="4302540">addition</span> <span m="4302810">to</span> <span m="4302880">all</span> <span m="4303020">the</span> <span m="4303110">stuff</span> <span m="4303360">I</span> <span m="4303430">showed</span> <span m="4303690">you</span> <span m="4303810">there,</span> <span m="4304260">there's</span> <span m="4304450">an</span> <span m="4304560">extra</span> <span m="4304920">bit</span> <span m="4305530">that</span> <span m="4305700">tells</span> <span m="4305970">you</span> <span m="4306250">which</span> <span m="4306560">of</span> <span m="4306700">these</span> <span m="4307000">two</span> <span m="4307190">things</span> <span m="4307550">gave</span> <span m="4307720">you</span> <span m="4307820">the</span> <span m="4307930">ticket.</span> <span m="4309140">So</span> <span m="4309240">if</span> <span m="4309330">you</span> <span m="4309420">get</span> <span m="4309650">the</span> <span m="4309740">ticket</span> <span m="4310000">from</span> <span m="4310190">this</span> <span m="4310340">Kerberos</span> <span m="4310700">server,</span> <span m="4310960">the</span> <span m="4311070">bit</span> <span m="4311220">has</span> <span m="4311330">one.</span> <span m="4312100">If</span> <span m="4312240">you</span> <span m="4312370">get</span> <span m="4312540">the</span> <span m="4312620">ticket</span> <span m="4312900">from</span> <span m="4313080">the</span> <span m="4313190">TGS</span> <span m="4313620">server,</span> <span m="4313880">the</span> <span m="4314000">bit</span> <span m="4314120">is</span> <span m="4314260">zero,</span> <span m="4314540">let's</span> <span m="4314730">say.</span> </p>
<p><span m="4315500">And</span> <span m="4315620">then</span> <span m="4315700">the</span> <span m="4315800">kpassword</span> <span m="4316470">service,</span> <span m="4317460">in</span> <span m="4317610">addition</span> <span m="4317880">to</span> <span m="4317930">everything that</span> <span m="4318650">any</span> <span m="4318800">mail server</span> <span m="4319180">or</span> <span m="4319430">file</span> <span m="4319720">server</span> <span m="4319950">would</span> <span m="4320180">do, it</span> <span m="4320270">also</span> <span m="4320480">looks</span> <span m="4320720">at</span> <span m="4320790">the</span> <span m="4320980">bit</span> <span m="4321250">on</span> <span m="4321320">the</span> <span m="4321410">ticket</span> <span m="4321620">and says,</span> <span m="4321970">well,</span> <span m="4322360">if</span> <span m="4322480">you</span> <span m="4322570">got</span> <span m="4322740">it</span> <span m="4322840">from</span> <span m="4323000">Kerberos,</span> <span m="4323450">that's</span> <span m="4323650">good.</span> <span m="4324210">If</span> <span m="4324310">you</span> <span m="4324370">got it</span> <span m="4324570">from</span> <span m="4324750">TGS,</span> <span m="4325270">that</span> <span m="4325430">means</span> <span m="4325700">that</span> <span m="4326730">maybe</span> <span m="4327020">you</span> <span m="4327120">stole</span> <span m="4327370">someone's</span> <span m="4327660">ticket</span> <span m="4328020">and</span> <span m="4328180">you</span> <span m="4328300">didn't</span> <span m="4328550">know</span> <span m="4328700">their</span> <span m="4328840">password</span> <span m="4329160">right</span> <span m="4329370">away.</span> <span m="4330000">So</span> <span m="4330020">I'm</span> <span m="4330120">not</span> <span m="4330300">going</span> <span m="4330390">to</span> <span m="4330430">accept</span> <span m="4330750">this.</span> </p>
<p><span m="4331880">So</span> <span m="4332170">this is how a</span> <span m="4332360">key</span> <span m="4332590">password</span> <span m="4333420">ensures</span> <span m="4333990">that</span> <span m="4334100">you</span> <span m="4334190">can</span> <span m="4334280">only</span> <span m="4334540">change</span> <span m="4334890">the</span> <span m="4334990">password</span> <span m="4335320">if</span> <span m="4335480">you</span> <span m="4335630">just</span> <span m="4336070">knew</span> <span m="4336180">the</span> <span m="4336300">password</span> <span m="4337230">immediately</span> <span m="4337700">prior</span> <span m="4338020">to</span> <span m="4338060">this.</span> <span m="4338220">So you</span> <span m="4338350">never</span> <span m="4338530">actually</span> <span m="4340290">supply</span> <span m="4340620">the</span> <span m="4340700">old</span> <span m="4340990">password</span> <span m="4341350">to kpassword.</span> <span m="4341980">You supply</span> <span m="4342240">that</span> <span m="4342510">to--</span> <span m="4343040">well,</span> <span m="4343530">you</span> <span m="4343630">supply</span> <span m="4344040">that</span> <span m="4344210">in</span> <span m="4344290">order</span> <span m="4344500">to</span> <span m="4344540">decrypt</span> <span m="4344830">the</span> <span m="4344910">response</span> <span m="4345270">from</span> <span m="4345380">the</span> <span m="4345480">Kerberos</span> <span m="4345880">server</span> <span m="4346180">for</span> <span m="4346630">the</span> <span m="4347000">kpassword</span> <span m="4347170">password</span> <span m="4347550">principal.</span> <span m="4348940">Makes</span> <span m="4349210">sense?</span> </p>
<p><span m="4351390">All</span> <span m="4351460">right,</span> <span m="4352630">so</span> <span m="4354810">let's</span> <span m="4355020">just</span> <span m="4355570">actually</span> <span m="4355780">spell</span> <span m="4356220">out</span> <span m="4356670">the</span> <span m="4358110">interactions</span> <span m="4359020">with</span> <span m="4359270">the</span> <span m="4359360">key</span> <span m="4359530">password</span> <span m="4359890">service</span> <span m="4360350">because</span> <span m="4360690">there'll</span> <span m="4360830">be</span> <span m="4360990">something</span> <span m="4361480">a</span> <span m="4361540">little</span> <span m="4361710">bit</span> <span m="4361830">interesting</span> <span m="4362170">there.</span> <span m="4363320">So</span> <span m="4364020">when</span> <span m="4364220">you're</span> <span m="4364360">going</span> <span m="4364470">to</span> <span m="4364780">change</span> <span m="4365060">your</span> <span m="4365170">password,</span> <span m="4368010">what</span> <span m="4368480">the</span> <span m="4368720">client</span> <span m="4369070">is</span> <span m="4369190">going</span> <span m="4369300">to</span> <span m="4369390">do</span> <span m="4369630">is,</span> <span m="4369950">of</span> <span m="4370050">course,</span> <span m="4371400">obtain</span> <span m="4371910">this</span> <span m="4373080">initial</span> <span m="4373500">ticket</span> <span m="4373820">from</span> <span m="4374030">Kerberos.</span> <span m="4374990">So</span> <span m="4375990">it</span> <span m="4376120">sends</span> <span m="4376310">a</span> <span m="4376370">message</span> <span m="4376730">to</span> <span m="4377550">the</span> <span m="4377650">Kerberos</span> <span m="4378020">service</span> <span m="4378360">saying</span> <span m="4378690">here</span> <span m="4378890">is</span> <span m="4378950">my</span> <span m="4379090">client</span> <span m="4379470">ID</span> <span m="4380120">and</span> <span m="4380320">I</span> <span m="4380360">want</span> <span m="4380530">to</span> <span m="4380660">talk</span> <span m="4380900">to</span> <span m="4380980">the</span> <span m="4381090">kpassword</span> <span m="4381710">service.</span> </p>
<p><span m="4383760">And</span> <span m="4384580">the</span> <span m="4384710">Kerberos</span> <span m="4385050">server is</span> <span m="4385360">going</span> <span m="4385490">to</span> <span m="4385590">send</span> <span m="4385840">a</span> <span m="4385870">response</span> <span m="4386280">back</span> <span m="4387220">including</span> <span m="4387930">the</span> <span m="4388110">ticket</span> <span m="4388480">between</span> <span m="4389080">the</span> <span m="4389190">client</span> <span m="4389690">and</span> <span m="4390310">the</span> <span m="4390840">kpassword</span> <span m="4391510">service</span> <span m="4392950">encrypted</span> <span m="4393510">with</span> <span m="4393680">a</span> <span m="4393790">key</span> <span m="4394050">of</span> <span m="4394310">kpass</span> <span m="4396370">and</span> <span m="4396930">the</span> <span m="4397040">shared</span> <span m="4397340">key</span> <span m="4397520">between</span> <span m="4397840">KC</span> <span m="4398510">and</span> <span m="4399910">kpass.</span> <span m="4402130">Makes sense?</span> <span m="4402300">This is</span> <span m="4402650">exactly</span> <span m="4403320">this</span> <span m="4403500">thing</span> <span m="4403670">up</span> <span m="4403820">here</span> <span m="4404760">encrypted</span> <span m="4405030">with</span> <span m="4405220">KC.</span> </p>
<p><span m="4405995">Makes</span> <span m="4406260">sense?</span> <span m="4406560">Everyone's</span> <span m="4406860">runs</span> <span m="4407080">on</span> <span m="4407160">board?</span> <span m="4408050">And</span> <span m="4408180">then</span> <span m="4408480">very</span> <span m="4408670">much</span> <span m="4408910">like</span> <span m="4409060">you</span> <span m="4409190">talk</span> <span m="4409410">to a</span> <span m="4409540">mail</span> <span m="4409740">server,</span> <span m="4410430">you</span> <span m="4410530">take</span> <span m="4410620">this</span> <span m="4411030">and</span> <span m="4411180">you</span> <span m="4411270">send</span> <span m="4411480">it</span> <span m="4411570">to</span> <span m="4411730">kpassword.</span> <span m="4412170">You</span> <span m="4412260">say,</span> <span m="4412380">well,</span> <span m="4412570">here's</span> <span m="4412860">my</span> <span m="4413010">ticket--</span> <span m="4413850">tckpass</span> <span m="4416820">encrypted</span> <span m="4417420">with</span> <span m="4418260">kpass.</span> <span m="4419500">And</span> <span m="4420910">in</span> <span m="4421020">addition,</span> <span m="4421380">you</span> <span m="4421520">send</span> <span m="4421760">your</span> <span m="4421900">new</span> <span m="4422050">password</span> <span m="4425370">and</span> <span m="4425520">you</span> <span m="4425590">encrypt</span> <span m="4425920">this</span> <span m="4426920">with</span> <span m="4427330">the</span> <span m="4427510">key</span> <span m="4428050">kcpass</span> <span m="4430240">with</span> <span m="4430390">shared</span> <span m="4430740">key</span> <span m="4431030">for</span> <span m="4431280">your</span> <span m="4431730">interaction.</span> </p>
<p><span m="4432340">I</span> <span m="4432675">just</span> <span m="4433010">separated</span> <span m="4433460">these</span> <span m="4433650">two</span> <span m="4433790">things</span> <span m="4434020">out</span> <span m="4434200">here.</span> <span m="4435730">Make</span> <span m="4435880">sense?</span> <span m="4436060">So this</span> <span m="4436220">is the thing</span> <span m="4436660">you send</span> <span m="4436810">to the</span> <span m="4436910">kpassword</span> <span m="4437360">service</span> <span m="4437650">with</span> <span m="4437810">a</span> <span m="4437830">new</span> <span m="4438010">password</span> <span m="4438490">encrypted</span> <span m="4438630">with the</span> <span m="4438790">session</span> <span m="4439110">key.</span> <span m="4440350">Yeah.</span> </p>
<p><span m="4440640">STUDENT: But</span> <span m="4441132">in the</span> <span m="4441624">[INAUDIBLE]</span> </p>
<p><span m="4447040">PROFESSOR: So</span> <span m="4447295">if the</span> <span m="4447550">attacker</span> <span m="4447670">knows</span> <span m="4447900">your</span> <span m="4448080">password,</span> <span m="4448450">they</span> <span m="4448530">can</span> <span m="4448670">change</span> <span m="4448860">your</span> <span m="4448940">password--</span> <span m="4449310">absolutely.</span> <span m="4451420">So</span> <span m="4451570">it</span> <span m="4451670">seems</span> <span m="4452120">reasonable,</span> <span m="4452510">right?</span> <span m="4452670">Like,</span> <span m="4452820">there's</span> <span m="4452990">no</span> <span m="4453140">other</span> <span m="4453360">way</span> <span m="4453530">to</span> <span m="4453660">tell</span> <span m="4453920">whether</span> <span m="4454150">it's</span> <span m="4454260">you</span> <span m="4454410">or</span> <span m="4454490">not.</span> </p>
<p><span m="4455110">If</span> <span m="4455220">someone</span> <span m="4455600">walks</span> <span m="4455840">up</span> <span m="4455960">to</span> <span m="4456310">an Athena</span> <span m="4456360">workstation,</span> <span m="4456820">types</span> <span m="4457060">in</span> <span m="4457150">your</span> <span m="4457290">username</span> <span m="4457640">and</span> <span m="4457730">password,</span> <span m="4458090">runs</span> <span m="4458390">password,</span> <span m="4459110">change</span> <span m="4459320">my password</span> <span m="4459730">to</span> <span m="4459800">this</span> <span m="4459970">new</span> <span m="4460100">thing,</span> <span m="4460840">they</span> <span m="4460960">know</span> <span m="4461110">your</span> <span m="4461270">password?</span> <span m="4461630">They're</span> <span m="4461750">going</span> <span m="4461830">to</span> <span m="4461880">be</span> <span m="4461950">able</span> <span m="4462100">to</span> <span m="4462140">change</span> <span m="4462420">it.</span> <span m="4463340">So</span> <span m="4463440">that's</span> <span m="4463480">totally</span> <span m="4463760">the</span> <span m="4463860">same</span> <span m="4464160">in</span> <span m="4464270">almost</span> <span m="4464580">any</span> <span m="4464750">system</span> <span m="4465010">you</span> <span m="4465100">could</span> <span m="4465190">imagine.</span> </p>
<p><span m="4465480">This</span> <span m="4465570">is</span> <span m="4465680">true</span> <span m="4465890">for</span> <span m="4466060">Gmail</span> <span m="4466470">probably.</span> <span m="4467150">This is</span> <span m="4467400">true</span> <span m="4467540">for</span> <span m="4467710">any</span> <span m="4468330">system</span> <span m="4468650">that</span> <span m="4468750">uses</span> <span m="4468980">passwords</span> <span m="4469330">in</span> <span m="4469430">general.</span> <span m="4471240">The</span> <span m="4471410">reason</span> <span m="4471760">that</span> <span m="4471960">we</span> <span m="4472120">had</span> <span m="4472340">to</span> <span m="4472440">talk</span> <span m="4472650">to</span> <span m="4472740">the</span> <span m="4472850">Kerberos</span> <span m="4473250">server</span> <span m="4473570">instead</span> <span m="4473840">of</span> <span m="4474010">the</span> <span m="4474460">TGS</span> <span m="4474860">server</span> <span m="4475260">here</span> <span m="4476040">is</span> <span m="4476500">that</span> <span m="4477500">if</span> <span m="4477630">someone</span> <span m="4477920">steals</span> <span m="4478260">your</span> <span m="4478850">ticket,</span> <span m="4479610">then</span> <span m="4479890">we</span> <span m="4479970">don't</span> <span m="4480140">want</span> <span m="4480330">them</span> <span m="4480440">to</span> <span m="4480510">be</span> <span m="4480600">able</span> <span m="4480740">to</span> <span m="4480830">change</span> <span m="4481070">your</span> <span m="4481180">password.</span> </p>
<p><span m="4482700">So</span> <span m="4482750">if</span> <span m="4482860">someone</span> <span m="4483250">corrupts</span> <span m="4483680">an</span> <span m="4483760">Athena</span> <span m="4484040">workstation</span> <span m="4484530">after</span> <span m="4484910">you</span> <span m="4485040">log</span> <span m="4485310">in,</span> <span m="4486170">your</span> <span m="4486350">password</span> <span m="4486850">is</span> <span m="4486990">gone</span> <span m="4487250">from</span> <span m="4487440">memory,</span> <span m="4488040">the</span> <span m="4488170">ticket</span> <span m="4488440">remains.</span> <span m="4489420">You</span> <span m="4489540">could,</span> <span m="4489790">in</span> <span m="4489890">principle,</span> <span m="4490170">use</span> <span m="4490430">the</span> <span m="4490940">ticket</span> <span m="4491370">to</span> <span m="4491450">obtain</span> <span m="4491880">more</span> <span m="4492060">tickets</span> <span m="4492880">for</span> <span m="4493160">the</span> <span m="4493370">password</span> <span m="4493690">changing</span> <span m="4494020">service.</span> <span m="4495170">But</span> <span m="4495360">the password</span> <span m="4495590">changing</span> <span m="4495870">service</span> <span m="4496290">says</span> <span m="4496440">that's</span> <span m="4496590">not</span> <span m="4496700">going</span> <span m="4496780">to</span> <span m="4496820">be</span> <span m="4496940">good</span> <span m="4497090">enough.</span> <span m="4497270">It's</span> <span m="4497370">going</span> <span m="4497470">to</span> <span m="4497530">look</span> <span m="4497760">at</span> <span m="4497870">this</span> <span m="4498070">ticket</span> <span m="4498300">here--</span> <span m="4499110">ticket</span> <span m="4499370">between</span> <span m="4499610">the</span> <span m="4499700">client</span> <span m="4500090">and</span> <span m="4500280">the</span> <span m="4500360">password</span> <span m="4500720">service.</span> </p>
<p><span m="4501950">And</span> <span m="4502840">if</span> <span m="4503130">that</span> <span m="4503370">was</span> <span m="4503930">updated</span> <span m="4504400">through</span> <span m="4504610">TGS,</span> <span m="4505080">it's</span> <span m="4505200">going</span> <span m="4505310">to</span> <span m="4505350">reject</span> <span m="4505750">your</span> <span m="4505770">request.</span> <span m="4506180">It's</span> <span m="4506260">only</span> <span m="4506450">going</span> <span m="4506560">to</span> <span m="4506600">accept</span> <span m="4506880">it</span> <span m="4506960">if</span> <span m="4507160">it</span> <span m="4507270">was</span> <span m="4507420">obtained</span> <span m="4507760">directly</span> <span m="4508090">from the</span> <span m="4508240">Kerberos</span> <span m="4508600">service</span> <span m="4508920">using</span> <span m="4509190">KC.</span> <span m="4511260">Makes</span> <span m="4511410">sense?</span> <span m="4511830">Question.</span> </p>
<p><span m="4512210">STUDENT: So</span> <span m="4512630">if you</span> <span m="4513110">[INAUDIBLE]</span> <span m="4513531">password</span> <span m="4513952">with the</span> <span m="4514373">[INAUDIBLE]</span> <span m="4514794">Athena,</span> <span m="4515215">right?</span> </p>
<p><span m="4515640">PROFESSOR: Yeah.</span> </p>
<p><span m="4516120">STUDENT: So if</span> <span m="4516571">I would</span> <span m="4517022">steal your</span> <span m="4517473">private key--</span> </p>
<p><span m="4518375">PROFESSOR: Yeah,</span> <span m="4519280">so</span> <span m="4519610">actually,</span> <span m="4519900">KC</span> <span m="4520480">is</span> <span m="4520590">basically</span> <span m="4520910">equivalent</span> <span m="4521470">to</span> <span m="4521680">your</span> <span m="4521850">password</span> <span m="4522260">here.</span> <span m="4522940">As</span> <span m="4523070">far</span> <span m="4523240">as</span> <span m="4523330">the</span> <span m="4523510">Kerberos</span> <span m="4523850">protocol</span> <span m="4524210">is</span> <span m="4524300">concerned,</span> <span m="4524770">that</span> <span m="4524870">don't</span> <span m="4524960">even</span> <span m="4525450">think</span> <span m="4525650">that</span> <span m="4525790">you</span> <span m="4525880">have</span> <span m="4526020">a</span> <span m="4526290">password.</span> <span m="4526430">It</span> <span m="4526520">thinks</span> <span m="4526680">you</span> <span m="4526760">have</span> <span m="4526880">a</span> <span m="4526940">private</span> <span m="4527350">key</span> <span m="4527530">KC.</span> <span m="4528510">If</span> <span m="4528650">someone</span> <span m="4528820">knows</span> <span m="4529040">KC,</span> <span m="4529480">that's</span> <span m="4529580">basically</span> <span m="4529960">your</span> <span m="4530100">password.</span> <span m="4531000">So</span> <span m="4531210">you</span> <span m="4531350">can</span> <span m="4531500">change</span> <span m="4531780">your</span> <span m="4531900">key</span> <span m="4532180">from</span> <span m="4532380">KC</span> <span m="4532770">to</span> <span m="4532870">something</span> <span m="4533210">else</span> <span m="4533490">so</span> <span m="4533590">you</span> <span m="4533690">don't</span> <span m="4533810">lose</span> <span m="4534010">this</span> <span m="4534150">thing,</span> <span m="4534310">yeah.</span> <span m="4534886">Uh,</span> <span m="4535272">yeah,</span> <span m="4536100">question?</span> </p>
<p><span m="4536690">STUDENT: [INAUDIBLE]</span> <span m="4538594">initial</span> <span m="4539070">message</span> <span m="4539546">[INAUDIBLE]</span> <span m="4541926">from changing</span> <span m="4542402">the</span> <span m="4542878">[INAUDIBLE]</span> </p>
<p><span m="4544782">PROFESSOR: Oh,</span> <span m="4545260">you can</span> <span m="4545380">certainly</span> <span m="4545660">get</span> <span m="4545910">a</span> <span m="4546970">ticket</span> <span m="4547280">for</span> <span m="4547420">some</span> <span m="4547560">other</span> <span m="4547780">service</span> <span m="4548600">or</span> <span m="4548950">an attacker could</span> <span m="4549290">drop</span> <span m="4549490">this</span> <span m="4549620">message</span> <span m="4549940">altogether</span> <span m="4550340">or corrupt</span> <span m="4550600">this</span> <span m="4550720">exchange.</span> <span m="4551480">And</span> <span m="4551600">then</span> <span m="4551690">you're not</span> <span m="4551960">going</span> <span m="4552060">to</span> <span m="4552120">successfully</span> <span m="4552570">change</span> <span m="4552790">your</span> <span m="4552870">password.</span> </p>
<p><span m="4553255">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="4556556">PROFESSOR: Yeah,</span> <span m="4557042">so the</span> <span m="4557530">client</span> <span m="4557850">actually</span> <span m="4558080">knows</span> <span m="4558410">exactly</span> <span m="4558800">what</span> <span m="4558990">service</span> <span m="4559250">it</span> <span m="4559320">wants</span> <span m="4559510">to</span> <span m="4559620">talk</span> <span m="4559910">to.</span> <span m="4560350">So</span> <span m="4560490">if</span> <span m="4560690">it--</span> <span m="4565350">it's</span> <span m="4565480">going</span> <span m="4565590">to</span> <span m="4565840">make</span> <span m="4566130">sure,</span> <span m="4566590">well,</span> <span m="4567870">there</span> <span m="4567960">are</span> <span m="4568030">some</span> <span m="4568160">messages,</span> <span m="4568610">some</span> <span m="4568760">parts</span> <span m="4568950">of this</span> <span m="4569080">protocol I'm</span> <span m="4569460">not</span> <span m="4569620">showing</span> <span m="4570070">that</span> <span m="4570790">allow</span> <span m="4571050">the</span> <span m="4571160">client</span> <span m="4571420">to</span> <span m="4571480">make</span> <span m="4571650">sure</span> <span m="4571810">they</span> <span m="4572000">actually</span> <span m="4572190">got</span> <span m="4572350">the</span> <span m="4572430">ticket</span> <span m="4572670">for</span> <span m="4572770">the</span> <span m="4572870">right</span> <span m="4573080">thing.</span> <span m="4574330">But</span> <span m="4574590">yeah,</span> <span m="4574690">so the--</span> <span m="4575724">sorry.</span> <span m="4577340">Question?</span> </p>
<p><span m="4577700">STUDENT: [INAUDIBLE]</span> <span m="4578626">very</span> <span m="4579090">easy</span> <span m="4579540">to</span> <span m="4580007">denial of</span> <span m="4580474">service attack</span> <span m="4580941">when an attacker</span> <span m="4581410">[INAUDIBLE]</span> <span m="4582990">modifying</span> <span m="4583980">the</span> <span m="4584471">encrypted</span> <span m="4584962">version of</span> <span m="4585453">the new</span> <span m="4585944">password.</span> </p>
<p><span m="4586926">PROFESSOR: Yeah,</span> <span m="4587417">so</span> <span m="4587910">there's</span> <span m="4588220">actually</span> <span m="4588270">lot</span> <span m="4588520">of</span> <span m="4588610">things.</span> <span m="4589340">Because,</span> <span m="4589770">for</span> <span m="4589880">example,</span> <span m="4592510">Kerberos</span> <span m="4593020">doesn't</span> <span m="4593660">do</span> <span m="4593860">authentication</span> <span m="4594500">properly</span> <span m="4594910">of</span> <span m="4595020">messages--</span> <span m="4595360">it</span> <span m="4595440">just</span> <span m="4595570">does</span> <span m="4595850">encryption--</span> <span m="4596670">you</span> <span m="4596800">could</span> <span m="4596960">totally</span> <span m="4597220">corrupt</span> <span m="4597560">this</span> <span m="4597740">blob.</span> <span m="4598450">And--</span> </p>
<p><span m="4598770">STUDENT: [INAUDIBLE]</span> </p>
<p><span m="4599870">PROFESSOR: Yeah,</span> <span m="4600253">you could</span> <span m="4600636">flip it around and</span> <span m="4601020">it'll</span> <span m="4601330">decrypt</span> <span m="4601650">to</span> <span m="4601720">something</span> <span m="4602170">else.</span> <span m="4602770">The</span> <span m="4602780">service</span> <span m="4603070">was</span> <span m="4603150">like,</span> <span m="4603340">oh</span> <span m="4603440">yeah,</span> <span m="4603630">that's the</span> <span m="4603790">new</span> <span m="4603930">password,</span> <span m="4604260">and</span> <span m="4604390">set</span> <span m="4604520">it.</span> <span m="4604900">And</span> <span m="4604990">then</span> <span m="4605070">you're</span> <span m="4605230">sort</span> <span m="4605360">of</span> <span m="4605470">locked</span> <span m="4605730">out.</span> </p>
<p><span m="4606340">So</span> <span m="4606450">it</span> <span m="4606510">seems</span> <span m="4606720">really</span> <span m="4607020">unfortunate.</span> <span m="4607580">And</span> <span m="4607810">this</span> <span m="4607910">is</span> <span m="4608240">yet</span> <span m="4608480">another</span> <span m="4608750">reason</span> <span m="4609000">why</span> <span m="4609130">you</span> <span m="4609230">want</span> <span m="4609440">separate</span> <span m="4609780">encryption</span> <span m="4610300">and</span> <span m="4610440">authentication</span> <span m="4611000">in</span> <span m="4611080">the</span> <span m="4611170">protocol.</span> <span m="4612760">There's</span> <span m="4612940">actually</span> <span m="4613140">an</span> <span m="4613340">even</span> <span m="4613610">bigger</span> <span m="4613850">problem</span> <span m="4614030">here.</span> <span m="4614200">But</span> <span m="4614340">actually,</span> <span m="4614590">yeah,</span> <span m="4614680">question?</span> </p>
<p><span m="4615080">STUDENT: What's</span> <span m="4615480">the point of</span> <span m="4615969">having a</span> <span m="4616458">one way</span> <span m="4616947">function</span> <span m="4617110">to</span> <span m="4617273">[INAUDIBLE]</span> <span m="4617436">your password in</span> <span m="4617925">KC if they're</span> <span m="4618414">essentially</span> <span m="4618903">[INAUDIBLE]?</span> </p>
<p><span m="4621350">PROFESSOR: Basically</span> <span m="4622230">because</span> <span m="4622630">KC</span> <span m="4622895">is</span> <span m="4623160">a</span> <span m="4623230">56-bit</span> <span m="4624020">ds</span> <span m="4624480">key</span> <span m="4625080">and</span> <span m="4625300">your</span> <span m="4625440">password</span> <span m="4625790">might</span> <span m="4625960">be</span> <span m="4626040">of</span> <span m="4626130">different</span> <span m="4626410">lengths.</span> <span m="4627060">And</span> <span m="4627200">even</span> <span m="4627360">if</span> <span m="4627430">it's</span> <span m="4627580">longer</span> <span m="4627810">than</span> <span m="4627950">56</span> <span m="4628400">bits,</span> <span m="4629310">which</span> <span m="4629430">is</span> <span m="4629530">seven</span> <span m="4629915">bites</span> <span m="4630300">or seven</span> <span m="4630580">characters,</span> <span m="4631360">you</span> <span m="4631500">want</span> <span m="4631650">to</span> <span m="4631690">use</span> <span m="4632030">all</span> <span m="4632180">those</span> <span m="4632370">extra</span> <span m="4632660">bytes</span> <span m="4632980">too.</span> <span m="4633630">So</span> <span m="4633930">it's mostly</span> <span m="4634320">just to</span> <span m="4634710">condense it</span> <span m="4635170">down</span> <span m="4635560">to</span> <span m="4635640">a</span> <span m="4635700">fixed</span> <span m="4636040">width</span> <span m="4637150">blob,</span> <span m="4637900">yeah.</span> </p>
<p><span m="4638996">But there's</span> <span m="4639410">actually a</span> <span m="4639510">much</span> <span m="4639680">more</span> <span m="4639850">interesting</span> <span m="4640140">problem</span> <span m="4640440">here,</span> <span m="4640760">which</span> <span m="4640940">is</span> <span m="4641070">that</span> <span m="4641550">suppose</span> <span m="4641870">that</span> <span m="4642100">I</span> <span m="4642210">change</span> <span m="4642580">my</span> <span m="4642720">password</span> <span m="4643990">and</span> <span m="4644270">then</span> <span m="4646140">I</span> <span m="4646280">decide,</span> <span m="4646630">OK,</span> <span m="4646740">well,</span> <span m="4647040">I</span> <span m="4647110">change</span> <span m="4647280">my</span> <span m="4647380">password.</span> <span m="4647820">A</span> <span m="4647900">day</span> <span m="4648150">goes</span> <span m="4648370">by</span> <span m="4648810">and</span> <span m="4649160">I'm thinking,</span> <span m="4649500">oh yeah,</span> <span m="4649670">sure.</span> <span m="4649930">I'll</span> <span m="4650390">tell</span> <span m="4650610">everyone</span> <span m="4650890">what</span> <span m="4651050">my</span> <span m="4651210">stupid</span> <span m="4651540">old</span> <span m="4651710">password</span> <span m="4652090">was.</span> <span m="4652370">Is</span> <span m="4652650">this a</span> <span m="4652720">good</span> <span m="4652880">idea</span> <span m="4653150">in</span> <span m="4653270">Kerberos?</span> <span m="4655440">Yeah.</span> </p>
<p><span m="4655700">STUDENT: [INAUDIBLE]</span> <span m="4656582">immediately</span> <span m="4657023">expire</span> <span m="4657464">until</span> <span m="4657905">the--</span> </p>
<p><span m="4658346">PROFESSOR: Yeah,</span> <span m="4658787">OK.</span> <span m="4659230">But someone's</span> <span m="4659450">got to wait</span> <span m="4659710">for</span> <span m="4659910">all</span> <span m="4660070">my</span> <span m="4660110">tickets</span> <span m="4660240">to</span> <span m="4660400">expire.</span> <span m="4660470">I</span> <span m="4660730">wait</span> <span m="4660860">for,</span> <span m="4660990">like,</span> <span m="4661290">a</span> <span m="4661370">week.</span> <span m="4662380">And</span> <span m="4662510">then</span> <span m="4662590">no</span> <span m="4662990">tickets</span> <span m="4663250">are</span> <span m="4663340">good</span> <span m="4663500">anymore.</span> <span m="4664020">Can</span> <span m="4664295">I</span> <span m="4664570">give</span> <span m="4664740">out</span> <span m="4664900">my</span> <span m="4664990">old</span> <span m="4665200">password</span> <span m="4665540">now?</span> <span m="4665830">Yeah.</span> </p>
<p><span m="4666110">STUDENT: It might</span> <span m="4666503">take</span> <span m="4666896">a</span> <span m="4667290">while</span> <span m="4667770">to</span> <span m="4668207">replicate.</span> </p>
<p><span m="4668644">PROFESSOR: Yeah,</span> <span m="4669081">suppose the</span> <span m="4669520">replicas</span> <span m="4669930">are</span> <span m="4670010">all</span> <span m="4670350">updated,</span> <span m="4670500">yeah,</span> <span m="4671380">all</span> <span m="4671510">the</span> <span m="4671620">stuff.</span> <span m="4671890">Yeah.</span> </p>
<p><span m="4672160">STUDENT: [INAUDIBLE]</span> <span m="4672651">if someone</span> <span m="4673142">saves the</span> <span m="4673633">initial</span> <span m="4674124">transaction</span> <span m="4674615">[INAUDIBLE]</span> <span m="4675106">to get,</span> <span m="4675597">like, your old</span> <span m="4676088">password</span> <span m="4676579">now that they have</span> <span m="4677070">your new password.</span> </p>
<p><span m="4677570">PROFESSOR: Yeah,</span> <span m="4677830">so this is</span> <span m="4678090">actually</span> <span m="4678310">super</span> <span m="4678690">worrisome</span> <span m="4679120">in</span> <span m="4679240">Kerberos,</span> <span m="4679690">which</span> <span m="4679850">is</span> <span m="4679980">that--</span> <span m="4680590">suppose</span> <span m="4680890">some</span> <span m="4681020">attacker</span> <span m="4681370">was</span> <span m="4681560">watching</span> <span m="4682000">all</span> <span m="4682190">of</span> <span m="4682260">my</span> <span m="4682390">previous</span> <span m="4682820">password</span> <span m="4683190">changes.</span> <span m="4684240">They</span> <span m="4684340">didn't</span> <span m="4684550">know</span> <span m="4684760">what</span> <span m="4684920">my</span> <span m="4685040">password</span> <span m="4685490">was</span> <span m="4685850">or</span> <span m="4686070">is</span> <span m="4686490">or</span> <span m="4686940">anything.</span> <span m="4687690">But</span> <span m="4687840">they're</span> <span m="4687960">just</span> <span m="4688120">saving</span> <span m="4688440">these</span> <span m="4688620">packets</span> <span m="4688940">very</span> <span m="4689090">diligently.</span> </p>
<p><span m="4690460">And</span> <span m="4690650">then</span> <span m="4690880">a</span> <span m="4690920">month</span> <span m="4691290">later,</span> <span m="4691880">I</span> <span m="4692250">go</span> <span m="4692420">and</span> <span m="4692520">say,</span> <span m="4692650">oh,</span> <span m="4692810">my</span> <span m="4692950">password</span> <span m="4693360">was</span> <span m="4693670">poodle</span> <span m="4694060">or</span> <span m="4694200">something</span> <span m="4694540">silly</span> <span m="4694780">like</span> <span m="4694940">this.</span> <span m="4695820">And</span> <span m="4695950">then</span> <span m="4696040">they</span> <span m="4696140">go</span> <span m="4696400">say ah,</span> <span m="4696660">ha,</span> <span m="4696920">ha.</span> <span m="4697520">I</span> <span m="4697640">can</span> <span m="4697810">now</span> <span m="4697960">decrypt</span> <span m="4698770">this</span> <span m="4699080">initial</span> <span m="4699450">thing</span> <span m="4699630">because</span> <span m="4699850">it</span> <span m="4699970">was</span> <span m="4700110">encrypted</span> <span m="4700300">with your</span> <span m="4700530">old</span> <span m="4700910">KC.</span> <span m="4701550">And</span> <span m="4702040">I</span> <span m="4702130">can</span> <span m="4702350">get</span> <span m="4702650">this</span> <span m="4702900">KC</span> <span m="4703370">with</span> <span m="4703550">pass</span> <span m="4704140">that</span> <span m="4704280">you</span> <span m="4704410">shared.</span> </p>
<p><span m="4705230">Then</span> <span m="4705340">I</span> <span m="4705380">can</span> <span m="4705500">use</span> <span m="4705810">this</span> <span m="4706050">to</span> <span m="4706160">decrypt</span> <span m="4706670">the</span> <span m="4706750">new</span> <span m="4706910">password</span> <span m="4707270">you</span> <span m="4707360">sent</span> <span m="4707570">to</span> <span m="4707630">the</span> <span m="4707730">KDC.</span> <span m="4708450">And even</span> <span m="4708810">if</span> <span m="4709060">you</span> <span m="4709140">change</span> <span m="4709350">the</span> <span m="4709420">password</span> <span m="4709710">again,</span> <span m="4709910">I</span> <span m="4709960">can</span> <span m="4710120">decrypt</span> <span m="4710370">the</span> <span m="4710450">next</span> <span m="4710780">round</span> <span m="4711080">as</span> <span m="4711190">well.</span> <span m="4711500">And you</span> <span m="4711610">can</span> <span m="4711780">just</span> <span m="4711960">keep</span> <span m="4712120">going</span> <span m="4712340">and</span> <span m="4712450">get</span> <span m="4712570">the</span> <span m="4712640">newest</span> <span m="4712950">password.</span> </p>
<p><span m="4713460">So</span> <span m="4714010">in</span> <span m="4714230">this</span> <span m="4714500">particular</span> <span m="4714910">password,</span> <span m="4715370">changing</span> <span m="4715630">protocol,</span> <span m="4717080">if</span> <span m="4717260">you</span> <span m="4717690">ever</span> <span m="4718000">disclose</span> <span m="4718490">an</span> <span m="4718680">old</span> <span m="4719010">password,</span> <span m="4719520">then</span> <span m="4719680">someone</span> <span m="4720040">could</span> <span m="4720650">sort of</span> <span m="4721000">unzip</span> <span m="4721520">this</span> <span m="4721720">whole</span> <span m="4721970">chain</span> <span m="4722290">of</span> <span m="4722380">encrypted</span> <span m="4722780">messages</span> <span m="4723330">and</span> <span m="4723570">get</span> <span m="4723730">your</span> <span m="4724230">newest</span> <span m="4724420">password</span> <span m="4724780">as</span> <span m="4724870">well.</span> <span m="4726110">This is</span> <span m="4726570">actually</span> <span m="4726760">very</span> <span m="4726990">troublesome</span> <span m="4727370">in</span> <span m="4727440">the</span> <span m="4727550">design.</span> <span m="4727860">Yeah.</span> </p>
<p><span m="4728360">STUDENT: Doesn't</span> <span m="4728845">the later</span> <span m="4729330">version of</span> <span m="4729815">Kerberos</span> <span m="4730300">[INAUDIBLE]</span> </p>
<p><span m="4731270">PROFESSOR: Absolutely,</span> <span m="4731755">yes.</span> <span m="4732240">So there's actually a</span> <span m="4732730">solution</span> <span m="4733060">to</span> <span m="4733140">this</span> <span m="4733380">that's</span> <span m="4733520">not</span> <span m="4733770">sort</span> <span m="4733870">of</span> <span m="4733950">fundamental.</span> <span m="4734490">And</span> <span m="4734820">this is</span> <span m="4735010">something</span> <span m="4735250">they</span> <span m="4735360">didn't</span> <span m="4735620">realize in</span> <span m="4736030">Kerberos</span> <span m="4736350">version</span> <span m="4736600">4.</span> </p>
<p><span m="4737160">There's</span> <span m="4737330">actually</span> <span m="4737540">this</span> <span m="4737970">nice</span> <span m="4738850">mechanism</span> <span m="4739470">called</span> <span m="4739800">Diffie-Hellman</span> <span m="4740610">that</span> <span m="4742000">I'll</span> <span m="4742130">just</span> <span m="4742320">sketch</span> <span m="4742610">out</span> <span m="4742740">in</span> <span m="4742810">like</span> <span m="4743010">one</span> <span m="4743210">minute</span> <span m="4743800">just</span> <span m="4744010">so</span> <span m="4744150">that</span> <span m="4744260">you</span> <span m="4744340">guys</span> <span m="4744560">know</span> <span m="4744810">when</span> <span m="4745130">to</span> <span m="4745250">use</span> <span m="4745480">it</span> <span m="4745940">or</span> <span m="4746050">et</span> <span m="4746150">cetera.</span> <span m="4746420">But</span> <span m="4746640">it's</span> <span m="4746850">basically</span> <span m="4747070">a</span> <span m="4747130">solution</span> <span m="4747580">for</span> <span m="4747680">this</span> <span m="4747890">kind</span> <span m="4748080">of</span> <span m="4748130">a</span> <span m="4748200">problem</span> <span m="4748920">where</span> <span m="4749100">you</span> <span m="4749190">want</span> <span m="4749310">to</span> <span m="4749370">stop</span> <span m="4749710">this</span> <span m="4749910">unzipping</span> <span m="4750440">from</span> <span m="4750600">happening.</span> <span m="4751630">So</span> <span m="4751980">what</span> <span m="4752570">happens</span> <span m="4752950">in</span> <span m="4753030">the</span> <span m="4753120">Kerberos</span> <span m="4753460">version</span> <span m="4753730">5</span> <span m="4753830">password</span> <span m="4754710">changing</span> <span m="4755050">protocol</span> <span m="4755750">is</span> <span m="4755970">that</span> <span m="4756090">actually</span> <span m="4756790">you</span> <span m="4756910">want</span> <span m="4757010">to</span> <span m="4757050">establish</span> <span m="4757590">a</span> <span m="4757620">new</span> <span m="4757980">secret</span> <span m="4758700">that</span> <span m="4759210">will</span> <span m="4759400">not</span> <span m="4759660">be</span> <span m="4759800">apparent</span> <span m="4760370">if</span> <span m="4760540">you</span> <span m="4760670">happen</span> <span m="4760990">to</span> <span m="4761100">decrypt</span> <span m="4761450">all</span> <span m="4761780">the</span> <span m="4761940">messages</span> <span m="4762380">on</span> <span m="4762500">the</span> <span m="4762590">wire.</span> </p>
<p><span m="4763360">And</span> <span m="4763530">the</span> <span m="4763600">way</span> <span m="4763700">this</span> <span m="4763850">works</span> <span m="4764180">is--</span> <span m="4764590">this is</span> <span m="4764870">like</span> <span m="4765130">some</span> <span m="4765350">math</span> <span m="4765620">that</span> <span m="4765750">you</span> <span m="4765840">don't</span> <span m="4765950">have</span> <span m="4766080">to</span> <span m="4766170">fully</span> <span m="4766430">understand.</span> <span m="4766860">But</span> <span m="4767310">the</span> <span m="4767550">client</span> <span m="4769120">some</span> <span m="4769380">random</span> <span m="4769750">value</span> <span m="4770060">X.</span> <span m="4770740">And</span> <span m="4771110">the</span> <span m="4771240">kpassword</span> <span m="4771980">server</span> <span m="4773430">is</span> <span m="4773590">going</span> <span m="4773700">to</span> <span m="4773770">pick</span> <span m="4774020">some</span> <span m="4774180">other</span> <span m="4774380">random</span> <span m="4774700">value</span> <span m="4774960">Y.</span> <span m="4775630">And</span> <span m="4775920">what</span> <span m="4776070">they</span> <span m="4776200">send</span> <span m="4776540">to</span> <span m="4776610">each</span> <span m="4776820">other</span> <span m="4777070">are</span> <span m="4777340">exponentiations</span> <span m="4777820">of</span> <span m="4778420">these</span> <span m="4778640">values.</span> <span m="4779050">So</span> <span m="4779100">the</span> <span m="4779200">client</span> <span m="4779650">sends</span> <span m="4780350">G</span> <span m="4780670">to</span> <span m="4780750">the</span> <span m="4780890">power</span> <span m="4781190">X</span> <span m="4781500">to</span> <span m="4781610">the</span> <span m="4781740">server</span> <span m="4782540">and</span> <span m="4782900">the</span> <span m="4782990">server</span> <span m="4783690">sends</span> <span m="4784180">G</span> <span m="4784580">to</span> <span m="4784660">the</span> <span m="4784770">power</span> <span m="4785080">Y</span> <span m="4785810">back</span> <span m="4786100">to</span> <span m="4786180">the</span> <span m="4786300">client.</span> </p>
<p><span m="4787260">And</span> <span m="4787630">it</span> <span m="4787720">turns</span> <span m="4788000">out</span> <span m="4788140">that</span> <span m="4788270">mathematically,</span> <span m="4788890">what</span> <span m="4789030">we</span> <span m="4789130">can</span> <span m="4789280">do</span> <span m="4789470">now</span> <span m="4789690">is</span> <span m="4789820">the</span> <span m="4789910">client</span> <span m="4790280">can</span> <span m="4790510">take</span> <span m="4790740">G</span> <span m="4790900">to</span> <span m="4790980">the</span> <span m="4791110">Y,</span> <span m="4792110">raise</span> <span m="4792430">it</span> <span m="4792540">to</span> <span m="4792640">X,</span> <span m="4793000">and</span> <span m="4793130">get</span> <span m="4793280">this</span> <span m="4793430">value</span> <span m="4793710">G to the</span> <span m="4794040">XY.</span> <span m="4795270">The</span> <span m="4795390">server</span> <span m="4795740">can</span> <span m="4795940">take</span> <span m="4796200">G</span> <span m="4796380">to</span> <span m="4796450">the</span> <span m="4796580">X,</span> <span m="4797492">raise</span> <span m="4797950">it to</span> <span m="4798100">the</span> <span m="4798200">power</span> <span m="4798440">Y,</span> <span m="4798680">and</span> <span m="4798880">get</span> <span m="4799120">G to the</span> <span m="4799250">XY</span> <span m="4799810">as</span> <span m="4799910">well.</span> </p>
<p><span m="4800650">They</span> <span m="4800750">can now</span> <span m="4800900">use</span> <span m="4801300">this</span> <span m="4801710">secret</span> <span m="4802080">value</span> <span m="4802420">G to the</span> <span m="4802730">XY</span> <span m="4803670">to</span> <span m="4803780">encrypt</span> <span m="4804270">their</span> <span m="4804530">subsequent</span> <span m="4805050">messages,</span> <span m="4805440">including</span> <span m="4806360">the</span> <span m="4806480">new</span> <span m="4806720">password.</span> <span m="4807710">So you</span> <span m="4807890">send the</span> <span m="4808180">new</span> <span m="4808320">password</span> <span m="4809440">encrypted</span> <span m="4810490">with</span> <span m="4810680">this</span> <span m="4810860">value</span> <span m="4811160">G to the</span> <span m="4811470">XY,</span> <span m="4812250">roughly</span> <span m="4812570">speaking.</span> <span m="4813400">But</span> <span m="4813640">for</span> <span m="4813770">some</span> <span m="4813950">mathematical</span> <span m="4814480">reasons</span> <span m="4814830">that</span> <span m="4814930">we're not</span> <span m="4815090">going to</span> <span m="4815415">cover</span> <span m="4815740">right</span> <span m="4815950">now,</span> <span m="4816600">it</span> <span m="4816730">turns</span> <span m="4816950">out</span> <span m="4817110">to</span> <span m="4817200">be</span> <span m="4817340">super</span> <span m="4817680">difficult</span> <span m="4818160">for</span> <span m="4818290">someone</span> <span m="4818810">that</span> <span m="4819070">just</span> <span m="4819350">gets</span> <span m="4819650">G to the</span> <span m="4819760">X</span> <span m="4820180">and</span> <span m="4820350">G</span> <span m="4820450">to</span> <span m="4820510">the</span> <span m="4820620">Y</span> <span m="4820890">by</span> <span m="4821080">examining</span> <span m="4821590">your</span> <span m="4821770">packets</span> <span m="4822160">later</span> <span m="4823350">from</span> <span m="4823590">figuring</span> <span m="4823990">out</span> <span m="4824170">what</span> <span m="4824310">was</span> <span m="4824510">G to the</span> <span m="4824760">XY.</span> <span m="4826200">So</span> <span m="4826380">this is</span> <span m="4826510">something</span> <span m="4826780">called</span> <span m="4826950">the</span> <span m="4827050">discrete</span> <span m="4827390">log</span> <span m="4827620">problem.</span> <span m="4828560">Yeah,</span> <span m="4828890">question?</span> </p>
<p><span m="4829350">STUDENT: But they</span> <span m="4829640">have</span> <span m="4829736">to</span> <span m="4829833">[INAUDIBLE]</span> <span m="4829930">G</span> <span m="4830280">at some</span> <span m="4830710">point.</span> </p>
<p><span m="4831140">PROFESSOR: Yeah,</span> <span m="4831380">yeah.</span> <span m="4831570">So</span> <span m="4831660">G</span> <span m="4831860">is</span> <span m="4831960">some</span> <span m="4832120">parameter</span> <span m="4832700">you</span> <span m="4832820">could</span> <span m="4833000">sort</span> <span m="4833200">of</span> <span m="4833280">send</span> <span m="4833590">at</span> <span m="4833660">the</span> <span m="4833740">beginning</span> <span m="4834090">of</span> <span m="4834150">a</span> <span m="4834220">protocol</span> <span m="4834890">or</span> <span m="4835160">it</span> <span m="4835230">could</span> <span m="4835370">be</span> <span m="4835460">just</span> <span m="4835650">cooked</span> <span m="4835910">into</span> <span m="4836120">Kerberos.</span> <span m="4836640">It</span> <span m="4836720">turns</span> <span m="4836930">out</span> <span m="4837080">to</span> <span m="4837160">be</span> <span m="4837640">relatively</span> <span m="4839480">less</span> <span m="4839730">important.</span> </p>
<p><span m="4842030">All</span> <span m="4842100">right,</span> <span m="4842660">so</span> <span m="4843350">anyway,</span> <span m="4843790">use</span> <span m="4843960">Diffie-Hellman</span> <span m="4844240">because</span> <span m="4844520">this is</span> <span m="4844800">called--</span> <span m="4845190">well,</span> <span m="4845580">what</span> <span m="4845760">you</span> <span m="4845830">should</span> <span m="4845920">Google</span> <span m="4846220">for</span> <span m="4846440">if</span> <span m="4846510">you're</span> <span m="4846660">building</span> <span m="4846970">a</span> <span m="4847020">protocol</span> <span m="4847360">like</span> <span m="4847520">this</span> <span m="4849730">is</span> <span m="4849900">this</span> <span m="4850080">Diffie-Hellman</span> <span m="4850760">key</span> <span m="4850920">exchange</span> <span m="4851270">protocol.</span> <span m="4851950">And</span> <span m="4852280">Kerberos</span> <span m="4852610">5</span> <span m="4852870">actually</span> <span m="4853090">does</span> <span m="4853310">this</span> <span m="4853560">correctly.</span> <span m="4854680">But</span> <span m="4854720">this is</span> <span m="4854920">something</span> <span m="4855210">to</span> <span m="4855390">really</span> <span m="4855590">watch</span> <span m="4855830">out</span> <span m="4856010">for</span> <span m="4856200">if</span> <span m="4856270">you're</span> <span m="4856410">designing</span> <span m="4857280">any</span> <span m="4857450">kind</span> <span m="4857650">of</span> <span m="4857820">new protocol</span> <span m="4858220">yourself.</span> <span m="4859630">All</span> <span m="4859680">right,</span> <span m="4859990">so</span> <span m="4860120">that's</span> <span m="4860210">it</span> <span m="4860290">for</span> <span m="4860410">Kerberos.</span> <span m="4860710">Let's talk</span> <span m="4861010">about</span> <span m="4861310">SSL</span> <span m="4861610">on Monday.</span> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>iTunes U (<a href="https://itunes.apple.com/us/itunes-u/id1017908130">MP4 - 182MB</a>)</li>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec13_300k.mp4">MP4 - 182MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/video-lectures/lecture-13-network-protocols/QOtA76ga_fY.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","85");googletag.pubads().set("CRS_END","8");googletag.pubads().set("SESSION","F");googletag.pubads().set("YEAR","14");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
