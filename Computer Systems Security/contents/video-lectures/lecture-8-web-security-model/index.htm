<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 8: Web Security Model | Lecture Videos | Computer Systems Security | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-858-computer-systems-security-fall-2014" name="WT.cg_n">
    <meta content="Lecture 8: Web Security Model" name="WT.cg_s">
    <meta content="In this lecture, Professor Mickens introduces the concept of web security, specifically as it relates to client-side applications and web browser security models." name="Description">
    <meta content="Zeldovich, Nickolai" name="Author">
    <meta content="6.858,client-side,web security,web application,same-origin policycookie,HTTP,network address,attack vector,DNS,HTML5,Computer Design and Engineering,Software Design and Engineering" name="keywords">
    <meta content="6.858 Computer Systems Security | Lecture 8: Web Security Model" name="Search_Display">
    <meta content="Computer Design and Engineering" itemprop="about">
    <meta content="Software Design and Engineering" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-8-web-security-model/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Computer Systems Security</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/video-lectures/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 8: Web Security Model
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 8: Web Security Model
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/readings/index.htm">
		                  Readings  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/video-lectures/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/labs/index.htm">
		                  Labs  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/exams/index.htm">
		                  Exams  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/final-project/index.htm">
		                  Final Project  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/related-resources/index.htm">
		                  Related Resources  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-8-web-security-model/eRJ_r8WF1Y0.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://itunes.apple.com/us/itunes-u/id1017908130">iTunes U</a> or the <a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec08_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/eRJ_r8WF1Y0', 'youtube', '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-8-web-security-model', 'https://img.youtube.com/vi/eRJ_r8WF1Y0/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-8-web-security-model/eRJ_r8WF1Y0.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 662951, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/video-lectures/lecture-7-sandboxing-native-code/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/video-lectures/lecture-9-securing-web-applications/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p><strong>Description:</strong> In this lecture, Professor Mickens introduces the concept of web security, specifically as it relates to client-side applications and web browser security models.</p>  <p><strong>Instructor:</strong> James Mickens</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-1-introduction-threat-models/index.htm">
<img src="https://img.youtube.com/vi/GqmQg-cszw4/default.jpg" title="Lecture 1: Introduction, Threat Models" alt="Lecture 1: Introduction, Threat Models">
<p>Lecture 1: Introduction, Th...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-2-control-hijacking-attacks/index.htm">
<img src="https://img.youtube.com/vi/r4KjHEgg9Wg/default.jpg" title="Lecture 2: Control Hijacking Attacks" alt="Lecture 2: Control Hijacking Attacks">
<p>Lecture 2: Control Hijackin...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-3-buffer-overflow-exploits-and-defenses/index.htm">
<img src="https://img.youtube.com/vi/xSQxaie_h1o/default.jpg" title="Lecture 3: Buffer Overflow Exploits and Defenses" alt="Lecture 3: Buffer Overflow Exploits and Defenses">
<p>Lecture 3: Buffer Overflow ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-4-privilege-separation/index.htm">
<img src="https://img.youtube.com/vi/dNl22h1kW1k/default.jpg" title="Lecture 4: Privilege Separation" alt="Lecture 4: Privilege Separation">
<p>Lecture 4: Privilege Separa...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-6-capabilities/index.htm">
<img src="https://img.youtube.com/vi/TQhmua7Z2cY/default.jpg" title="Lecture 6: Capabilities" alt="Lecture 6: Capabilities">
<p>Lecture 6: Capabilities</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-7-sandboxing-native-code/index.htm">
<img src="https://img.youtube.com/vi/I0Psvvky-44/default.jpg" title="Lecture 7: Sandboxing Native Code	" alt="Lecture 7: Sandboxing Native Code	">
<p>Lecture 7: Sandboxing Nativ...</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/eRJ_r8WF1Y0/default.jpg" title="Lecture 8: Web Security Model" alt="Lecture 8: Web Security Model">
<p>Lecture 8: Web Security Model</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-9-securing-web-applications/index.htm">
<img src="https://img.youtube.com/vi/WlmKwIe9z1Q/default.jpg" title="Lecture 9: Securing Web Applications" alt="Lecture 9: Securing Web Applications">
<p>Lecture 9: Securing Web App...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-10-symbolic-execution/index.htm">
<img src="https://img.youtube.com/vi/yRVZPvHYHzw/default.jpg" title="Lecture 10: Symbolic Execution" alt="Lecture 10: Symbolic Execution">
<p>Lecture 10: Symbolic Execution</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-11-ur-web/index.htm">
<img src="https://img.youtube.com/vi/XMEFdofERLI/default.jpg" title="Lecture 11: Ur/Web" alt="Lecture 11: Ur/Web">
<p>Lecture 11: Ur/Web</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-12-network-security/index.htm">
<img src="https://img.youtube.com/vi/BZTWXl9QNK8/default.jpg" title="Lecture 12: Network Security" alt="Lecture 12: Network Security">
<p>Lecture 12: Network Security</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-13-network-protocols/index.htm">
<img src="https://img.youtube.com/vi/QOtA76ga_fY/default.jpg" title="Lecture 13: Network Protocols" alt="Lecture 13: Network Protocols">
<p>Lecture 13: Network Protocols</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-14-ssl-and-https/index.htm">
<img src="https://img.youtube.com/vi/q1OF_0ICt9A/default.jpg" title="Lecture 14: SSL and HTTPS" alt="Lecture 14: SSL and HTTPS">
<p>Lecture 14: SSL and HTTPS</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-15-medical-software/index.htm">
<img src="https://img.youtube.com/vi/bA3xCpYLA34/default.jpg" title="Lecture 15: Medical Software" alt="Lecture 15: Medical Software">
<p>Lecture 15: Medical Software</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-16-side-channel-attacks/index.htm">
<img src="https://img.youtube.com/vi/3v5Von-oNUg/default.jpg" title="Lecture 16: Side-Channel Attacks" alt="Lecture 16: Side-Channel Attacks">
<p>Lecture 16: Side-Channel At...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-17-user-authentication/index.htm">
<img src="https://img.youtube.com/vi/MT7X17ZRo1U/default.jpg" title="Lecture 17: User Authentication" alt="Lecture 17: User Authentication">
<p>Lecture 17: User Authentica...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-18-private-browsing/index.htm">
<img src="https://img.youtube.com/vi/YTWXAFJf8bw/default.jpg" title="Lecture 18: Private Browsing" alt="Lecture 18: Private Browsing">
<p>Lecture 18: Private Browsing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-19-anonymous-communication/index.htm">
<img src="https://img.youtube.com/vi/OgGTJIgNewE/default.jpg" title="Lecture 19: Anonymous Communication" alt="Lecture 19: Anonymous Communication">
<p>Lecture 19: Anonymous Commu...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-20-mobile-phone-security/index.htm">
<img src="https://img.youtube.com/vi/uT7BXusDgDM/default.jpg" title="Lecture 20: Mobile Phone Security" alt="Lecture 20: Mobile Phone Security">
<p>Lecture 20: Mobile Phone Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-21-data-tracking/index.htm">
<img src="https://img.youtube.com/vi/WG5UbMrUiLU/default.jpg" title="Lecture 21: Data Tracking" alt="Lecture 21: Data Tracking">
<p>Lecture 21: Data Tracking</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-22-guest-lecture-by-mit-is-t/index.htm">
<img src="https://img.youtube.com/vi/2PO8h1pVW50/default.jpg" title="Lecture 22: Guest Lecture by MIT IS&amp;T" alt="Lecture 22: Guest Lecture by MIT IS&amp;T">
<p>Lecture 22: Guest Lecture b...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-23-security-economics/index.htm">
<img src="https://img.youtube.com/vi/8PdnOZI7H5E/default.jpg" title="Lecture 23: Security Economics" alt="Lecture 23: Security Economics">
<p>Lecture 23: Security Economics</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/video-lectures/lecture-8-web-security-model/eRJ_r8WF1Y0.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="80">The</span> <span m="170">following</span> <span m="610">content</span> <span m="1120">is</span> <span m="1230">provided</span> <span m="1670">under</span> <span m="1940">a</span> <span m="1980">Creative</span> <span m="2430">Commons</span> <span m="2830">license.</span> <span m="3810">Your</span> <span m="3920">support</span> <span m="4420">will</span> <span m="4560">help</span> <span m="4830">MIT</span> <span m="5310">OpenCourseWare</span> <span m="6060">continue</span> <span m="6540">to</span> <span m="6680">offer</span> <span m="7000">high</span> <span m="7210">quality</span> <span m="7730">educational</span> <span m="8370">resources</span> <span m="8940">for</span> <span m="9080">free.</span> <span m="10150">To</span> <span m="10250">make</span> <span m="10350">a</span> <span m="10400">donation</span> <span m="11100">or</span> <span m="11340">to</span> <span m="11450">view</span> <span m="11660">additional</span> <span m="12070">materials</span> <span m="12700">from</span> <span m="12860">hundreds</span> <span m="13190">of</span> <span m="13300">MIT</span> <span m="13680">courses,</span> <span m="15000">visit</span> <span m="15160">MIT</span> <span m="15690">OpenCourseWare</span> <span m="16600">at</span> <span m="16830">ocw.mit.edu.</span> </p>
<p><span m="26380">PROFESSOR:</span> <span m="26875">All right,</span> <span m="27370">guys.</span> <span m="28855">Let's get</span> <span m="29360">started with the</span> <span m="29990">next</span> <span m="30270">installment</span> <span m="30850">of</span> <span m="30990">our</span> <span m="31170">exciting</span> <span m="31710">journey</span> <span m="32700">into</span> <span m="33200">computer</span> <span m="33540">security.</span> <span m="34290">Today,</span> <span m="34620">we're actually going</span> <span m="34920">to</span> <span m="35180">talk</span> <span m="35480">about</span> <span m="36000">web</span> <span m="36260">security.</span> <span m="36665">Web</span> <span m="37070">security</span> <span m="38080">is,</span> <span m="38550">actually,</span> <span m="39040">one of my</span> <span m="39170">favorite</span> <span m="39550">topics to</span> <span m="39970">talk</span> <span m="40240">about because it</span> <span m="40610">really</span> <span m="41080">exposes</span> <span m="41465">you to</span> <span m="41850">the</span> <span m="42318">true</span> <span m="42786">horrors of the</span> <span m="43254">world.</span> <span m="43722">It's very</span> <span m="44190">easy to think,</span> <span m="44658">as a student,</span> <span m="45126">that</span> <span m="45600">everything will be great when you</span> <span m="45950">graduate.</span> </p>
<p><span m="46780">Today's</span> <span m="47150">lecture</span> <span m="47520">and</span> <span m="48018">the next lecture</span> <span m="48516">will</span> <span m="49014">be telling you that's,</span> <span m="49512">in fact,</span> <span m="50010">not the case.</span> <span m="51006">Everything's</span> <span m="51510">terrible.</span> <span m="52030">So</span> <span m="52520">what</span> <span m="52720">Is</span> <span m="52890">the</span> <span m="52990">web?</span> <span m="53760">Well</span> <span m="54140">back</span> <span m="54520">in the</span> <span m="54900">olden</span> <span m="55340">days,</span> <span m="55710">the web was,</span> <span m="56290">actually,</span> <span m="56880">much simpler</span> <span m="57230">than it is</span> <span m="57590">today,</span> <span m="58230">right.</span> <span m="58630">So</span> <span m="58930">clients,</span> <span m="59670">which</span> <span m="59830">is</span> <span m="59960">to</span> <span m="60030">say the</span> <span m="60290">browsers,</span> <span m="60840">couldn't</span> <span m="61050">really</span> <span m="61420">do anything</span> <span m="61905">with</span> <span m="62160">respect</span> <span m="62280">of</span> <span m="62510">displaying</span> <span m="63030">rigid</span> <span m="63360">or active</span> <span m="63690">content.</span> <span m="64030">Basically they</span> <span m="64285">could</span> <span m="64540">just</span> <span m="64760">get</span> <span m="64830">static</span> <span m="65130">images,</span> <span m="65830">static</span> <span m="66185">text,</span> <span m="66540">and</span> <span m="66820">that</span> <span m="67075">was about</span> <span m="67330">it.</span> </p>
<p><span m="67960">Now</span> <span m="68170">the</span> <span m="68280">server</span> <span m="68670">side</span> <span m="69120">was a</span> <span m="69584">little more</span> <span m="70048">interesting</span> <span m="70512">because</span> <span m="70976">even if there was</span> <span m="71440">static</span> <span m="71904">content</span> <span m="72370">on a clients</span> <span m="72760">side.</span> <span m="73320">Maybe</span> <span m="73665">the</span> <span m="74010">server</span> <span m="74190">was</span> <span m="74670">talking</span> <span m="75260">databases,</span> <span m="75830">maybe</span> <span m="76090">it</span> <span m="76350">was talking to</span> <span m="76550">other</span> <span m="76880">machines</span> <span m="77225">on the</span> <span m="77570">server</span> <span m="77890">side.</span> <span m="78700">Things like</span> <span m="79150">that.</span> <span m="80050">So</span> <span m="80500">for  a very</span> <span m="80950">long time, the</span> <span m="81000">notion</span> <span m="81440">of</span> <span m="81790">web</span> <span m="82010">security,</span> <span m="82950">basically,</span> <span m="83540">meant</span> <span m="83760">looking</span> <span m="84210">at</span> <span m="84370">what</span> <span m="84800">the  server</span> <span m="85245">was doing.</span> <span m="86060">And</span> <span m="86340">to</span> <span m="86610">this</span> <span m="86830">point in this</span> <span m="87200">class,</span> <span m="87650">we've</span> <span m="87760">essentially</span> <span m="87820">taken</span> <span m="88210">that</span> <span m="88616">approach.</span> </p>
<p><span m="89430">So</span> <span m="89890">we looked at</span> <span m="90090">things</span> <span m="90440">like</span> <span m="91055">buffer to</span> <span m="91380">overflow</span> <span m="91950">attacks.</span> <span m="93450">So</span> <span m="94330">how</span> <span m="94770">clients can</span> <span m="94880">trick</span> <span m="95370">the server into doing</span> <span m="95660">things</span> <span m="95900">the server</span> <span m="96130">doesn't</span> <span m="96540">want</span> <span m="96980">to do. You</span> <span m="97220">also</span> <span m="97490">looked at the</span> <span m="97920">OKWS</span> <span m="98640">server</span> <span m="99500">and</span> <span m="99906">looked</span> <span m="100312">at how we</span> <span m="100720">can do some privilege</span> <span m="101110">isolation</span> <span m="101640">there.</span> </p>
<p><span m="103750">So</span> <span m="104450">to</span> <span m="104680">this</span> <span m="104880">point,</span> <span m="105120">we, sort of,</span> <span m="105430">looked</span> <span m="105690">at</span> <span m="105910">security</span> <span m="106230">through</span> <span m="109200">the</span> <span m="109620">experiences</span> <span m="110100">that</span> <span m="110220">were</span> <span m="110300">actually</span> <span m="110580">experienced</span> <span m="110930">by</span> <span m="111070">the</span> <span m="111480">security</span> <span m="111890">resources</span> <span m="112290">themselves.</span> <span m="112530">But</span> <span m="112630">now,</span> <span m="113660">actually,</span> <span m="114220">the</span> <span m="114340">browser</span> <span m="114810">is</span> <span m="114860">very</span> <span m="115140">interesting to</span> <span m="115490">think</span> <span m="115710">about,</span> <span m="115920">in terms of</span> <span m="116180">security,</span> <span m="116810">because</span> <span m="117160">the</span> <span m="117240">browser</span> <span m="119508">is</span> <span m="120004">super,</span> <span m="120996">super</span> <span m="121492">complicated</span> <span m="121988">these days.</span> <span m="125460">So now there's</span> <span m="125956">all kinds of</span> <span m="126460">insane,</span> <span m="127120">dynamic</span> <span m="127670">stuff</span> <span m="127950">that the</span> <span m="128360">browser can</span> <span m="128699">actually</span> <span m="129020">do.</span> </p>
<p><span m="129350">So</span> <span m="129470">for</span> <span m="129650">example,</span> <span m="130530">you</span> <span m="130669">probably</span> <span m="131200">heard</span> <span m="131935">of</span> <span m="132200">JavaScript.</span> <span m="133320">So</span> <span m="133460">JavaScript</span> <span m="133950">now</span> <span m="134300">allows</span> <span m="134940">pages</span> <span m="135430">to</span> <span m="135860">execute</span> <span m="136450">client</span> <span m="136780">side</span> <span m="137060">code,</span> <span m="137540">Turing</span> <span m="138210">complete,</span> <span m="138465">can do</span> <span m="138720">all</span> <span m="138920">kinds</span> <span m="139150">of</span> <span m="139230">wacky</span> <span m="139720">stuff.</span> <span m="140350">There</span> <span m="140600">is</span> <span m="140710">the</span> <span m="140800">DOM</span> <span m="141250">model,</span> <span m="141970">which</span> <span m="142140">we'll</span> <span m="142320">talk</span> <span m="142630">about</span> <span m="143200">in</span> <span m="143480">more</span> <span m="143760">depth</span> <span m="144030">later</span> <span m="144350">today.</span> <span m="145100">The</span> <span m="145340">DOM</span> <span m="145660">model,</span> <span m="145980">essentially,</span> <span m="146400">allows</span> <span m="146710">JavaScript</span> <span m="147030">code</span> <span m="147350">to</span> <span m="147650">dynamically</span> <span m="148250">change</span> <span m="149180">the</span> <span m="149450">visual</span> <span m="150160">appearance</span> <span m="150430">of the</span> <span m="150780">page.</span> <span m="151480">Fiddle</span> <span m="151760">with</span> <span m="152270">things</span> <span m="152540">like</span> <span m="153220">font</span> <span m="153920">stylings</span> <span m="154350">and</span> <span m="154430">stuff</span> <span m="154670">like</span> <span m="154850">that.</span> </p>
<p><span m="156166">There's</span> <span m="156660">XML</span> <span m="157290">HTTP</span> <span m="157960">request.</span> <span m="160630">These</span> <span m="160950">are,</span> <span m="161080">basically,</span> <span m="161980">a</span> <span m="162080">way</span> <span m="162840">for</span> <span m="163910">JavaScript</span> <span m="164250">to</span> <span m="164930">asynchronously</span> <span m="166030">fetch</span> <span m="166430">contents</span> <span m="166725">from</span> <span m="167020">servers.</span> <span m="167350">You</span> <span m="167680">may</span> <span m="167920">also</span> <span m="168100">hear</span> <span m="168430">XML HTTP</span> <span m="169350">requests</span> <span m="169590">referred</span> <span m="170000">to</span> <span m="170300">as</span> <span m="171300">AJAX.</span> <span m="173520">Asynchronous</span> <span m="174940">JavaScript</span> <span m="175460">fetching.</span> </p>
<p><span m="176030">There</span> <span m="176500">are</span> <span m="176700">things</span> <span m="177030">like</span> <span m="177200">web</span> <span m="177470">sockets.</span> <span m="178760">This</span> <span m="178930">is,</span> <span m="179070">actually,</span> <span m="180390">recently</span> <span m="181050">introduced</span> <span m="181660">API.</span> <span m="182780">So</span> <span m="183260">WebSockets,</span> <span m="184300">essentially,</span> <span m="184700">allow</span> <span m="184930">a full</span> <span m="185380">duplex</span> <span m="185960">communication</span> <span m="186620">between</span> <span m="186930">clients</span> <span m="187290">and</span> <span m="187400">servers.</span> <span m="188260">Communication</span> <span m="188820">going</span> <span m="189050">both</span> <span m="189310">ways.</span> <span m="189920">We've</span> <span m="190140">got</span> <span m="190960">all</span> <span m="191180">kinds</span> <span m="191440">of</span> <span m="191540">multimedia</span> <span m="192190">support.</span> </p>
<p><span m="196230">So</span> <span m="196690">for</span> <span m="196930">example,</span> <span m="198440">we</span> <span m="198480">have</span> <span m="198810">things</span> <span m="199160">like</span> <span m="199930">the</span> <span m="200520">video</span> <span m="200850">tag,</span> <span m="202630">which</span> <span m="202930">allows</span> <span m="203930">a</span> <span m="204540">web</span> <span m="204780">page</span> <span m="205400">to</span> <span m="205560">play</span> <span m="205870">video</span> <span m="206320">without</span> <span m="206720">using</span> <span m="206890">a Flash app.</span> <span m="207250">It can</span> <span m="207680">actually just</span> <span m="207900">play that</span> <span m="208220">video</span> <span m="209010">natively.</span> <span m="210110">There's</span> <span m="210350">also</span> <span m="211170">a</span> <span m="211300">geolocation.</span> <span m="214170">So</span> <span m="214410">now</span> <span m="214980">a</span> <span m="215360">web</span> <span m="215880">page</span> <span m="216360">can</span> <span m="216620">actually</span> <span m="217690">determine,</span> <span m="218710">physically,</span> <span m="219180">where</span> <span m="219400">you</span> <span m="219640">are.</span> </p>
<p><span m="220190">For</span> <span m="220290">example,</span> <span m="220590">if</span> <span m="220660">you're</span> <span m="220800">running</span> <span m="221090">a</span> <span m="221430">web page on a</span> <span m="221610">smartphone,</span> <span m="222680">the</span> <span m="223180">browser</span> <span m="223510">can</span> <span m="223880">actually</span> <span m="224290">access</span> <span m="224520">your</span> <span m="224940">GPS unit.</span> <span m="225360">If</span> <span m="225580">you're</span> <span m="225930">accessing</span> <span m="226840">a</span> <span m="227150">page on a</span> <span m="227460">desktop</span> <span m="227940">browser,</span> <span m="228550">it</span> <span m="228610">can</span> <span m="228770">actually</span> <span m="229300">look</span> <span m="229680">at</span> <span m="229930">your</span> <span m="230060">Wi-Fi</span> <span m="230570">connection</span> <span m="231460">and</span> <span m="231640">connect</span> <span m="232140">to</span> <span m="232360">Google's</span> <span m="232460">Wi-Fi</span> <span m="233220">geolocation</span> <span m="233960">service</span> <span m="234310">to</span> <span m="234400">figure</span> <span m="234790">out</span> <span m="234940">where</span> <span m="235080">exactly</span> <span m="235460">you are.</span> <span m="236160">That's,</span> <span m="236410">kind</span> <span m="236620">of,</span> <span m="236670">insane.</span> <span m="237130">Right?</span> </p>
<p><span m="237430">But</span> <span m="237580">now</span> <span m="237780">web</span> <span m="238070">pages</span> <span m="238180">can do</span> <span m="238450">do</span> <span m="238570">that kind of</span> <span m="239010">stuff.</span> <span m="240470">So</span> <span m="241370">we've</span> <span m="241600">also</span> <span m="241920">talked</span> <span m="242220">about</span> <span m="242570">things</span> <span m="242950">like</span> <span m="243330">NaCl,</span> <span m="245000">for</span> <span m="245160">example,</span> <span m="246800">which</span> <span m="247160">allows</span> <span m="247620">browsers</span> <span m="248120">to</span> <span m="248240">run</span> <span m="248400">native</span> <span m="248670">code.</span> <span m="249300">So</span> <span m="250020">there's</span> <span m="250300">many,</span> <span m="250750">many</span> <span m="251200">other features that</span> <span m="251650">I</span> <span m="251730">haven't</span> <span m="252040">mentioned</span> <span m="252350">here.</span> <span m="252620">But</span> <span m="252880">suffice</span> <span m="253260">it to</span> <span m="253320">say</span> <span m="253500">the</span> <span m="253750">browser</span> <span m="254240">is</span> <span m="254400">now</span> <span m="254930">incredibly</span> <span m="255520">complicated.</span> </p>
<p><span m="256480">So</span> <span m="256630">what</span> <span m="256769">does</span> <span m="256860">this</span> <span m="257010">mean</span> <span m="257339">from</span> <span m="257990">the</span> <span m="258140">perspective</span> <span m="258779">of</span> <span m="258910">security?</span> <span m="259750">Well</span> <span m="259920">basically,</span> <span m="261089">it</span> <span m="261410">means that</span> <span m="261620">we're</span> <span m="261800">screwed.</span> <span m="262440">Right?</span> <span m="262640">The</span> <span m="262760">thread</span> <span m="263090">surface</span> <span m="263570">for</span> <span m="263660">that</span> <span m="263940">right</span> <span m="264410">there</span> <span m="264620">is</span> <span m="264790">enormous.</span> <span m="265590">And</span> <span m="265750">loosely</span> <span m="266150">speaking,</span> <span m="266930">when</span> <span m="267080">you're thinking</span> <span m="267500">about</span> <span m="267750">security,</span> <span m="268580">you</span> <span m="268710">can</span> <span m="268900">think</span> <span m="269160">of</span> <span m="269320">a</span> <span m="269390">graph</span> <span m="269810">that,</span> <span m="269960">sort</span> <span m="270120">of,</span> <span m="270230">looks</span> <span m="270490">like</span> <span m="270750">this.</span> </p>
<p><span m="271460">So</span> <span m="271680">you've</span> <span m="271910">got</span> <span m="273160">the</span> <span m="273290">likelihood</span> <span m="276180">of</span> <span m="276750">correctness.</span> <span m="281310">And</span> <span m="281570">then,</span> <span m="281830">you've</span> <span m="281970">got</span> <span m="282130">the</span> <span m="282210">number</span> <span m="282540">of</span> <span m="282600">features</span> <span m="282865">that you</span> <span m="283130">have.</span> <span m="288430">And so</span> <span m="288770">you know,</span> <span m="289040">this</span> <span m="289240">graph</span> <span m="289640">starts</span> <span m="289970">up here at</span> <span m="290240">100.</span> <span m="291035">Well</span> <span m="291300">of</span> <span m="291520">course,</span> <span m="292050">we</span> <span m="292180">never</span> <span m="292450">even</span> <span m="292700">started</span> <span m="293180">100,</span> <span m="293630">even with</span> <span m="293950">very</span> <span m="294250">simple</span> <span m="294600">code</span> <span m="294950">because</span> <span m="295180">we</span> <span m="295280">can't</span> <span m="295440">even</span> <span m="295680">do bubble</span> <span m="296010">sort</span> <span m="296420">right.</span> </p>
<p><span m="298190">So</span> <span m="298350">essentially,</span> <span m="298800">that</span> <span m="299010">curve</span> <span m="299230">looks</span> <span m="299400">something</span> <span m="299650">like</span> <span m="299880">this.</span> <span m="300470">And</span> <span m="300670">web</span> <span m="300880">browsers</span> <span m="301700">are</span> <span m="301890">right</span> <span m="302070">over</span> <span m="302270">here.</span> <span m="303490">So</span> <span m="303710">as we'll</span> <span m="303860">discuss</span> <span m="304290">today,</span> <span m="304840">There's</span> <span m="305140">all</span> <span m="305480">kinds</span> <span m="305830">of</span> <span m="306020">wacky</span> <span m="306450">security</span> <span m="306990">bugs</span> <span m="307540">that are arising</span> <span m="308230">constantly.</span> <span m="309210">And</span> <span m="309350">as</span> <span m="309440">soon</span> <span m="309800">as</span> <span m="309920">the</span> <span m="310020">old</span> <span m="310350">ones are</span> <span m="310685">fixed,</span> <span m="311020">new</span> <span m="311180">ones</span> <span m="311380">are</span> <span m="311490">rising</span> <span m="312080">because</span> <span m="312340">people</span> <span m="312660">keep</span> <span m="312960">adding</span> <span m="313245">these</span> <span m="313530">new</span> <span m="313670">features.</span> <span m="314530">Oftentimes,</span> <span m="315020">without</span> <span m="315320">thinking</span> <span m="315640">about</span> <span m="316070">what</span> <span m="316270">the</span> <span m="316350">security</span> <span m="316790">implications</span> <span m="317060">of</span> <span m="317330">those</span> <span m="317510">features</span> <span m="317860">are.</span> </p>
<p><span m="319270">So</span> <span m="319470">if</span> <span m="319530">you</span> <span m="319690">think</span> <span m="319880">about</span> <span m="320530">what a web</span> <span m="321020">application</span> <span m="321520">is</span> <span m="321700">these</span> <span m="321840">days,</span> <span m="322400">well</span> <span m="322710">it's this</span> <span m="322890">client</span> <span m="323300">thing</span> <span m="323520">and it's</span> <span m="323700">a</span> <span m="323770">server</span> <span m="324160">thing.</span> <span m="324720">And</span> <span m="324850">a</span> <span m="324920">web</span> <span m="325140">application</span> <span m="325880">now</span> <span m="325980">spans</span> <span m="326560">multiple</span> <span m="326970">programming</span> <span m="327450">languages,</span> <span m="328220">multiple</span> <span m="328580">machines,</span> <span m="328995">and</span> <span m="329410">multiple</span> <span m="329700">hardware</span> <span m="330120">programs.</span> <span m="330770">You</span> <span m="330920">could</span> <span m="331020">be</span> <span m="331120">using</span> <span m="331970">Firefox</span> <span m="332750">on</span> <span m="332880">Windows.</span> </p>
<p><span m="333620">Then it's</span> <span m="333820">going</span> <span m="333940">to go</span> <span m="334080">talk</span> <span m="334380">to a</span> <span m="334480">machine</span> <span m="334870">in the</span> <span m="334960">cloud</span> <span m="335330">that's</span> <span m="335430">running</span> <span m="335700">Linux.</span> <span m="336030">It's</span> <span m="336120">running</span> <span m="336380">the</span> <span m="336510">Apache</span> <span m="336980">server.</span> <span m="338230">Maybe</span> <span m="338470">it's</span> <span m="338620">running</span> <span m="339020">an</span> <span m="339400">ARM chip</span> <span m="339710">opposed</span> <span m="340110">to</span> <span m="340280">x86</span> <span m="341070">or</span> <span m="341170">something</span> <span m="341460">like</span> <span m="341630">that,</span> <span m="341840">or the other way</span> <span m="342240">around.</span> <span m="343020">So</span> <span m="343280">long</span> <span m="343550">story</span> <span m="343810">short,</span> <span m="344300">there's</span> <span m="344380">all</span> <span m="344760">these</span> <span m="345030">problems</span> <span m="345465">of</span> <span m="345900">composition.</span> <span m="347210">There's</span> <span m="347400">all</span> <span m="347660">these</span> <span m="347850">software</span> <span m="348380">layers</span> <span m="349080">and</span> <span m="349250">all</span> <span m="349480">these</span> <span m="349670">hardware</span> <span m="349935">layers</span> <span m="350860">that</span> <span m="351260">all</span> <span m="351590">can</span> <span m="351760">impact</span> <span m="352120">security</span> <span m="352570">in</span> <span m="352670">some</span> <span m="352920">way.</span> </p>
<p><span m="353990">But</span> <span m="354120">it's</span> <span m="354270">also</span> <span m="354600">complicated.</span> <span m="354880">It's</span> <span m="355160">not</span> <span m="355350">quite</span> <span m="356110">clear</span> <span m="356660">how</span> <span m="356810">we</span> <span m="356900">can</span> <span m="357030">make</span> <span m="357220">sense</span> <span m="357430">of</span> <span m="357480">the</span> <span m="357570">entire</span> <span m="357890">whole.</span> <span m="358470">So</span> <span m="358780">for</span> <span m="358950">example,</span> <span m="361280">one</span> <span m="361510">common</span> <span m="361830">problem</span> <span m="362330">with the</span> <span m="362420">web</span> <span m="363170">is</span> <span m="363380">this</span> <span m="363880">problem</span> <span m="365040">of a</span> <span m="365520">parsing</span> <span m="366130">context.</span> <span m="370220">So</span> <span m="370350">as</span> <span m="370450">an</span> <span m="370530">example,</span> <span m="371240">suppose</span> <span m="371760">that</span> <span m="371930">you</span> <span m="372050">had</span> <span m="374060">something</span> <span m="374470">in a</span> <span m="374950">page</span> <span m="375320">that</span> <span m="375410">looked</span> <span m="375630">like</span> <span m="375830">this.</span> </p>
<p><span m="376220">You declare</span> <span m="376670">a</span> <span m="377080">script</span> <span m="377495">tag.</span> <span m="379260">Inside</span> <span m="379700">that</span> <span m="379860">script</span> <span m="380140">tag,</span> <span m="380460">you declare</span> <span m="380720">a</span> <span m="380980">variable.</span> <span m="382470">There's</span> <span m="382860">some</span> <span m="383040">string</span> <span m="383410">here.</span> <span m="384440">And</span> <span m="384610">let's</span> <span m="384930">say</span> <span m="385110">that this</span> <span m="385400">string</span> <span m="386380">comes</span> <span m="386770">from</span> <span m="387690">an</span> <span m="387950">untrusted</span> <span m="388470">party.</span> <span m="389700">Either</span> <span m="390710">the</span> <span m="390820">user</span> <span m="391840">or</span> <span m="392870">another</span> <span m="393150">machine</span> <span m="393510">or</span> <span m="393580">something</span> <span m="393840">like</span> <span m="394050">that.</span> </p>
<p><span m="394810">And</span> <span m="395050">then,</span> <span m="395410">you</span> <span m="395510">close</span> <span m="395910">that</span> <span m="396130">script</span> <span m="396430">tag.</span> <span m="400360">So</span> <span m="401030">this</span> <span m="401460">stuff</span> <span m="401620">is</span> <span m="401760">trusted.</span> <span m="402190">This</span> <span m="402360">stuff is</span> <span m="402520">trusted.</span> <span m="402990">This</span> <span m="403390">stuff</span> <span m="403590">is</span> <span m="403700">not</span> <span m="403910">trusted.</span> <span m="404280">So can anybody</span> <span m="404660">figure</span> <span m="404820">out</span> <span m="405030">why</span> <span m="405250">there</span> <span m="405390">might</span> <span m="405600">be</span> <span m="405710">some</span> <span m="405870">problems</span> <span m="406290">here</span> <span m="406700">if</span> <span m="406830">we</span> <span m="406940">take</span> <span m="407110">this</span> <span m="407260">entrusted</span> <span m="407630">string and</span> <span m="407920">put</span> <span m="408050">it in</span> <span m="408270">there?</span> </p>
<p><span m="411422">AUDIENCE: You can  have a</span> <span m="411910">closing</span> <span m="412990">quote mark</span> <span m="413270">in</span> <span m="414297">[INAUDIBLE]</span> <span m="415728">and then</span> <span m="416205">have some</span> <span m="416682">[INAUDIBLE].</span> </p>
<p><span m="417159">PROFESSOR:</span> <span m="417640">Right,</span> <span m="418030">right,</span> <span m="418220">exactly.</span> <span m="418640">So</span> <span m="418770">the</span> <span m="418850">problem</span> <span m="418910">is</span> <span m="419305">there are</span> <span m="419700">multiple</span> <span m="420180">context,</span> <span m="421320">that</span> <span m="421550">this</span> <span m="421740">untrusted</span> <span m="422250">code</span> <span m="422650">could,</span> <span m="422770">sort</span> <span m="422990">of,</span> <span m="423490">break</span> <span m="423880">into.</span> <span m="424590">So</span> <span m="424690">for</span> <span m="424800">example,</span> <span m="425120">if the</span> <span m="425220">untrusted</span> <span m="425720">code</span> <span m="426430">had</span> <span m="427960">a</span> <span m="428160">double</span> <span m="428490">quote</span> <span m="428740">here,</span> <span m="429390">now</span> <span m="429850">we've</span> <span m="430380">closed</span> <span m="430980">the</span> <span m="431170">definition</span> <span m="431500">of</span> <span m="431770">this</span> <span m="432120">JavaScript</span> <span m="432730">string.</span> </p>
<p><span m="434140">So</span> <span m="434240">now</span> <span m="434490">we're</span> <span m="434660">added</span> <span m="434860">the</span> <span m="434940">JavaScript</span> <span m="435410">string</span> <span m="435700">context</span> <span m="436055">and</span> <span m="436410">render</span> <span m="436790">the</span> <span m="436920">regular</span> <span m="437270">JavaScript</span> <span m="437800">execution</span> <span m="438310">context.</span> <span m="438570">And</span> <span m="438880">then the</span> <span m="439020">attacker</span> <span m="439710">gets</span> <span m="439880">a</span> <span m="440000">regular</span> <span m="440290">job</span> <span m="440610">zip code</span> <span m="440870">here</span> <span m="441230">and</span> <span m="441330">go to</span> <span m="441733">town.</span> <span m="442540">Alternatively,</span> <span m="443370">the</span> <span m="443510">attacker</span> <span m="444450">could</span> <span m="445330">just</span> <span m="445580">put</span> <span m="446760">a</span> <span m="446970">closing</span> <span m="449800">script</span> <span m="450130">tag</span> <span m="450380">here.</span> <span m="451220">Right?</span> </p>
<p><span m="451850">And</span> <span m="452080">then,</span> <span m="453200">at</span> <span m="453310">that</span> <span m="453590">point,</span> <span m="454690">the</span> <span m="454810">attacker</span> <span m="455270">can,</span> <span m="455410">sort</span> <span m="455620">of,</span> <span m="455770">get</span> <span m="455970">out</span> <span m="456400">of</span> <span m="456760">the</span> <span m="457070">JavaScript</span> <span m="457710">context</span> <span m="458820">and</span> <span m="459075">then get into</span> <span m="459330">the</span> <span m="459520">HTML</span> <span m="460220">context.</span> <span m="460940">Maybe</span> <span m="461160">to</span> <span m="461230">find</span> <span m="461550">some</span> <span m="461670">new</span> <span m="462270">HTML</span> <span m="462710">nodes</span> <span m="462910">or</span> <span m="462990">something</span> <span m="463240">like</span> <span m="463440">that.</span> <span m="464250">So</span> <span m="464320">you</span> <span m="464490">see</span> <span m="464730">this</span> <span m="464900">problem with</span> <span m="465310">composition</span> <span m="466090">all over</span> <span m="466970">the</span> <span m="467050">place</span> <span m="467325">in the</span> <span m="467600">web</span> <span m="467960">because</span> <span m="468210">there</span> <span m="468310">are</span> <span m="468390">so</span> <span m="468590">many</span> <span m="468790">different</span> <span m="469000">languages</span> <span m="469480">and</span> <span m="469620">run</span> <span m="469810">times</span> <span m="470010">for you to</span> <span m="470160">think</span> <span m="470450">about.</span> </p>
<p><span m="470840">HTML,</span> <span m="471350">CSS,</span> <span m="471980">JavaScript,</span> <span m="472930">maybe</span> <span m="473170">MySQL</span> <span m="473560">on the</span> <span m="473950">server</span> <span m="474290">side,</span> <span m="474575">and</span> <span m="474860">so</span> <span m="475010">on</span> <span m="475180">and</span> <span m="475280">so</span> <span m="475370">forth.</span> <span m="476820">So</span> <span m="477820">this</span> <span m="478090">is</span> <span m="478530">just</span> <span m="478690">a</span> <span m="478770">classic</span> <span m="479210">example</span> <span m="479540">of</span> <span m="479760">why</span> <span m="479900">you have</span> <span m="479970">to do</span> <span m="480110">something</span> <span m="480400">called</span> <span m="480680">content</span> <span m="481160">standardization.</span> <span m="482240">So</span> <span m="482400">whenever</span> <span m="482740">you</span> <span m="482860">get</span> <span m="483260">untrusted</span> <span m="483910">input</span> <span m="484630">from</span> <span m="484800">someone,</span> <span m="485410">you</span> <span m="485480">actually</span> <span m="485750">need</span> <span m="485890">to</span> <span m="486040">analyze</span> <span m="486550">it</span> <span m="486640">very</span> <span m="486960">carefully</span> <span m="487700">to</span> <span m="487850">make</span> <span m="488010">sure</span> <span m="488150">that it's</span> <span m="488400">not</span> <span m="488610">being</span> <span m="488760">used</span> <span m="488950">as</span> <span m="489050">a</span> <span m="489090">vector</span> <span m="489370">for</span> <span m="489520">an</span> <span m="489600">attack.</span> </p>
<p><span m="491720">So</span> <span m="491930">another</span> <span m="492180">reason</span> <span m="492390">why</span> <span m="492510">web</span> <span m="492690">security</span> <span m="493190">so</span> <span m="493890">tricky</span> <span m="494420">is</span> <span m="494590">because</span> <span m="495190">the</span> <span m="495330">web</span> <span m="495620">specifications</span> <span m="496810">are</span> <span m="496950">incredibly</span> <span m="497510">long,</span> <span m="497980">they're</span> <span m="498070">incredibly</span> <span m="498530">tedious,</span> <span m="499130">they're</span> <span m="499330">incredibly</span> <span m="499880">boring,</span> <span m="500370">and</span> <span m="500520">they're</span> <span m="500630">often</span> <span m="500960">inconsistent.</span> <span m="501880">So</span> <span m="502040">when I</span> <span m="502150">mean</span> <span m="502320">the</span> <span m="502440">web</span> <span m="502660">specifications,</span> <span m="503440">I</span> <span m="503530">mean</span> <span m="503770">things</span> <span m="504030">like</span> <span m="504460">the</span> <span m="504870">definition</span> <span m="505390">of</span> <span m="505480">JPEG,</span> <span m="506000">the</span> <span m="506080">definition</span> <span m="506550">of</span> <span m="506620">CSS,</span> <span m="507260">the</span> <span m="507350">definition</span> <span m="507840">of</span> <span m="507920">HTML.</span> <span m="508670">These</span> <span m="508860">documents</span> <span m="509350">are, like,</span> <span m="509530">the</span> <span m="509620">size</span> <span m="509980">of</span> <span m="510040">the</span> <span m="510400">EU</span> <span m="510725">constitution</span> <span m="511050">and</span> <span m="511430">equally</span> <span m="511820">as</span> <span m="512100">easy</span> <span m="512360">to</span> <span m="512419">understand.</span> </p>
<p><span m="513480">So</span> <span m="513570">what</span> <span m="513669">ends</span> <span m="513799">up</span> <span m="513919">happening</span> <span m="514590">is</span> <span m="514760">that</span> <span m="514900">the</span> <span m="514980">browser</span> <span m="515409">vendors</span> <span m="516130">see</span> <span m="516460">all</span> <span m="516620">these</span> <span m="516809">specs.</span> <span m="517549">And</span> <span m="517679">they</span> <span m="517789">essentially</span> <span m="518200">say,</span> <span m="518830">OK,</span> <span m="519340">thanks</span> <span m="519600">for</span> <span m="519700">that.</span> <span m="520080">I'm</span> <span m="520210">going</span> <span m="520320">to</span> <span m="520490">do</span> <span m="520610">something</span> <span m="521130">that</span> <span m="521309">somewhat</span> <span m="521730">resembles</span> <span m="522169">what</span> <span m="522299">these</span> <span m="522400">specs</span> <span m="522760">look</span> <span m="522900">like.</span> <span m="523320">Then they</span> <span m="523530">call</span> <span m="523830">it</span> <span m="523880">a day and they</span> <span m="524039">laugh</span> <span m="524410">about it</span> <span m="524610">with</span> <span m="524740">their</span> <span m="524850">friends.</span> </p>
<p><span m="525410">OK,</span> <span m="525730">so</span> <span m="525860">what</span> <span m="525950">ends</span> <span m="526080">up</span> <span m="526190">happening</span> <span m="526800">is</span> <span m="526910">that</span> <span m="527040">these</span> <span m="527190">specifications</span> <span m="528160">end</span> <span m="528370">up</span> <span m="528500">being</span> <span m="528780">like</span> <span m="529760">these</span> <span m="530060">vague,</span> <span m="530830">aspirational</span> <span m="531580">documents</span> <span m="532360">that</span> <span m="532550">don't</span> <span m="532790">always</span> <span m="533180">accurately</span> <span m="533620">reflect</span> <span m="534300">what</span> <span m="534530">real</span> <span m="534740">browsers</span> <span m="535160">are</span> <span m="535220">doing.</span> <span m="535525">And</span> <span m="535830">if</span> <span m="535980">you</span> <span m="536060">want</span> <span m="536200">to</span> <span m="536240">understand</span> <span m="536590">the</span> <span m="536650">horror</span> <span m="536990">of this, you can</span> <span m="537310">go</span> <span m="537430">to</span> <span m="537470">this</span> <span m="537590">site called</span> <span m="538020">quirksmode.org.</span> <span m="539450">I mean,</span> <span m="539640">don't</span> <span m="539820">go</span> <span m="539950">to</span> <span m="540110">this  site</span> <span m="540210">if</span> <span m="540350">you</span> <span m="540440">want</span> <span m="540540">to</span> <span m="540580">be</span> <span m="540650">happy.</span> </p>
<p><span m="541050">But</span> <span m="541220">you can go</span> <span m="541480">there.</span> <span m="541870">And it</span> <span m="542090">actually</span> <span m="542410">documents</span> <span m="543140">all</span> <span m="543440">of</span> <span m="543560">these</span> <span m="544280">terrible</span> <span m="544820">inconsistencies</span> <span m="545540">that</span> <span m="545630">browsers</span> <span m="546030">have</span> <span m="546570">with</span> <span m="546750">respect</span> <span m="547140">to</span> <span m="547510">what</span> <span m="547710">happens</span> <span m="548030">when</span> <span m="548100">the</span> <span m="548190">user</span> <span m="548400">hits</span> <span m="548590">a</span> <span m="548620">key</span> <span m="548850">press?</span> <span m="550410">There</span> <span m="550560">should</span> <span m="550780">just</span> <span m="550910">be</span> <span m="551040">one</span> <span m="551290">key</span> <span m="551490">precedent</span> <span m="551920">that's</span> <span m="552010">generated.</span> <span m="552670">You</span> <span m="552920">are</span> <span m="553040">so</span> <span m="553280">wrong.</span> <span m="553840">So</span> <span m="553920">go</span> <span m="554010">to</span> <span m="554180">quirksmode.org</span> <span m="554970">and</span> <span m="555180">check</span> <span m="555370">that</span> <span m="555480">out,</span> <span m="555680">and see</span> <span m="555770">what's</span> <span m="555960">going</span> <span m="556150">on.</span> </p>
<p><span m="557270">So</span> <span m="557510">anyway,</span> <span m="557760">in</span> <span m="557980">this</span> <span m="558100">lecture,</span> <span m="558280">we're</span> <span m="558450">going</span> <span m="558550">to</span> <span m="558620">focus</span> <span m="559040">on</span> <span m="559220">the</span> <span m="559300">client</span> <span m="559700">side</span> <span m="560300">of</span> <span m="560480">the</span> <span m="560560">web</span> <span m="560700">application.</span> <span m="561520">In</span> <span m="561650">particular,</span> <span m="562150">we're</span> <span m="562260">going</span> <span m="562480">to</span> <span m="562580">look</span> <span m="562930">at</span> <span m="563110">how</span> <span m="563420">we</span> <span m="563550">can</span> <span m="563760">isolate</span> <span m="564420">content</span> <span m="565230">from</span> <span m="565510">different</span> <span m="566030">web</span> <span m="566250">providers</span> <span m="567110">that</span> <span m="567270">has</span> <span m="567460">to</span> <span m="567560">coexist,</span> <span m="568220">somehow,</span> <span m="568610">in</span> <span m="568660">the</span> <span m="568750">same</span> <span m="569010">machine</span> <span m="569840">and</span> <span m="569900">the</span> <span m="569970">same</span> <span m="570200">browser.</span> <span m="571720">So</span> <span m="572000">at</span> <span m="572070">a</span> <span m="572100">high</span> <span m="572370">level,</span> <span m="573080">there's</span> <span m="573280">this</span> <span m="573460">fundamental</span> <span m="573950">difference</span> <span m="574260">between</span> <span m="574490">the</span> <span m="574580">way</span> <span m="574760">you</span> <span m="574860">traditionally</span> <span m="575380">think</span> <span m="575580">of</span> <span m="575650">a</span> <span m="575710">desktop</span> <span m="576150">application</span> <span m="576990">and</span> <span m="577230">the way you</span> <span m="577430">think</span> <span m="577590">of</span> <span m="577680">a</span> <span m="577750">web</span> <span m="577980">application.</span> </p>
<p><span m="579420">Abstractly</span> <span m="580070">speaking,</span> <span m="580640">most</span> <span m="580880">of</span> <span m="580970">the</span> <span m="581050">desktop</span> <span m="581510">applications</span> <span m="582220">that</span> <span m="582380">you</span> <span m="582490">use,</span> <span m="583060">you</span> <span m="583180">can</span> <span m="583300">think</span> <span m="583490">of</span> <span m="583580">it as</span> <span m="583690">coming</span> <span m="583910">from</span> <span m="584040">a</span> <span m="584100">single</span> <span m="584430">principal.</span> <span m="585320">So</span> <span m="585850">word</span> <span m="586370">comes</span> <span m="586610">from</span> <span m="586710">Microsoft.</span> <span m="587490">And maybe</span> <span m="587960">TurboTax</span> <span m="588610">comes</span> <span m="588860">from</span> <span m="589020">Mr. and</span> <span m="589320">Mrs.</span> <span m="589590">TurboTax,</span> <span m="589925">so on and</span> <span m="590260">so forth.</span> <span m="591470">But</span> <span m="591650">when</span> <span m="591830">you</span> <span m="592210">look</span> <span m="592550">at</span> <span m="593210">a</span> <span m="593290">web</span> <span m="593580">application,</span> <span m="594460">something</span> <span m="594870">that</span> <span m="595000">looks</span> <span m="595340">to</span> <span m="595420">you,</span> <span m="596260">visually,</span> <span m="597070">as</span> <span m="597250">a</span> <span m="597310">single</span> <span m="597730">application</span> <span m="598830">is</span> <span m="598970">actually</span> <span m="599300">composed</span> <span m="599820">of</span> <span m="599900">a</span> <span m="599960">bunch</span> <span m="600280">of</span> <span m="600360">different</span> <span m="600650">content</span> <span m="601260">from</span> <span m="601400">a</span> <span m="601430">bunch</span> <span m="601660">of</span> <span m="601700">different</span> <span m="601910">people.</span> </p>
<p><span m="602600">So</span> <span m="602680">you</span> <span m="602730">go</span> <span m="602850">to</span> <span m="602930">CNN,</span> <span m="603730">it</span> <span m="603880">looks</span> <span m="604050">like</span> <span m="604170">it's</span> <span m="604310">all on</span> <span m="604530">one</span> <span m="604690">tab.</span> <span m="605260">But</span> <span m="607010">each</span> <span m="607350">of</span> <span m="607480">those</span> <span m="607670">visual</span> <span m="608030">things</span> <span m="608260">that</span> <span m="608590">you see</span> <span m="608920">may,</span> <span m="609070">in</span> <span m="609200">fact,</span> <span m="609430">come</span> <span m="609560">from</span> <span m="609680">someone</span> <span m="609930">different.</span> <span m="610420">So</span> <span m="610570">let's</span> <span m="610770">just</span> <span m="611150">look</span> <span m="611730">at</span> <span m="611790">a</span> <span m="611840">very</span> <span m="613890">simple</span> <span m="614250">example</span> <span m="614670">here.</span> <span m="615530">So</span> <span m="615830">let's</span> <span m="616150">say</span> <span m="616410">that</span> <span m="616600">we</span> <span m="616830">were</span> <span m="617140">looking</span> <span m="617740">at</span> <span m="618820">the</span> <span m="618890">following</span> <span m="619330">site.</span> <span m="620020">So</span> <span m="620320">HTTP</span> <span m="622790">food.com.</span> <span m="624654">And</span> <span m="625120">we're</span> <span m="625250">just</span> <span m="625440">looking</span> <span m="625880">at</span> <span m="626380">index.html.</span> </p>
<p><span m="630730">So</span> <span m="631480">you</span> <span m="631863">know,</span> <span m="632630">you</span> <span m="633000">look</span> <span m="633170">at</span> <span m="633260">your</span> <span m="634440">browser</span> <span m="634870">tab.</span> <span m="635170">What</span> <span m="635300">might</span> <span m="635480">you</span> <span m="635600">see?</span> <span m="636240">So</span> <span m="636530">one</span> <span m="636800">thing</span> <span m="636960">that</span> <span m="637090">you</span> <span m="637190">might</span> <span m="637460">see</span> <span m="638280">is</span> <span m="640230">an</span> <span m="640390">advertisement.</span> <span m="641830">So</span> <span m="641960">you</span> <span m="642100">might</span> <span m="642350">see</span> <span m="642640">an</span> <span m="642760">advertisement</span> <span m="643230">in the</span> <span m="643700">form</span> <span m="644460">of</span> <span m="644650">a</span> <span m="644690">gift.</span> <span m="645660">And</span> <span m="645820">maybe</span> <span m="646140">that</span> <span m="646440">was</span> <span m="646710">downloaded</span> <span m="647400">from</span> <span m="648600">ads.com.</span> </p>
<p><span m="651974">Then</span> <span m="652460">you</span> <span m="652570">also</span> <span m="652970">might</span> <span m="653240">see,</span> <span m="654210">let's</span> <span m="654590">say,</span> <span m="655160">an</span> <span m="655470">analytics</span> <span m="656010">library.</span> <span m="658980">And</span> <span m="659660">maybe</span> <span m="660170">this</span> <span m="660450">comes</span> <span m="661010">from</span> <span m="662640">google.com.</span> <span m="666970">So</span> <span m="667160">these</span> <span m="667420">libraries</span> <span m="667980">are</span> <span m="668060">very</span> <span m="668350">popular</span> <span m="668780">for</span> <span m="668920">doing</span> <span m="669230">things</span> <span m="669470">like</span> <span m="669600">tracking</span> <span m="669950">how</span> <span m="670060">many</span> <span m="670240">people</span> <span m="670600">have</span> <span m="670830">loaded</span> <span m="670900">your</span> <span m="671040">page,</span> <span m="671760">looking</span> <span m="672040">to</span> <span m="672120">see</span> <span m="672410">where</span> <span m="672580">people</span> <span m="673560">click</span> <span m="673850">on</span> <span m="674050">things</span> <span m="674600">to</span> <span m="674890">see</span> <span m="675150">which</span> <span m="675520">parts of</span> <span m="675790">their site</span> <span m="676220">are</span> <span m="676260">the</span> <span m="676310">most</span> <span m="676520">interesting</span> <span m="677040">for</span> <span m="677160">people to</span> <span m="677440">interact</span> <span m="677750">with,</span> <span m="677990">so on and</span> <span m="678160">so</span> <span m="678300">forth.</span> </p>
<p><span m="679550">And</span> <span m="679670">you</span> <span m="679770">might</span> <span m="679990">also</span> <span m="680340">have</span> <span m="681100">another</span> <span m="681680">JavaScript</span> <span m="682190">library.</span> <span m="682690">Let's</span> <span m="682950">say</span> <span m="683190">it's</span> <span m="684440">jQuery.</span> <span m="687440">And</span> <span m="687580">maybe</span> <span m="687880">that</span> <span m="688140">comes</span> <span m="689010">from</span> <span m="691680">cdn.foo.com.</span> <span m="693370">So</span> <span m="695530">some</span> <span m="695790">content</span> <span m="696180">distribution</span> <span m="696720">network</span> <span m="697030">that</span> <span m="697300">foo.com</span> <span m="697645">runs.</span> <span m="698190">jQuery</span> <span m="698550">is</span> <span m="698910">very</span> <span m="699150">popular</span> <span m="699440">library</span> <span m="699670">for</span> <span m="699960">doing</span> <span m="700210">things</span> <span m="700470">like</span> <span m="700750">GUI</span> <span m="701020">manipulation.</span> <span m="701900">Things</span> <span m="702130">like</span> <span m="702320">that.</span> <span m="702530">So</span> <span m="702610">a</span> <span m="702650">lot</span> <span m="703140">of popular</span> <span m="703250">websites</span> <span m="703940">have</span> <span m="704120">jQuery.</span> <span m="704670">Although,</span> <span m="704920">they</span> <span m="705070">serve  it from</span> <span m="705520">different</span> <span m="705790">places.</span> </p>
<p><span m="707140">And</span> <span m="707390">then,</span> <span m="707530">on this</span> <span m="707760">page</span> <span m="708070">you</span> <span m="708170">might</span> <span m="708440">see</span> <span m="708870">some</span> <span m="710510">HTML.</span> <span m="713170">And</span> <span m="713330">here's</span> <span m="713690">where</span> <span m="713910">you</span> <span m="714040">might</span> <span m="714280">see</span> <span m="714480">stuff</span> <span m="714860">like</span> <span m="716710">buttons</span> <span m="717380">for</span> <span m="717490">the</span> <span m="717620">user</span> <span m="717950">to</span> <span m="718020">click</span> <span m="718280">on,</span> <span m="719830">text</span> <span m="720230">input,</span> <span m="721522">and</span> <span m="721940">so</span> <span m="722250">on</span> <span m="722350">and</span> <span m="722450">so</span> <span m="722610">forth.</span> <span m="725700">So</span> <span m="725830">that's</span> <span m="726030">just</span> <span m="726140">raw</span> <span m="726460">HTML</span> <span m="726830">on</span> <span m="726910">the</span> <span m="726980">page.</span> </p>
<p><span m="728120">And</span> <span m="728290">then,</span> <span m="728490">you</span> <span m="728620">might</span> <span m="728980">see</span> <span m="730730">what</span> <span m="730900">they</span> <span m="731030">call</span> <span m="732690">inline</span> <span m="734940">JavaScript</span> <span m="737920">from</span> <span m="738610">foo.com.</span> <span m="741865">In my</span> <span m="742550">inline,</span> <span m="744040">you</span> <span m="744370">have</span> <span m="744680">a</span> <span m="744900">script</span> <span m="745270">tag.</span> <span m="747480">And</span> <span m="747570">then,</span> <span m="747650">you</span> <span m="747730">have</span> <span m="747830">a</span> <span m="747890">closed</span> <span m="748260">script</span> <span m="748530">tag.</span> <span m="751130">And then you just</span> <span m="751550">have</span> <span m="751760">some</span> <span m="751900">JavaScript</span> <span m="752440">code</span> <span m="752820">included in</span> <span m="753210">their</span> <span m="753350">directly.</span> </p>
<p><span m="754430">That's</span> <span m="754640">as</span> <span m="754750">opposed</span> <span m="755220">to</span> <span m="755360">where</span> <span m="755530">you</span> <span m="755650">say</span> <span m="755890">something</span> <span m="756220">like</span> <span m="758380">script.</span> <span m="759400">And</span> <span m="759630">then,</span> <span m="761980">the</span> <span m="762140">source</span> <span m="762590">equals</span> <span m="762900">something</span> <span m="763640">that</span> <span m="763780">lives</span> <span m="764020">on</span> <span m="764140">some</span> <span m="764300">server</span> <span m="764580">remotely.</span> <span m="765200">So</span> <span m="765290">this</span> <span m="765410">is</span> <span m="765450">what's</span> <span m="765630">called</span> <span m="765860">inline</span> <span m="766190">JavaScript.</span> <span m="766990">This</span> <span m="767140">is</span> <span m="767240">what's</span> <span m="767510">referred</span> <span m="767830">to</span> <span m="767970">as</span> <span m="768070">an</span> <span m="768150">externally</span> <span m="768650">defined</span> <span m="768960">JavaScript</span> <span m="769380">file.</span> <span m="769830">So</span> <span m="770000">you might have</span> <span m="770270">some</span> <span m="770360">inline</span> <span m="770720">JavaScript</span> <span m="771120">there</span> <span m="771610">from</span> <span m="771850">foo.com.</span> </p>
<p><span m="773380">And the</span> <span m="773470">other</span> <span m="773640">thing</span> <span m="773820">that you</span> <span m="774020">might</span> <span m="774240">have</span> <span m="774530">in</span> <span m="774630">here</span> <span m="775130">is</span> <span m="775320">actually</span> <span m="776260">a</span> <span m="776610">frame.</span> <span m="778960">So</span> <span m="779140">we'll</span> <span m="779260">talk</span> <span m="779510">about</span> <span m="779790">frames</span> <span m="780090">a</span> <span m="780140">bit</span> <span m="780410">more</span> <span m="780880">in a</span> <span m="781360">little bit,</span> <span m="781680">but</span> <span m="781860">think</span> <span m="782130">of a</span> <span m="782440">frame</span> <span m="782830">as</span> <span m="782930">almost</span> <span m="783170">like</span> <span m="783300">a</span> <span m="783370">separate</span> <span m="783860">JavaScript</span> <span m="784450">universe.</span> <span m="785770">It's</span> <span m="785910">a</span> <span m="785960">little</span> <span m="786220">bit</span> <span m="786440">equivalent</span> <span m="786840">to</span> <span m="787130">a</span> <span m="787200">process</span> <span m="788110">and</span> <span m="788340">UNIX.</span> </p>
<p><span m="788960">So</span> <span m="789340">maybe</span> <span m="789740">this</span> <span m="789960">frame</span> <span m="790340">here,</span> <span m="791390">maybe</span> <span m="791700">this</span> <span m="792050">guy</span> <span m="792760">belongs</span> <span m="793500">to</span> <span m="794810">https://facebook.com/likethis.html.</span> <span m="810690">So</span> <span m="810820">maybe</span> <span m="811270">here</span> <span m="811590">we</span> <span m="811730">have</span> <span m="812020">some</span> <span m="814120">inline</span> <span m="814760">JavaScript</span> <span m="816940">from</span> <span m="817630">Facebook.</span> <span m="820240">And</span> <span m="820370">then,</span> <span m="820510">maybe,</span> <span m="820830">we</span> <span m="820960">also</span> <span m="821390">have</span> <span m="822460">some</span> <span m="822850">image.</span> </p>
<p><span m="823300">So</span> <span m="824520">you</span> <span m="824600">know,</span> <span m="826120">f.jpeg.</span> <span m="829040">That</span> <span m="829310">comes</span> <span m="830450">from</span> <span m="831820">https://facebook.com.</span> <span m="840140">OK,</span> <span m="840350">so</span> <span m="840980">this</span> <span m="841210">is</span> <span m="841360">what</span> <span m="842140">a</span> <span m="842260">single</span> <span m="843830">tab</span> <span m="844650">might</span> <span m="844890">have in</span> <span m="845160">its</span> <span m="845350">contents.</span> <span m="846370">But</span> <span m="846770">as</span> <span m="846940">I</span> <span m="846990">just</span> <span m="847170">mentioned,</span> <span m="847450">all</span> <span m="847790">this</span> <span m="848495">can, potentially,</span> <span m="848780">come</span> <span m="849030">from</span> <span m="849180">all</span> <span m="849340">these different</span> <span m="849690">principles.</span> <span m="850510">So</span> <span m="850540">there's</span> <span m="850670">a</span> <span m="850720">bunch</span> <span m="850930">of</span> <span m="851020">interesting</span> <span m="851360">questions</span> <span m="851790">that</span> <span m="851890">we</span> <span m="851970">can</span> <span m="852130">ask</span> <span m="852840">about</span> <span m="853500">a</span> <span m="853730">application</span> <span m="854025">that</span> <span m="854320">looks</span> <span m="854590">like</span> <span m="854770">this</span> </p>
<p><span m="855200">So</span> <span m="855350">for</span> <span m="855490">example,</span> <span m="856090">can</span> <span m="856430">this</span> <span m="856590">analytics</span> <span m="857170">code from</span> <span m="857610">google.com</span> <span m="859354">actually</span> <span m="859790">access</span> <span m="860250">JavaScript</span> <span m="860830">state</span> <span m="861460">that</span> <span m="861660">resides</span> <span m="862130">in</span> <span m="862200">the</span> <span m="862290">jQuery</span> <span m="862810">code.</span> <span m="863880">So</span> <span m="864170">to</span> <span m="864360">first</span> <span m="864630">approximation,</span> <span m="865220">maybe</span> <span m="865410">that</span> <span m="865580">seems</span> <span m="865750">like</span> <span m="865870">a</span> <span m="865920">bad</span> <span m="866190">idea</span> <span m="866840">because</span> <span m="867440">these</span> <span m="867620">two</span> <span m="867750">pieces</span> <span m="868050">of</span> <span m="868160">code</span> <span m="868610">came from</span> <span m="868660">different</span> <span m="868890">places.</span> <span m="869670">But</span> <span m="869740">then</span> <span m="869830">again,</span> <span m="869980">maybe</span> <span m="870380">it's</span> <span m="870420">actually</span> <span m="870720">OK</span> <span m="871160">because,</span> <span m="871450">presumably,</span> <span m="872210">foo.com</span> <span m="872520">brought</span> <span m="873770">both</span> <span m="873980">of</span> <span m="874100">these</span> <span m="874630">libraries</span> <span m="875170">in</span> <span m="875490">so</span> <span m="875660">that they</span> <span m="875780">can</span> <span m="875900">work</span> <span m="876100">with</span> <span m="876200">each</span> <span m="876340">other.</span> <span m="877270">So</span> <span m="877730">who</span> <span m="877850">knows.</span> </p>
<p><span m="878280">Another</span> <span m="878540">question</span> <span m="878820">you</span> <span m="878870">might</span> <span m="879080">have</span> <span m="879500">is</span> <span m="880370">can the</span> <span m="880770">analytics</span> <span m="881360">code</span> <span m="881650">here</span> <span m="882480">actually</span> <span m="883090">interact</span> <span m="883470">with</span> <span m="883550">the</span> <span m="883620">text</span> <span m="884090">inputs</span> <span m="884485">here.</span> <span m="884880">So</span> <span m="885050">for</span> <span m="885250">example,</span> <span m="886060">can</span> <span m="886410">the</span> <span m="886580">analytics</span> <span m="887100">code</span> <span m="887350">define</span> <span m="887930">event</span> <span m="888290">handlers?</span> <span m="889460">So</span> <span m="889930">a</span> <span m="890000">little</span> <span m="890190">bit</span> <span m="890310">of</span> <span m="890800">background</span> <span m="891180">in</span> <span m="891240">JavaScript.</span> <span m="891720">JavaScript</span> <span m="892200">is</span> <span m="892350">single</span> <span m="892740">threaded</span> <span m="893590">vent</span> <span m="893770">driven</span> <span m="894020">model.</span> </p>
<p><span m="894720">So</span> <span m="894770">basically,</span> <span m="895270">in</span> <span m="895570">each</span> <span m="895890">frame,</span> <span m="896170">there's</span> <span m="896280">just</span> <span m="896440">an</span> <span m="896520">event</span> <span m="896810">loop</span> <span m="897250">that's</span> <span m="897380">just</span> <span m="897500">constantly</span> <span m="897950">pulling</span> <span m="898250">events.</span> <span m="898970">Key</span> <span m="899180">presses,</span> <span m="899830">network</span> <span m="900110">events</span> <span m="900340">timers,</span> <span m="900720">and</span> <span m="900820">stuff</span> <span m="901010">like</span> <span m="901170">that.</span> <span m="901570">And</span> <span m="901750">then, seeing</span> <span m="901990">if</span> <span m="902080">there are</span> <span m="902200">any</span> <span m="902340">handlers</span> <span m="902800">associated</span> <span m="903260">with</span> <span m="903360">those</span> <span m="903550">events.</span> <span m="903820">And</span> <span m="903900">if</span> <span m="903990">so,</span> <span m="904330">it</span> <span m="904410">fires</span> <span m="904860">them.</span> <span m="905460">So</span> <span m="905600">who</span> <span m="905820">should</span> <span m="905980">be</span> <span m="906100">able</span> <span m="906490">to</span> <span m="906940">define</span> <span m="907500">event</span> <span m="907640">handlers</span> <span m="907910">for this</span> <span m="908250">HTML.</span> <span m="908800">Should</span> <span m="908990">google.com</span> <span m="909340">be</span> <span m="909690">able</span> <span m="909850">to</span> <span m="909930">do</span> <span m="910080">it.</span> <span m="910510">It's</span> <span m="910690">not</span> <span m="911250">from</span> <span m="911660">foo.com</span> <span m="911800">so</span> <span m="912430">maybe,</span> <span m="912750">maybe</span> <span m="912960">not.</span> </p>
<p><span m="914520">Another</span> <span m="914850">question,</span> <span m="915220">too,</span> <span m="915460">is</span> <span m="915890">what's</span> <span m="916220">the</span> <span m="916340">relationship</span> <span m="916890">between</span> <span m="917360">this</span> <span m="917550">Facebook</span> <span m="918040">frame</span> <span m="918320">here</span> <span m="918570">and</span> <span m="918690">the</span> <span m="918770">larger</span> <span m="919150">frame?</span> <span m="919930">The</span> <span m="920010">Facebook</span> <span m="920470">frame is</span> <span m="920810">an</span> <span m="920920">HTTPS,</span> <span m="922500">secure.</span> <span m="923680">foo.com</span> <span m="924090">is</span> <span m="924290">an</span> <span m="924480">HTTP,</span> <span m="925740">nonsecure.</span> <span m="926460">So</span> <span m="926830">how</span> <span m="927070">should</span> <span m="927280">these</span> <span m="927490">two</span> <span m="927650">things</span> <span m="927910">be able</span> <span m="928040">to</span> <span m="928300">interact?</span> </p>
<p><span m="929090">So</span> <span m="929660">basically,</span> <span m="930360">to answer</span> <span m="930620">these</span> <span m="930830">questions,</span> <span m="931900">browsers</span> <span m="932550">use</span> <span m="932790">a</span> <span m="932850">security</span> <span m="933430">model</span> <span m="934150">called</span> <span m="934650">the</span> <span m="935130">same-origin</span> <span m="937670">policy.</span> <span m="943910">So</span> <span m="944740">there's,</span> <span m="945400">sort</span> <span m="945790">of, this vague</span> <span m="946150">goal</span> <span m="947360">because</span> <span m="947580">a lot</span> <span m="947835">of things</span> <span m="948380">with</span> <span m="948660">respect</span> <span m="948910">to</span> <span m="948990">web</span> <span m="949330">security  are,</span> <span m="949590">kind</span> <span m="949750">of,</span> <span m="949850">vague</span> <span m="950250">because</span> <span m="950350">nobody knows what</span> <span m="950610">they're</span> <span m="950810">doing.</span> <span m="951380">But</span> <span m="951510">the</span> <span m="951580">basic</span> <span m="951920">idea</span> <span m="952300">is</span> <span m="952910">two</span> <span m="953150">websites</span> <span m="958140">should</span> <span m="958330">not</span> <span m="958530">be</span> <span m="958640">able</span> <span m="958790">to</span> <span m="958870">tamper with</span> <span m="959230">each</span> <span m="959480">other,</span> <span m="963654">unless</span> <span m="964430">they</span> <span m="964510">want</span> <span m="964780">to.</span> </p>
<p><span m="974090">So</span> <span m="974480">defining</span> <span m="975230">what</span> <span m="975540">tampering</span> <span m="977140">means</span> <span m="977970">was</span> <span m="978140">actually</span> <span m="979120">easier</span> <span m="979860">when</span> <span m="980000">the</span> <span m="980090">web was</span> <span m="980450">simpler.</span> <span m="981300">But</span> <span m="981410">as</span> <span m="981600">we</span> <span m="981650">keep</span> <span m="981830">adding</span> <span m="982090">these</span> <span m="982260">new</span> <span m="982450">APIs,</span> <span m="983260">it's</span> <span m="983430">more and more</span> <span m="983800">difficult</span> <span m="984120">to</span> <span m="984190">understand</span> <span m="984820">what</span> <span m="984990">this</span> <span m="985170">non-tampering</span> <span m="985880">goal</span> <span m="986080">means.</span> <span m="986760">So</span> <span m="986950">for</span> <span m="987080">example,</span> <span m="987700">it's</span> <span m="987960">obviously</span> <span m="988670">bad</span> <span m="989550">if</span> <span m="990030">two</span> <span m="990280">websites,</span> <span m="990850">which</span> <span m="991060">don't</span> <span m="991270">trust</span> <span m="991590">each</span> <span m="991750">other,</span> <span m="992010">can</span> <span m="992710">over write</span> <span m="993200">o</span> <span m="993290">each</span> <span m="993470">other's</span> <span m="993710">visual</span> <span m="993980">display.</span> <span m="994850">That</span> <span m="995020">seems</span> <span m="995140">like</span> <span m="995260">an</span> <span m="995340">obviously</span> <span m="995740">bad</span> <span m="996040">thing.</span> </p>
<p><span m="996970">It</span> <span m="997120">seems</span> <span m="997260">like</span> <span m="997390">an</span> <span m="997470">obviously</span> <span m="997940">good</span> <span m="998310">thing</span> <span m="999000">if</span> <span m="999270">two</span> <span m="999480">websites,</span> <span m="1000160">which</span> <span m="1000470">want</span> <span m="1000790">to</span> <span m="1000880">collaborate,</span> <span m="1001680">are</span> <span m="1001950">able</span> <span m="1002170">to,</span> <span m="1002250">somehow,</span> <span m="1002530">exchange</span> <span m="1003280">data</span> <span m="1004040">in</span> <span m="1004190">a</span> <span m="1004240">safe</span> <span m="1004530">way.</span> <span m="1005450">So</span> <span m="1005510">you</span> <span m="1005570">can</span> <span m="1005690">think</span> <span m="1005860">of</span> <span m="1005960">mash</span> <span m="1006280">up</span> <span m="1006390">sites</span> <span m="1006700">you</span> <span m="1006770">may</span> <span m="1006870">have</span> <span m="1006960">heard</span> <span m="1007170">of.</span> <span m="1007310">So</span> <span m="1007740">sometimes you'll</span> <span m="1007970">see</span> <span m="1008100">these</span> <span m="1008280">things in the</span> <span m="1008500">internet.</span> </p>
<p><span m="1009040">It's</span> <span m="1009150">like</span> <span m="1009320">someone</span> <span m="1009570">takes</span> <span m="1009830">Google</span> <span m="1010100">map</span> <span m="1010410">data,</span> <span m="1010990">and</span> <span m="1011140">then</span> <span m="1011310">takes</span> <span m="1011930">the</span> <span m="1012070">location</span> <span m="1012345">of</span> <span m="1012620">food</span> <span m="1012910">trucks.</span> <span m="1013220">And</span> <span m="1013330">then,</span> <span m="1013460">you have  this</span> <span m="1013620">amazing</span> <span m="1014300">mash up</span> <span m="1014620">that</span> <span m="1014800">allows</span> <span m="1015080">you to eat</span> <span m="1015460">cheaply</span> <span m="1015700">and</span> <span m="1015830">avoid</span> <span m="1015960">salmonella,</span> <span m="1016650">right?</span> <span m="1017140">So</span> <span m="1017660">that</span> <span m="1017920">seems</span> <span m="1018140">like</span> <span m="1018270">a</span> <span m="1018340">thing</span> <span m="1018620">you</span> <span m="1018720">should</span> <span m="1018890">be</span> <span m="1019040">able</span> <span m="1019210">to</span> <span m="1019380">do.</span> <span m="1019930">But</span> <span m="1020050">how,</span> <span m="1020300">exactly,</span> <span m="1020560">do</span> <span m="1020820">we</span> <span m="1021030">enable</span> <span m="1021340">that</span> <span m="1021490">type</span> <span m="1021630">of</span> <span m="1021730">composition?</span> </p>
<p><span m="1023350">Then</span> <span m="1023470">there's</span> <span m="1023520">other</span> <span m="1023885">things</span> <span m="1024250">that</span> <span m="1024550">are, kind of,</span> <span m="1024640">hard to say.</span> <span m="1025069">So for</span> <span m="1025220">example,</span> <span m="1026000">if</span> <span m="1026319">JavaScript</span> <span m="1026849">code</span> <span m="1027150">comes</span> <span m="1027410">from</span> <span m="1027550">origin</span> <span m="1027910">x</span> <span m="1028930">inside</span> <span m="1029400">of a</span> <span m="1029490">page</span> <span m="1030130">that's from</span> <span m="1030300">origin</span> <span m="1030730">y,</span> <span m="1031270">how</span> <span m="1031579">exactly</span> <span m="1032010">should</span> <span m="1032230">that</span> <span m="1032680">code</span> <span m="1033009">and</span> <span m="1033480">that</span> <span m="1033680">content</span> <span m="1034410">compose?</span> <span m="1035920">So</span> <span m="1037260">the</span> <span m="1037349">strategy</span> <span m="1038700">that</span> <span m="1039109">the</span> <span m="1039740">same-origin</span> <span m="1040530">policy</span> <span m="1041060">user</span> <span m="1042819">can</span> <span m="1043119">be</span> <span m="1043220">roughly</span> <span m="1043920">described</span> <span m="1044550">as</span> <span m="1044680">follows.</span> </p>
<p><span m="1045579">So</span> <span m="1046980">each</span> <span m="1047240">resource</span> <span m="1051870">is</span> <span m="1052040">assigned</span> <span m="1053460">an</span> <span m="1053630">origin,</span> <span m="1058630">which</span> <span m="1058830">we'll</span> <span m="1060080">discuss</span> <span m="1061060">in</span> <span m="1061200">a</span> <span m="1061250">second.</span> <span m="1064790">And</span> <span m="1066140">essentially,</span> <span m="1066590">a</span> <span m="1067300">JavaScript</span> <span m="1068020">code</span> <span m="1069740">can</span> <span m="1070290">only</span> <span m="1070690">access</span> <span m="1075260">resources</span> <span m="1076410">from</span> <span m="1076640">its</span> <span m="1076790">own</span> <span m="1076970">origin.</span> <span m="1085820">So</span> <span m="1085980">this</span> <span m="1086270">is</span> <span m="1086470">the</span> <span m="1087710">high</span> <span m="1088050">level</span> <span m="1088400">strategy</span> <span m="1088820">the</span> <span m="1088920">same</span> <span m="1089130">origin</span> <span m="1089480">policy</span> <span m="1089770">uses.</span> </p>
<p><span m="1090310">But</span> <span m="1090510">the</span> <span m="1090600">devil's</span> <span m="1090960">in</span> <span m="1091060">the</span> <span m="1091120">details. And</span> <span m="1091590">there's</span> <span m="1091890">the</span> <span m="1091970">ton</span> <span m="1092250">of</span> <span m="1092330">exceptions,</span> <span m="1093150">which</span> <span m="1093210">we're</span> <span m="1093270">going</span> <span m="1093420">to</span> <span m="1093490">look</span> <span m="1093700">into</span> <span m="1094510">in</span> <span m="1094660">a</span> <span m="1094710">second.</span> <span m="1095450">But</span> <span m="1095640">first</span> <span m="1095890">of</span> <span m="1096020">all,</span> <span m="1096280">before</span> <span m="1096430">we</span> <span m="1096720">proceed,</span> <span m="1097180">let's</span> <span m="1097430">define</span> <span m="1098300">what an</span> <span m="1098750">origin</span> <span m="1099140">is.</span> <span m="1099930">So</span> <span m="1100930">an</span> <span m="1101080">origin</span> <span m="1103340">is,</span> <span m="1103630">basically,</span> <span m="1104895">a</span> <span m="1107120">network</span> <span m="1107530">protocol</span> <span m="1108050">scheme</span> <span m="1109310">plus</span> <span m="1109600">a</span> <span m="1109890">host</span> <span m="1110550">name</span> <span m="1114970">plus</span> <span m="1115330">a</span> <span m="1115650">port.</span> </p>
<p><span m="1119540">So</span> <span m="1119760">for</span> <span m="1119890">example,</span> <span m="1120430">we</span> <span m="1120530">can</span> <span m="1120560">have</span> <span m="1120770">something</span> <span m="1121080">like</span> <span m="1121380">HTTP</span> <span m="1124500">foo.com.</span> <span m="1127664">And</span> <span m="1128570">then,</span> <span m="1128810">maybe,</span> <span m="1128990">it's</span> <span m="1129130">index.html.</span> <span m="1135130">So</span> <span m="1135330">the</span> <span m="1135470">scheme</span> <span m="1136070">here</span> <span m="1136570">is</span> <span m="1136770">HTTP.</span> <span m="1138536">And</span> <span m="1139030">the</span> <span m="1139130">host</span> <span m="1139570">name</span> <span m="1140150">is</span> <span m="1140550">foo.com.</span> <span m="1142400">And the</span> <span m="1142470">port</span> <span m="1143010">is</span> <span m="1143200">80.</span> </p>
<p><span m="1143840">Now</span> <span m="1144010">the</span> <span m="1144110">port,</span> <span m="1144550">in</span> <span m="1144650">this</span> <span m="1144840">case,</span> <span m="1145250">is</span> <span m="1145390">implicit.</span> <span m="1146530">The</span> <span m="1146610">port</span> <span m="1146920">is</span> <span m="1147540">the</span> <span m="1147680">port</span> <span m="1147970">on</span> <span m="1148080">the</span> <span m="1148160">server</span> <span m="1148480">side</span> <span m="1148830">that the</span> <span m="1148890">client</span> <span m="1149230">uses</span> <span m="1149480">to</span> <span m="1149590">connect.</span> <span m="1150560">So</span> <span m="1150740">if you</span> <span m="1150830">see</span> <span m="1151030">a</span> <span m="1151130">URL</span> <span m="1151920">from</span> <span m="1152030">the</span> <span m="1152180">HTTP</span> <span m="1152840">scheme</span> <span m="1153490">and</span> <span m="1153600">there's</span> <span m="1153770">no</span> <span m="1153920">port</span> <span m="1154280">that's</span> <span m="1154440">explicitly</span> <span m="1155410">supplied,</span> <span m="1156390">then,</span> <span m="1156550">implicitly,</span> <span m="1157030">that</span> <span m="1157220">port is</span> <span m="1157540">80.</span> </p>
<p><span m="1159000">So</span> <span m="1159230">then,</span> <span m="1159430">if</span> <span m="1159550">we</span> <span m="1159640">look</span> <span m="1159850">at</span> <span m="1159940">something</span> <span m="1160270">like</span> <span m="1161460">the</span> <span m="1161820">HTTPS,</span> <span m="1166220">once</span> <span m="1166430">again,</span> <span m="1166980">foo.com</span> <span m="1169300">index.html.</span> <span m="1173340">So</span> <span m="1173900">these</span> <span m="1174220">two</span> <span m="1174340">URLs</span> <span m="1174990">have</span> <span m="1175260">the</span> <span m="1175340">same</span> <span m="1175770">host</span> <span m="1176280">name.</span> <span m="1177270">Right?</span> <span m="1177800">But</span> <span m="1177970">they</span> <span m="1178080">have,</span> <span m="1178420">actually,</span> <span m="1179570">different</span> <span m="1179950">schemes.</span> <span m="1180880">HTTPS</span> <span m="1181560">vs</span> <span m="1181820">HTTP.</span> </p>
<p><span m="1182690">And</span> <span m="1182890">also,</span> <span m="1183180">here,</span> <span m="1183570">the</span> <span m="1183660">port</span> <span m="1184070">is</span> <span m="1184200">implicitly</span> <span m="1185300">443.</span> <span m="1186710">That's</span> <span m="1186920">the</span> <span m="1187020">default</span> <span m="1187490">HTTPS</span> <span m="1187845">port.</span> <span m="1188880">So</span> <span m="1188960">these</span> <span m="1189230">two</span> <span m="1189360">URLs</span> <span m="1190180">have</span> <span m="1190360">different</span> <span m="1190710">origins.</span> </p>
<p><span m="1191940">And</span> <span m="1192120">then,</span> <span m="1193260">as</span> <span m="1193380">a</span> <span m="1193440">final</span> <span m="1193840">example,</span> <span m="1194730">if you</span> <span m="1194840">had</span> <span m="1195050">a</span> <span m="1195140">site</span> <span m="1195470">like</span> <span m="1195690">HTTP</span> <span m="1197230">bar.com,</span> <span m="1200280">then</span> <span m="1200740">you</span> <span m="1200830">can</span> <span m="1200990">use</span> <span m="1201180">this</span> <span m="1201830">colon</span> <span m="1202240">notation</span> <span m="1202730">here.</span> <span m="1203740">8181.</span> <span m="1207330">You know,</span> <span m="1208370">these</span> <span m="1208580">things</span> <span m="1209070">beyond</span> <span m="1209490">here</span> <span m="1209680">don't</span> <span m="1209830">matter</span> <span m="1210340">with</span> <span m="1210420">respect</span> <span m="1210750">to</span> <span m="1211510">the</span> <span m="1211610">same</span> <span m="1211830">origin</span> <span m="1212080">policy,</span> <span m="1212350">at</span> <span m="1212620">least</span> <span m="1212915">with</span> <span m="1213210">respect</span> <span m="1213370">to this</span> <span m="1214080">very</span> <span m="1214240">simple</span> <span m="1214530">example.</span> </p>
<p><span m="1215150">Here,</span> <span m="1215400">we</span> <span m="1215540">see</span> <span m="1215720">that</span> <span m="1215830">we</span> <span m="1215920">have</span> <span m="1216090">a</span> <span m="1216150">scheme of</span> <span m="1216540">HTTP,</span> <span m="1217360">a</span> <span m="1217660">host</span> <span m="1217930">name</span> <span m="1219220">of</span> <span m="1219410">bar.com,</span> <span m="1220090">and</span> <span m="1220230">here</span> <span m="1220460">we've</span> <span m="1220620">explicitly</span> <span m="1221140">specified</span> <span m="1221580">the</span> <span m="1221700">port.</span> <span m="1222230">So</span> <span m="1222310">in</span> <span m="1222380">this</span> <span m="1222590">case,</span> <span m="1222890">it's</span> <span m="1223240">a</span> <span m="1223370">non-default</span> <span m="1224040">port</span> <span m="1224500">of</span> <span m="1224600">8181.</span> <span m="1225990">So</span> <span m="1226120">does that</span> <span m="1226300">make</span> <span m="1226480">sense?</span> <span m="1226770">It's</span> <span m="1227060">pretty</span> <span m="1227510">straightforward.</span> <span m="1229480">OK,</span> <span m="1230350">so</span> <span m="1231000">this</span> <span m="1231300">is,</span> <span m="1231480">basically,</span> <span m="1232670">what</span> <span m="1232870">an</span> <span m="1232970">origin</span> <span m="1233510">is.</span> <span m="1233970">Loosely</span> <span m="1234500">speaking,</span> <span m="1234930">you can</span> <span m="1235170">think</span> <span m="1235390">of</span> <span m="1235490">an</span> <span m="1235690">origin</span> <span m="1236760">as</span> <span m="1237400">a UID</span> <span m="1238660">in</span> <span m="1238810">Unix</span> <span m="1239630">with</span> <span m="1239790">the</span> <span m="1239870">frame</span> <span m="1240740">being</span> <span m="1240980">loosely</span> <span m="1241410">considered</span> <span m="1242060">as,</span> <span m="1242410">like,</span> <span m="1242520">a</span> <span m="1242590">process.</span> </p>
<p><span m="1243950">So</span> <span m="1245890">there</span> <span m="1246130">are</span> <span m="1246170">four</span> <span m="1246480">basic</span> <span m="1246840">ideas</span> <span m="1250420">behind</span> <span m="1252000">the</span> <span m="1252110">browser's</span> <span m="1253410">implementation</span> <span m="1254470">of</span> <span m="1254580">the</span> <span m="1254660">same</span> <span m="1254890">origin</span> <span m="1255180">policy.</span> <span m="1256100">So</span> <span m="1256810">first</span> <span m="1257320">idea</span> <span m="1258090">is</span> <span m="1260640">each</span> <span m="1260890">origin</span> <span m="1264770">has</span> <span m="1267200">client</span> <span m="1267640">side</span> <span m="1267900">resources.</span> <span m="1274180">So</span> <span m="1274350">what</span> <span m="1274550">are</span> <span m="1274630">examples</span> <span m="1275490">of</span> <span m="1275650">those</span> <span m="1275880">resources?</span> <span m="1277590">Things</span> <span m="1277950">like</span> <span m="1279170">cookies.</span> </p>
<p><span m="1281560">Now</span> <span m="1282000">you</span> <span m="1282630">can</span> <span m="1282760">think</span> <span m="1282920">of</span> <span m="1283010">cookies</span> <span m="1283420">as</span> <span m="1283630">a</span> <span m="1283900">very</span> <span m="1284180">simple</span> <span m="1284640">way</span> <span m="1285170">to</span> <span m="1285320">implement</span> <span m="1285810">state</span> <span m="1286680">in</span> <span m="1286870">a</span> <span m="1286960">stateless</span> <span m="1287680">protocol</span> <span m="1288140">like</span> <span m="1288280">HTTP.</span> <span m="1289560">Basically,</span> <span m="1289830">a</span> <span m="1289980">cookie</span> <span m="1290250">is</span> <span m="1290320">like</span> <span m="1290440">a</span> <span m="1290510">tiny</span> <span m="1290870">file</span> <span m="1291570">that's</span> <span m="1291740">associated</span> <span m="1292820">with</span> <span m="1293130">each</span> <span m="1293360">origin.</span> <span m="1293850">And we'll</span> <span m="1293990">talk</span> <span m="1294220">about</span> <span m="1294400">the</span> <span m="1294470">specifics</span> <span m="1294840">of</span> <span m="1294940">this</span> <span m="1295100">in</span> <span m="1295180">a</span> <span m="1295230">bit.</span> </p>
<p><span m="1295780">But the</span> <span m="1295930">basic</span> <span m="1296250">idea</span> <span m="1296460">is</span> <span m="1296550">that</span> <span m="1296620">when</span> <span m="1296730">the</span> <span m="1296810">browser</span> <span m="1297390">sends</span> <span m="1297620">a</span> <span m="1297670">request</span> <span m="1298100">to a</span> <span m="1298140">particular</span> <span m="1299030">website,</span> <span m="1299305">it</span> <span m="1299580">includes</span> <span m="1300270">any</span> <span m="1300490">cookies</span> <span m="1300960">that</span> <span m="1301030">the</span> <span m="1301120">client</span> <span m="1301480">has</span> <span m="1302230">for</span> <span m="1302420">that</span> <span m="1302620">website.</span> <span m="1303320">And</span> <span m="1303570">you</span> <span m="1305340">can use</span> <span m="1305510">these</span> <span m="1305680">cookies</span> <span m="1305880">for</span> <span m="1306000">things</span> <span m="1306230">like</span> <span m="1306320">implementing</span> <span m="1307380">password</span> <span m="1307950">remembering.</span> <span m="1308385">Maybe</span> <span m="1308820">if</span> <span m="1309010">you were</span> <span m="1309130">going</span> <span m="1309320">to an ecommerce</span> <span m="1310110">site,</span> <span m="1310480">you</span> <span m="1310580">can</span> <span m="1310680">remember</span> <span m="1310940">stuff</span> <span m="1311170">about</span> <span m="1311680">a</span> <span m="1311730">user's</span> <span m="1313320">shopping</span> <span m="1313730">cart in</span> <span m="1314140">these</span> <span m="1314330">cookies,</span> <span m="1314670">so</span> <span m="1314910">on</span> <span m="1315010">and</span> <span m="1315060">so</span> <span m="1315210">forth.</span> </p>
<p><span m="1315960">So</span> <span m="1316880">cookies</span> <span m="1317240">are</span> <span m="1317300">one</span> <span m="1317700">thing that</span> <span m="1317750">each</span> <span m="1319320">origin</span> <span m="1319530">can</span> <span m="1319660">be</span> <span m="1319760">associated</span> <span m="1320260">with.</span> <span m="1321070">Also,</span> <span m="1321580">you</span> <span m="1321730">can</span> <span m="1321910">think</span> <span m="1322200">of</span> <span m="1323190">DOM</span> <span m="1323600">storage</span> <span m="1324180">as</span> <span m="1324320">another</span> <span m="1324560">one</span> <span m="1324710">of</span> <span m="1324780">these</span> <span m="1324970">resources.</span> <span m="1326170">This</span> <span m="1326240">is</span> <span m="1326380">a</span> <span m="1326450">fairly</span> <span m="1327280">new</span> <span m="1327550">interface.</span> <span m="1328350">But</span> <span m="1328550">think</span> <span m="1328760">of</span> <span m="1328870">DOM</span> <span m="1329140">storage</span> <span m="1329520">as</span> <span m="1329620">just</span> <span m="1329860">a</span> <span m="1330250">key</span> <span m="1330460">value</span> <span m="1330750">store.</span> </p>
<p><span m="1331820">So</span> <span m="1332370">DOM</span> <span m="1332620">storage</span> <span m="1333030">allows</span> <span m="1333590">an</span> <span m="1333680">origin</span> <span m="1334030">to</span> <span m="1334100">say,</span> <span m="1334600">for</span> <span m="1334720">this</span> <span m="1334900">given</span> <span m="1335170">key,</span> <span m="1335870">which</span> <span m="1336130">is</span> <span m="1336230">a</span> <span m="1336290">string,</span> <span m="1336830">let</span> <span m="1336980">me</span> <span m="1337080">associate it</span> <span m="1337510">with</span> <span m="1337630">this</span> <span m="1337790">given</span> <span m="1338020">value,</span> <span m="1338670">which</span> <span m="1338720">is</span> <span m="1338820">also</span> <span m="1339130">a</span> <span m="1339190">string.</span> <span m="1341650">Another</span> <span m="1342100">thing</span> <span m="1342580">that</span> <span m="1345140">is</span> <span m="1345310">social</span> <span m="1345640">with</span> <span m="1345710">an</span> <span m="1345840">origin</span> <span m="1346390">is</span> <span m="1346870">a</span> <span m="1347480">JavaScript</span> <span m="1348150">name space.</span> <span m="1352810">So</span> <span m="1352870">that</span> <span m="1353030">JavaScript</span> <span m="1353550">name space</span> <span m="1354160">defines</span> <span m="1354840">what</span> <span m="1355230">functions</span> <span m="1355485">and</span> <span m="1355740">what</span> <span m="1355960">interfaces</span> <span m="1356530">are</span> <span m="1356670">available</span> <span m="1357810">to</span> <span m="1357880">the</span> <span m="1358050">origin.</span> </p>
<p><span m="1358950">Some</span> <span m="1359110">of</span> <span m="1359170">those</span> <span m="1359350">interfaces</span> <span m="1359840">are</span> <span m="1359920">built</span> <span m="1360170">in.</span> <span m="1360470">Like,</span> <span m="1360690">let's say,</span> <span m="1360800">the</span> <span m="1360890">string</span> <span m="1361450">prototype</span> <span m="1361920">and</span> <span m="1362020">stuff</span> <span m="1362240">like</span> <span m="1362400">that.</span> <span m="1362890">And</span> <span m="1363040">then,</span> <span m="1363160">an</span> <span m="1363270">application</span> <span m="1363810">might</span> <span m="1363940">actually</span> <span m="1364220">fill</span> <span m="1364590">the</span> <span m="1364800">JavaScript</span> <span m="1365140">namespace</span> <span m="1365410">with</span> <span m="1365530">some</span> <span m="1365670">other</span> <span m="1365860">content.</span> <span m="1367620">There's</span> <span m="1367810">also</span> <span m="1368540">this</span> <span m="1368810">thing</span> <span m="1369110">called</span> <span m="1370010">the</span> <span m="1370160">DOM</span> <span m="1370520">tree.</span> </p>
<p><span m="1373180">So</span> <span m="1373430">DOM</span> <span m="1374000">is</span> <span m="1374380">short</span> <span m="1374730">for</span> <span m="1374910">Document</span> <span m="1375520">Object</span> <span m="1375870">Model.</span> <span m="1376580">And</span> <span m="1376830">the</span> <span m="1376940">Dom</span> <span m="1377380">tree</span> <span m="1377730">is,</span> <span m="1377850">essentially,</span> <span m="1378410">a</span> <span m="1378500">JavaScript</span> <span m="1379210">reflection</span> <span m="1380350">of</span> <span m="1380580">the</span> <span m="1380770">HTML</span> <span m="1381490">in</span> <span m="1381600">a</span> <span m="1381660">page.</span> <span m="1383090">So</span> <span m="1383300">you</span> <span m="1383430">can</span> <span m="1383540">imagine</span> <span m="1384080">that</span> <span m="1385080">the</span> <span m="1386360">DOM</span> <span m="1386690">tree</span> <span m="1387410">has</span> <span m="1388110">a</span> <span m="1388430">node</span> <span m="1389040">for</span> <span m="1390530">the</span> <span m="1390660">topmost</span> <span m="1391310">HTML5</span> <span m="1391970">node</span> <span m="1392510">in</span> <span m="1392690">the</span> <span m="1393800">HTML.</span> <span m="1394690">And then,</span> <span m="1394880">it's</span> <span m="1395010">going</span> <span m="1395120">to</span> <span m="1395220">have</span> <span m="1396120">a</span> <span m="1396250">node</span> <span m="1396750">for</span> <span m="1397670">the</span> <span m="1397860">head</span> <span m="1398220">tag.</span> </p>
<p><span m="1400820">Then,</span> <span m="1401070">it's</span> <span m="1401220">going</span> <span m="1401340">to</span> <span m="1401410">have</span> <span m="1401700">a</span> <span m="1401750">node</span> <span m="1402210">for</span> <span m="1403490">the</span> <span m="1403560">body</span> <span m="1403970">tag.</span> <span m="1407176">All</span> <span m="1407630">right,</span> <span m="1408030">so</span> <span m="1408320">on</span> <span m="1408420">and</span> <span m="1408480">so</span> <span m="1408640">forth.</span> <span m="1409200">So</span> <span m="1409260">the</span> <span m="1409350">way</span> <span m="1409540">that</span> <span m="1409680">a</span> <span m="1409740">lot</span> <span m="1410020">of</span> <span m="1410250">dynamic</span> <span m="1411570">web</span> <span m="1411900">pages</span> <span m="1412270">are</span> <span m="1412370">made</span> <span m="1412630">dynamic</span> <span m="1413550">is</span> <span m="1414120">the</span> <span m="1414360">JavaScript</span> <span m="1414980">code</span> <span m="1415470">can</span> <span m="1415680">access</span> <span m="1416230">this</span> <span m="1416440">data</span> <span m="1416670">structure in</span> <span m="1417030">JavaScript</span> <span m="1417630">that</span> <span m="1417770">mirrors the</span> <span m="1418150">HTML</span> <span m="1418600">content.</span> </p>
<p><span m="1419290">So</span> <span m="1419310">you</span> <span m="1419370">can</span> <span m="1419450">imagine an</span> <span m="1419920">animation</span> <span m="1420480">takes</span> <span m="1420750">place</span> <span m="1421040">by</span> <span m="1421450">changing</span> <span m="1421930">some</span> <span m="1422130">of</span> <span m="1422230">these</span> <span m="1422440">nodes</span> <span m="1422760">down</span> <span m="1423000">here</span> <span m="1423280">to</span> <span m="1423410">implement</span> <span m="1424250">different</span> <span m="1424700">organizations</span> <span m="1425450">of</span> <span m="1425510">various</span> <span m="1425850">tabs.</span> <span m="1426670">So</span> <span m="1426790">that's</span> <span m="1426900">what</span> <span m="1427050">the</span> <span m="1427140">DOM</span> <span m="1427410">tree</span> <span m="1427640">is.</span> <span m="1429290">There's</span> <span m="1429580">also</span> <span m="1431660">a</span> <span m="1431680">visual</span> <span m="1432140">display</span> <span m="1432700">area.</span> <span m="1437398">Although,</span> <span m="1437900">we'll</span> <span m="1438100">see</span> <span m="1438510">that</span> <span m="1438660">the</span> <span m="1438740">visual</span> <span m="1439060">display</span> <span m="1439510">area</span> <span m="1439840">actually</span> <span m="1440190">interacts</span> <span m="1440510">very</span> <span m="1440700">strangely</span> <span m="1441090">with</span> <span m="1441200">the</span> <span m="1441300">same</span> <span m="1441560">origin</span> <span m="1441860">policy.</span> <span m="1442910">So</span> <span m="1443230">on</span> <span m="1443330">and</span> <span m="1443370">so</span> <span m="1443540">forth.</span> </p>
<p><span m="1444170">So</span> <span m="1444600">at</span> <span m="1444890">high</span> <span m="1445040">level,</span> <span m="1445450">each</span> <span m="1445750">origin</span> <span m="1446430">has</span> <span m="1446640">access</span> <span m="1446950">to</span> <span m="1447050">some</span> <span m="1447320">set</span> <span m="1447680">of</span> <span m="1447890">client</span> <span m="1448200">side</span> <span m="1448380">resources</span> <span m="1448890">of</span> <span m="1449520">these</span> <span m="1449710">types.</span> <span m="1450160">Doe</span> <span m="1450530">that</span> <span m="1450640">make</span> <span m="1450810">sense?</span> <span m="1453290">And</span> <span m="1453430">then,</span> <span m="1454400">the</span> <span m="1454590">second</span> <span m="1455060">big</span> <span m="1455290">idea</span> <span m="1456150">is</span> <span m="1456400">that</span> <span m="1457460">each</span> <span m="1457760">frame</span> <span m="1461920">gets</span> <span m="1462300">the</span> <span m="1462390">origin</span> <span m="1467350">of</span> <span m="1467590">its</span> <span m="1467780">URL.</span> <span m="1474060">So</span> <span m="1474140">as</span> <span m="1474240">I</span> <span m="1474280">mentioned</span> <span m="1474580">before,</span> <span m="1475180">a</span> <span m="1475300">frame</span> <span m="1475790">is,</span> <span m="1475930">roughly,</span> <span m="1476470">analogous</span> <span m="1477300">to</span> <span m="1477640">a</span> <span m="1477890">process</span> <span m="1479110">in</span> <span m="1479270">Unix.</span> <span m="1479850">It's,</span> <span m="1480030">kind</span> <span m="1480210">of,</span> <span m="1480340">like</span> <span m="1480590">a</span> <span m="1480660">name space</span> <span m="1481380">that</span> <span m="1481780">aggregates</span> <span m="1482330">a</span> <span m="1482370">bunch</span> <span m="1482580">of</span> <span m="1482650">other</span> <span m="1482860">different</span> <span m="1483090">resources.</span> </p>
<p><span m="1485700">So</span> <span m="1486410">third</span> <span m="1486800">idea</span> <span m="1489910">is</span> <span m="1490350">that</span> <span m="1490890">scripts,</span> <span m="1493290">so</span> <span m="1493430">JavaScript</span> <span m="1493970">code,</span> <span m="1495380">execute</span> <span m="1499020">with</span> <span m="1499880">the</span> <span m="1500140">authority</span> <span m="1506696">of</span> <span m="1508640">it's</span> <span m="1508860">frame's</span> <span m="1509310">origin.</span> <span m="1518510">OK,</span> <span m="1518840">so</span> <span m="1518970">what</span> <span m="1519110">that</span> <span m="1519300">means</span> <span m="1519560">is</span> <span m="1519690">that</span> <span m="1520190">foo.com</span> <span m="1520800">imports</span> <span m="1522210">a</span> <span m="1522500">JavaScript</span> <span m="1522990">file</span> <span m="1523530">from</span> <span m="1523670">bar.com.</span> <span m="1524130">Well,</span> <span m="1525220">that</span> <span m="1525460">JavaScript</span> <span m="1525870">file is</span> <span m="1526100">going</span> <span m="1526200">to</span> <span m="1526250">be</span> <span m="1526410">able</span> <span m="1526620">to</span> <span m="1526900">act</span> <span m="1527220">with</span> <span m="1527430">the</span> <span m="1527600">authority</span> <span m="1528820">of</span> <span m="1529310">foo.com.</span> </p>
<p><span m="1530780">So</span> <span m="1531310">loosely</span> <span m="1531810">speaking,</span> <span m="1532600">this</span> <span m="1532810">is,</span> <span m="1532920">sort</span> <span m="1533170">of,</span> <span m="1533360">similar</span> <span m="1533840">to</span> <span m="1534125">if</span> <span m="1534410">you</span> <span m="1535010">were</span> <span m="1535200">in</span> <span m="1535280">the</span> <span m="1535360">Unix</span> <span m="1535660">world</span> <span m="1536000">to</span> <span m="1536070">run</span> <span m="1536220">a</span> <span m="1536270">binary</span> <span m="1537120">that,</span> <span m="1537290">sort</span> <span m="1537440">of,</span> <span m="1537520">belonged</span> <span m="1537800">in</span> <span m="1537890">someone</span> <span m="1538150">else's</span> <span m="1538400">home</span> <span m="1538610">directory.</span> <span m="1539380">That</span> <span m="1539580">thing</span> <span m="1539770">would</span> <span m="1539990">sort of,</span> <span m="1540110">execute,</span> <span m="1540570">with</span> <span m="1540730">your</span> <span m="1541330">privileged</span> <span m="1541760">there.</span> </p>
<p><span m="1543650">And</span> <span m="1544270">the</span> <span m="1544370">fourth</span> <span m="1544750">thing</span> <span m="1547020">is</span> <span m="1548300">there's</span> <span m="1548550">passive</span> <span m="1549120">content.</span> <span m="1550020">So</span> <span m="1550360">by</span> <span m="1550620">passive</span> <span m="1551040">content</span> <span m="1552130">I</span> <span m="1552260">mean</span> <span m="1552520">things</span> <span m="1552950">like</span> <span m="1553440">that</span> <span m="1555570">images,</span> <span m="1555980">for</span> <span m="1556150">example.</span> <span m="1557490">Or</span> <span m="1558630">CSS</span> <span m="1559280">file</span> <span m="1559590">or</span> <span m="1559670">things</span> <span m="1559890">like</span> <span m="1560060">that.</span> <span m="1560480">These</span> <span m="1560600">are</span> <span m="1560690">things,</span> <span m="1561090">which</span> <span m="1561270">we</span> <span m="1561370">don't</span> <span m="1561590">think</span> <span m="1561800">of</span> <span m="1561940">as</span> <span m="1562050">having</span> <span m="1562530">executable</span> <span m="1563080">code.</span> </p>
<p><span m="1563750">So</span> <span m="1563910">passive</span> <span m="1564360">content</span> <span m="1565870">gets</span> <span m="1566690">zero</span> <span m="1567120">authority</span> <span m="1568110">from</span> <span m="1568260">the</span> <span m="1568330">browser.</span> <span m="1576430">So</span> <span m="1576820">that,</span> <span m="1577150">kind</span> <span m="1577560">of,</span> <span m="1577620">makes</span> <span m="1578040">sense.</span> <span m="1579070">We'll</span> <span m="1579350">see</span> <span m="1579710">why</span> <span m="1579890">this</span> <span m="1580260">fourth</span> <span m="1580590">thing</span> <span m="1580900">is a</span> <span m="1580930">little</span> <span m="1581100">bit</span> <span m="1581270">subtle in a</span> <span m="1581680">second.</span> <span m="1582280">So</span> <span m="1582670">going</span> <span m="1582900">back</span> <span m="1583090">to</span> <span m="1583180">our</span> <span m="1583330">example</span> <span m="1583760">here.</span> <span m="1585080">So</span> <span m="1585200">we</span> <span m="1585360">see,</span> <span m="1585680">for</span> <span m="1585820">example,</span> <span m="1586720">that</span> <span m="1586980">the</span> <span m="1587060">Google</span> <span m="1587370">Analytics</span> <span m="1587830">script</span> <span m="1588510">and</span> <span m="1588820">the</span> <span m="1588890">jQuery</span> <span m="1589410">script</span> <span m="1590200">can</span> <span m="1590460">access</span> <span m="1590910">all</span> <span m="1591090">kinds</span> <span m="1591480">of</span> <span m="1592080">stuff</span> <span m="1592425">in</span> <span m="1592770">foo.com.</span> </p>
<p><span m="1593630">So</span> <span m="1593730">for</span> <span m="1593830">example,</span> <span m="1594080">they</span> <span m="1594190">can</span> <span m="1594340">read</span> <span m="1594540">and</span> <span m="1594630">write</span> <span m="1595510">cookies.</span> <span m="1595970">They</span> <span m="1596080">can</span> <span m="1596200">do</span> <span m="1596330">things</span> <span m="1596570">like</span> <span m="1596730">attach</span> <span m="1597390">event</span> <span m="1597720">handlers</span> <span m="1598160">to</span> <span m="1598260">buttons</span> <span m="1598670">here.</span> <span m="1599440">So</span> <span m="1599710">on</span> <span m="1599810">and</span> <span m="1599860">so</span> <span m="1600040">forth.</span> <span m="1601500">If</span> <span m="1601580">we</span> <span m="1601700">look</span> <span m="1602030">at</span> <span m="1602760">the</span> <span m="1603160">Facebook</span> <span m="1603730">frame</span> <span m="1604090">and</span> <span m="1604160">its</span> <span m="1604300">relationship</span> <span m="1604900">to</span> <span m="1604980">the</span> <span m="1605080">larger</span> <span m="1605375">foo.com</span> <span m="1605670">frame,</span> <span m="1606980">then</span> <span m="1606990">we</span> <span m="1607090">see that</span> <span m="1607300">they're</span> <span m="1607510">from</span> <span m="1607680">different</span> <span m="1608010">origins</span> <span m="1609440">because</span> <span m="1609750">they</span> <span m="1609860">have</span> <span m="1610430">different</span> <span m="1611030">schemes</span> <span m="1611470">here.</span> <span m="1611830">They</span> <span m="1611910">have</span> <span m="1612010">different</span> <span m="1612780">host</span> <span m="1613090">names.</span> <span m="1614660">Different</span> <span m="1614910">ports.</span> </p>
<p><span m="1615560">So</span> <span m="1615670">what</span> <span m="1615780">this</span> <span m="1615940">means</span> <span m="1616220">is</span> <span m="1616310">that</span> <span m="1616500">they</span> <span m="1616670">are,</span> <span m="1617390">to a</span> <span m="1617580">first</span> <span m="1617910">approximation,</span> <span m="1618630">isolated.</span> <span m="1620010">Now</span> <span m="1620600">they</span> <span m="1620830">can</span> <span m="1621350">communicate</span> <span m="1622530">if</span> <span m="1622690">they</span> <span m="1622840">both</span> <span m="1623290">opt</span> <span m="1623630">into</span> <span m="1624000">it</span> <span m="1624400">using</span> <span m="1625260">this</span> <span m="1625440">interface</span> <span m="1626490">called</span> <span m="1627410">postMessage.</span> <span m="1632540">So</span> <span m="1632830">postMessage</span> <span m="1634315">allows</span> <span m="1635880">two</span> <span m="1636160">different</span> <span m="1636580">frames</span> <span m="1637320">to</span> <span m="1637520">exchange</span> <span m="1638170">asynchronous</span> <span m="1638940">immutable</span> <span m="1640040">messages</span> <span m="1640960">with</span> <span m="1641060">each</span> <span m="1641230">other.</span> </p>
<p><span m="1641750">So</span> <span m="1642080">think</span> <span m="1642370">of</span> <span m="1642480">this</span> <span m="1642810">facility</span> <span m="1643300">as</span> <span m="1643400">allowing</span> <span m="1644320">Facebook</span> <span m="1645080">to</span> <span m="1645520">try</span> <span m="1645750">to</span> <span m="1645860">send</span> <span m="1646290">a</span> <span m="1646610">string.</span> <span m="1647310">Not</span> <span m="1647480">a</span> <span m="1647520">reference,</span> <span m="1647840">a</span> <span m="1647900">string</span> <span m="1648700">up</span> <span m="1648860">to</span> <span m="1649010">the enclosing</span> <span m="1649660">foo.com</span> <span m="1649990">frame.</span> <span m="1650860">Now</span> <span m="1651010">note</span> <span m="1651320">that</span> <span m="1651540">if</span> <span m="1652530">foo.com</span> <span m="1653070">doesn't</span> <span m="1653280">want</span> <span m="1653420">to</span> <span m="1653460">receive</span> <span m="1653750">those</span> <span m="1653910">messages,</span> <span m="1654420">it</span> <span m="1654530">doesn't</span> <span m="1654710">have</span> <span m="1654980">to.</span> <span m="1655430">So</span> <span m="1655630">this</span> <span m="1655840">has</span> <span m="1656100">to be</span> <span m="1656290">opt</span> <span m="1656640">in</span> <span m="1657290">from</span> <span m="1657420">both</span> <span m="1657640">sides</span> <span m="1657940">to</span> <span m="1657980">get</span> <span m="1658120">this</span> <span m="1658280">thing</span> <span m="1658440">to</span> <span m="1658540">work.</span> <span m="1661220">So</span> <span m="1661550">note</span> <span m="1661900">that</span> <span m="1662520">the</span> <span m="1662670">JavaScript</span> <span m="1663280">code</span> <span m="1663620">here</span> <span m="1664250">in</span> <span m="1664350">the</span> <span m="1664460">Facebook</span> <span m="1664970">frame</span> <span m="1665880">cannot</span> <span m="1666440">issue</span> <span m="1667150">an</span> <span m="1667280">XML</span> <span m="1667860">HTTP</span> <span m="1668170">request</span> <span m="1669120">to</span> <span m="1669970">the</span> <span m="1670150">foo.com</span> <span m="1670440">server.</span> <span m="1671860">That's</span> <span m="1672020">once</span> <span m="1672220">again</span> <span m="1672370">because</span> <span m="1672910">network</span> <span m="1673380">destinations</span> <span m="1674020">also</span> <span m="1674460">have</span> <span m="1674800">these</span> <span m="1674970">origins</span> <span m="1675380">that</span> <span m="1675470">are</span> <span m="1675540">associated</span> <span m="1675980">with</span> <span m="1676120">them.</span> </p>
<p><span m="1676710">So</span> <span m="1676820">because</span> <span m="1677920">Facebook.com</span> <span m="1678250">does</span> <span m="1679200">not</span> <span m="1679310">have</span> <span m="1679410">the</span> <span m="1679480">same</span> <span m="1679690">origin</span> <span m="1679850">as</span> <span m="1680110">foo.com</span> <span m="1680220">it</span> <span m="1680720">can't</span> <span m="1681220">asynchronously</span> <span m="1681950">fetch</span> <span m="1682230">stuff</span> <span m="1682540">from</span> <span m="1682850">it</span> <span m="1683230">via</span> <span m="1683540">HTML</span> <span m="1683820">request.</span> <span m="1685610">So</span> <span m="1687350">the</span> <span m="1687430">last</span> <span m="1687700">thing</span> <span m="1687770">we</span> <span m="1687860">can</span> <span m="1687970">look</span> <span m="1688190">at</span> <span m="1688290">we can</span> <span m="1688450">say,</span> <span m="1688700">OK,</span> <span m="1688770">we</span> <span m="1688880">got</span> <span m="1689000">an</span> <span m="1689140">image</span> <span m="1689440">up</span> <span m="1689590">here</span> <span m="1690030">from</span> <span m="1690160">ads.com.</span> <span m="1690480">This</span> <span m="1691450">is</span> <span m="1691590">rule</span> <span m="1691810">number</span> <span m="1692040">four</span> <span m="1692340">over</span> <span m="1692470">there.</span> </p>
<p><span m="1692870">So</span> <span m="1692910">it</span> <span m="1692990">seems</span> <span m="1693180">pretty</span> <span m="1693370">straightforward.</span> <span m="1693760">This</span> <span m="1694150">is</span> <span m="1694280">an</span> <span m="1694460">image.</span> <span m="1694690">It</span> <span m="1694750">has</span> <span m="1694920">no</span> <span m="1695000">executable</span> <span m="1695510">code.</span> <span m="1695890">So</span> <span m="1695940">clearly,</span> <span m="1696600">the</span> <span m="1696690">browser's</span> <span m="1696980">going to</span> <span m="1697210">give  it no</span> <span m="1697530">authority.</span> <span m="1698350">Now</span> <span m="1698570">that</span> <span m="1698770">seems</span> <span m="1699110">kind</span> <span m="1699300">of</span> <span m="1699410">like</span> <span m="1699660">a</span> <span m="1699750">dumb</span> <span m="1700060">thing.</span> <span m="1700320">Like,</span> <span m="1700780">why are you even</span> <span m="1700900">talking</span> <span m="1701310">about</span> <span m="1701840">images</span> <span m="1702260">having</span> <span m="1702550">authority</span> <span m="1702880">or</span> <span m="1702940">not</span> <span m="1703160">having</span> <span m="1703430">authority?</span> <span m="1703800">It seems</span> <span m="1704100">obvious that</span> <span m="1704560">images</span> <span m="1704840">shouldn't</span> <span m="1705020">be</span> <span m="1705120">able</span> <span m="1705280">to</span> <span m="1705340">do</span> <span m="1705510">stuff.</span> </p>
<p><span m="1706250">Well</span> <span m="1707070">it's</span> <span m="1707220">a</span> <span m="1707290">security</span> <span m="1707750">class.</span> <span m="1708530">So</span> <span m="1708670">clearly,</span> <span m="1709420">there</span> <span m="1709640">is</span> <span m="1709740">mischief</span> <span m="1710200">that</span> <span m="1710330">hides</span> <span m="1710770">in</span> <span m="1711270">statement</span> <span m="1711750">number</span> <span m="1712005">four up</span> <span m="1712260">there.</span> <span m="1712970">So</span> <span m="1713850">what</span> <span m="1714090">happens</span> <span m="1714860">if</span> <span m="1715060">the</span> <span m="1715190">browser</span> <span m="1716050">incorrectly</span> <span m="1717450">parses</span> <span m="1718530">an</span> <span m="1718680">object</span> <span m="1719600">and</span> <span m="1719800">misattributes</span> <span m="1721030">it's</span> <span m="1721260">type?</span> </p>
<p><span m="1722770">So</span> <span m="1723040">you</span> <span m="1723140">can</span> <span m="1723250">actually</span> <span m="1723530">get into</span> <span m="1723740">security</span> <span m="1724230">problems there.</span> <span m="1724630">And</span> <span m="1724830">this</span> <span m="1724970">was</span> <span m="1725160">actually</span> <span m="1725550">a</span> <span m="1725620">real</span> <span m="1725820">security</span> <span m="1726270">problem.</span> <span m="1726660">So</span> <span m="1727080">there's</span> <span m="1727250">this</span> <span m="1727370">thing</span> <span m="1727500">called</span> <span m="1727690">the</span> <span m="1727720">MIME</span> <span m="1728100">sniffing</span> <span m="1728440">attack.</span> <span m="1729340">So</span> <span m="1729920">the</span> <span m="1730030">MIME</span> <span m="1730370">type--</span> <span m="1730650">I mean,</span> <span m="1730760">you've</span> <span m="1730910">probably</span> <span m="1731180">seen</span> <span m="1731680">these before.</span> <span m="1732000">You knows it's</span> <span m="1732430">Something</span> <span m="1732830">like</span> <span m="1734050">text</span> <span m="1734630">dot</span> <span m="1735490">HTML</span> <span m="1736176">or</span> <span m="1736770">image.JPEG</span> <span m="1737750">Things</span> <span m="1737980">like</span> <span m="1738140">that.</span> <span m="1738360">This was</span> <span m="1738550">like</span> <span m="1738660">a</span> <span m="1738710">MIME</span> <span m="1738930">type.</span> <span m="1740240">So</span> <span m="1740780">old</span> <span m="1741060">versions</span> <span m="1741610">of</span> <span m="1741810">i.e</span> <span m="1742470">used</span> <span m="1742730">to</span> <span m="1742820">do</span> <span m="1743810">something</span> <span m="1744170">that</span> <span m="1744290">they</span> <span m="1744440">thought</span> <span m="1744690">was</span> <span m="1744800">going</span> <span m="1744930">to</span> <span m="1744970">be</span> <span m="1745080">helpful</span> <span m="1745460">for you.</span> </p>
<p><span m="1746470">So</span> <span m="1746600">sometimes</span> <span m="1747110">what</span> <span m="1747200">web</span> <span m="1747410">servers</span> <span m="1747770">will</span> <span m="1747910">do</span> <span m="1748410">is</span> <span m="1748550">they</span> <span m="1748710">will</span> <span m="1749340">misattribute</span> <span m="1750800">the</span> <span m="1751170">file</span> <span m="1751580">extension</span> <span m="1752350">of</span> <span m="1752500">an</span> <span m="1752580">object.</span> <span m="1753640">So</span> <span m="1753750">you</span> <span m="1753800">can</span> <span m="1753920">imagine</span> <span m="1754360">that a</span> <span m="1754610">web</span> <span m="1754900">server</span> <span m="1755140">that's</span> <span m="1755310">been</span> <span m="1755440">configured</span> <span m="1755870">incorrectly</span> <span m="1756900">might</span> <span m="1757190">attach</span> <span m="1757890">a dot</span> <span m="1758030">HTML</span> <span m="1759050">suffix</span> <span m="1759890">to</span> <span m="1760040">something</span> <span m="1760270">that's</span> <span m="1760430">really</span> <span m="1760690">an</span> <span m="1760760">image.</span> <span m="1761830">Or</span> <span m="1761990">it</span> <span m="1762080">might</span> <span m="1763130">attach</span> <span m="1763630">a dot</span> <span m="1763890">JPEG</span> <span m="1764150">suffix</span> <span m="1764470">to</span> <span m="1764600">something</span> <span m="1764890">that's</span> <span m="1765170">really</span> <span m="1765560">HTML.</span> </p>
<p><span m="1766910">So</span> <span m="1767410">what</span> <span m="1767530">IE</span> <span m="1767860">would</span> <span m="1768010">do</span> <span m="1768530">back</span> <span m="1768730">in</span> <span m="1768790">the</span> <span m="1768860">olden</span> <span m="1769190">days</span> <span m="1769410">is</span> <span m="1769510">try</span> <span m="1769650">to</span> <span m="1769720">help</span> <span m="1769990">you</span> <span m="1770130">out.</span> <span m="1771040">So</span> <span m="1771270">IE</span> <span m="1771580">would</span> <span m="1771730">go</span> <span m="1771980">out.</span> <span m="1772250">It</span> <span m="1772520">would</span> <span m="1772570">go</span> <span m="1772740">fetch</span> <span m="1773130">this</span> <span m="1773330">resource.</span> <span m="1774270">And it</span> <span m="1774430">would</span> <span m="1774590">say,</span> <span m="1774850">OK,</span> <span m="1775490">this</span> <span m="1775720">resource</span> <span m="1777020">claims</span> <span m="1777470">to</span> <span m="1777570">be</span> <span m="1778140">of</span> <span m="1778320">some</span> <span m="1778580">type,</span> <span m="1778860">according</span> <span m="1779180">to</span> <span m="1779280">its</span> <span m="1779410">file name</span> <span m="1779840">extension.</span> <span m="1780570">But then it</span> <span m="1780800">would</span> <span m="1780950">actually</span> <span m="1781230">look</span> <span m="1781640">at</span> <span m="1781760">the</span> <span m="1781840">first</span> <span m="1782180">256</span> <span m="1782980">bytes</span> <span m="1783520">of</span> <span m="1783830">what</span> <span m="1784070">was</span> <span m="1784260">in</span> <span m="1784460">that</span> <span m="1785060">object.</span> </p>
<p><span m="1785620">And</span> <span m="1786100">if</span> <span m="1786290">it</span> <span m="1786450">found</span> <span m="1786790">certain</span> <span m="1787100">magic</span> <span m="1787530">values</span> <span m="1787910">in</span> <span m="1788040">there</span> <span m="1788460">that</span> <span m="1788610">indicated</span> <span m="1788925">that</span> <span m="1789240">there</span> <span m="1789340">was</span> <span m="1789450">a</span> <span m="1789510">different</span> <span m="1789900">type</span> <span m="1790190">for</span> <span m="1790250">that</span> <span m="1790380">object,</span> <span m="1790735">it would</span> <span m="1791120">just</span> <span m="1791290">say,</span> <span m="1791780">hey,</span> <span m="1792580">I</span> <span m="1792760">found</span> <span m="1793200">something</span> <span m="1793910">cool</span> <span m="1794210">here.</span> <span m="1794440">The</span> <span m="1794610">web</span> <span m="1794850">server</span> <span m="1795350">misidentified</span> <span m="1795890">the</span> <span m="1795990">object.</span> <span m="1796630">Let</span> <span m="1796870">me</span> <span m="1796970">just</span> <span m="1797200">treat</span> <span m="1797530">the</span> <span m="1797640">object</span> <span m="1798390">like</span> <span m="1798740">it's</span> <span m="1798990">type</span> <span m="1799640">that</span> <span m="1799760">I</span> <span m="1799840">found in</span> <span m="1800200">these</span> <span m="1800350">first</span> <span m="1800590">256</span> <span m="1800690">bytes.</span> </p>
<p><span m="1801780">And</span> <span m="1801970">then,</span> <span m="1802100">everybody's</span> <span m="1802570">a</span> <span m="1802690">winner</span> <span m="1803300">because</span> <span m="1803480">I've</span> <span m="1803570">helped</span> <span m="1803780">the</span> <span m="1803860">web</span> <span m="1804050">server</span> <span m="1804330">developer</span> <span m="1804790">out</span> <span m="1805000">because</span> <span m="1805290">now</span> <span m="1805650">their</span> <span m="1806290">website's</span> <span m="1807800">going</span> <span m="1807890">to</span> <span m="1807960">render</span> <span m="1808210">properly.</span> <span m="1808720">And</span> <span m="1808850">the</span> <span m="1808970">user's</span> <span m="1809300">going to</span> <span m="1809460">like</span> <span m="1809650">this</span> <span m="1809770">because</span> <span m="1809890">they</span> <span m="1809970">get to</span> <span m="1810260">unlock</span> <span m="1810540">this</span> <span m="1810660">content</span> <span m="1811100">that</span> <span m="1811290">would</span> <span m="1811710">have been</span> <span m="1811820">garbage</span> <span m="1812160">before.</span> <span m="1812850">But</span> <span m="1812990">this</span> <span m="1813150">is</span> <span m="1813340">clearly</span> <span m="1813850">a</span> <span m="1814140">vulnerability</span> <span m="1815320">because</span> <span m="1816200">suppose</span> <span m="1816590">that a</span> <span m="1816980">page</span> <span m="1817550">includes</span> <span m="1818450">some</span> <span m="1818690">passive</span> <span m="1819160">content.</span> </p>
<p><span m="1820260">Like,</span> <span m="1820450">let's</span> <span m="1820700">say,</span> <span m="1821340">an</span> <span m="1821410">image</span> <span m="1822270">from</span> <span m="1822570">a</span> <span m="1822720">domain</span> <span m="1823220">that's</span> <span m="1823400">controlled</span> <span m="1823890">by</span> <span m="1824000">the</span> <span m="1824130">attacker.</span> <span m="1825340">Now</span> <span m="1825870">from</span> <span m="1826030">the</span> <span m="1826090">perspective</span> <span m="1826720">of</span> <span m="1826980">the</span> <span m="1827070">victim</span> <span m="1827430">page,</span> <span m="1827930">it's</span> <span m="1828080">saying,</span> <span m="1828750">even</span> <span m="1829090">if</span> <span m="1829180">this</span> <span m="1829350">attacker</span> <span m="1829840">site</span> <span m="1830280">is</span> <span m="1830820">evil,</span> <span m="1831580">it's</span> <span m="1831940">passive</span> <span m="1832030">content.</span> <span m="1832820">It</span> <span m="1832920">can't</span> <span m="1833230">do</span> <span m="1833460">anything.</span> <span m="1834200">Like,</span> <span m="1834350">at worst,</span> <span m="1834770">it</span> <span m="1834840">displays</span> <span m="1835410">an</span> <span m="1835480">unfortunate</span> <span m="1835960">image.</span> <span m="1836230">But</span> <span m="1836340">it</span> <span m="1836430">can't</span> <span m="1836670">actually</span> <span m="1836990">access</span> <span m="1837270">any</span> <span m="1837550">code</span> <span m="1838130">because</span> <span m="1838400">passive</span> <span m="1838970">content</span> <span m="1839030">gives</span> <span m="1839210">0</span> <span m="1839570">authority.</span> </p>
<p><span m="1840820">But</span> <span m="1840960">what</span> <span m="1841060">would</span> <span m="1841170">happen</span> <span m="1841550">is</span> <span m="1841650">that</span> <span m="1841880">IE</span> <span m="1843380">could</span> <span m="1843640">sniff</span> <span m="1844090">this</span> <span m="1844360">image.</span> <span m="1844790">The</span> <span m="1844890">first</span> <span m="1845110">256</span> <span m="1845640">bytes.</span> <span m="1846300">And</span> <span m="1846420">the</span> <span m="1846540">attacker</span> <span m="1847050">could</span> <span m="1847360">intentionally</span> <span m="1848230">put</span> <span m="1848560">HTML</span> <span m="1849100">and</span> <span m="1849190">JavaScript</span> <span m="1849750">in</span> <span m="1849870">there.</span> <span m="1851200">So</span> <span m="1851420">what would</span> <span m="1851550">happen</span> <span m="1852010">is</span> <span m="1852130">that the</span> <span m="1852210">victim</span> <span m="1852600">site</span> <span m="1852900">brings</span> <span m="1853220">in</span> <span m="1853350">what</span> <span m="1853490">it</span> <span m="1853630">thinks</span> <span m="1853850">is</span> <span m="1853970">an</span> <span m="1854060">image.</span> <span m="1854930">IE</span> <span m="1855440">coerces</span> <span m="1856140">it</span> <span m="1856590">into</span> <span m="1856890">HTML</span> <span m="1857215">and</span> <span m="1857540">JavaScript.</span> <span m="1858260">And</span> <span m="1858490">then,</span> <span m="1858640">executes</span> <span m="1859260">that</span> <span m="1859490">code</span> <span m="1860670">in</span> <span m="1860910">the</span> <span m="1861010">context</span> <span m="1862300">of</span> <span m="1862860">that</span> <span m="1863110">enclosing</span> <span m="1863650">page.</span> <span m="1864790">So does</span> <span m="1865250">that</span> <span m="1865540">attack</span> <span m="1865870">make</span> <span m="1866100">sense?</span> <span m="1867750">so</span> </p>
<p><span m="1867860">This</span> <span m="1868090">is,</span> <span m="1869010">sort</span> <span m="1869380">of,</span> <span m="1869650">an</span> <span m="1869800">example</span> <span m="1870460">of</span> <span m="1870560">how</span> <span m="1870810">complex</span> <span m="1871300">browsers</span> <span m="1871750">are</span> <span m="1872420">and</span> <span m="1872580">how</span> <span m="1872970">adding</span> <span m="1873460">even</span> <span m="1873790">a</span> <span m="1873840">very</span> <span m="1875290">well</span> <span m="1875560">intentioned</span> <span m="1876110">feature</span> <span m="1877000">can</span> <span m="1877230">cause</span> <span m="1877660">these</span> <span m="1877940">very</span> <span m="1878970">subtle</span> <span m="1879470">security</span> <span m="1880010">bugs.</span> <span m="1882010">So</span> <span m="1883300">let's</span> <span m="1883520">now</span> <span m="1884200">dig</span> <span m="1884690">down</span> <span m="1885340">and</span> <span m="1885700">take</span> <span m="1885980">a</span> <span m="1886030">deeper</span> <span m="1886370">look</span> <span m="1886740">at</span> <span m="1886860">how</span> <span m="1887210">the</span> <span m="1887380">browser</span> <span m="1888270">secures</span> <span m="1888720">various</span> <span m="1888960">resources.</span> </p>
<p><span m="1889870">So</span> <span m="1890470">let's</span> <span m="1890740">look</span> <span m="1891150">at</span> <span m="1893290">frames</span> <span m="1895510">and</span> <span m="1895920">window</span> <span m="1896230">objects.</span> <span m="1902100">So</span> <span m="1902670">frames</span> <span m="1903190">represent</span> <span m="1904010">these</span> <span m="1904810">separate</span> <span m="1905510">JavaScript</span> <span m="1906090">universes</span> <span m="1906550">that</span> <span m="1906730">we</span> <span m="1906830">discussed</span> <span m="1907230">over</span> <span m="1907420">here.</span> <span m="1908720">I mean,</span> <span m="1908960">implementation</span> <span m="1909920">wise,</span> <span m="1910260">a</span> <span m="1910370">frame</span> <span m="1911610">with</span> <span m="1911790">respect to</span> <span m="1912100">JavaScript</span> <span m="1913430">is</span> <span m="1913600">an</span> <span m="1913710">instance</span> <span m="1914030">of</span> <span m="1914130">a</span> <span m="1914200">DOM</span> <span m="1914760">node.</span> <span m="1915400">So</span> <span m="1915960">I</span> <span m="1916080">forget</span> <span m="1916420">where</span> <span m="1916610">I drew--</span> <span m="1916820">oh,</span> <span m="1916930">yeah.</span> <span m="1917010">This</span> <span m="1917080">DOM</span> <span m="1917420">node up here.</span> </p>
<p><span m="1918030">So</span> <span m="1919080">the</span> <span m="1919200">frame</span> <span m="1919890">would</span> <span m="1920090">exist</span> <span m="1920540">as</span> <span m="1920740">a</span> <span m="1920850">DOM node</span> <span m="1921340">object</span> <span m="1921750">somewhere</span> <span m="1922060">in</span> <span m="1922110">this</span> <span m="1922200">hierarchy</span> <span m="1922880">that's</span> <span m="1923080">visible to</span> <span m="1923450">JavaScript.</span> <span m="1924730">In</span> <span m="1924870">JavaScript,</span> <span m="1925180">the</span> <span m="1925490">window</span> <span m="1926020">object</span> <span m="1926720">is</span> <span m="1926870">actually</span> <span m="1927300">an</span> <span m="1927460">alias</span> <span m="1927900">for</span> <span m="1928000">the</span> <span m="1928100">global</span> <span m="1928420">name space.</span> <span m="1929030">It's,</span> <span m="1929150">kind</span> <span m="1929310">of,</span> <span m="1929360">this</span> <span m="1929500">wacky</span> <span m="1929870">idea.</span> <span m="1930260">Like,</span> <span m="1930450">if</span> <span m="1930550">you were to</span> <span m="1930710">find</span> <span m="1931020">this</span> <span m="1931080">global</span> <span m="1931400">variable</span> <span m="1931990">name</span> <span m="1932280">x,</span> <span m="1932980">you</span> <span m="1932990">can</span> <span m="1933130">also</span> <span m="1933540">access</span> <span m="1934030">it</span> <span m="1934180">via</span> <span m="1934430">the</span> <span m="1934530">name</span> <span m="1934960">window.x.</span> </p>
<p><span m="1936500">OK,</span> <span m="1937590">so</span> <span m="1937770">basically,</span> <span m="1938180">frames</span> <span m="1938560">and</span> <span m="1938660">window</span> <span m="1938900">objects</span> <span m="1939260">are</span> <span m="1939360">very</span> <span m="1939860">powerful</span> <span m="1940410">references</span> <span m="1940960">for</span> <span m="1941040">you</span> <span m="1941130">to</span> <span m="1941190">be</span> <span m="1941370">able</span> <span m="1941540">to</span> <span m="1941630">access.</span> <span m="1942450">And</span> <span m="1942620">they</span> <span m="1942680">actually</span> <span m="1943000">contain</span> <span m="1943470">pointers</span> <span m="1943910">to</span> <span m="1943980">each</span> <span m="1944480">other.</span> <span m="1945110">The</span> <span m="1945190">frame</span> <span m="1945465">can</span> <span m="1945740">[INAUDIBLE]</span> <span m="1946000">a pointer</span> <span m="1946120">to</span> <span m="1946420">the</span> <span m="1946720">associated</span> <span m="1946960">window</span> <span m="1947240">object and</span> <span m="1947620">vice</span> <span m="1947900">versa.</span> </p>
<p><span m="1948830">So</span> <span m="1948930">these</span> <span m="1949000">two</span> <span m="1949120">things</span> <span m="1949340">are,</span> <span m="1949570">essentially,</span> <span m="1950020">equivalently</span> <span m="1950440">powerful.</span> <span m="1951130">So</span> <span m="1951510">frame and</span> <span m="1952000">window</span> <span m="1952290">objects</span> <span m="1954640">get</span> <span m="1956656">the</span> <span m="1957150">origin</span> <span m="1960310">of</span> <span m="1962390">the</span> <span m="1962480">framed</span> <span m="1962910">URL.</span> <span m="1969910">Or</span> <span m="1971770">because</span> <span m="1972190">there's</span> <span m="1972410">always</span> <span m="1972700">an</span> <span m="1972790">or</span> <span m="1973140">in</span> <span m="1973270">web</span> <span m="1973410">security,</span> <span m="1974650">they</span> <span m="1976300">can</span> <span m="1976470">get</span> <span m="1976760">a</span> <span m="1977280">suffix</span> <span m="1982840">of</span> <span m="1985840">the</span> <span m="1988850">original</span> <span m="1989860">domain</span> <span m="1990330">name.</span> <span m="1990530">The</span> <span m="1990620">original</span> <span m="1991000">origin.</span> </p>
<p><span m="1991890">So</span> <span m="1992140">for</span> <span m="1992300">example,</span> <span m="1996339">a frame</span> <span m="1997120">could</span> <span m="1997330">start</span> <span m="1997610">off</span> <span m="1998200">having</span> <span m="1999050">an</span> <span m="1999620">initial</span> <span m="2000160">origin.</span> <span m="2001470">x</span> <span m="2001810">dot</span> <span m="2002060">y</span> <span m="2003190">dot</span> <span m="2003690">z</span> <span m="2004800">dot</span> <span m="2005190">com.</span> <span m="2006770">So</span> <span m="2007180">let's</span> <span m="2007360">ignore</span> <span m="2007840">the</span> <span m="2008530">scheme</span> <span m="2009080">and</span> <span m="2009270">the</span> <span m="2009460">protocol</span> <span m="2009790">for a</span> <span m="2009920">second.</span> <span m="2010180">So</span> <span m="2010620">initially,</span> <span m="2011570">the</span> <span m="2011770">page can</span> <span m="2011950">start off</span> <span m="2012370">like</span> <span m="2012540">this.</span> <span m="2013020">It</span> <span m="2013190">can</span> <span m="2013370">then</span> <span m="2014280">intentionally</span> <span m="2015080">say</span> <span m="2016510">I</span> <span m="2016670">want</span> <span m="2016900">to</span> <span m="2016980">set</span> <span m="2018480">my</span> <span m="2018720">origin</span> <span m="2019470">to</span> <span m="2019650">be</span> <span m="2020160">y</span> <span m="2020510">dot</span> <span m="2020780">z dot</span> <span m="2021050">com.</span> <span m="2021782">A</span> <span m="2022150">suffix</span> <span m="2022420">of that.</span> </p>
<p><span m="2022820">And the</span> <span m="2022990">way</span> <span m="2023150">that it</span> <span m="2023290">indicates</span> <span m="2023790">this</span> <span m="2024320">is</span> <span m="2024620">by</span> <span m="2026420">doing</span> <span m="2026710">an</span> <span m="2026780">assignment</span> <span m="2027470">to</span> <span m="2027540">the</span> <span m="2027640">special</span> <span m="2028300">document</span> <span m="2031080">dot</span> <span m="2031330">domain</span> <span m="2031810">value</span> <span m="2034730">that's</span> <span m="2034910">accessible</span> <span m="2035410">via</span> <span m="2035580">JavaScript.</span> <span m="2036090">So</span> <span m="2036160">we</span> <span m="2036230">can</span> <span m="2036380">set</span> <span m="2037020">document</span> <span m="2037480">dot</span> <span m="2037650">domain</span> <span m="2038160">explicitly</span> <span m="2039010">to</span> <span m="2039160">this</span> <span m="2039400">right</span> <span m="2039600">here.</span> <span m="2040150">And</span> <span m="2040340">that's</span> <span m="2040480">allowable</span> <span m="2040930">because</span> <span m="2041290">this</span> <span m="2041540">guy</span> <span m="2042060">is</span> <span m="2042210">a</span> <span m="2042270">suffix</span> <span m="2042930">of</span> <span m="2043210">that</span> <span m="2043300">guy.</span> </p>
<p><span m="2044160">And</span> <span m="2044340">then,</span> <span m="2044600">similarly,</span> <span m="2045500">it</span> <span m="2045600">could</span> <span m="2045610">also</span> <span m="2047880">set</span> <span m="2048030">document</span> <span m="2048409">dot</span> <span m="2048600">domain</span> <span m="2049010">to</span> <span m="2049150">z.com</span> <span m="2049739">and</span> <span m="2050139">effectively</span> <span m="2050630">reset</span> <span m="2050770">it's</span> <span m="2050920">origin</span> <span m="2051350">like</span> <span m="2051550">that.</span> <span m="2052770">Now</span> <span m="2053130">what</span> <span m="2053260">it</span> <span m="2053370">cannot</span> <span m="2053920">do</span> <span m="2054219">is</span> <span m="2054350">it</span> <span m="2054469">cannot</span> <span m="2054969">do</span> <span m="2055130">something</span> <span m="2055830">like</span> <span m="2056980">setting</span> <span m="2057870">document</span> <span m="2058639">domain</span> <span m="2059100">to</span> <span m="2060960">a</span> <span m="2061425">dot</span> <span m="2061890">y</span> <span m="2062355">dot</span> <span m="2062820">z</span> <span m="2063290">dot com.</span> </p>
<p><span m="2063760">That's</span> <span m="2063989">disallowed</span> <span m="2064570">because</span> <span m="2064820">this</span> <span m="2064969">is</span> <span m="2065090">not</span> <span m="2065270">a</span> <span m="2065330">problem</span> <span m="2065600">this</span> <span m="2065760">is</span> <span m="2065830">not</span> <span m="2065969">a</span> <span m="2066020">proper</span> <span m="2066350">suffix</span> <span m="2066820">of</span> <span m="2066920">the</span> <span m="2067050">original</span> <span m="2068620">origin.</span> <span m="2069370">And</span> <span m="2069560">also,</span> <span m="2072420">it</span> <span m="2072540">cannot</span> <span m="2072920">set</span> <span m="2073380">its</span> <span m="2074280">suffix</span> <span m="2074739">to</span> <span m="2074850">dot com.</span> <span m="2075536">So</span> <span m="2075880">does</span> <span m="2076010">anyone</span> <span m="2076219">have</span> <span m="2076370">any</span> <span m="2076520">theories</span> <span m="2076739">about</span> <span m="2076909">why</span> <span m="2077050">this</span> <span m="2077230">is</span> <span m="2077320">a</span> <span m="2077370">bad</span> <span m="2077580">idea?</span> <span m="2079510">Right,</span> <span m="2079760">exactly.</span> <span m="2080270">So</span> <span m="2080409">people</span> <span m="2080670">are</span> <span m="2080699">laughing</span> <span m="2081060">because,</span> <span m="2081320">clearly,</span> <span m="2081600">this</span> <span m="2081760">is</span> <span m="2081850">going</span> <span m="2081929">to</span> <span m="2081980">bring</span> <span m="2082159">out</span> <span m="2082449">the</span> <span m="2082550">apocalypse,</span> <span m="2083060">right.</span> </p>
<p><span m="2083260">So</span> <span m="2083670">if</span> <span m="2083810">it</span> <span m="2083909">does</span> <span m="2084210">this,</span> <span m="2084770">then</span> <span m="2084830">this</span> <span m="2084980">means</span> <span m="2085330">that</span> <span m="2085409">the</span> <span m="2085489">site</span> <span m="2085850">could</span> <span m="2086000">somehow</span> <span m="2088070">be</span> <span m="2088280">able</span> <span m="2088469">to</span> <span m="2088719">impact</span> <span m="2089120">cookies</span> <span m="2089639">or</span> <span m="2089710">things</span> <span m="2089960">like</span> <span m="2090110">that</span> <span m="2090300">in</span> <span m="2090489">any</span> <span m="2090780">dot com</span> <span m="2091120">site,</span> <span m="2091800">which</span> <span m="2092050">will be</span> <span m="2092210">pretty</span> <span m="2092420">devastating.</span> <span m="2093250">The</span> <span m="2093340">motivation</span> <span m="2093909">for</span> <span m="2094000">why</span> <span m="2094620">these</span> <span m="2095020">types</span> <span m="2095250">of</span> <span m="2095360">things</span> <span m="2095620">are</span> <span m="2095659">allowable</span> <span m="2096210">is</span> <span m="2096440">because,</span> <span m="2096650">presumably,</span> <span m="2097760">these</span> <span m="2099060">origins</span> <span m="2099910">have</span> <span m="2100100">some</span> <span m="2100310">type</span> <span m="2100470">of</span> <span m="2100570">preexisting</span> <span m="2101030">trust</span> <span m="2101320">relationship.</span> <span m="2102130">So</span> <span m="2102280">this</span> <span m="2102490">seems</span> <span m="2102850">to</span> <span m="2102930">be</span> <span m="2103120">vaguely</span> <span m="2103620">OK.</span> <span m="2104330">Whereas,</span> <span m="2104660">this</span> <span m="2104950">would</span> <span m="2105090">seem</span> <span m="2105290">to</span> <span m="2105340">be</span> <span m="2105450">bad.</span> </p>
<p><span m="2105890">AUDIENCE:</span> <span m="2106330">So you</span> <span m="2106770">can make</span> <span m="2107210">these splits</span> <span m="2107650">on any</span> <span m="2108090">dot</span> <span m="2108550">or</span> <span m="2109010">actual</span> <span m="2109325">end point?</span> <span m="2110999">Like, for  example,</span> <span m="2111452">for your</span> <span m="2111905">x.y.zz.com,</span> <span m="2112811">can you</span> <span m="2113264">change that</span> <span m="2113720">to your</span> <span m="2114130">z.com?</span> </p>
<p><span m="2114956">PROFESSOR:</span> <span m="2115370">No,</span> <span m="2115720">it</span> <span m="2115920">says</span> <span m="2116020">on</span> <span m="2116230">every</span> <span m="2116420">dot.</span> </p>
<p><span m="2116730">AUDIENCE:</span> <span m="2117132">OK.</span> <span m="2117936">Is</span> <span m="2118340">there</span> <span m="2119090">a reason that</span> <span m="2119445">it wasn't</span> <span m="2119800">made</span> <span m="2120150">so that</span> <span m="2120500">you</span> <span m="2120845">could</span> <span m="2121190">specify</span> <span m="2122690">super- or</span> <span m="2123100">subdomain,</span> <span m="2127560">but</span> <span m="2127980">somehow</span> <span m="2128310">they</span> <span m="2128810">had to agree</span> <span m="2129620">on</span> <span m="2130660">where the</span> <span m="2131020">information</span> <span m="2131650">was</span> <span m="2131820">coming from.</span> <span m="2133050">So,</span> <span m="2133655">like, you said</span> <span m="2133940">some</span> <span m="2134190">kind</span> <span m="2134450">of</span> <span m="2134975">I want to</span> <span m="2135260">consider</span> <span m="2135770">all of</span> <span m="2136030">these</span> <span m="2136370">to be  the</span> <span m="2136770">same origin</span> <span m="2137222">as me.</span> </p>
<p><span m="2137674">So</span> <span m="2138126">any of them</span> <span m="2138578">can</span> <span m="2139030">attack</span> <span m="2139482">me.</span> <span m="2139940">And</span> <span m="2140205">then you</span> <span m="2140470">made this</span> <span m="2140740">symmetric</span> <span m="2141870">in order</span> <span m="2142300">for</span> <span m="2142730">me to</span> <span m="2143160">impact them</span> <span m="2143590">as well?</span> <span m="2144315">[INAUDIBLE]</span> <span m="2145320">.com</span> <span m="2145530">means</span> <span m="2145785">anything</span> <span m="2146040">that's</span> <span m="2146270">.com</span> <span m="2146450">can</span> <span m="2146810">impact</span> <span m="2147170">me.</span> <span m="2148170">And</span> <span m="2148420">then</span> <span m="2148730">you put</span> <span m="2149150">[INAUDIBLE].</span> </p>
<p><span m="2150410">PROFESSOR: Yeah,</span> <span m="2150865">it's</span> <span m="2151320">tricky.</span> <span m="2151800">So</span> <span m="2152820">there's</span> <span m="2152990">a</span> <span m="2153030">couple</span> <span m="2153230">of</span> <span m="2153310">different answers to</span> <span m="2153640">that.</span> <span m="2153840">So first of all,</span> <span m="2154180">people</span> <span m="2154440">were</span> <span m="2154540">very</span> <span m="2154790">worried</span> <span m="2155040">about</span> <span m="2155260">this</span> <span m="2155440">attack</span> <span m="2155770">here.</span> <span m="2156440">So</span> <span m="2156540">they</span> <span m="2156640">wanted</span> <span m="2157080">to</span> <span m="2158260">make</span> <span m="2159065">the</span> <span m="2159450">domain</span> <span m="2159960">manipulation</span> <span m="2160570">language</span> <span m="2160990">be,</span> <span m="2161290">at</span> <span m="2161380">least,</span> <span m="2161580">somewhat</span> <span m="2161930">easy</span> <span m="2162140">to</span> <span m="2162210">understand.</span> <span m="2163540">So</span> <span m="2163580">they</span> <span m="2163700">don't</span> <span m="2163940">allow</span> <span m="2164590">more</span> <span m="2165070">broke</span> <span m="2165410">settings.</span> </p>
<p><span m="2166040">I'll</span> <span m="2166170">get</span> <span m="2166320">to</span> <span m="2166410">one</span> <span m="2166660">thing</span> <span m="2166800">in</span> <span m="2166870">a</span> <span m="2166930">second,</span> <span m="2167230">which</span> <span m="2167440">kind</span> <span m="2167790">of</span> <span m="2167860">allows</span> <span m="2168150">what</span> <span m="2168360">you're</span> <span m="2168450">talking</span> <span m="2168790">about</span> <span m="2169280">but</span> <span m="2169430">only</span> <span m="2169660">with</span> <span m="2169770">respect</span> <span m="2170180">to</span> <span m="2170530">domain</span> <span m="2171120">[INAUDIBLE].</span> <span m="2171220">I'll</span> <span m="2171390">get to that</span> <span m="2171570">in one</span> <span m="2171720">second.</span> <span m="2172370">And</span> <span m="2172620">another</span> <span m="2172780">to</span> <span m="2172840">mention,</span> <span m="2173110">too,</span> <span m="2173320">is</span> <span m="2173400">that</span> <span m="2173500">the</span> <span m="2173590">post</span> <span m="2173930">message</span> <span m="2174220">interface</span> <span m="2175070">does</span> <span m="2175370">allow</span> <span m="2175840">arbitrary</span> <span m="2176400">domains</span> <span m="2176820">to</span> <span m="2176940">communicate</span> <span m="2177420">with</span> <span m="2177530">each</span> <span m="2177650">other</span> <span m="2178230">if</span> <span m="2178450">they</span> <span m="2178590">both</span> <span m="2178860">opt</span> <span m="2179230">into</span> <span m="2179460">it.</span> <span m="2180080">So</span> <span m="2180370">in</span> <span m="2180500">practice,</span> <span m="2181280">people</span> <span m="2181580">use</span> <span m="2181810">post</span> <span m="2182130">message</span> <span m="2182700">to</span> <span m="2183380">cross</span> <span m="2183690">domain</span> <span m="2183940">communication</span> <span m="2184760">if</span> <span m="2184920">they</span> <span m="2185040">can't</span> <span m="2185750">set</span> <span m="2186030">their</span> <span m="2186380">origins</span> <span m="2186800">to</span> <span m="2186870">be</span> <span m="2186960">the</span> <span m="2187050">same</span> <span m="2187290">using</span> <span m="2187510">these</span> <span m="2187680">tricks</span> <span m="2187980">here.</span> </p>
<p><span m="2190060">So</span> <span m="2190540">yeah,</span> <span m="2191810">so</span> <span m="2191950">browsers</span> <span m="2192450">can</span> <span m="2192700">constrain</span> <span m="2194460">or</span> <span m="2194800">widen,</span> <span m="2195780">I</span> <span m="2195880">should</span> <span m="2196090">say,</span> <span m="2196690">their</span> <span m="2196980">domain</span> <span m="2197360">to</span> <span m="2197420">these</span> <span m="2197600">suffixes</span> <span m="2197880">of</span> <span m="2198160">the</span> <span m="2198270">original</span> <span m="2198610">domain.</span> <span m="2199910">And</span> <span m="2200000">there's</span> <span m="2200130">also</span> <span m="2200370">this little</span> <span m="2200660">interesting</span> <span m="2201040">quark</span> <span m="2201340">here,</span> <span m="2201570">which</span> <span m="2201730">is</span> <span m="2201830">that</span> <span m="2202200">browsers</span> <span m="2202760">actually</span> <span m="2203090">distinguish</span> <span m="2204250">between</span> <span m="2204810">a</span> <span m="2204930">document</span> <span m="2205980">dot</span> <span m="2206340">domain</span> <span m="2206730">value</span> <span m="2207000">that</span> <span m="2207130">has</span> <span m="2207270">been</span> <span m="2207420">written</span> <span m="2208150">and</span> <span m="2208380">one</span> <span m="2208610">that</span> <span m="2208760">has</span> <span m="2208950">not</span> <span m="2209240">been</span> <span m="2209350">written,</span> <span m="2210030">OK.</span> </p>
<p><span m="2210630">And</span> <span m="2210780">there's</span> <span m="2210950">a</span> <span m="2211000">subtle</span> <span m="2211280">reason</span> <span m="2211560">for</span> <span m="2211740">this we'll</span> <span m="2211870">get</span> <span m="2212000">into</span> <span m="2212210">in a</span> <span m="2212330">second.</span> <span m="2212890">So</span> <span m="2213040">basically,</span> <span m="2214280">two</span> <span m="2214710">frames</span> <span m="2218270">can</span> <span m="2218440">access</span> <span m="2218810">each</span> <span m="2218980">other</span> <span m="2223100">if</span> <span m="2223970">one of</span> <span m="2224350">two</span> <span m="2224750">things</span> <span m="2225540">is</span> <span m="2225750">true.</span> <span m="2226840">The</span> <span m="2226920">first</span> <span m="2227300">thing</span> <span m="2227590">is</span> <span m="2228880">both</span> <span m="2229570">of</span> <span m="2229810">the</span> <span m="2229890">frames</span> <span m="2232240">set</span> <span m="2232630">document</span> <span m="2233090">dot</span> <span m="2233290">domain</span> <span m="2238240">to</span> <span m="2238430">the</span> <span m="2238540">same</span> <span m="2238910">value.</span> </p>
<p><span m="2244330">And</span> <span m="2244530">the</span> <span m="2244630">other</span> <span m="2244900">way</span> <span m="2245180">that</span> <span m="2245950">two</span> <span m="2246150">frames</span> <span m="2246520">can</span> <span m="2246920">access each</span> <span m="2247030">other</span> <span m="2247630">is</span> <span m="2247830">that</span> <span m="2249180">neither</span> <span m="2252440">of</span> <span m="2252610">those</span> <span m="2252830">frames</span> <span m="2254560">has</span> <span m="2254830">changed</span> <span m="2255240">document</span> <span m="2255700">domain.</span> <span m="2262310">And</span> <span m="2262470">of</span> <span m="2262560">course,</span> <span m="2263290">both</span> <span m="2263660">values</span> <span m="2264000">have</span> <span m="2264150">to</span> <span m="2264240">match.</span> <span m="2266110">And</span> <span m="2268250">there's</span> <span m="2268460">a</span> <span m="2268490">value</span> <span m="2268810">match.</span> </p>
<p><span m="2272090">So</span> <span m="2272280">the</span> <span m="2272410">reason</span> <span m="2272820">for</span> <span m="2272960">this</span> <span m="2273630">is</span> <span m="2274290">a</span> <span m="2274360">bit</span> <span m="2274790">subtle.</span> <span m="2277290">But</span> <span m="2277830">the</span> <span m="2277920">basic</span> <span m="2278420">idea</span> <span m="2278860">is</span> <span m="2279020">that</span> <span m="2279250">these</span> <span m="2279590">two</span> <span m="2279930">rules</span> <span m="2280950">prevent</span> <span m="2281670">a</span> <span m="2281800">domain</span> <span m="2282540">from</span> <span m="2282750">being</span> <span m="2283220">attacked</span> <span m="2284290">by</span> <span m="2284610">one</span> <span m="2284900">of</span> <span m="2284990">its</span> <span m="2285270">own</span> <span m="2285580">buggy</span> <span m="2286060">or</span> <span m="2286190">malicious</span> <span m="2286710">sub-domains.</span> <span m="2288150">OK?</span> <span m="2288760">So</span> <span m="2289040">imagine</span> <span m="2290010">that</span> <span m="2290530">you</span> <span m="2290770">have</span> <span m="2292230">the</span> <span m="2292310">domain</span> <span m="2292700">x.y.z.com.</span> <span m="2296540">And then,</span> <span m="2296810">imagine</span> <span m="2297900">that</span> <span m="2298090">it's</span> <span m="2298250">trying</span> <span m="2298620">to</span> <span m="2298760">attack</span> <span m="2299700">y.z.com.</span> </p>
<p><span m="2303526">So</span> <span m="2303910">this</span> <span m="2304180">guy up</span> <span m="2304400">here</span> <span m="2305280">is</span> <span m="2306540">buggy</span> <span m="2308520">or</span> <span m="2308760">evil.</span> <span m="2312080">So</span> <span m="2312870">what</span> <span m="2313090">this</span> <span m="2313290">guy</span> <span m="2313430">could</span> <span m="2313580">try</span> <span m="2313720">to</span> <span m="2313820">do</span> <span m="2314230">is</span> <span m="2314360">actually</span> <span m="2314780">shorten</span> <span m="2315250">his</span> <span m="2315470">domain</span> <span m="2316140">to</span> <span m="2316280">be</span> <span m="2316400">y.z.com.</span> <span m="2316730">And</span> <span m="2318230">then,</span> <span m="2318390">start</span> <span m="2318830">messing</span> <span m="2319150">around with</span> <span m="2319520">JavaScript</span> <span m="2320040">state,</span> <span m="2320320">or</span> <span m="2320380">cookies or</span> <span m="2320770">stuff</span> <span m="2320990">like</span> <span m="2321140">that</span> <span m="2321310">here.</span> <span m="2322170">Right?</span> </p>
<p><span m="2322690">So</span> <span m="2322800">basically,</span> <span m="2323560">what</span> <span m="2323770">these</span> <span m="2323970">two</span> <span m="2324235">rules</span> <span m="2324500">over</span> <span m="2324710">here</span> <span m="2324900">will</span> <span m="2325030">say</span> <span m="2325420">is</span> <span m="2325560">that</span> <span m="2325960">if</span> <span m="2326290">y.z.com</span> <span m="2327070">does</span> <span m="2327730">not</span> <span m="2328130">want</span> <span m="2328350">to</span> <span m="2328450">actually</span> <span m="2328790">allow</span> <span m="2329230">anyone</span> <span m="2329600">to</span> <span m="2329680">interact</span> <span m="2330130">with</span> <span m="2330220">it,</span> <span m="2330990">it</span> <span m="2331110">will</span> <span m="2331310">never</span> <span m="2331910">change</span> <span m="2332380">it's</span> <span m="2332520">document.domain</span> <span m="2333490">value</span> <span m="2334560">so</span> <span m="2334670">that</span> <span m="2334830">when</span> <span m="2335390">this</span> <span m="2336200">frame</span> <span m="2336580">up here</span> <span m="2336800">does</span> <span m="2337120">shorten</span> <span m="2337460">it,</span> <span m="2337860">the</span> <span m="2337950">browser</span> <span m="2338220">will</span> <span m="2338370">say</span> <span m="2338640">aha.</span> <span m="2339340">You've</span> <span m="2339550">shortened</span> <span m="2339970">it.</span> <span m="2340700">You</span> <span m="2340880">have</span> <span m="2341000">not.</span> <span m="2341470">There's</span> <span m="2341670">a</span> <span m="2341730">match here</span> <span m="2342170">in</span> <span m="2342360">terms</span> <span m="2342590">of the</span> <span m="2342730">values.</span> </p>
<p><span m="2343400">But</span> <span m="2343600">this</span> <span m="2343800">person</span> <span m="2344130">hasn't</span> <span m="2344330">indicated</span> <span m="2344770">they</span> <span m="2344920">want</span> <span m="2345120">to</span> <span m="2345230">opt</span> <span m="2345570">into</span> <span m="2346320">this</span> <span m="2346460">type</span> <span m="2346640">of</span> <span m="2346690">chicanery.</span> <span m="2348410">So does</span> <span m="2348570">that</span> <span m="2348810">makes</span> <span m="2348990">sense?</span> <span m="2352850">OK,</span> <span m="2353350">so</span> <span m="2354510">that</span> <span m="2354870">is,</span> <span m="2355200">basically,</span> <span m="2357070">how</span> <span m="2357280">frames</span> <span m="2357970">work</span> <span m="2358240">with</span> <span m="2358330">respect</span> <span m="2358610">to</span> <span m="2358650">the</span> <span m="2358770">same</span> <span m="2359110">origin</span> <span m="2359480">policy.</span> </p>
<p><span m="2363280">So</span> <span m="2363400">then</span> <span m="2363580">we</span> <span m="2363720">can</span> <span m="2363900">look</span> <span m="2364330">at</span> <span m="2365220">how our</span> <span m="2365610">DOM</span> <span m="2365940">node's</span> <span m="2366770">treated.</span> <span m="2367200">So</span> <span m="2367650">DOM</span> <span m="2368135">nodes,</span> <span m="2368980">it's</span> <span m="2369340">pretty</span> <span m="2369670">straightforward</span> <span m="2370430">for</span> <span m="2370770">DOM</span> <span m="2371235">nodes.</span> <span m="2371700">So</span> <span m="2371930">DOM</span> <span m="2372260">nodes,</span> <span m="2372590">basically,</span> <span m="2373090">get</span> <span m="2373240">the</span> <span m="2373440">origin</span> <span m="2373870">of</span> <span m="2373940">their</span> <span m="2374060">surrounding</span> <span m="2374490">frame.</span> <span m="2375950">Makes</span> <span m="2376170">sense.</span> <span m="2377140">Then</span> <span m="2377210">we</span> <span m="2377340">can</span> <span m="2377450">look</span> <span m="2377670">at</span> <span m="2377790">cookies.</span> <span m="2378590">Cookies</span> <span m="2379030">are</span> <span m="2380950">complicated</span> <span m="2383780">and</span> <span m="2384160">a</span> <span m="2384200">bit</span> <span m="2384380">tricky.</span> <span m="2384770">So</span> <span m="2385190">cookies</span> <span m="2386320">have</span> <span m="2387820">a</span> <span m="2387930">domain.</span> <span m="2390400">And</span> <span m="2390590">they</span> <span m="2390730">have</span> <span m="2391660">a</span> <span m="2392290">path.</span> </p>
<p><span m="2395810">So</span> <span m="2396140">for</span> <span m="2396350">example,</span> <span m="2396920">you</span> <span m="2397020">can</span> <span m="2397040">imagine</span> <span m="2397510">a</span> <span m="2397610">cookie</span> <span m="2399020">might</span> <span m="2400570">be</span> <span m="2400670">associated</span> <span m="2401040">with</span> <span m="2401120">the</span> <span m="2401200">following</span> <span m="2401530">information.</span> <span m="2402680">So</span> <span m="2402920">asterisks</span> <span m="2404010">dot</span> <span m="2404770">MIT.edu.</span> <span m="2406880">And</span> <span m="2407090">then,</span> <span m="2407790">6.858.</span> <span m="2412030">So</span> <span m="2412120">you've</span> <span m="2412260">got</span> <span m="2412930">this</span> <span m="2413060">domain</span> <span m="2413680">thing</span> <span m="2413880">sitting</span> <span m="2414140">here,</span> <span m="2414660">and then,</span> <span m="2414800">you've</span> <span m="2414960">got</span> <span m="2415390">this</span> <span m="2415590">path</span> <span m="2415855">thing</span> <span m="2416120">sitting</span> <span m="2416380">over</span> <span m="2416560">here.</span> </p>
<p><span m="2418000">So</span> <span m="2418560">note</span> <span m="2418860">that</span> <span m="2419410">this</span> <span m="2419670">domain</span> <span m="2420590">can</span> <span m="2420790">be,</span> <span m="2421690">possibly,</span> <span m="2422600">complete</span> <span m="2423000">suffix</span> <span m="2423250">of</span> <span m="2423340">the</span> <span m="2423450">pages</span> <span m="2423790">current</span> <span m="2424110">domain.</span> <span m="2424670">So you can</span> <span m="2424910">play,</span> <span m="2425170">somewhat,</span> <span m="2425430">similar</span> <span m="2425660">tricks</span> <span m="2426050">as we</span> <span m="2426260">had</span> <span m="2426460">over</span> <span m="2426620">there.</span> <span m="2427280">And</span> <span m="2427510">note that</span> <span m="2427770">this</span> <span m="2428100">path</span> <span m="2428470">here</span> <span m="2428690">can</span> <span m="2428820">actually</span> <span m="2429120">just</span> <span m="2429300">be</span> <span m="2429410">set</span> <span m="2431630">just</span> <span m="2431840">to</span> <span m="2431920">the</span> <span m="2432130">slash with</span> <span m="2432540">nothing</span> <span m="2432850">else</span> <span m="2433050">there,</span> <span m="2433500">which</span> <span m="2433690">indicates</span> <span m="2434830">that</span> <span m="2435060">all</span> <span m="2435320">paths</span> <span m="2436070">in</span> <span m="2436380">the</span> <span m="2436470">domain</span> <span m="2437280">should</span> <span m="2437460">be</span> <span m="2437570">able</span> <span m="2437720">to</span> <span m="2437780">have</span> <span m="2437990">access</span> <span m="2438460">to</span> <span m="2438540">this</span> <span m="2438740">cookie</span> <span m="2439240">here.</span> </p>
<p><span m="2440230">But</span> <span m="2440420">in</span> <span m="2440470">this</span> <span m="2440660">case,</span> <span m="2441180">we</span> <span m="2441290">actually</span> <span m="2441550">have</span> <span m="2441940">one of</span> <span m="2442265">these</span> <span m="2442590">nonempty</span> <span m="2442720">paths.</span> <span m="2443800">So</span> <span m="2444080">whoever</span> <span m="2444520">sets</span> <span m="2444920">this</span> <span m="2445140">cookie,</span> <span m="2446200">basically,</span> <span m="2446500">gets</span> <span m="2446660">to</span> <span m="2446750">choose</span> <span m="2447220">what</span> <span m="2447360">the</span> <span m="2447430">domain</span> <span m="2447790">in</span> <span m="2447840">the</span> <span m="2447920">path</span> <span m="2448260">look</span> <span m="2448460">like.</span> <span m="2449630">And</span> <span m="2449850">it</span> <span m="2449910">can</span> <span m="2450020">actually</span> <span m="2450370">be set</span> <span m="2451050">by</span> <span m="2451160">the</span> <span m="2451280">server</span> <span m="2451950">or</span> <span m="2452300">can</span> <span m="2452410">be</span> <span m="2452530">set</span> <span m="2453030">on</span> <span m="2453160">the</span> <span m="2453230">client</span> <span m="2453610">side.</span> <span m="2454190">So</span> <span m="2454490">on</span> <span m="2454630">the</span> <span m="2454700">client</span> <span m="2455110">side,</span> <span m="2455450">you</span> <span m="2455520">can</span> <span m="2455650">basically</span> <span m="2456260">right</span> <span m="2456690">to</span> <span m="2457922">this</span> <span m="2458920">JavaScript</span> <span m="2459430">object</span> <span m="2459840">called</span> <span m="2460590">document.cooking.</span> </p>
<p><span m="2464200">And</span> <span m="2464360">there's,</span> <span m="2464810">sort</span> <span m="2465080">of,</span> <span m="2465200">this</span> <span m="2465440">Byzantine</span> <span m="2466280">format</span> <span m="2466540">that</span> <span m="2466800">you</span> <span m="2466940">can</span> <span m="2467070">use</span> <span m="2467350">to</span> <span m="2467430">indicate</span> <span m="2467830">all</span> <span m="2467990">these</span> <span m="2468180">paths</span> <span m="2468630">and</span> <span m="2468710">things</span> <span m="2468940">like</span> <span m="2469110">that.</span> <span m="2469300">But</span> <span m="2469420">suffice</span> <span m="2469500">to</span> <span m="2469590">say it</span> <span m="2469970">can</span> <span m="2470130">be</span> <span m="2470220">done.</span> <span m="2471320">So</span> <span m="2471740">JavaScript</span> <span m="2472250">can</span> <span m="2472340">set</span> <span m="2472480">cookies</span> <span m="2472760">like</span> <span m="2472940">this.</span> <span m="2473280">And</span> <span m="2473430">also,</span> <span m="2473620">the</span> <span m="2473740">server</span> <span m="2474250">can</span> <span m="2474390">actually</span> <span m="2474690">set</span> <span m="2474950">cookies</span> <span m="2475960">on</span> <span m="2476160">HP</span> <span m="2476500">responses</span> <span m="2477130">when</span> <span m="2477240">they</span> <span m="2477310">come</span> <span m="2477480">back</span> <span m="2477690">over</span> <span m="2477850">the</span> <span m="2477940">wire.</span> <span m="2478880">So</span> <span m="2479020">you</span> <span m="2479090">can,</span> <span m="2479190">basically,</span> <span m="2479610">just</span> <span m="2479820">use</span> <span m="2480500">the</span> <span m="2480610">set</span> <span m="2480960">cookie</span> <span m="2481350">header,</span> <span m="2481740">if you're</span> <span m="2481870">the</span> <span m="2481980">server,</span> <span m="2482640">to</span> <span m="2482800">set some of</span> <span m="2483220">these</span> <span m="2483390">things.</span> </p>
<p><span m="2484590">And</span> <span m="2484620">know that</span> <span m="2484800">there's</span> <span m="2485060">also</span> <span m="2486510">a</span> <span m="2486600">secure</span> <span m="2487040">flag</span> <span m="2490530">that</span> <span m="2490870">you</span> <span m="2490980">can</span> <span m="2491160">set</span> <span m="2491670">in</span> <span m="2492160">the</span> <span m="2492250">cookie</span> <span m="2492570">to</span> <span m="2492620">indicate</span> <span m="2493050">that</span> <span m="2493160">it's</span> <span m="2493330">an</span> <span m="2493490">HTTPS</span> <span m="2494520">cookie,</span> <span m="2495870">meaning</span> <span m="2496090">that</span> <span m="2496350">HTTP</span> <span m="2497220">content</span> <span m="2497980">should</span> <span m="2498150">not</span> <span m="2498330">be</span> <span m="2498430">able</span> <span m="2498600">to</span> <span m="2498690">access</span> <span m="2499190">that</span> <span m="2499370">cookie.</span> <span m="2501110">So</span> <span m="2501670">that's</span> <span m="2501890">the</span> <span m="2501980">basic</span> <span m="2502300">idea</span> <span m="2503390">behind</span> <span m="2503750">cookies.</span> </p>
<p><span m="2505210">Now</span> <span m="2505350">note</span> <span m="2505740">that</span> <span m="2506120">whenever</span> <span m="2506780">the</span> <span m="2507520">browser</span> <span m="2507980">generates a</span> <span m="2508460">request</span> <span m="2508780">to a</span> <span m="2509100">particular</span> <span m="2509430">web</span> <span m="2509640">server,</span> <span m="2510230">it's</span> <span m="2510410">going</span> <span m="2510580">to</span> <span m="2510720">include</span> <span m="2511630">all</span> <span m="2512030">of</span> <span m="2512140">the</span> <span m="2512360">matching</span> <span m="2512760">cookies</span> <span m="2513680">in</span> <span m="2513820">that</span> <span m="2514000">request.</span> <span m="2514720">So</span> <span m="2514850">there's</span> <span m="2515020">a</span> <span m="2515300">little</span> <span m="2515510">bit</span> <span m="2515700">of,</span> <span m="2515810">sort</span> <span m="2516010">of,</span> <span m="2516540">string</span> <span m="2516870">matching</span> <span m="2517225">and</span> <span m="2517580">algorithms</span> <span m="2518020">that have to</span> <span m="2518240">take</span> <span m="2518400">place</span> <span m="2518650">to</span> <span m="2518730">figure</span> <span m="2519040">out</span> <span m="2520080">what</span> <span m="2520360">are</span> <span m="2520430">all</span> <span m="2520710">the exact</span> <span m="2520950">cookies</span> <span m="2521360">that should</span> <span m="2521770">be sent to the</span> <span m="2521990">service</span> <span m="2522270">for a particular</span> <span m="2522680">request</span> <span m="2523180">because</span> <span m="2523270">you can</span> <span m="2523370">have</span> <span m="2523980">all</span> <span m="2524310">these</span> <span m="2524560">weird,</span> <span m="2524990">sort</span> <span m="2525150">of,</span> <span m="2525210">suffix</span> <span m="2525600">domain</span> <span m="2525990">things</span> <span m="2526240">going</span> <span m="2526690">on and</span> <span m="2526910">so</span> <span m="2527310">on and so forth.</span> <span m="2527590">But that's</span> <span m="2527870">the</span> <span m="2527950">basic</span> <span m="2529230">idea</span> <span m="2530280">behind</span> <span m="2530690">cookies.</span> <span m="2532890">So</span> <span m="2533040">does that</span> <span m="2533365">all</span> <span m="2533690">make</span> <span m="2533860">sense?</span> </p>
<p><span m="2536224">AUDIENCE:</span> <span m="2536710">So can</span> <span m="2537196">frames access</span> <span m="2537682">each other</span> <span m="2538168">cookies</span> <span m="2538654">if they</span> <span m="2539140">match</span> <span m="2539626">those</span> <span m="2540112">rules?</span> </p>
<p><span m="2541084">PROFESSOR:</span> <span m="2541570">Yeah,</span> <span m="2542160">so</span> <span m="2542850">frames</span> <span m="2543330">can</span> <span m="2543680">do</span> <span m="2543840">that.</span> <span m="2544150">But</span> <span m="2544330">it's</span> <span m="2544760">dependent</span> <span m="2545320">on</span> <span m="2546910">how</span> <span m="2547420">the</span> <span m="2547570">document.domain</span> <span m="2547940">has been</span> <span m="2548200">set.</span> <span m="2548430">And</span> <span m="2548580">then,</span> <span m="2549440">it's</span> <span m="2549550">dependent</span> <span m="2549950">on</span> <span m="2550640">what</span> <span m="2550800">the</span> <span m="2550890">cookie</span> <span m="2552000">domain</span> <span m="2552315">and</span> <span m="2552630">path</span> <span m="2552910">have been</span> <span m="2553190">set.</span> </p>
<p><span m="2553760">So</span> <span m="2553900">yeah,</span> <span m="2554180">after a</span> <span m="2554540">bunch</span> <span m="2554780">of</span> <span m="2554840">these</span> <span m="2555250">strained</span> <span m="2556440">comparisons,</span> <span m="2557220">yes,</span> <span m="2557490">frames</span> <span m="2557730">can access</span> <span m="2558040">each others</span> <span m="2558350">cookies</span> <span m="2558610">if</span> <span m="2558800">all</span> <span m="2558930">those</span> <span m="2559120">tests</span> <span m="2559320">pass.</span> <span m="2564220">OK,</span> <span m="2564750">so</span> <span m="2565810">yes,</span> <span m="2565980">that</span> <span m="2566140">leads</span> <span m="2566310">me</span> <span m="2566530">into</span> <span m="2566600">the</span> <span m="2566680">next</span> <span m="2566970">question.</span> <span m="2567400">So</span> <span m="2567660">we're</span> <span m="2567780">trying</span> <span m="2567930">to</span> <span m="2567990">figure</span> <span m="2568230">out</span> <span m="2568360">how</span> <span m="2569400">different</span> <span m="2569810">frames</span> <span m="2570110">can</span> <span m="2570240">access</span> <span m="2570600">each others</span> <span m="2570910">cookies.</span> <span m="2571580">So</span> <span m="2572510">what's</span> <span m="2572930">the</span> <span m="2573030">problem?</span> <span m="2574040">What would</span> <span m="2574260">be</span> <span m="2574380">the</span> <span m="2574490">problem</span> <span m="2574950">is</span> <span m="2575070">we</span> <span m="2575200">allowed</span> <span m="2575620">arbitrary</span> <span m="2576200">frames</span> <span m="2576910">to</span> <span m="2577070">write</span> <span m="2577330">arbitrary</span> <span m="2578000">people's</span> <span m="2578330">cookies?</span> <span m="2579740">So</span> <span m="2579870">what do</span> <span m="2580010">you</span> <span m="2580110">think?</span> </p>
<p><span m="2586513">Well, it</span> <span m="2586990">will</span> <span m="2587270">be</span> <span m="2587380">bad,</span> <span m="2587750">suffice it</span> <span m="2588150">to</span> <span m="2588220">say.</span> <span m="2588950">The</span> <span m="2589030">reason</span> <span m="2589380">it</span> <span m="2589430">would be</span> <span m="2589560">bad</span> <span m="2590050">is</span> <span m="2590210">because,</span> <span m="2590760">once</span> <span m="2590970">again,</span> <span m="2591150">these</span> <span m="2591370">cookies</span> <span m="2592200">allow</span> <span m="2593150">the</span> <span m="2594550">client</span> <span m="2594940">side</span> <span m="2595330">of</span> <span m="2595410">the</span> <span m="2595520">application</span> <span m="2596340">to</span> <span m="2596550">store</span> <span m="2597350">a</span> <span m="2597440">per</span> <span m="2597700">user</span> <span m="2598000">data.</span> <span m="2598940">So</span> <span m="2599040">you</span> <span m="2599100">can</span> <span m="2599220">imagine</span> <span m="2599700">that</span> <span m="2600280">if</span> <span m="2600450">an</span> <span m="2600530">attacker</span> <span m="2601350">could</span> <span m="2601480">control</span> <span m="2602180">or</span> <span m="2602270">override</span> <span m="2602545">a</span> <span m="2602820">users</span> <span m="2603140">cookie,</span> <span m="2603800">the</span> <span m="2603910">attacker</span> <span m="2604400">could</span> <span m="2604540">actually,</span> <span m="2604960">for</span> <span m="2605100">example,</span> <span m="2605740">change</span> <span m="2606090">that</span> <span m="2606290">cookie</span> <span m="2607000">for a</span> <span m="2607250">Gmail</span> <span m="2607940">to</span> <span m="2608170">make</span> <span m="2609030">the</span> <span m="2609250">user</span> <span m="2609800">log</span> <span m="2610140">into</span> <span m="2610270">the</span> <span m="2610380">attackers</span> <span m="2611180">Gmail</span> <span m="2611590">account.</span> </p>
<p><span m="2613140">So</span> <span m="2613370">when</span> <span m="2613480">the</span> <span m="2613590">user</span> <span m="2613860">logged</span> <span m="2614240">into</span> <span m="2614380">the</span> <span m="2614490">attacker</span> <span m="2614810">Gmail</span> <span m="2615230">account,</span> <span m="2616310">any</span> <span m="2616560">email</span> <span m="2617040">that the</span> <span m="2617690">user</span> <span m="2618040">typed</span> <span m="2618290">in</span> <span m="2618820">could</span> <span m="2618950">be</span> <span m="2619070">read</span> <span m="2619320">by</span> <span m="2619440">the</span> <span m="2619590">attacker,</span> <span m="2620000">for</span> <span m="2620160">example.</span> <span m="2620730">You</span> <span m="2620820">could</span> <span m="2620910">also</span> <span m="2621140">imagine</span> <span m="2621790">that</span> <span m="2622050">someone</span> <span m="2622240">could</span> <span m="2622310">tamper</span> <span m="2622680">with the Amazon.com</span> <span m="2622820">cookie.</span> <span m="2624240">You know,</span> <span m="2624650">put</span> <span m="2624840">all</span> <span m="2625030">kinds</span> <span m="2625320">of embarrassing</span> <span m="2625390">ridiculous</span> <span m="2626300">stuff</span> <span m="2626510">in</span> <span m="2626580">your</span> <span m="2626670">shopping</span> <span m="2627070">cart,</span> <span m="2627240">perhaps,</span> <span m="2627720">or</span> <span m="2628170">so</span> <span m="2628390">and</span> <span m="2628570">so</span> <span m="2628910">forth.</span> </p>
<p><span m="2629170">So</span> <span m="2629320">cookies</span> <span m="2629610">are,</span> <span m="2629660">actually,</span> <span m="2629950">a very</span> <span m="2630240">important</span> <span m="2630620">resource to</span> <span m="2631060">protect.</span> <span m="2631690">And</span> <span m="2631830">a</span> <span m="2631890">lot</span> <span m="2632120">of</span> <span m="2632290">web</span> <span m="2633210">security</span> <span m="2633720">attacks</span> <span m="2634580">try</span> <span m="2634910">to</span> <span m="2635010">steal</span> <span m="2635390">that</span> <span m="2635590">cookie</span> <span m="2636580">to</span> <span m="2636960">do</span> <span m="2637190">various</span> <span m="2637550">kinds</span> <span m="2637820">of</span> <span m="2637920">evil.</span> <span m="2639390">So</span> <span m="2639920">here's</span> <span m="2640210">another</span> <span m="2640620">interesting</span> <span m="2641310">question</span> <span m="2641750">with</span> <span m="2641860">respect</span> <span m="2642330">to</span> <span m="2642580">cookies.</span> <span m="2643370">So</span> <span m="2644510">let's</span> <span m="2644840">say</span> <span m="2645460">that</span> <span m="2646450">you've</span> <span m="2646710">got</span> <span m="2647010">the</span> <span m="2647090">site</span> <span m="2648150">that's</span> <span m="2648420">coming</span> <span m="2648890">from</span> <span m="2651930">foo.co.uk.</span> </p>
<p><span m="2654800">So</span> <span m="2655460">should</span> <span m="2656280">the</span> <span m="2656500">site</span> <span m="2656860">from</span> <span m="2657550">this</span> <span m="2657790">host</span> <span m="2658120">name</span> <span m="2658690">be</span> <span m="2658860">allowed</span> <span m="2659330">to</span> <span m="2659400">set</span> <span m="2659790">a</span> <span m="2659880">cookie</span> <span m="2660480">for</span> <span m="2663670">co.uk?</span> <span m="2666630">So</span> <span m="2667320">this</span> <span m="2667490">is</span> <span m="2667610">a</span> <span m="2667670">bit</span> <span m="2667920">subtle</span> <span m="2668610">because,</span> <span m="2669760">according</span> <span m="2670220">to</span> <span m="2670300">the</span> <span m="2670460">rules</span> <span m="2670810">that</span> <span m="2670910">we've</span> <span m="2671060">discussed</span> <span m="2671520">before,</span> <span m="2672670">a site</span> <span m="2673130">from</span> <span m="2673390">here</span> <span m="2673820">should</span> <span m="2673990">be</span> <span m="2674220">able</span> <span m="2674430">to</span> <span m="2675010">shorten</span> <span m="2675790">its</span> <span m="2676030">domain,</span> <span m="2677320">set</span> <span m="2677620">a</span> <span m="2677670">cookie</span> <span m="2678040">for</span> <span m="2678160">this,</span> <span m="2679150">and</span> <span m="2679280">that</span> <span m="2679420">all</span> <span m="2679590">seems</span> <span m="2679840">to</span> <span m="2679910">be</span> <span m="2680040">legal.</span> <span m="2681000">Now</span> <span m="2681210">of course, as</span> <span m="2681620">a</span> <span m="2681690">human,</span> <span m="2682350">we</span> <span m="2682580">think</span> <span m="2682760">this</span> <span m="2682900">is</span> <span m="2683010">kind</span> <span m="2683190">of</span> <span m="2683270">suspicious</span> <span m="2684600">because,</span> <span m="2684910">as a</span> <span m="2685010">human,</span> <span m="2685430">we</span> <span m="2685560">actually</span> <span m="2685810">understand</span> <span m="2686640">that</span> <span m="2686950">this</span> <span m="2687400">is</span> <span m="2687650">morally</span> <span m="2688180">speaking</span> <span m="2688820">a</span> <span m="2688930">single</span> <span m="2689460">atomic</span> <span m="2690460">domain.</span> </p>
<p><span m="2691790">Morally</span> <span m="2692330">speaking,</span> <span m="2692700">this</span> <span m="2692880">is</span> <span m="2692970">equivalent</span> <span m="2693390">to</span> <span m="2693470">.com.</span> <span m="2694820">The</span> <span m="2694900">British</span> <span m="2695170">got</span> <span m="2695350">screwed.</span> <span m="2695640">They</span> <span m="2695730">have to</span> <span m="2695870">have a</span> <span m="2695990">dot in there. But</span> <span m="2696420">that's</span> <span m="2696630">not</span> <span m="2696770">their</span> <span m="2696890">fault.</span> <span m="2697220">History's</span> <span m="2697650">unfair.</span> <span m="2698160">Right?</span> <span m="2698720">So</span> <span m="2699520">morally</span> <span m="2700140">speaking,</span> <span m="2700490">this</span> <span m="2700670">is</span> <span m="2700790">a</span> <span m="2700870">single</span> <span m="2701250">domain.</span> <span m="2702470">So</span> <span m="2702620">you</span> <span m="2702740">actually</span> <span m="2703030">have</span> <span m="2703120">to</span> <span m="2703210">have</span> <span m="2703480">some</span> <span m="2703630">special</span> <span m="2704270">infrastructure</span> <span m="2705040">to</span> <span m="2705260">get</span> <span m="2705460">the</span> <span m="2705550">cookie</span> <span m="2705830">setting</span> <span m="2706130">rules</span> <span m="2706650">to</span> <span m="2706830">work</span> <span m="2707090">out</span> <span m="2707260">correctly.</span> </p>
<p><span m="2708260">So</span> <span m="2708350">essentially,</span> <span m="2708850">Mozilla,</span> <span m="2710880">they</span> <span m="2711000">have</span> <span m="2711250">this</span> <span m="2711430">website</span> <span m="2712400">called</span> <span m="2715010">publicsuffix.org.</span> <span m="2721220">And</span> <span m="2721440">basically,</span> <span m="2722640">what</span> <span m="2722910">this</span> <span m="2723090">website</span> <span m="2724030">contains</span> <span m="2725030">are</span> <span m="2725290">lists</span> <span m="2725850">of</span> <span m="2726040">these</span> <span m="2726540">rules</span> <span m="2727270">for</span> <span m="2727980">how</span> <span m="2728270">cookies,</span> <span m="2728760">and</span> <span m="2729170">origins,</span> <span m="2729360">and domains</span> <span m="2729540">should</span> <span m="2729680">be</span> <span m="2729780">shrunk</span> <span m="2730610">given</span> <span m="2731020">that  some</span> <span m="2731490">things</span> <span m="2732290">might</span> <span m="2732480">have</span> <span m="2732710">dots</span> <span m="2732780">in them.</span> <span m="2733590">But</span> <span m="2733720">actually,</span> <span m="2734140">they</span> <span m="2734260">should</span> <span m="2734410">be</span> <span m="2734550">treated</span> <span m="2734990">as</span> <span m="2735130">a</span> <span m="2735190">single,</span> <span m="2736730">sort</span> <span m="2736940">of,</span> <span m="2737010">atomic</span> <span m="2737650">thing.</span> </p>
<p><span m="2738930">So</span> <span m="2739130">actually,</span> <span m="2739460">when</span> <span m="2739590">your</span> <span m="2739720">browser</span> <span m="2740180">is</span> <span m="2740310">figuring</span> <span m="2740790">out</span> <span m="2741500">how</span> <span m="2741780">it should</span> <span m="2741920">do</span> <span m="2742150">all</span> <span m="2742340">these</span> <span m="2742530">various</span> <span m="2742770">cookie</span> <span m="2743010">manipulations,</span> <span m="2744550">it's</span> <span m="2744700">actually</span> <span m="2744950">going</span> <span m="2745040">to</span> <span m="2745120">consult</span> <span m="2745650">this</span> <span m="2745880">side.</span> <span m="2746220">Or it's</span> <span m="2746370">going</span> <span m="2746480">to</span> <span m="2746530">have</span> <span m="2746800">this</span> <span m="2746900">baked</span> <span m="2747230">in</span> <span m="2747420">somehow</span> <span m="2747730">or</span> <span m="2747800">something</span> <span m="2747970">like</span> <span m="2748170">that</span> <span m="2748640">to</span> <span m="2748730">make</span> <span m="2748910">sure</span> <span m="2749230">that</span> <span m="2749700">foo.co.uk</span> <span m="2750920">can't</span> <span m="2751200">actually just</span> <span m="2751530">shorten</span> <span m="2752320">its</span> <span m="2752540">domain to</span> <span m="2753040">co.uk.</span> <span m="2754070">And</span> <span m="2754270">then,</span> <span m="2754860">perform</span> <span m="2755240">some</span> <span m="2755400">chicanery.</span> </p>
<p><span m="2756980">So</span> <span m="2757170">once</span> <span m="2757370">again,</span> <span m="2757790">this</span> <span m="2757990">is</span> <span m="2758150">very</span> <span m="2758450">subtle.</span> <span m="2759220">And</span> <span m="2759510">a</span> <span m="2759620">lot</span> <span m="2759900">of</span> <span m="2759970">the</span> <span m="2760120">interesting</span> <span m="2761010">web</span> <span m="2761280">security</span> <span m="2761770">issues</span> <span m="2762010">that</span> <span m="2762160">we</span> <span m="2762310">find</span> <span m="2762970">come</span> <span m="2763200">about</span> <span m="2763730">because</span> <span m="2764430">a</span> <span m="2764510">lot</span> <span m="2764740">of</span> <span m="2764790">the</span> <span m="2764910">original</span> <span m="2765350">infrastructure</span> <span m="2765850">was</span> <span m="2766030">designed</span> <span m="2766860">just</span> <span m="2767120">for</span> <span m="2767840">the</span> <span m="2767970">English</span> <span m="2768310">language.</span> <span m="2768590">You know,</span> <span m="2769200">for</span> <span m="2769410">ASCII</span> <span m="2769810">text</span> <span m="2770200">or</span> <span m="2770280">something</span> <span m="2770560">like</span> <span m="2770780">this.</span> <span m="2771150">It</span> <span m="2771240">wasn't</span> <span m="2771530">designed</span> <span m="2772140">for</span> <span m="2772480">an</span> <span m="2772730">international</span> <span m="2774390">community.</span> </p>
<p><span m="2775460">So</span> <span m="2775630">as</span> <span m="2775900">the</span> <span m="2775980">internet</span> <span m="2776260">became</span> <span m="2776700">more</span> <span m="2776900">popular,</span> <span m="2777720">people</span> <span m="2777950">said,</span> <span m="2778140">hey,</span> <span m="2778480">we made</span> <span m="2778660">some</span> <span m="2778730">pretty</span> <span m="2778970">big</span> <span m="2779190">design</span> <span m="2779560">decisions</span> <span m="2780010">here</span> <span m="2780150">at</span> <span m="2780230">the</span> <span m="2780270">beginning.</span> <span m="2780840">We</span> <span m="2780940">should</span> <span m="2781070">actually</span> <span m="2781310">make</span> <span m="2781560">this</span> <span m="2781730">usable</span> <span m="2781930">on</span> <span m="2782140">people who</span> <span m="2783440">use</span> <span m="2783760">our</span> <span m="2784180">narrow</span> <span m="2784400">understanding</span> <span m="2784870">of what</span> <span m="2785050">language</span> <span m="2785350">means.</span> <span m="2785680">You</span> <span m="2785840">run</span> <span m="2786020">into</span> <span m="2786160">all</span> <span m="2786510">these</span> <span m="2786710">crazy</span> <span m="2787060">problems.</span> <span m="2787750">And  I'll</span> <span m="2787880">give</span> <span m="2788020">you</span> <span m="2788070">another</span> <span m="2788320">example</span> <span m="2788740">one</span> <span m="2788860">of</span> <span m="2788940">those</span> <span m="2789380">a</span> <span m="2789470">later</span> <span m="2789700">lecture.</span> <span m="2791520">So</span> <span m="2791770">does</span> <span m="2791930">this all</span> <span m="2792020">makes</span> <span m="2792210">sense?</span> </p>
<p><span m="2794400">OK.</span> <span m="2796220">So</span> <span m="2796610">with</span> <span m="2797000">respect</span> <span m="2798141">to</span> <span m="2800740">XML</span> <span m="2801360">HTTP</span> <span m="2802030">responses,</span> <span m="2804930">how</span> <span m="2805230">are</span> <span m="2805320">they</span> <span m="2806980">treated</span> <span m="2807540">by</span> <span m="2808850">the</span> <span m="2809050">same</span> <span m="2809940">origin</span> <span m="2810330">policy?</span> <span m="2813310">So</span> <span m="2813790">by</span> <span m="2814060">default,</span> <span m="2816020">JavaScript</span> <span m="2816580">can</span> <span m="2816680">only</span> <span m="2817010">generate</span> <span m="2817520">one</span> <span m="2817670">of</span> <span m="2817810">these</span> <span m="2818510">if</span> <span m="2818680">it's</span> <span m="2818880">going</span> <span m="2819390">to</span> <span m="2819650">its</span> <span m="2819820">origin</span> <span m="2820270">server.</span> <span m="2821720">However,</span> <span m="2822100">there's</span> <span m="2822390">this</span> <span m="2822630">new</span> <span m="2824210">interface</span> <span m="2825160">called</span> <span m="2825500">cross</span> <span m="2825940">origin</span> <span m="2826390">request</span> <span m="2826980">or</span> <span m="2827200">CORS.</span> </p>
<p><span m="2828476">All</span> <span m="2828830">right,</span> <span m="2829070">so</span> <span m="2829610">this</span> <span m="2829840">is</span> <span m="2830430">the</span> <span m="2830470">same</span> <span m="2830810">origin</span> <span m="2833970">unless</span> <span m="2834500">the</span> <span m="2834590">server</span> <span m="2838830">has</span> <span m="2839150">enabled</span> <span m="2839590">this</span> <span m="2839780">CORS</span> <span m="2840230">thing.</span> <span m="2844120">So</span> <span m="2844250">basically,</span> <span m="2844760">this</span> <span m="2844980">adds</span> <span m="2845480">a</span> <span m="2845870">new</span> <span m="2846230">HTTP</span> <span m="2847280">response</span> <span m="2847810">header</span> <span m="2848930">called</span> <span m="2849960">access</span> <span m="2852910">control</span> <span m="2855770">allow</span> <span m="2856180">origin.</span> <span m="2862100">So</span> <span m="2862220">let's</span> <span m="2862490">say</span> <span m="2862710">that</span> <span m="2863050">JavaScript</span> <span m="2863620">from foo.com</span> <span m="2863960">wants</span> <span m="2864690">to</span> <span m="2864780">make</span> <span m="2864960">an</span> <span m="2865040">XML</span> <span m="2865440">HTTP</span> <span m="2865860">request</span> <span m="2866560">to</span> <span m="2866720">bar.com.</span> </p>
<p><span m="2867470">So</span> <span m="2867930">that's</span> <span m="2868210">cross</span> <span m="2868540">origin,</span> <span m="2869230">as we</span> <span m="2869340">described</span> <span m="2869840">in the rules</span> <span m="2870180">so</span> <span m="2870370">far.</span> <span m="2871280">So</span> <span m="2871730">if</span> <span m="2872100">the</span> <span m="2872580">server</span> <span m="2873260">in bar.com</span> <span m="2873490">wants</span> <span m="2874220">to</span> <span m="2874380">allow</span> <span m="2874760">this,</span> <span m="2875380">it</span> <span m="2875500">will</span> <span m="2875640">return</span> <span m="2876340">in it's</span> <span m="2876640">HTTP</span> <span m="2877110">response</span> <span m="2877990">this</span> <span m="2878180">header</span> <span m="2878540">here</span> <span m="2879220">that's</span> <span m="2879440">going</span> <span m="2879640">to</span> <span m="2879720">say,</span> <span m="2880050">yes,</span> <span m="2880550">I</span> <span m="2880720">allow,</span> <span m="2881130">for</span> <span m="2881270">example,</span> <span m="2882860">foo.com</span> <span m="2887670">to</span> <span m="2887890">send</span> <span m="2888275">me</span> <span m="2888660">these</span> <span m="2888890">cross</span> <span m="2889310">origin</span> <span m="2890830">XML</span> <span m="2891500">HTTP</span> <span m="2891630">request.</span> </p>
<p><span m="2893220">The</span> <span m="2893340">server</span> <span m="2893680">on</span> <span m="2893980">bar.com</span> <span m="2894260">could</span> <span m="2894380">actually</span> <span m="2894680">say</span> <span m="2894910">no.</span> <span m="2895270">It</span> <span m="2895380">could</span> <span m="2895520">refuse</span> <span m="2895960">the</span> <span m="2896060">request.</span> <span m="2897230">In</span> <span m="2897360">which</span> <span m="2897560">case,</span> <span m="2897760">the</span> <span m="2897850">browser</span> <span m="2898330">would</span> <span m="2898780">fail</span> <span m="2899100">the XML HTTP</span> <span m="2899400">request.</span> <span m="2901440">So</span> <span m="2901570">this</span> <span m="2901750">is,</span> <span m="2901860">sort</span> <span m="2902030">of,</span> <span m="2902120">a new thing</span> <span m="2902610">that's</span> <span m="2903260">come</span> <span m="2903470">up</span> <span m="2903990">in</span> <span m="2904150">large</span> <span m="2904450">part</span> <span m="2904690">because</span> <span m="2905390">of</span> <span m="2905710">these</span> <span m="2905890">mash</span> <span m="2906190">up</span> <span m="2906710">applications.</span> <span m="2907270">This</span> <span m="2907500">need</span> <span m="2907990">for,</span> <span m="2908440">somehow,</span> <span m="2910290">applications</span> <span m="2911000">from</span> <span m="2911140">different</span> <span m="2911480">developers</span> <span m="2912010">and</span> <span m="2912110">different</span> <span m="2912330">domains</span> <span m="2912690">to</span> <span m="2912750">be</span> <span m="2912820">able</span> <span m="2913000">to</span> <span m="2913070">share</span> <span m="2913410">data</span> <span m="2913950">in</span> <span m="2914080">some</span> <span m="2914200">type</span> <span m="2914360">of</span> <span m="2914430">constrained</span> <span m="2914940">way.</span> </p>
<p><span m="2915930">So</span> <span m="2916360">this</span> <span m="2916560">could</span> <span m="2916670">also</span> <span m="2916980">be</span> <span m="2917180">asterisks</span> <span m="2917690">over</span> <span m="2917920">here if</span> <span m="2918250">anybody</span> <span m="2918660">can</span> <span m="2918820">fetch</span> <span m="2919060">the</span> <span m="2919150">data</span> <span m="2919360">cross-origin,</span> <span m="2920220">so</span> <span m="2920460">on</span> <span m="2920560">and</span> <span m="2920610">so</span> <span m="2920740">forth.</span> <span m="2922630">So I think</span> <span m="2922770">that's</span> <span m="2923150">pretty</span> <span m="2923390">straightforward.</span> <span m="2925620">So</span> <span m="2925960">I</span> <span m="2926050">mean,</span> <span m="2926190">there's</span> <span m="2926360">a</span> <span m="2926380">bunch</span> <span m="2926550">of</span> <span m="2926640">other</span> <span m="2926780">resources</span> <span m="2927190">we could</span> <span m="2927390">look</span> <span m="2927660">at.</span> <span m="2930220">For</span> <span m="2930370">example,</span> <span m="2930880">images.</span> </p>
<p><span m="2932030">So a</span> <span m="2932310">frame</span> <span m="2932940">can</span> <span m="2933140">load</span> <span m="2933470">images</span> <span m="2934260">from</span> <span m="2934480">any</span> <span m="2934710">origin</span> <span m="2935090">that it</span> <span m="2935260">desires.</span> <span m="2936310">But</span> <span m="2936430">it</span> <span m="2936590">can't</span> <span m="2936950">actually</span> <span m="2937930">inspect</span> <span m="2938560">the</span> <span m="2938640">bits</span> <span m="2939710">in</span> <span m="2939850">that</span> <span m="2940090">image</span> <span m="2941160">because,</span> <span m="2941430">somehow,</span> <span m="2941740">the</span> <span m="2941830">same</span> <span m="2942090">origin</span> <span m="2942360">policy</span> <span m="2942710">says</span> <span m="2942970">that</span> <span m="2943600">having</span> <span m="2944030">different</span> <span m="2944320">origin</span> <span m="2944790">directly</span> <span m="2945140">inspect</span> <span m="2945530">each others</span> <span m="2945830">content</span> <span m="2946440">is</span> <span m="2946660">a</span> <span m="2946700">bad</span> <span m="2947130">thing.</span> <span m="2947870">So</span> <span m="2948530">the</span> <span m="2948620">frame</span> <span m="2948990">can't</span> <span m="2949410">inspect</span> <span m="2949735">the</span> <span m="2950060">bits.</span> </p>
<p><span m="2950390">But</span> <span m="2950550">it</span> <span m="2950690">can,</span> <span m="2951030">actually,</span> <span m="2951440">infer</span> <span m="2951840">things like</span> <span m="2952170">what</span> <span m="2952320">the</span> <span m="2952420">size</span> <span m="2952860">of</span> <span m="2952940">the</span> <span m="2953050">image</span> <span m="2953340">is</span> <span m="2953890">because</span> <span m="2954150">it</span> <span m="2954170">can</span> <span m="2954300">actually</span> <span m="2954630">see</span> <span m="2954990">where</span> <span m="2955890">the</span> <span m="2955980">other</span> <span m="2956290">dominoes</span> <span m="2956590">in that</span> <span m="2957120">page</span> <span m="2957490">have been</span> <span m="2957610">placed,</span> <span m="2957930">for</span> <span m="2958070">example.</span> <span m="2958910">So</span> <span m="2959110">this</span> <span m="2959280">is</span> <span m="2959390">another</span> <span m="2959630">one</span> <span m="2959760">of</span> <span m="2959800">these</span> <span m="2959960">weird</span> <span m="2960260">instances</span> <span m="2960610">where</span> <span m="2960700">the</span> <span m="2960800">same</span> <span m="2961080">origin</span> <span m="2961360">policy</span> <span m="2961760">is</span> <span m="2961880">ostensibly</span> <span m="2962390">trying</span> <span m="2962560">to</span> <span m="2962620">prevent</span> <span m="2963230">all</span> <span m="2963490">information</span> <span m="2963920">leakage.</span> <span m="2964180">But</span> <span m="2964280">it</span> <span m="2964380">can't</span> <span m="2964600">actually</span> <span m="2964930">prevent</span> <span m="2965150">all</span> <span m="2965390">of it</span> <span m="2965620">because</span> <span m="2966150">embedding</span> <span m="2966730">inherently</span> <span m="2967250">reveals</span> <span m="2967670">some</span> <span m="2967840">types</span> <span m="2968060">of</span> <span m="2968160">information.</span> </p>
<p><span m="2969960">CSS</span> <span m="2970640">has</span> <span m="2970770">a</span> <span m="2970840">similar</span> <span m="2971780">story</span> <span m="2972470">to</span> <span m="2972740">images.</span> <span m="2973280">So</span> <span m="2973650">a frame</span> <span m="2974150">can</span> <span m="2974280">embed</span> <span m="2974950">CSS</span> <span m="2976040">from</span> <span m="2976980">any</span> <span m="2977240">origin.</span> <span m="2978140">However,</span> <span m="2979070">it</span> <span m="2979170">cannot</span> <span m="2979500">directly</span> <span m="2979990">inspect</span> <span m="2980530">the</span> <span m="2980630">text</span> <span m="2981060">inside</span> <span m="2981390">that</span> <span m="2981850">CSS</span> <span m="2982310">file,</span> <span m="2982680">if</span> <span m="2983050">it's from a</span> <span m="2983100">different</span> <span m="2983340">origin.</span> <span m="2984150">But</span> <span m="2984300">it</span> <span m="2984470">can</span> <span m="2984890">actually</span> <span m="2985370">imply</span> <span m="2985880">what</span> <span m="2986080">this</span> <span m="2986190">CSS</span> <span m="2986760">does</span> <span m="2987170">because</span> <span m="2987390">it</span> <span m="2987510">just</span> <span m="2987640">can</span> <span m="2987770">create</span> <span m="2988050">a</span> <span m="2988080">bunch</span> <span m="2988300">of</span> <span m="2988400">nodes.</span> <span m="2989130">And then,</span> <span m="2989250">see</span> <span m="2989430">how</span> <span m="2989580">they're</span> <span m="2989740">styling gets</span> <span m="2990200">changed.</span> <span m="2991370">So</span> <span m="2992390">it's</span> <span m="2992940">a</span> <span m="2992990">bit</span> <span m="2993130">wacky.</span> </p>
<p><span m="2993740">JavaScript</span> <span m="2994330">is</span> <span m="2994460">actually</span> <span m="2995080">my</span> <span m="2996030">favorite</span> <span m="2997510">example</span> <span m="2999020">of</span> <span m="2999110">how</span> <span m="2999250">this</span> <span m="2999370">same</span> <span m="2999670">origin</span> <span m="2999990">policy</span> <span m="3000780">struggles</span> <span m="3001440">to</span> <span m="3001790">maintain</span> <span m="3002280">any</span> <span m="3002440">type</span> <span m="3002620">of</span> <span m="3002720">intellectual</span> <span m="3003250">consistency.</span> <span m="3004550">So</span> <span m="3005170">the</span> <span m="3005310">idea</span> <span m="3005680">here</span> <span m="3006020">is</span> <span m="3006110">that,</span> <span m="3006460">if</span> <span m="3006610">you</span> <span m="3006770">do</span> <span m="3007270">a</span> <span m="3007470">cross</span> <span m="3007900">origin</span> <span m="3008460">fetch</span> <span m="3008740">of</span> <span m="3009020">JavaScript,</span> <span m="3009720">that is</span> <span m="3009990">allowed.</span> <span m="3010980">You</span> <span m="3011100">can</span> <span m="3011250">allow</span> <span m="3011960">that</span> <span m="3012290">external</span> <span m="3012700">JavaScript</span> <span m="3013200">to</span> <span m="3013350">execute</span> <span m="3013930">in</span> <span m="3014010">the</span> <span m="3014100">context</span> <span m="3014580">of</span> <span m="3014670">your</span> <span m="3015050">own</span> <span m="3015430">page.</span> <span m="3015810">You</span> <span m="3015950">cannot,</span> <span m="3016540">however,</span> <span m="3017160">look</span> <span m="3017340">at</span> <span m="3017400">the</span> <span m="3017490">source</span> <span m="3017890">code</span> <span m="3018180">for</span> <span m="3018500">it.</span> </p>
<p><span m="3019300">So</span> <span m="3019440">if</span> <span m="3019520">you</span> <span m="3019690">have</span> <span m="3020380">a</span> <span m="3020460">script</span> <span m="3020780">tag</span> <span m="3021310">source</span> <span m="3021750">equals</span> <span m="3022170">something</span> <span m="3022470">outside</span> <span m="3022750">your</span> <span m="3022840">domain,</span> <span m="3023700">then</span> <span m="3024010">when</span> <span m="3024130">that</span> <span m="3024510">source</span> <span m="3024870">gets</span> <span m="3025040">executed,</span> <span m="3025960">you</span> <span m="3026070">can</span> <span m="3026220">call</span> <span m="3026540">functions</span> <span m="3026930">in</span> <span m="3027050">it.</span> <span m="3027130">But</span> <span m="3027250">you</span> <span m="3027340">can't</span> <span m="3027570">actually</span> <span m="3028000">look</span> <span m="3028170">at</span> <span m="3028230">the</span> <span m="3028300">JavaScript</span> <span m="3028750">source</span> <span m="3029000">code</span> <span m="3029370">in it.</span> <span m="3030470">OK,</span> <span m="3030760">fine.</span> <span m="3031370">So that seems</span> <span m="3031850">very</span> <span m="3032040">nice.</span> <span m="3032510">However,</span> <span m="3032900">there</span> <span m="3033040">are</span> <span m="3033080">a</span> <span m="3033110">bunch</span> <span m="3033320">of</span> <span m="3033420">holes</span> <span m="3033780">in this.</span> </p>
<p><span m="3034200">So</span> <span m="3034370">for</span> <span m="3034520">example,</span> <span m="3035470">JavaScript</span> <span m="3036150">is</span> <span m="3036340">dynamic</span> <span m="3036820">scripting</span> <span m="3037170">language.</span> <span m="3038040">And</span> <span m="3038930">functions</span> <span m="3039360">are</span> <span m="3039430">first</span> <span m="3039690">class</span> <span m="3039950">objects.</span> <span m="3040920">So</span> <span m="3041280">for</span> <span m="3041460">any</span> <span m="3041650">function</span> <span m="3042500">f,</span> <span m="3043890">you</span> <span m="3044040">can</span> <span m="3044210">just</span> <span m="3044460">call</span> <span m="3045480">f.tostring.</span> <span m="3047090">And</span> <span m="3047620">that</span> <span m="3047770">will</span> <span m="3047910">give</span> <span m="3048100">you</span> <span m="3048180">the</span> <span m="3048280">source</span> <span m="3048570">code</span> <span m="3048750">for</span> <span m="3048830">the</span> <span m="3048930">function.</span> <span m="3049950">And</span> <span m="3050070">people</span> <span m="3050330">do</span> <span m="3050510">this</span> <span m="3050760">all</span> <span m="3051060">the</span> <span m="3051150">time.</span> <span m="3051590">Do</span> <span m="3051740">things</span> <span m="3052080">like</span> <span m="3052820">dynamic</span> <span m="3053180">rewriting</span> <span m="3053580">and</span> <span m="3053680">stuff</span> <span m="3053910">like</span> <span m="3054090">that.</span> </p>
<p><span m="3054740">So</span> <span m="3054870">you</span> <span m="3054950">know</span> <span m="3055090">the</span> <span m="3055180">same</span> <span m="3055450">origin</span> <span m="3055800">policy</span> <span m="3056070">doesn't</span> <span m="3056280">allow</span> <span m="3056520">you</span> <span m="3056640">to</span> <span m="3056740">directly</span> <span m="3057680">look</span> <span m="3057880">at</span> <span m="3058090">the</span> <span m="3058190">contents</span> <span m="3058670">of</span> <span m="3058770">the</span> <span m="3058870">script</span> <span m="3059200">tag</span> <span m="3059450">itself?</span> <span m="3060140">You</span> <span m="3060330">can just</span> <span m="3060520">call</span> <span m="3060870">this</span> <span m="3061370">for</span> <span m="3061600">any</span> <span m="3061830">public</span> <span m="3062210">function</span> <span m="3062920">that that</span> <span m="3063150">external</span> <span m="3063810">script</span> <span m="3063890">has given</span> <span m="3064210">you.</span> <span m="3064530">And just get the</span> <span m="3064610">source</span> <span m="3064860">code</span> <span m="3065030">like</span> <span m="3065220">that.</span> </p>
<p><span m="3066600">Another</span> <span m="3066880">thing</span> <span m="3066980">you</span> <span m="3067080">could</span> <span m="3067180">imagine</span> <span m="3067590">doing</span> <span m="3068190">is</span> <span m="3068690">you</span> <span m="3068920">could just</span> <span m="3069160">get</span> <span m="3069410">your</span> <span m="3069700">home</span> <span m="3070000">server</span> <span m="3070390">from</span> <span m="3070550">your</span> <span m="3070750">domain</span> <span m="3071540">to just</span> <span m="3071815">fetch</span> <span m="3072090">the</span> <span m="3072190">source</span> <span m="3072470">code</span> <span m="3072690">for you.</span> <span m="3073980">And</span> <span m="3074060">then, just</span> <span m="3074160">send</span> <span m="3074480">it</span> <span m="3074590">back</span> <span m="3074850">to</span> <span m="3074920">you.</span> <span m="3076630">So</span> <span m="3077010">oops.</span> <span m="3077440">I mean, you</span> <span m="3077870">essentially</span> <span m="3078260">just</span> <span m="3078650">asked your home</span> <span m="3078860">server</span> <span m="3079400">to</span> <span m="3079580">run</span> <span m="3079820">Wget.</span> </p>
<p><span m="3080610">And you get the</span> <span m="3080900">source</span> <span m="3081180">code</span> <span m="3081380">that</span> <span m="3081580">way.</span> <span m="3082180">OK,</span> <span m="3082500">so</span> <span m="3082610">that's,</span> <span m="3083120">kind</span> <span m="3083410">of</span> <span m="3083640">think,</span> <span m="3084140">goofy.</span> <span m="3084370">So long</span> <span m="3084610">story</span> <span m="3084880">short,</span> <span m="3085653">the</span> <span m="3086340">same</span> <span m="3086650">origin</span> <span m="3086810">policies</span> <span m="3087290">here</span> <span m="3087560">are a bit</span> <span m="3088058">odd.</span> </p>
<p><span m="3088556">AUDIENCE:</span> <span m="3089054">Presume</span> <span m="3089552">that</span> <span m="3090050">par of the</span> <span m="3090550">reason</span> <span m="3090815">they  do it</span> <span m="3091080">is to</span> <span m="3091573">prevent the</span> <span m="3092066">user from</span> <span m="3092559">fetching</span> <span m="3093052">JavaScript</span> <span m="3093545">because then cookies</span> <span m="3094038">will be sent</span> <span m="3094531">as well.</span> <span m="3095030">So you can get</span> <span m="3095300">JavaScript</span> <span m="3096788">tailored to you.</span> </p>
<p><span m="3097284">PROFESSOR: Yeah.</span> </p>
<p><span m="3098276">AUDIENCE:</span> <span m="3098772">So if you get</span> <span m="3099268">your server to fetch it  for</span> <span m="3099764">you,</span> <span m="3100260">it won't have the user's cookies</span> <span m="3100756">[INAUDIBLE].</span> </p>
<p><span m="3101252">PROFESSOR:</span> <span m="3101750">That is</span> <span m="3102160">true.</span> <span m="3102640">Although,</span> <span m="3103180">in</span> <span m="3103290">practice,</span> <span m="3103920">a</span> <span m="3104020">lot</span> <span m="3104150">of</span> <span m="3104250">times,</span> <span m="3104790">the</span> <span m="3105440">raw</span> <span m="3105800">source</span> <span m="3106150">code,</span> <span m="3106400">itself,</span> <span m="3106940">is</span> <span m="3107110">not</span> <span m="3107310">user</span> <span m="3107590">tailored</span> <span m="3108690">in</span> <span m="3108800">practice.</span> <span m="3109350">But</span> <span m="3109520">you're</span> <span m="3109660">right</span> <span m="3109860">that it</span> <span m="3110030">will</span> <span m="3110280">prevent</span> <span m="3110660">some</span> <span m="3111070">cookie-mediated</span> <span m="3111710">attacks</span> <span m="3111990">like</span> <span m="3112300">that.</span> <span m="3112960">Modulo,</span> <span m="3113490">some</span> <span m="3113670">of</span> <span m="3113920">the cookie</span> <span m="3114130">[INAUDIBLE].</span> <span m="3114630">But</span> <span m="3114980">that's</span> <span m="3115645">exactly correct.</span> </p>
<p><span m="3117160">So</span> <span m="3117510">because</span> <span m="3117940">it's</span> <span m="3118090">actually</span> <span m="3118680">pretty</span> <span m="3119090">easy</span> <span m="3119950">for</span> <span m="3120210">users</span> <span m="3120890">and</span> <span m="3122090">applications</span> <span m="3122505">to</span> <span m="3122920">get</span> <span m="3123110">JavaScript</span> <span m="3123540">source</span> <span m="3123810">code,</span> <span m="3124300">a</span> <span m="3124390">lot</span> <span m="3124600">of</span> <span m="3124680">times,</span> <span m="3125040">JavaScript</span> <span m="3125490">source</span> <span m="3125720">code,</span> <span m="3125990">when it's</span> <span m="3126090">deployed,</span> <span m="3126600">it's</span> <span m="3126780">actually</span> <span m="3127260">obfuscated</span> <span m="3127685">and</span> <span m="3128110">minified.</span> <span m="3129070">So</span> <span m="3129340">if</span> <span m="3129550">you've</span> <span m="3129630">ever</span> <span m="3129880">tried</span> <span m="3130070">to</span> <span m="3130210">look</span> <span m="3130470">and</span> <span m="3130580">see</span> <span m="3130690">how a</span> <span m="3130870">web</span> <span m="3131090">page</span> <span m="3131320">works,</span> <span m="3131860">if</span> <span m="3131990">you</span> <span m="3132060">look</span> <span m="3132200">at</span> <span m="3132250">the</span> <span m="3132330">source,</span> <span m="3133090">sometimes</span> <span m="3133440">people</span> <span m="3133800">will do</span> <span m="3133980">things</span> <span m="3134250">like</span> <span m="3134430">move</span> <span m="3134690">all</span> <span m="3134800">the</span> <span m="3134870">white</span> <span m="3135130">space.</span> </p>
<p><span m="3136330">They</span> <span m="3136450">will</span> <span m="3136580">also</span> <span m="3137280">change</span> <span m="3137630">all</span> <span m="3137740">the</span> <span m="3137810">variable</span> <span m="3138220">names</span> <span m="3138440">to be</span> <span m="3138570">super</span> <span m="3138880">short</span> <span m="3139280">and have</span> <span m="3139670">all</span> <span m="3139830">these</span> <span m="3140030">exclamation</span> <span m="3140560">marks.</span> <span m="3141070">Looks</span> <span m="3141220">like</span> <span m="3141370">cartoon</span> <span m="3141750">characters</span> <span m="3142100">cursing</span> <span m="3142355">in the</span> <span m="3142610">cartoons.</span> <span m="3143940">So</span> <span m="3144380">that's,</span> <span m="3144600">sort</span> <span m="3144720">of,</span> <span m="3144770">like</span> <span m="3144900">a</span> <span m="3144950">cheat</span> <span m="3145290">form</span> <span m="3145650">of</span> <span m="3146050">digital</span> <span m="3146360">rights</span> <span m="3146630">management.</span> <span m="3147290">But</span> <span m="3148460">it's all,</span> <span m="3148640">ultimately,</span> <span m="3150760">a</span> <span m="3150850">bit</span> <span m="3151060">of</span> <span m="3151230">a</span> <span m="3151585">crap</span> <span m="3151940">shoot</span> <span m="3152090">because</span> <span m="3152740">you</span> <span m="3152860">can</span> <span m="3153000">do</span> <span m="3153220">things</span> <span m="3153600">like</span> <span m="3153770">execute</span> <span m="3154490">that</span> <span m="3154790">code</span> <span m="3155270">in your</span> <span m="3155550">own</span> <span m="3155970">browser.</span> </p>
<p><span m="3156450">See what</span> <span m="3156710">it</span> <span m="3156870">does.</span> <span m="3157300">Sniff</span> <span m="3157740">the</span> <span m="3157810">network.</span> <span m="3158220">See</span> <span m="3158320">who</span> <span m="3158470">it</span> <span m="3158610">talks</span> <span m="3158850">to,</span> <span m="3159060">so on and</span> <span m="3159400">so</span> <span m="3159620">forth.</span> <span m="3160352">But</span> <span m="3160720">that's,</span> <span m="3160970">basically,</span> <span m="3161900">the</span> <span m="3162490">same</span> <span m="3162720">origin</span> <span m="3163190">story for</span> <span m="3163300">JavaScript.</span> <span m="3164480">Plug-ins--</span> </p>
<p><span m="3165341">AUDIENCE:</span> <span m="3165812">I was under</span> <span m="3166283">the impression</span> <span m="3166754">that the</span> <span m="3167225">reason you do that</span> <span m="3167696">is</span> <span m="3168167">[INAUDIBLE]</span> <span m="3170051">take</span> <span m="3170522">less time</span> <span m="3171000">to</span> <span m="3171270">download</span> <span m="3171623">rather than</span> <span m="3171976">[INAUDIBLE].</span> </p>
<p><span m="3172330">PROFESSOR:</span> <span m="3172620">So</span> <span m="3173230">that</span> <span m="3173420">is</span> <span m="3173530">also</span> <span m="3173910">a reason they  do that,</span> <span m="3174365">too.</span> <span m="3174820">That's</span> <span m="3175020">a</span> <span m="3175060">good</span> <span m="3175230">point.</span> <span m="3176100">But</span> <span m="3177590">I mean, if you</span> <span m="3177950">type</span> <span m="3178230">into</span> <span m="3178570">the</span> <span m="3178910">internet,</span> <span m="3179400">sort of,</span> <span m="3180312">web page</span> <span m="3180770">obfuscation</span> <span m="3181960">or stuff like</span> <span m="3182260">that,</span> <span m="3182500">people</span> <span m="3182840">often</span> <span m="3183450">try</span> <span m="3183760">to,</span> <span m="3183970">somehow,</span> <span m="3184540">make</span> <span m="3184760">some type of</span> <span m="3185100">secrets</span> <span m="3186110">into either</span> <span m="3186250">their</span> <span m="3186520">HTML</span> <span m="3186835">or</span> <span m="3187150">their</span> <span m="3187410">JavaScript.</span> </p>
<p><span m="3188330">Maybe</span> <span m="3188500">they</span> <span m="3188610">want</span> <span m="3188890">to</span> <span m="3188960">obscure</span> <span m="3189440">the</span> <span m="3189550">protocol.</span> <span m="3190170">For</span> <span m="3190240">example,</span> <span m="3190760">if the</span> <span m="3190850">client</span> <span m="3191170">uses it</span> <span m="3191560">to</span> <span m="3191800">talk to</span> <span m="3192290">the</span> <span m="3192390">server.</span> <span m="3193230">Some people will</span> <span m="3193410">also</span> <span m="3193730">do the</span> <span m="3194580">obfuscation</span> <span m="3194985">for that</span> <span m="3195390">reason.</span> <span m="3196260">Pure</span> <span m="3196520">minification--</span> <span m="3197550">in other words,</span> <span m="3197680">just</span> <span m="3197930">making</span> <span m="3198160">the variable</span> <span m="3198230">names</span> <span m="3198730">small</span> <span m="3200270">and</span> <span m="3200620">moving the</span> <span m="3200930">[INAUDIBLE]</span> <span m="3201110">space--</span> <span m="3201360">yeah, that's</span> <span m="3201620">mainly just to</span> <span m="3201880">save</span> <span m="3203474">download band,</span> <span m="3203941">download</span> <span m="3204408">time.</span> </p>
<p><span m="3208611">OK,</span> <span m="3209080">so</span> <span m="3209310">that's</span> <span m="3209520">the</span> <span m="3209580">story</span> <span m="3209965">for</span> <span m="3210350">JavaScript.</span> <span m="3211710">There's</span> <span m="3211890">also</span> <span m="3212780">plug-ins.</span> <span m="3214150">So</span> <span m="3214500">this</span> <span m="3214770">is</span> <span m="3214870">stuff</span> <span m="3215340">like</span> <span m="3217250">Java</span> <span m="3218050">and</span> <span m="3218220">things</span> <span m="3218490">like</span> <span m="3218700">this.</span> <span m="3219440">So</span> <span m="3219530">a frame</span> <span m="3220340">can</span> <span m="3220740">easily</span> <span m="3220910">run</span> <span m="3221295">a plug-in</span> <span m="3221680">from</span> <span m="3222080">either</span> <span m="3222450">origin.</span> <span m="3222820">Now</span> <span m="3223265">plug-ins,</span> <span m="3223710">depending</span> <span m="3223900">on</span> <span m="3224010">who you believe,</span> <span m="3224590">are</span> <span m="3224680">actually</span> <span m="3224930">going</span> <span m="3225190">to</span> <span m="3225250">the way</span> <span m="3225530">of the</span> <span m="3225980">dinosaurs.</span> <span m="3226480">Because</span> <span m="3226660">a</span> <span m="3226710">lot</span> <span m="3227020">of the</span> <span m="3227090">new</span> <span m="3227590">HTML</span> <span m="3227790">5</span> <span m="3228330">features,</span> <span m="3228590">like</span> <span m="3228910">video</span> <span m="3229260">tag and things</span> <span m="3229450">like</span> <span m="3229620">this,</span> <span m="3230030">can</span> <span m="3230140">actually</span> <span m="3230470">do</span> <span m="3230680">stuff</span> <span m="3231050">that you used</span> <span m="3231420">to only be able</span> <span m="3231620">to</span> <span m="3232160">do</span> <span m="3232360">with</span> <span m="3232750">a</span> <span m="3232840">plug-in</span> <span m="3233170">like Java.</span> </p>
<p><span m="3233950">So</span> <span m="3234100">it's</span> <span m="3234230">not</span> <span m="3234480">clear</span> <span m="3234740">how much</span> <span m="3234970">longer these</span> <span m="3235230">things</span> <span m="3235490">are</span> <span m="3235920">going to</span> <span m="3236200">be around.</span> <span m="3238460">OK,</span> <span m="3238860">so</span> <span m="3239250">any</span> <span m="3239470">questions.</span> <span m="3242992">OK,</span> <span m="3244450">so</span> <span m="3244940">remember that</span> <span m="3245970">when</span> <span m="3246080">a</span> <span m="3246160">browser</span> <span m="3246630">generates an</span> <span m="3247010">HTTP</span> <span m="3247560">request</span> <span m="3248520">it</span> <span m="3248830">automatically</span> <span m="3249790">includes</span> <span m="3250020">the</span> <span m="3250160">relevant</span> <span m="3250570">cookies</span> <span m="3251090">in</span> <span m="3251460">that</span> <span m="3251770">request.</span> <span m="3252080">So</span> <span m="3252430">what</span> <span m="3252650">happens</span> <span m="3253790">if</span> <span m="3254080">a</span> <span m="3255040">malicious</span> <span m="3255670">site</span> <span m="3256500">generates</span> <span m="3258250">a</span> <span m="3258330">URL</span> <span m="3258730">that</span> <span m="3259130">looks</span> <span m="3259410">like</span> <span m="3259610">this?</span> </p>
<p><span m="3261280">So</span> <span m="3261430">for</span> <span m="3261510">example, it</span> <span m="3261850">creates</span> <span m="3262200">a new</span> <span m="3262270">child</span> <span m="3262605">frame.</span> <span m="3264538">It</span> <span m="3265017">says</span> <span m="3265496">that</span> <span m="3265975">URL to</span> <span m="3266454">bank.com.</span> <span m="3268370">And then,</span> <span m="3268850">it</span> <span m="3269050">actually</span> <span m="3269450">tries</span> <span m="3269990">to</span> <span m="3270800">mimic</span> <span m="3271260">what the</span> <span m="3271420">browser</span> <span m="3271820">would</span> <span m="3271990">do</span> <span m="3272350">if</span> <span m="3272510">there was</span> <span m="3272790">going</span> <span m="3273060">to</span> <span m="3273150">be</span> <span m="3273540">a</span> <span m="3273620">transfer</span> <span m="3274590">of</span> <span m="3275290">money</span> <span m="3276910">between</span> <span m="3277350">the</span> <span m="3277500">user</span> <span m="3278650">and</span> <span m="3278990">someone</span> <span m="3279300">else.</span> <span m="3284140">So</span> <span m="3284320">in</span> <span m="3284410">this</span> <span m="3284660">URL,</span> <span m="3287735">in</span> <span m="3288210">this</span> <span m="3288480">frame</span> <span m="3288980">that the</span> <span m="3289250">attack</span> <span m="3289605">is trying</span> <span m="3289960">to</span> <span m="3290250">create,</span> <span m="3290780">it</span> <span m="3291150">tries</span> <span m="3291360">to</span> <span m="3291440">invoke</span> <span m="3291890">this</span> <span m="3292060">transfer</span> <span m="3292750">command</span> <span m="3293200">here.</span> </p>
<p><span m="3293520">Say</span> <span m="3293960">$500.</span> <span m="3294872">And</span> <span m="3295330">that</span> <span m="3295590">should</span> <span m="3295760">go</span> <span m="3295970">to</span> <span m="3296290">the</span> <span m="3296470">attacker's</span> <span m="3296940">account</span> <span m="3297663">at the bank.</span> <span m="3298960">Now</span> <span m="3299780">the</span> <span m="3300060">attacker</span> <span m="3300470">page,</span> <span m="3301260">which</span> <span m="3301360">the</span> <span m="3301440">user</span> <span m="3301800">visited</span> <span m="3302220">because,</span> <span m="3302490">somehow,</span> <span m="3302910">the</span> <span m="3303020">attacker</span> <span m="3303280">is</span> <span m="3303540">[INAUDIBLE]</span> <span m="3304516">go</span> <span m="3305004">there.</span> <span m="3307450">What's</span> <span m="3307630">interesting</span> <span m="3308030">about</span> <span m="3308350">this</span> <span m="3308740">is</span> <span m="3308900">that,</span> <span m="3309160">even</span> <span m="3309520">though</span> <span m="3310260">the</span> <span m="3310670">attacker</span> <span m="3311190">page</span> <span m="3311560">won't</span> <span m="3311760">be</span> <span m="3311980">able</span> <span m="3312160">to</span> <span m="3312290">see</span> <span m="3312650">the</span> <span m="3312800">contents</span> <span m="3313760">of</span> <span m="3313930">this</span> <span m="3314060">child</span> <span m="3314495">frame</span> <span m="3314930">because it's</span> <span m="3315250">probably</span> <span m="3315600">going to be in a</span> <span m="3315730">different</span> <span m="3316120">origin.</span> <span m="3318020">The</span> <span m="3318130">bank.com</span> <span m="3318460">page</span> <span m="3318930">will</span> <span m="3319400">still</span> <span m="3319780">do</span> <span m="3320040">what</span> <span m="3320210">the</span> <span m="3320310">attacker</span> <span m="3320690">wants</span> <span m="3321880">because</span> <span m="3322420">the</span> <span m="3322520">browser's</span> <span m="3322920">going</span> <span m="3323020">to</span> <span m="3323080">transfer</span> <span m="3323580">all</span> <span m="3323810">the</span> <span m="3323900">users</span> <span m="3324220">cookies</span> <span m="3324540">with</span> <span m="3324640">this</span> <span m="3324810">request.</span> <span m="3325580">It's</span> <span m="3325750">going</span> <span m="3325930">to</span> <span m="3326020">look</span> <span m="3326270">at</span> <span m="3326340">this</span> <span m="3326510">command</span> <span m="3326910">here</span> <span m="3327130">and</span> <span m="3327230">say,</span> <span m="3327490">oh,</span> <span m="3327870">the</span> <span m="3328020">user</span> <span m="3328290">must've,</span> <span m="3328580">somehow,</span> <span m="3329080">asked</span> <span m="3329445">me to</span> <span m="3329810">transfer</span> <span m="3330110">$500</span> <span m="3330690">to</span> <span m="3330970">this</span> <span m="3331430">mysteriously named</span> <span m="3331770">individual</span> <span m="3332130">named</span> <span m="3332490">attacker.</span> </p>
<p><span m="3332990">OK,</span> <span m="3333320">I'll</span> <span m="3333695">do.</span> <span m="3334070">All right,</span> <span m="3334470">seems reasonable.</span> <span m="3336030">So</span> <span m="3336830">that's</span> <span m="3337100">a</span> <span m="3337170">problem.</span> <span m="3338080">Then the</span> <span m="3338270">reason</span> <span m="3338540">this</span> <span m="3338650">attack</span> <span m="3338880">works</span> <span m="3339620">is</span> <span m="3339760">because,</span> <span m="3340000">essentially,</span> <span m="3341480">the</span> <span m="3342250">attacker</span> <span m="3342850">can</span> <span m="3343030">figure</span> <span m="3343530">out</span> <span m="3344200">deterministically</span> <span m="3345490">what</span> <span m="3345760">this</span> <span m="3345940">command</span> <span m="3346275">should look like.</span> <span m="3347520">There's</span> <span m="3347700">no</span> <span m="3347940">randomness</span> <span m="3348430">in</span> <span m="3348760">this</span> <span m="3348980">command</span> <span m="3349380">here.</span> </p>
<p><span m="3350020">So</span> <span m="3350160">essentially,</span> <span m="3350540">what</span> <span m="3350670">the</span> <span m="3350870">attacker</span> <span m="3351200">can do</span> <span m="3351510">is</span> <span m="3351660">try</span> <span m="3351890">this</span> <span m="3352140">on</span> <span m="3352760">his</span> <span m="3352890">or</span> <span m="3352970">her</span> <span m="3353300">own</span> <span m="3353490">bank</span> <span m="3353700">account,</span> <span m="3354250">figure</span> <span m="3354530">out</span> <span m="3354650">this</span> <span m="3354800">protocol,</span> <span m="3355360">and</span> <span m="3355460">then</span> <span m="3355580">just,</span> <span m="3356040">somehow,</span> <span m="3356450">force</span> <span m="3357860">the user</span> <span m="3357920">browser</span> <span m="3358370">to execute</span> <span m="3358780">this on the</span> <span m="3359190">attackers</span> <span m="3359660">behalf.</span> <span m="3360560">So</span> <span m="3361110">this</span> <span m="3361290">is</span> <span m="3361410">what's</span> <span m="3361690">called</span> <span m="3362370">a</span> <span m="3363540">cross</span> <span m="3364030">site</span> <span m="3367697">request</span> <span m="3368168">forgery.</span> <span m="3372180">So</span> <span m="3372350">sometimes</span> <span m="3372800">you</span> <span m="3372890">hear</span> <span m="3373220">this</span> <span m="3373560">is</span> <span m="3374180">called</span> <span m="3375010">CSRF.</span> <span m="3376690">C-S-R-F.</span> </p>
<p><span m="3381680">So</span> <span m="3382710">the</span> <span m="3382870">solution</span> <span m="3383570">to</span> <span m="3383680">fixing</span> <span m="3384740">this</span> <span m="3385000">attack</span> <span m="3385380">here</span> <span m="3385620">is that</span> <span m="3385690">you</span> <span m="3385820">actually just</span> <span m="3386240">need</span> <span m="3386410">to</span> <span m="3386490">include</span> <span m="3387170">some</span> <span m="3387470">randomness</span> <span m="3388540">in</span> <span m="3388810">this</span> <span m="3388980">URL</span> <span m="3389960">that's</span> <span m="3390320">generated.</span> <span m="3390680">A</span> <span m="3390770">type</span> <span m="3391040">of</span> <span m="3391180">randomness</span> <span m="3391420">that</span> <span m="3391700">the</span> <span m="3391830">attacker</span> <span m="3392420">can't</span> <span m="3392820">guess</span> <span m="3393080">statically.</span> <span m="3393810">So</span> <span m="3394060">for</span> <span m="3394210">example,</span> <span m="3395050">you</span> <span m="3395150">can</span> <span m="3395250">imagine</span> <span m="3395620">that</span> <span m="3397970">inside</span> <span m="3401620">the</span> <span m="3401840">bank's</span> <span m="3402190">web</span> <span m="3402450">page</span> <span m="3402960">it's</span> <span m="3403080">going</span> <span m="3403170">to</span> <span m="3403210">have</span> <span m="3403480">some</span> <span m="3403800">form.</span> </p>
<p><span m="3405110">The</span> <span m="3405190">form</span> <span m="3405750">is</span> <span m="3405930">the</span> <span m="3406060">thing,</span> <span m="3406570">which</span> <span m="3406640">actually</span> <span m="3407010">generates</span> <span m="3407550">request</span> <span m="3407780">like</span> <span m="3407990">this.</span> <span m="3408460">So</span> <span m="3408830">maybe</span> <span m="3411000">the</span> <span m="3411890">action</span> <span m="3412180">of that</span> <span m="3412600">form</span> <span m="3412855">is</span> <span m="3413110">transfer.cgi.</span> <span m="3417690">And then,</span> <span m="3417870">inside</span> <span m="3418430">this</span> <span m="3418610">form,</span> <span m="3419380">you're</span> <span m="3419490">going</span> <span m="3419610">to</span> <span m="3419650">have</span> <span m="3420150">an</span> <span m="3420560">input.</span> <span m="3422330">Inputs</span> <span m="3422440">are</span> <span m="3422480">usually</span> <span m="3423000">used</span> <span m="3423330">to</span> <span m="3423410">get</span> <span m="3423610">in</span> <span m="3424170">user</span> <span m="3424400">input</span> <span m="3424640">like</span> <span m="3424850">text,</span> <span m="3425630">key</span> <span m="3425810">presses,</span> <span m="3426160">mouse clicks,</span> <span m="3426240">and</span> <span m="3426530">stuff</span> <span m="3426780">like</span> <span m="3426930">that.</span> <span m="3427280">But</span> <span m="3427605">we can</span> <span m="3427930">actually</span> <span m="3428390">give this</span> <span m="3428590">input</span> <span m="3429310">a</span> <span m="3429660">type</span> <span m="3430450">of</span> <span m="3430740">hidden,</span> <span m="3431740">which</span> <span m="3431940">means</span> <span m="3432270">that</span> <span m="3432430">it's</span> <span m="3432560">not</span> <span m="3432950">shown</span> <span m="3433510">to</span> <span m="3433610">the</span> <span m="3433760">user.</span> </p>
<p><span m="3436280">And then,</span> <span m="3436390">we can give</span> <span m="3436630">it</span> <span m="3436870">this</span> <span m="3437490">attribute.</span> <span m="3439060">We'll</span> <span m="3439240">call</span> <span m="3439590">it</span> <span m="3441510">CSRF.</span> <span m="3444190">And</span> <span m="3444320">then,</span> <span m="3444450">we'll</span> <span m="3444640">give</span> <span m="3444880">it</span> <span m="3445060">some</span> <span m="3445380">random</span> <span m="3445760">value.</span> <span m="3451790">You know,</span> <span m="3452250">a72f.</span> <span m="3453380">Whatever.</span> <span m="3455240">So</span> <span m="3455450">remember,</span> <span m="3455650">this</span> <span m="3455860">is</span> <span m="3455970">generated</span> <span m="3456360">on</span> <span m="3456480">the</span> <span m="3456570">server</span> <span m="3456950">side.</span> <span m="3457620">So</span> <span m="3457770">when</span> <span m="3457920">the</span> <span m="3458660">user</span> <span m="3459110">goes</span> <span m="3459410">to this</span> <span m="3459610">page,</span> <span m="3460265">on</span> <span m="3460540">the</span> <span m="3460620">server</span> <span m="3460970">side,</span> <span m="3461320">it</span> <span m="3461460">sometimes</span> <span m="3461510">generates</span> <span m="3461970">this</span> <span m="3462060">random</span> <span m="3462540">here</span> <span m="3463270">and</span> <span m="3463730">embeds</span> <span m="3464000">that</span> <span m="3464400">in the</span> <span m="3464660">HTML</span> <span m="3465065">that the</span> <span m="3465470">user</span> <span m="3465920">receives.</span> </p>
<p><span m="3466940">So</span> <span m="3467620">when</span> <span m="3467760">the</span> <span m="3467890">user</span> <span m="3468300">submits</span> <span m="3468740">this</span> <span m="3468960">form,</span> <span m="3469390">then</span> <span m="3469840">this</span> <span m="3470290">URL</span> <span m="3470810">that</span> <span m="3470920">we</span> <span m="3471030">have</span> <span m="3471240">up</span> <span m="3471380">here</span> <span m="3471570">will</span> <span m="3471730">actually</span> <span m="3472140">have</span> <span m="3472820">this</span> <span m="3474050">extra</span> <span m="3474430">thing</span> <span m="3474800">up</span> <span m="3474960">here,</span> <span m="3476690">which</span> <span m="3477000">is</span> <span m="3477470">this</span> <span m="3480390">token</span> <span m="3480890">here.</span> <span m="3483620">So</span> <span m="3483720">what</span> <span m="3483910">this</span> <span m="3484140">does</span> <span m="3484440">is</span> <span m="3484830">that this now</span> <span m="3485250">means</span> <span m="3485880">that</span> <span m="3486250">the</span> <span m="3486380">attacker</span> <span m="3487627">would</span> <span m="3488084">have to be able</span> <span m="3488541">to</span> <span m="3488998">guess</span> <span m="3489455">the particular</span> <span m="3489912">range of</span> <span m="3490370">token that</span> <span m="3490530">the</span> <span m="3490610">server</span> <span m="3491020">generated</span> <span m="3491450">for</span> <span m="3491520">the</span> <span m="3491670">user</span> <span m="3492070">each</span> <span m="3492350">time</span> <span m="3493060">the</span> <span m="3493400">user had</span> <span m="3493590">gone</span> <span m="3493860">to the</span> <span m="3493920">page.</span> </p>
<p><span m="3494460">So</span> <span m="3494840">if</span> <span m="3495230">you</span> <span m="3496290">sufficient</span> <span m="3496750">randomness</span> <span m="3497030">here,</span> <span m="3497720">the</span> <span m="3497820">attacker</span> <span m="3498250">can't</span> <span m="3498540">just</span> <span m="3498880">forge</span> <span m="3499010">one of these</span> <span m="3499650">things</span> <span m="3500230">because</span> <span m="3500500">if the</span> <span m="3500610">attacker</span> <span m="3501180">guesses</span> <span m="3501533">the</span> <span m="3501886">wrong</span> <span m="3502510">token,</span> <span m="3503250">then</span> <span m="3503570">the</span> <span m="3504010">server</span> <span m="3504265">orders will</span> <span m="3504520">reject your</span> <span m="3504942">request.</span> </p>
<p><span m="3505364">AUDIENCE:</span> <span m="3505786">Well why</span> <span m="3506210">should these</span> <span m="3506490">always</span> <span m="3506985">be included in the</span> <span m="3507480">URL</span> <span m="3508470">and not</span> <span m="3508965">in the</span> <span m="3509460">body of the</span> <span m="3509955">[INAUDIBLE]?</span> </p>
<p><span m="3515400">PROFESSOR:</span> <span m="3515900">Yeah,</span> <span m="3515950">yea.</span> <span m="3516160">So</span> <span m="3516490">HTTPS</span> <span m="3516745">helps a</span> <span m="3517000">lot</span> <span m="3517700">of these</span> <span m="3518140">things.</span> <span m="3519460">And there's actually</span> <span m="3519900">no intrinsic</span> <span m="3520340">reason why</span> <span m="3520665">you</span> <span m="3520990">couldn't</span> <span m="3521660">put</span> <span m="3521820">some of this</span> <span m="3522010">stuff</span> <span m="3522240">in</span> <span m="3522420">the</span> <span m="3522490">body</span> <span m="3522860">of</span> <span m="3522950">the</span> <span m="3523040">request.</span> <span m="3524000">There's</span> <span m="3524820">some</span> <span m="3524990">legacy</span> <span m="3525170">reasons</span> <span m="3525570">why</span> <span m="3526000">forms,</span> <span m="3526430">sort</span> <span m="3526710">of,</span> <span m="3526840">work</span> <span m="3527060">like</span> <span m="3527240">this.</span> </p>
<p><span m="3527850">But you're correct.</span> <span m="3528110">And in</span> <span m="3528500">practice,</span> <span m="3529230">you</span> <span m="3529340">can</span> <span m="3529460">put</span> <span m="3529560">that</span> <span m="3529660">information</span> <span m="3530110">somewhere</span> <span m="3530460">else</span> <span m="3530690">in the</span> <span m="3531020">HTTPS</span> <span m="3531150">request.</span> <span m="3531660">But</span> <span m="3531870">note that</span> <span m="3532250">just</span> <span m="3532560">moving</span> <span m="3532840">that</span> <span m="3532970">information,</span> <span m="3533540">for</span> <span m="3533670">example,</span> <span m="3534000">to</span> <span m="3534080">the</span> <span m="3534170">body</span> <span m="3534630">of</span> <span m="3534720">the</span> <span m="3534800">request,</span> <span m="3535830">there's</span> <span m="3536280">still</span> <span m="3536500">a</span> <span m="3536560">challenge</span> <span m="3536970">there,</span> <span m="3537336">potentially</span> <span m="3538070">because if</span> <span m="3538410">there's</span> <span m="3539080">something</span> <span m="3539460">there</span> <span m="3539550">that the</span> <span m="3539830">attacker</span> <span m="3540350">can</span> <span m="3540920">guess.</span> <span m="3541350">Then</span> <span m="3541750">the</span> <span m="3541940">attacker</span> <span m="3542270">may</span> <span m="3542400">still</span> <span m="3542640">be</span> <span m="3542750">able</span> <span m="3542880">to,</span> <span m="3543260">somehow,</span> <span m="3543635">conjure</span> <span m="3544010">up that</span> <span m="3544476">URL.</span> <span m="3545410">For</span> <span m="3545580">example,</span> <span m="3545960">when I'm</span> <span m="3546100">making</span> <span m="3546490">XML</span> <span m="3547070">HTTP</span> <span m="3547370">request</span> <span m="3548170">and then,</span> <span m="3548510">explicitly,</span> <span m="3549000">setting the</span> <span m="3549380">body</span> <span m="3550010">to</span> <span m="3550140">this</span> <span m="3550240">thing that</span> <span m="3550500">the attacker knows how</span> <span m="3550760">to guess.</span> </p>
<p><span m="3551330">AUDIENCE:</span> <span m="3551808">Well</span> <span m="3552286">if the</span> <span m="3552764">attacker</span> <span m="3553242">just gives</span> <span m="3553720">you</span> <span m="3554198">a</span> <span m="3554676">URL,</span> <span m="3555154">then that just</span> <span m="3555632">gets</span> <span m="3556110">encoded</span> <span m="3556588">in the</span> <span m="3557066">header</span> <span m="3558022">of</span> <span m="3558500">[INAUDIBLE].</span> </p>
<p><span m="3559934">PROFESSOR:</span> <span m="3560412">If the</span> <span m="3560890">attacker just gives you</span> <span m="3561370">a URL.</span> <span m="3562620">So</span> <span m="3562970">if</span> <span m="3563280">you're</span> <span m="3563720">just</span> <span m="3563970">setting</span> <span m="3564220">a</span> <span m="3564350">frame</span> <span m="3564940">to</span> <span m="3565090">URL,</span> <span m="3566320">then,</span> <span m="3566700">that's</span> <span m="3566890">all</span> <span m="3567190">that the</span> <span m="3567320">attacker can</span> <span m="3567800">control.</span> <span m="3569080">But</span> <span m="3569170">if</span> <span m="3569260">you're</span> <span m="3569350">using</span> <span m="3569650">an</span> <span m="3569760">XML</span> <span m="3570080">HTTP</span> <span m="3570400">request if,</span> <span m="3570500">if somehow</span> <span m="3570830">the</span> <span m="3571140">attacker</span> <span m="3571520">can</span> <span m="3571650">generate</span> <span m="3572030">one of</span> <span m="3572500">those,</span> <span m="3572970">then</span> <span m="3573140">XML</span> <span m="3573590">HTTP</span> <span m="3574040">interface</span> <span m="3574510">actually</span> <span m="3574750">allows</span> <span m="3575100">you to set the</span> <span m="3575430">body.</span> </p>
<p><span m="3578050">AUDIENCE:</span> <span m="3578510">The</span> <span m="3578830">XML HTTP</span> <span m="3579150">request</span> <span m="3579530">would</span> <span m="3579972">be</span> <span m="3580414">limited by, say,</span> <span m="3580856">an origin.</span> <span m="3581740">But</span> <span m="3582182">the</span> <span m="3582624">attacker could</span> <span m="3583070">just write a</span> <span m="3583150">form and</span> <span m="3583450">submit it.</span> <span m="3584110">There's</span> <span m="3584400">nothing</span> <span m="3584765">[INAUDIBLE]</span> <span m="3585995">submitting a form</span> <span m="3586280">like using</span> <span m="3586820">[INAUDIBLE].</span> <span m="3587330">And</span> <span m="3587590">then,</span> <span m="3587986">it's</span> <span m="3588382">sent</span> <span m="3588780">in</span> <span m="3588900">the</span> <span m="3589380">body.</span> <span m="3589910">But it's still--</span> </p>
<p><span m="3590710">PROFESSOR:</span> <span m="3591110">That's</span> <span m="3591300">right.</span> <span m="3591550">So</span> <span m="3591930">XML</span> <span m="3592150">HTTP</span> <span m="3592550">request</span> <span m="3592850">is</span> <span m="3593290">limited</span> <span m="3594080">to</span> <span m="3594210">the</span> <span m="3594310">same</span> <span m="3594580">origin.</span> <span m="3595290">However,</span> <span m="3595680">if</span> <span m="3595910">for</span> <span m="3596050">example,</span> <span m="3596660">the</span> <span m="3596930">attacker</span> <span m="3597870">can,</span> <span m="3598190">maybe,</span> <span m="3599060">do</span> <span m="3599490">something</span> <span m="3599890">like</span> <span m="3600110">this,</span> <span m="3600380">for</span> <span m="3600530">example.</span> <span m="3601380">And</span> <span m="3601670">the</span> <span m="3601840">attacker</span> <span m="3602220">can</span> <span m="3602390">inject</span> <span m="3602870">the</span> <span m="3603300">XML</span> <span m="3603740">HTTP request here,</span> <span m="3604070">which</span> <span m="3604240">would</span> <span m="3604370">then</span> <span m="3604460">execute</span> <span m="3604715">with the</span> <span m="3604970">authority</span> <span m="3605090">of</span> <span m="3605480">the embedded page.</span> </p>
<p><span m="3610650">AUDIENCE:</span> <span m="3611120">Can the</span> <span m="3611455">attacker</span> <span m="3611790">[INAUDIBLE]</span> <span m="3613250">by inspecting</span> <span m="3613690">the</span> <span m="3614035">HTML</span> <span m="3614870">source</span> <span m="3615090">code?</span> </p>
<p><span m="3616741">PROFESSOR:</span> <span m="3617140">Yes,</span> <span m="3617660">that's</span> <span m="3617970">actually a</span> <span m="3618060">good</span> <span m="3618270">question.</span> <span m="3618770">right</span> <span m="3619160">so</span> <span m="3619360">it</span> <span m="3619450">depends</span> <span m="3619960">on</span> <span m="3620200">what</span> <span m="3620610">the</span> <span m="3620970">attacker</span> <span m="3621390">has</span> <span m="3621610">access</span> <span m="3621940">to.</span> <span m="3622830">If</span> <span m="3623060">the</span> <span m="3623200">attacker--</span> <span m="3623810">for</span> <span m="3623910">example,</span> <span m="3624310">by</span> <span m="3624440">doing</span> <span m="3624730">something</span> <span m="3625340">goofy like that--</span> <span m="3626780">can</span> <span m="3626990">actually</span> <span m="3628780">access</span> <span m="3629220">this</span> <span m="3629370">JavaScript</span> <span m="3629850">property</span> <span m="3630110">called</span> <span m="3632960">inner</span> <span m="3633440">HTML.</span> <span m="3633870">This</span> <span m="3634010">is</span> <span m="3634120">a</span> <span m="3634220">property</span> <span m="3634660">[INAUDIBLE],</span> <span m="3635360">right.</span> <span m="3635680">So if I</span> <span m="3637460">document</span> <span m="3637980">that</span> <span m="3638390">body</span> <span m="3638800">dot</span> <span m="3639020">inner</span> <span m="3639370">HTML,</span> <span m="3639970">I</span> <span m="3640090">will</span> <span m="3640300">get</span> <span m="3640580">all</span> <span m="3640890">of</span> <span m="3641010">the</span> <span m="3641190">HTML</span> <span m="3641680">that's</span> <span m="3641840">inside</span> <span m="3642125">that</span> <span m="3642410">page right now.</span> </p>
<p><span m="3643140">So</span> <span m="3643270">yeah. So</span> <span m="3643530">if</span> <span m="3643600">the</span> <span m="3643690">attacker</span> <span m="3643945">can</span> <span m="3644200">do</span> <span m="3644340">this,</span> <span m="3644920">then</span> <span m="3645275">yeah.</span> <span m="3645630">Then</span> <span m="3645730">you're</span> <span m="3645910">in</span> <span m="3646130">trouble.</span> <span m="3646570">That's</span> <span m="3646900">right.</span> <span m="3647750">So</span> <span m="3647940">a lot of</span> <span m="3648380">these</span> <span m="3648530">details,</span> <span m="3648750">though,</span> <span m="3649040">depend on</span> <span m="3649240">exactly</span> <span m="3649660">what the</span> <span m="3649960">attacker</span> <span m="3650360">can and can't</span> <span m="3650760">do.</span> <span m="3650970">So</span> <span m="3651290">it, kind of,</span> <span m="3651420">makes</span> <span m="3651850">sense.</span> <span m="3652230">So</span> <span m="3652300">if</span> <span m="3652360">the</span> <span m="3652430">attacker</span> <span m="3652800">can</span> <span m="3653200">or cannot</span> <span m="3653420">generate</span> <span m="3654060">Ajax</span> <span m="3654410">request,</span> <span m="3654780">that</span> <span m="3654930">means</span> <span m="3655100">one</span> <span m="3655320">thing.</span> <span m="3655800">The</span> <span m="3655870">attacker</span> <span m="3656200">can</span> <span m="3656490">or</span> <span m="3656590">cannot</span> <span m="3657020">look</span> <span m="3657140">at</span> <span m="3657190">the</span> <span m="3657270">right</span> <span m="3657560">HTML,</span> <span m="3657690">then you have</span> <span m="3657955">another</span> <span m="3658450">thing.</span> <span m="3658760">So  on and</span> <span m="3659070">so forth.</span> </p>
<p><span m="3662140">All</span> <span m="3662240">right.</span> <span m="3662540">So</span> <span m="3663480">yeah.</span> <span m="3663660">So</span> <span m="3663770">this</span> <span m="3664060">is</span> <span m="3664220">token</span> <span m="3664560">based</span> <span m="3664840">thing</span> <span m="3665110">is a</span> <span m="3665480">popular</span> <span m="3666150">way</span> <span m="3666340">to</span> <span m="3666450">get</span> <span m="3666640">around</span> <span m="3666935">these</span> <span m="3667505">CSRF</span> <span m="3668020">attacks.</span> <span m="3670270">All right,</span> <span m="3670710">so</span> <span m="3671660">another</span> <span m="3672030">thing we</span> <span m="3672180">can</span> <span m="3672340">look</span> <span m="3672680">at</span> <span m="3677970">are</span> <span m="3678910">network</span> <span m="3679290">addresses.</span> <span m="3682760">So</span> <span m="3682900">this</span> <span m="3683190">gets</span> <span m="3683440">into</span> <span m="3683640">some</span> <span m="3683860">of</span> <span m="3683940">the</span> <span m="3684080">conversation</span> <span m="3684640">we've</span> <span m="3684730">been</span> <span m="3684850">having</span> <span m="3685210">about</span> <span m="3686280">who</span> <span m="3686460">the</span> <span m="3686590">attacker</span> <span m="3687030">cannot</span> <span m="3688130">contact</span> <span m="3689080">via</span> <span m="3689500">XML</span> <span m="3690030">HTTP</span> <span m="3690270">request,</span> <span m="3690610">for</span> <span m="3690750">example.</span> </p>
<p><span m="3696450">So</span> <span m="3696800">with</span> <span m="3696950">respect</span> <span m="3697430">to</span> <span m="3698000">network</span> <span m="3698350">addresses,</span> <span m="3700848">a</span> <span m="3701310">frame</span> <span m="3702740">can</span> <span m="3703030">send</span> <span m="3704430">HTTP</span> <span m="3705690">and</span> <span m="3706010">HTTPS</span> <span m="3706670">requests</span> <span m="3707210">to a</span> <span m="3707390">host</span> <span m="3707900">plus a</span> <span m="3708030">port</span> <span m="3708380">that</span> <span m="3708460">matches it's</span> <span m="3708870">origin.</span> <span m="3710560">But</span> <span m="3710800">note</span> <span m="3711510">that</span> <span m="3711700">the</span> <span m="3711810">security</span> <span m="3713340">of</span> <span m="3713540">the</span> <span m="3713620">same</span> <span m="3713910">origin</span> <span m="3714180">policy</span> <span m="3714820">is,</span> <span m="3714950">actually,</span> <span m="3715290">very</span> <span m="3715750">tightly</span> <span m="3716250">tied</span> <span m="3716710">with</span> <span m="3717010">the</span> <span m="3717100">security</span> <span m="3717930">of</span> <span m="3718060">the</span> <span m="3718140">DNS</span> <span m="3718600">infrastructure</span> <span m="3720260">because</span> <span m="3720820">all</span> <span m="3721090">the</span> <span m="3721170">same</span> <span m="3721460">origin</span> <span m="3721730">policies'</span> <span m="3722310">rules</span> <span m="3722540">are</span> <span m="3722600">based</span> <span m="3722910">upon</span> <span m="3723050">what</span> <span m="3723300">names me.</span> </p>
<p><span m="3724360">So</span> <span m="3724450">if</span> <span m="3724520">you</span> <span m="3724640">can</span> <span m="3724760">control</span> <span m="3725200">what</span> <span m="3725400">names</span> <span m="3725740">me,</span> <span m="3726080">you</span> <span m="3726170">can</span> <span m="3726280">actually</span> <span m="3726530">want</span> <span m="3726830">some</span> <span m="3726940">pretty</span> <span m="3727220">vicious</span> <span m="3727540">attacks.</span> <span m="3728260">So</span> <span m="3728580">an</span> <span m="3728640">example</span> <span m="3729360">of</span> <span m="3729660">this</span> <span m="3730290">is</span> <span m="3730960">the</span> <span m="3731040">DNS</span> <span m="3733410">rebinding</span> <span m="3734080">attack.</span> <span m="3739940">So in</span> <span m="3740100">this</span> <span m="3740340">attack,</span> <span m="3742300">the</span> <span m="3742430">goal</span> <span m="3743760">of</span> <span m="3743910">the</span> <span m="3744050">attacker</span> <span m="3745010">is</span> <span m="3746200">run</span> <span m="3747340">attacker</span> <span m="3747790">controlled</span> <span m="3748610">JavaScript</span> <span m="3756110">with</span> <span m="3756620">the</span> <span m="3756730">authority</span> <span m="3760577">of</span> <span m="3761480">some</span> <span m="3761790">victim</span> <span m="3762200">website.</span> <span m="3763070">We'll just</span> <span m="3763290">call</span> <span m="3763610">them</span> <span m="3764000">victim.com.</span> </p>
<p><span m="3768330">So the</span> <span m="3768490">attacker</span> <span m="3768820">wants</span> <span m="3769050">to</span> <span m="3769140">bus</span> <span m="3769410">the</span> <span m="3769490">same</span> <span m="3769730">origin</span> <span m="3770010">policies</span> <span m="3770440">and</span> <span m="3770550">somehow</span> <span m="3770890">run</span> <span m="3771210">code</span> <span m="3772170">that</span> <span m="3772690">he</span> <span m="3772850">has</span> <span m="3772960">written</span> <span m="3773240">with</span> <span m="3773410">the</span> <span m="3773510">authority</span> <span m="3774050">of</span> <span m="3774140">some</span> <span m="3774460">other</span> <span m="3775200">site.</span> <span m="3775620">So</span> <span m="3776650">here's</span> <span m="3777030">the</span> <span m="3777400">approach.</span> <span m="3779480">So</span> <span m="3779680">the</span> <span m="3779800">first</span> <span m="3780140">thing</span> <span m="3780400">that</span> <span m="3780550">the</span> <span m="3780650">attacker</span> <span m="3781060">is</span> <span m="3781150">going</span> <span m="3781260">to</span> <span m="3781340">do</span> <span m="3783740">is</span> <span m="3784960">register</span> <span m="3786690">a</span> <span m="3786780">domain</span> <span m="3787120">name.</span> <span m="3790670">So</span> <span m="3790990">let's</span> <span m="3791260">say</span> <span m="3791540">we</span> <span m="3791660">just</span> <span m="3791830">call</span> <span m="3792070">that</span> <span m="3792660">attacker.com.</span> </p>
<p><span m="3798746">Very</span> <span m="3799100">simple</span> <span m="3799390">to</span> <span m="3799460">do.</span> <span m="3799960">Just pay a</span> <span m="3800060">couple of</span> <span m="3800370">bucks.</span> <span m="3801170">You're</span> <span m="3801500">ready to go.</span> <span m="3801880">You own</span> <span m="3801970">your</span> <span m="3802170">own</span> <span m="3802380">domain</span> <span m="3802645">name.</span> <span m="3804390">So</span> <span m="3805060">note</span> <span m="3805330">that</span> <span m="3805460">the</span> <span m="3805560">attacker</span> <span m="3805890">is</span> <span m="3805970">also</span> <span m="3806220">going</span> <span m="3806330">to</span> <span m="3806410">set</span> <span m="3806680">up</span> <span m="3806850">a</span> <span m="3806880">DNS</span> <span m="3807450">server</span> <span m="3807880">to</span> <span m="3808170">respond</span> <span m="3808970">to</span> <span m="3809360">name</span> <span m="3809640">resolution</span> <span m="3810130">requests</span> <span m="3810580">for</span> <span m="3812130">objects</span> <span m="3812490">that</span> <span m="3812580">reside in</span> <span m="3812890">attacker.com.</span> </p>
<p><span m="3813960">So</span> <span m="3814720">the</span> <span m="3814820">second</span> <span m="3815180">thing that</span> <span m="3815240">has</span> <span m="3815380">to</span> <span m="3815460">happen</span> <span m="3815810">is</span> <span m="3815960">that the</span> <span m="3816110">user</span> <span m="3818170">has</span> <span m="3818400">to</span> <span m="3818650">visit</span> <span m="3820590">attacker.com.</span> <span m="3824291">In</span> <span m="3824770">particular,</span> <span m="3825120">the</span> <span m="3825570">user</span> <span m="3825800">has</span> <span m="3826070">to</span> <span m="3826160">visit</span> <span m="3826530">some</span> <span m="3826740">website</span> <span m="3827150">that</span> <span m="3827260">hangs</span> <span m="3827570">off</span> <span m="3827730">of this</span> <span m="3827840">domain</span> <span m="3828210">name.</span> <span m="3829190">This</span> <span m="3829420">part</span> <span m="3829640">is</span> <span m="3829730">actually</span> <span m="3830050">not</span> <span m="3830250">tricky.</span> </p>
<p><span m="3830990">See if</span> <span m="3831060">you</span> <span m="3831140">can</span> <span m="3831260">create</span> <span m="3831500">an</span> <span m="3831600">ad</span> <span m="3831940">campaign.</span> <span m="3833110">Free</span> <span m="3833350">iPad.</span> <span m="3834040">Everybody</span> <span m="3834330">wants a</span> <span m="3834400">free</span> <span m="3834640">iPad, even though</span> <span m="3834880">I don't know anyone</span> <span m="3835293">who's</span> <span m="3835706">ever won a</span> <span m="3836120">free iPad.</span> <span m="3836730">The</span> <span m="3836970">click</span> <span m="3837150">on</span> <span m="3837240">this.</span> <span m="3837690">They're</span> <span m="3838000">there.</span> <span m="3838230">It's</span> <span m="3838460">in the</span> <span m="3838880">phishing</span> <span m="3839200">email,</span> <span m="3839485">so and so forth.</span> <span m="3839770">This</span> <span m="3839950">part's</span> <span m="3840200">not</span> <span m="3840410">hard.</span> </p>
<p><span m="3841330">So</span> <span m="3841510">what's</span> <span m="3841700">going</span> <span m="3841790">to</span> <span m="3841830">happen?</span> <span m="3843030">So</span> <span m="3843810">this</span> <span m="3844200">is</span> <span m="3844350">actually</span> <span m="3844800">going</span> <span m="3845160">to</span> <span m="3847090">cause</span> <span m="3847420">the</span> <span m="3847510">browser</span> <span m="3850430">to</span> <span m="3850750">generate</span> <span m="3854300">a</span> <span m="3854360">DNS</span> <span m="3854970">request</span> <span m="3859780">to</span> <span m="3860140">attacker.com</span> <span m="3865560">because</span> <span m="3865860">this</span> <span m="3866060">page</span> <span m="3866540">has</span> <span m="3866720">some</span> <span m="3866900">objects</span> <span m="3867390">that</span> <span m="3867540">refer</span> <span m="3868000">to</span> <span m="3869410">some</span> <span m="3869860">objects  that</span> <span m="3870320">live in</span> <span m="3870480">attacker.com.</span> <span m="3870950">The</span> <span m="3871280">browser's</span> <span m="3871670">going to</span> <span m="3871760">say</span> <span m="3871850">I never</span> <span m="3872110">seen</span> <span m="3872480">this</span> <span m="3872630">domain</span> <span m="3872920">before.</span> <span m="3874810">Let me</span> <span m="3875000">send</span> <span m="3875240">the</span> <span m="3875320">DNS</span> <span m="3875670">resolution</span> <span m="3876090">request</span> <span m="3876560">to</span> <span m="3876840">attacker.com.</span> </p>
<p><span m="3878370">So</span> <span m="3878540">what's</span> <span m="3878710">going</span> <span m="3878820">to end</span> <span m="3878880">up</span> <span m="3879020">happening</span> <span m="3879750">is</span> <span m="3879930">that</span> <span m="3880360">the</span> <span m="3880900">attackers</span> <span m="3881530">DNS</span> <span m="3881960">server is</span> <span m="3882370">going</span> <span m="3882570">to</span> <span m="3882660">respond</span> <span m="3883220">to</span> <span m="3883290">that</span> <span m="3883490">request.</span> <span m="3885090">But</span> <span m="3885720">it's</span> <span m="3885960">going</span> <span m="3886210">to</span> <span m="3886340">respond</span> <span m="3886970">with</span> <span m="3887110">a</span> <span m="3887180">DNS</span> <span m="3888200">result</span> <span m="3889000">that</span> <span m="3889100">has</span> <span m="3889280">a</span> <span m="3889320">very</span> <span m="3889720">short</span> <span m="3890190">time</span> <span m="3890500">to</span> <span m="3890600">live.</span> <span m="3891630">OK?</span> <span m="3892210">Meaning</span> <span m="3893020">that</span> <span m="3893600">the</span> <span m="3893680">browser</span> <span m="3894090">will</span> <span m="3894260">think</span> <span m="3894540">that it's</span> <span m="3894800">only</span> <span m="3895090">valid</span> <span m="3895500">for</span> <span m="3895660">a</span> <span m="3895690">very</span> <span m="3896110">short</span> <span m="3896550">period</span> <span m="3896880">of</span> <span m="3896990">time</span> <span m="3898300">before</span> <span m="3898750">it</span> <span m="3898800">has</span> <span m="3898950">to</span> <span m="3899030">go</span> <span m="3899220">out</span> <span m="3899410">and revalidate</span> <span m="3900050">that.</span> <span m="3900400">OK?</span> </p>
<p><span m="3902070">So</span> <span m="3904000">in</span> <span m="3904050">other</span> <span m="3904170">words,</span> <span m="3907500">the</span> <span m="3908770">attacker</span> <span m="3909110">response</span> <span m="3916870">has</span> <span m="3917050">a</span> <span m="3917120">small</span> <span m="3917520">DTL.</span> <span m="3920600">OK,</span> <span m="3920900">fine.</span> <span m="3921260">So</span> <span m="3921600">the</span> <span m="3921730">user</span> <span m="3922700">gets</span> <span m="3922980">the</span> <span m="3923020">response</span> <span m="3923530">back.</span> <span m="3923990">The</span> <span m="3924770">malicious</span> <span m="3925150">website</span> <span m="3925680">is</span> <span m="3925770">now</span> <span m="3925960">running</span> <span m="3926250">on</span> <span m="3926340">the</span> <span m="3926410">user</span> <span m="3926670">side.</span> <span m="3927460">Meanwhile,</span> <span m="3928640">while</span> <span m="3928930">the</span> <span m="3929040">user's</span> <span m="3929330">interacting</span> <span m="3929640">with</span> <span m="3929770">the</span> <span m="3929840">sight,</span> <span m="3930580">the</span> <span m="3931330">attacker</span> <span m="3933080">is</span> <span m="3933230">going</span> <span m="3933410">to</span> <span m="3933480">configure</span> <span m="3933940">the</span> <span m="3934060">DNS</span> <span m="3934580">server</span> <span m="3935860">that</span> <span m="3936380">he</span> <span m="3936490">controls.</span> </p>
<p><span m="3937310">The</span> <span m="3937380">attacker</span> <span m="3937750">is</span> <span m="3937840">going</span> <span m="3938060">to</span> <span m="3938280">bind</span> <span m="3940710">the</span> <span m="3942100">attacker.com</span> <span m="3942580">name</span> <span m="3945390">to</span> <span m="3946820">victim.com's</span> <span m="3950280">IP</span> <span m="3950660">address.</span> <span m="3956600">Right?</span> <span m="3957260">So</span> <span m="3957440">what</span> <span m="3957580">that</span> <span m="3957770">means</span> <span m="3958120">is</span> <span m="3958240">that</span> <span m="3958500">now</span> <span m="3959970">if</span> <span m="3960160">the</span> <span m="3960290">user's</span> <span m="3960960">browser</span> <span m="3961500">ask</span> <span m="3962050">for</span> <span m="3962420">a</span> <span m="3962530">domain</span> <span m="3962860">name</span> <span m="3963000">resolution</span> <span m="3963540">for</span> <span m="3963650">something</span> <span m="3964060">that</span> <span m="3964600">resides</span> <span m="3965040">in</span> <span m="3965130">attacker.com,</span> <span m="3965600">it's</span> <span m="3966410">actually</span> <span m="3966730">going to get</span> <span m="3966920">some</span> <span m="3967200">internal</span> <span m="3967910">address</span> <span m="3969260">to</span> <span m="3969460">victim.com.</span> </p>
<p><span m="3970152">This</span> <span m="3971510">is</span> <span m="3971630">actually</span> <span m="3971910">very</span> <span m="3972160">subtle.</span> <span m="3972750">Now</span> <span m="3972960">why</span> <span m="3973270">can</span> <span m="3973450">the</span> <span m="3973700">attacker's</span> <span m="3974140">DNS</span> <span m="3974820">resolver</span> <span m="3975070">do that?</span> <span m="3975720">Because</span> <span m="3976070">the</span> <span m="3976180">attacker</span> <span m="3976470">configures</span> <span m="3976910">it to</span> <span m="3977185">do so.</span> <span m="3978530">The</span> <span m="3978630">attacker's</span> <span m="3979110">DNS</span> <span m="3979470">server</span> <span m="3979690">does</span> <span m="3979830">not</span> <span m="3979970">have</span> <span m="3980100">to</span> <span m="3980220">consult</span> <span m="3980880">victim.com</span> <span m="3981120">to</span> <span m="3982070">do</span> <span m="3982200">this</span> <span m="3982390">rebinding.</span> </p>
<p><span m="3983640">So</span> <span m="3983780">perhaps,</span> <span m="3984110">you</span> <span m="3984200">can</span> <span m="3984330">see</span> <span m="3984480">some</span> <span m="3984610">of the</span> <span m="3984875">outline in the</span> <span m="3985140">attack</span> <span m="3985440">now.</span> <span m="3985970">So</span> <span m="3986100">what</span> <span m="3986170">will</span> <span m="3986290">happen</span> <span m="3986630">is</span> <span m="3986750">that</span> <span m="3988950">the</span> <span m="3989350">website</span> <span m="3992450">wants</span> <span m="3992850">to</span> <span m="3993460">fetch</span> <span m="3993730">a</span> <span m="3993770">new</span> <span m="3993940">object</span> <span m="4001780">via,</span> <span m="4002120">let's</span> <span m="4002380">say,</span> <span m="4003820">AJAX.</span> <span m="4007480">And</span> <span m="4007800">it</span> <span m="4008030">thinks</span> <span m="4008350">that</span> <span m="4008880">that</span> <span m="4009260">AJAX</span> <span m="4009670">request</span> <span m="4010300">is</span> <span m="4010400">going</span> <span m="4010530">to</span> <span m="4010590">go</span> <span m="4010950">to</span> <span m="4011570">attacker.com</span> <span m="4012020">somewhere</span> <span m="4012850">externally.</span> <span m="4013520">But</span> <span m="4013790">this</span> <span m="4014130">AJAX</span> <span m="4014570">request</span> <span m="4015840">actually</span> <span m="4016290">goes</span> <span m="4019950">to</span> <span m="4020450">victim.com.</span> </p>
<p><span m="4025800">And</span> <span m="4025900">the</span> <span m="4026010">reason</span> <span m="4026270">why</span> <span m="4026440">that's</span> <span m="4027120">bad</span> <span m="4027220">is</span> <span m="4027250">because</span> <span m="4027600">now</span> <span m="4027950">we've</span> <span m="4028110">got</span> <span m="4028320">this</span> <span m="4028530">code on</span> <span m="4028960">appliance</span> <span m="4029430">side</span> <span m="4030040">that</span> <span m="4030240">resides</span> <span m="4031200">on</span> <span m="4031640">the</span> <span m="4032310">attacker.com</span> <span m="4032910">web page</span> <span m="4034590">that's</span> <span m="4034780">actually</span> <span m="4035560">accessing</span> <span m="4036270">now</span> <span m="4036920">data</span> <span m="4037680">that</span> <span m="4037980">is</span> <span m="4038100">from</span> <span m="4038250">a</span> <span m="4038300">different</span> <span m="4038660">origin</span> <span m="4039070">from</span> <span m="4039320">victim.com.</span> <span m="4040990">So</span> <span m="4041150">once</span> <span m="4041520">this</span> <span m="4041730">step</span> <span m="4041960">of</span> <span m="4042030">the</span> <span m="4042130">attack</span> <span m="4042480">completes,</span> <span m="4043150">then</span> <span m="4043630">the</span> <span m="4043740">attacker.com web page</span> <span m="4045090">can</span> <span m="4045860">send</span> <span m="4046150">that</span> <span m="4046330">contact</span> <span m="4046620">back to</span> <span m="4046910">the</span> <span m="4047010">server</span> <span m="4047370">using</span> <span m="4047660">[INAUDIBLE]</span> <span m="4048050">or do</span> <span m="4048290">other</span> <span m="4048570">things</span> <span m="4048810">like</span> <span m="4049020">that.</span> <span m="4050600">So</span> <span m="4050700">does</span> <span m="4050830">this</span> <span m="4051020">attack</span> <span m="4051550">make</span> <span m="4051740">sense?</span> </p>
<p><span m="4052942">AUDIENCE:</span> <span m="4053280">Wouldn't it be</span> <span m="4053570">more</span> <span m="4053880">sensible</span> <span m="4054190">to do the</span> <span m="4054595">attack</span> <span m="4055000">the other way</span> <span m="4055780">around?</span> <span m="4056560">So</span> <span m="4056820">to</span> <span m="4057400">[INAUDIBLE]</span> <span m="4057760">victim.com</span> <span m="4058120">to the</span> <span m="4058592">attackers</span> <span m="4060008">IP</span> <span m="4060480">address.</span> <span m="4061900">Because</span> <span m="4062155">that way</span> <span m="4062410">you're the</span> <span m="4062850">same origin</span> <span m="4063210">as</span> <span m="4063380">victim.com</span> <span m="4063940">so you can get</span> <span m="4064420">all</span> <span m="4065010">the</span> <span m="4065310">cookies</span> <span m="4065570">and such.</span> </p>
<p><span m="4067710">PROFESSOR: Yeah,</span> <span m="4068330">so</span> <span m="4068630">that would</span> <span m="4068980">work, too,</span> <span m="4069410">as</span> <span m="4069630">well.</span> <span m="4070330">So</span> <span m="4070530">what's</span> <span m="4070740">nice</span> <span m="4071010">about</span> <span m="4071920">this</span> <span m="4072340">though</span> <span m="4073030">is</span> <span m="4073490">that,</span> <span m="4073850">presumably,</span> <span m="4076440">this</span> <span m="4076650">allows</span> <span m="4076950">you o do</span> <span m="4077180">nice</span> <span m="4077470">things</span> <span m="4077750">like</span> <span m="4077930">port</span> <span m="4078210">scanning</span> <span m="4078550">and</span> <span m="4078640">stuff</span> <span m="4078850">like</span> <span m="4079020">that.</span> <span m="4079380">I mean,</span> <span m="4079530">your</span> <span m="4079820">approach</span> <span m="4080080">will</span> <span m="4080560">work,</span> <span m="4081030">right.</span> <span m="4081500">But</span> <span m="4081630">I</span> <span m="4081720">think</span> <span m="4081970">here</span> <span m="4083460">the</span> <span m="4083570">reason</span> <span m="4083850">why</span> <span m="4084020">you</span> <span m="4084370">do--</span> </p>
<p><span m="4084680">AUDIENCE: [INAUDIBLE].</span> </p>
<p><span m="4086280">PROFESSOR: Because,</span> <span m="4086760">essentially,</span> <span m="4087200">you</span> <span m="4087280">can</span> <span m="4087440">do</span> <span m="4087610">things</span> <span m="4087970">like</span> <span m="4088860">constantly</span> <span m="4089320">rebind</span> <span m="4090310">what</span> <span m="4090460">attacker.com</span> <span m="4090820">points</span> <span m="4091460">to</span> <span m="4091500">to</span> <span m="4092070">different</span> <span m="4092520">machine</span> <span m="4093490">names</span> <span m="4093700">and</span> <span m="4093860">different</span> <span m="4094180">ports</span> <span m="4094640">inside</span> <span m="4095680">of</span> <span m="4095850">victim.com's</span> <span m="4096120">network.</span> <span m="4097700">So</span> <span m="4097770">then,</span> <span m="4097830">you</span> <span m="4097910">can,</span> <span m="4098010">sort</span> <span m="4098170">of,</span> <span m="4098240">step</span> <span m="4098630">through.</span> <span m="4099060">So</span> <span m="4099270">in other words,</span> <span m="4100140">let's</span> <span m="4100319">say</span> <span m="4100470">that</span> <span m="4100710">the</span> <span m="4101050">attacker.com</span> <span m="4101420">web page</span> <span m="4102240">always</span> <span m="4102620">thinks</span> <span m="4102830">it's</span> <span m="4103060">going</span> <span m="4103470">to</span> <span m="4105800">attacker.com</span> <span m="4108899">and</span> <span m="4109680">issuing</span> <span m="4111340">an</span> <span m="4111479">AJAX</span> <span m="4111760">request</span> <span m="4112090">there.</span> </p>
<p><span m="4112540">So</span> <span m="4112840">every</span> <span m="4113149">time</span> <span m="4113970">the</span> <span m="4114029">DNS</span> <span m="4114399">server</span> <span m="4114670">rebinds,</span> <span m="4115270">it</span> <span m="4115620">[INAUDIBLE]</span> <span m="4115750">to some</span> <span m="4116359">different</span> <span m="4116750">IP</span> <span m="4117140">address</span> <span m="4117910">inside</span> <span m="4118165">of</span> <span m="4118420">victim.com's</span> <span m="4118770">network.</span> <span m="4120500">So it can</span> <span m="4120649">just, sort</span> <span m="4121104">of, step through the</span> <span m="4121560">IP</span> <span m="4121810">addresses</span> <span m="4122000">one</span> <span m="4122109">by</span> <span m="4122430">one</span> <span m="4122930">and see</span> <span m="4123109">if</span> <span m="4123490">anybody's</span> <span m="4123910">responding</span> <span m="4124710">to</span> <span m="4124840">those</span> <span m="4125000">requests.</span> </p>
<p><span m="4127369">AUDIENCE: But</span> <span m="4127819">the</span> <span m="4129020">client,</span> <span m="4130165">the</span> <span m="4130630">user</span> <span m="4131095">you're attacking,</span> <span m="4131560">doesn't</span> <span m="4132025">necessarily</span> <span m="4132490">have inside</span> <span m="4132955">access to</span> <span m="4133420">victim.com's</span> <span m="4133885">network.</span> </p>
<p><span m="4135280">PROFESSOR:</span> <span m="4135750">So</span> <span m="4136170">what</span> <span m="4136450">this</span> <span m="4136600">attack,</span> <span m="4136960">typically,</span> <span m="4137330">ensues</span> <span m="4137550">is</span> <span m="4137910">that</span> <span m="4138580">there</span> <span m="4138859">are</span> <span m="4139069">certain</span> <span m="4139359">firewall</span> <span m="4139839">rules</span> <span m="4140319">that</span> <span m="4140390">would</span> <span m="4140540">prevent</span> <span m="4141500">attacker.com</span> <span m="4141960">from</span> <span m="4142490">outside</span> <span m="4142950">the</span> <span m="4143010">network</span> <span m="4143400">from</span> <span m="4143790">actually</span> <span m="4144420">looking</span> <span m="4144750">through</span> <span m="4144880">each</span> <span m="4145109">one</span> <span m="4145270">of</span> <span m="4145310">the</span> <span m="4145430">IP</span> <span m="4145689">addresses</span> <span m="4145970">inside</span> <span m="4146395">of victim.com.</span> <span m="4147670">However,</span> <span m="4147880">if</span> <span m="4147990">you're</span> <span m="4148120">inside</span> <span m="4148620">corp.net--</span> <span m="4148939">if you're</span> <span m="4149270">inside</span> <span m="4149810">the</span> <span m="4149899">corporate</span> <span m="4150260">firewall,</span> <span m="4150700">let's</span> <span m="4150920">say--</span> <span m="4151540">then</span> <span m="4151920">machines</span> <span m="4152149">often</span> <span m="4152450">do</span> <span m="4152630">have</span> <span m="4152810">the</span> <span m="4152910">ability</span> <span m="4153279">to</span> <span m="4155060">contact</span> <span m="4155956">[INAUDIBLE].</span> </p>
<p><span m="4156412">AUDIENCE: [INAUDIBLE].</span> </p>
<p><span m="4157300">PROFESSOR: Yeah,</span> <span m="4157510">yeah.</span> <span m="4158430">Exactly.</span> </p>
<p><span m="4160270">AUDIENCE: Does</span> <span m="4160730">this</span> <span m="4161190">work</span> <span m="4161650">over</span> <span m="4162110">HTTPS?</span> </p>
<p><span m="4163312">PROFESSOR: Ah, so</span> <span m="4163680">that's</span> <span m="4164000">an</span> <span m="4164080">interesting</span> <span m="4164450">question.</span> <span m="4165270">So</span> <span m="4165670">HTTPS</span> <span m="4167180">has</span> <span m="4167560">these</span> <span m="4168330">keys.</span> <span m="4169960">So</span> <span m="4171229">the</span> <span m="4171340">way</span> <span m="4171729">you'd</span> <span m="4172119">have to get this to work with</span> <span m="4172510">HTTPS</span> <span m="4173090">is if</span> <span m="4173340">somehow,</span> <span m="4174380">for</span> <span m="4174590">example,</span> <span m="4176870">if</span> <span m="4177510">attacker.com</span> <span m="4178465">could--</span> <span m="4181359">let me think</span> <span m="4181774">about this.</span> </p>
<p><span m="4184005">Yeah,</span> <span m="4184460">it's</span> <span m="4184819">interesting</span> <span m="4186090">because,</span> <span m="4186609">presumably,</span> <span m="4187990">if</span> <span m="4188250">you were</span> <span m="4188520">using</span> <span m="4188819">HTTPS,</span> <span m="4189060">then when you</span> <span m="4189910">sent</span> <span m="4190260">out</span> <span m="4190914">this</span> <span m="4191229">Ajax</span> <span m="4191450">request,</span> <span m="4192880">the victim machine</span> <span m="4193290">wouldn't</span> <span m="4193510">have</span> <span m="4194050">the</span> <span m="4194189">attackers</span> <span m="4195120">HTTPS</span> <span m="4195375">keys.</span> <span m="4196830">So</span> <span m="4197610">the</span> <span m="4197690">cryptography</span> <span m="4197860">would</span> <span m="4198090">fail</span> <span m="4198380">somehow.</span> <span m="4200910">So</span> <span m="4201260">I think</span> <span m="4201610">HTTPS</span> <span m="4201890">would stop</span> <span m="4202170">that.</span> </p>
<p><span m="4202270">AUDIENCE: Or if the</span> <span m="4203490">the</span> <span m="4203990">victim</span> <span m="4204990">only</span> <span m="4205280">has things</span> <span m="4205760">on</span> <span m="4206240">HTTPS?</span> </p>
<p><span m="4207590">PROFESSOR:</span> <span m="4208040">Yeah.</span> <span m="4208570">So</span> <span m="4208890">I</span> <span m="4208980">think that</span> <span m="4209370">would</span> <span m="4209861">stop it.</span> </p>
<p><span m="4214771">AUDIENCE:</span> <span m="4215262">If you</span> <span m="4215753">configure</span> <span m="4216244">the</span> <span m="4216735">[INAUDIBLE]</span> <span m="4220663">use the</span> <span m="4221154">initial</span> <span m="4221645">or receiving</span> <span m="4222136">result</span> <span m="4222627">[INAUDIBLE]?</span> </p>
<p><span m="4224100">PROFESSOR: That's</span> <span m="4224591">a good</span> <span m="4225082">question.</span> <span m="4225580">I'm actually not sure</span> <span m="4225820">about</span> <span m="4226060">that.</span> <span m="4226280">So</span> <span m="4226530">actually,</span> <span m="4226960">a</span> <span m="4227070">lot</span> <span m="4227280">of</span> <span m="4227340">these</span> <span m="4227735">attacks</span> <span m="4228130">were dependant</span> <span m="4228550">on the devil</span> <span m="4228970">in the details,</span> <span m="4229390">right?</span> <span m="4229810">So</span> <span m="4229980">I'm not actually</span> <span m="4230460">sure</span> <span m="4230730">how</span> <span m="4231050">that wold</span> <span m="4231300">work.</span> </p>
<p><span m="4231772">AUDIENCE:</span> <span m="4232244">It uses the</span> <span m="4232716">first domain.</span> </p>
<p><span m="4233190">PROFESSOR: It would</span> <span m="4233540">use the first</span> <span m="4234031">domain?</span> <span m="4234522">OK.</span> <span m="4237468">Yep?</span> </p>
<p><span m="4237960">AUDIENCE: So</span> <span m="4238500">why</span> <span m="4238730">can</span> <span m="4239100">the attacker</span> <span m="4240030">respond</span> <span m="4240485">with</span> <span m="4240940">the</span> <span m="4241970">victims</span> <span m="4243040">IP</span> <span m="4243170">address in the</span> <span m="4243610">first</span> <span m="4244050">place?</span> </p>
<p><span m="4246540">PROFESSOR:</span> <span m="4247040">So</span> <span m="4247430">why</span> <span m="4247590">can't--</span> <span m="4247770">what do you mean?</span> </p>
<p><span m="4248110">AUDIENCE:</span> <span m="4248500">[INAUDIBLE].</span> <span m="4250900">Why</span> <span m="4251190">has the</span> <span m="4251480">attacker team</span> <span m="4253000">[INAUDIBLE]</span> <span m="4253630">has to</span> <span m="4255245">respond</span> <span m="4255690">with the</span> <span m="4256135">attacker's</span> <span m="4256580">IP</span> <span m="4257030">[INAUDIBLE]?</span> </p>
<p><span m="4257810">PROFESSOR: Oh,</span> <span m="4258165">well, yeah.</span> <span m="4258860">Since the</span> <span m="4259040">attacker</span> <span m="4259520">has to,</span> <span m="4259630">somehow,</span> <span m="4260000">get</span> <span m="4260240">it's</span> <span m="4261080">own</span> <span m="4261270">code on the victim</span> <span m="4261590">machine</span> <span m="4261970">first</span> <span m="4262750">before</span> <span m="4263015">it can</span> <span m="4263280">then</span> <span m="4263350">start</span> <span m="4263600">doing</span> <span m="4263790">this</span> <span m="4263980">nonsense</span> <span m="4264490">where</span> <span m="4264940">it's</span> <span m="4265090">looking</span> <span m="4265330">inside</span> <span m="4265630">the</span> <span m="4265680">network.</span> <span m="4266300">So</span> <span m="4266560">it's</span> <span m="4266820">that</span> <span m="4267010">initial</span> <span m="4267390">step</span> <span m="4267640">where</span> <span m="4268130">it has to</span> <span m="4268435">put</span> <span m="4268740">that</span> <span m="4268950">code on the</span> <span m="4269290">victims</span> <span m="4269630">machine.</span> </p>
<p><span m="4270806">All</span> <span m="4271300">right,</span> <span m="4271510">so</span> <span m="4271660">in the</span> <span m="4271920">interest of time,</span> <span m="4272050">let's keep</span> <span m="4272100">moving forward.</span> <span m="4273000">But come</span> <span m="4273330">see me</span> <span m="4273680">after</span> <span m="4274550">class</span> <span m="4274880">if</span> <span m="4275331">you want</span> <span m="4275782">to</span> <span m="4276233">follow up the</span> <span m="4276684">question.</span> <span m="4279100">So</span> <span m="4280320">that's</span> <span m="4280820">the</span> <span m="4281075">DNS</span> <span m="4281330">rebinding</span> <span m="4281790">attack.</span> <span m="4282560">So</span> <span m="4282730">how</span> <span m="4282910">can</span> <span m="4283110">you</span> <span m="4283750">fix</span> <span m="4284080">this?</span> <span m="4284610">So</span> <span m="4284960">one</span> <span m="4285250">way you could</span> <span m="4285390">fix</span> <span m="4285610">it is</span> <span m="4285800">so</span> <span m="4285920">that you</span> <span m="4286120">modify</span> <span m="4286770">your</span> <span m="4287210">client-side</span> <span m="4287650">DNS</span> <span m="4288190">resolver</span> <span m="4289040">so</span> <span m="4289210">that</span> <span m="4289440">external</span> <span m="4289960">host</span> <span m="4290295">names</span> <span m="4290630">can</span> <span m="4291420">never</span> <span m="4291700">resolve</span> <span m="4292120">to internal</span> <span m="4292400">IP</span> <span m="4292690">address.</span> </p>
<p><span m="4293600">It's,</span> <span m="4293750">kind of,</span> <span m="4293870">goofy</span> <span m="4294250">that</span> <span m="4294500">someone</span> <span m="4294790">outside</span> <span m="4295045">of your</span> <span m="4295300">network</span> <span m="4295590">should</span> <span m="4295700">be</span> <span m="4295790">able</span> <span m="4296020">to</span> <span m="4296380">create</span> <span m="4296990">a DNS binding for</span> <span m="4297350">something</span> <span m="4297610">inside</span> <span m="4297895">of your</span> <span m="4298180">network.</span> <span m="4298840">That's</span> <span m="4299370">the</span> <span m="4299550">most</span> <span m="4299740">straightforward</span> <span m="4300240">solution.</span> <span m="4300740">You</span> <span m="4301050">could</span> <span m="4301150">also</span> <span m="4301420">imagine</span> <span m="4302010">that</span> <span m="4302240">the</span> <span m="4302310">browser</span> <span m="4302830">could do something</span> <span m="4303310">called</span> <span m="4303550">DNS</span> <span m="4303970">pinning.</span> <span m="4304620">Whereby,</span> <span m="4305040">if</span> <span m="4305460">it</span> <span m="4305750">receives</span> <span m="4306180">a</span> <span m="4306220">DNS</span> <span m="4306580">resolution</span> <span m="4307080">record,</span> <span m="4307760">then</span> <span m="4307940">it</span> <span m="4308020">will</span> <span m="4308240">always</span> <span m="4308820">treat</span> <span m="4309140">that</span> <span m="4309360">record</span> <span m="4310080">as</span> <span m="4310350">valid</span> <span m="4311040">for,</span> <span m="4311240">let's</span> <span m="4311480">say,</span> <span m="4311630">30</span> <span m="4311970">minutes,</span> <span m="4312640">regardless</span> <span m="4313550">of</span> <span m="4313650">whether</span> <span m="4313870">it has</span> <span m="4313920">a</span> <span m="4314130">short</span> <span m="4314540">TTL</span> <span m="4315000">set</span> <span m="4315450">inside</span> <span m="4315820">it because</span> <span m="4316150">that</span> <span m="4316300">also</span> <span m="4316740">prevents</span> <span m="4317040">the</span> <span m="4317350">attack,</span> <span m="4317580">as</span> <span m="4317690">well.</span> </p>
<p><span m="4318380">That</span> <span m="4318780">solution</span> <span m="4319220">is a little</span> <span m="4319360">bit</span> <span m="4319480">tricky</span> <span m="4319800">because</span> <span m="4320140">there</span> <span m="4320260">are</span> <span m="4320320">some</span> <span m="4320520">sites that</span> <span m="4320830">actually,</span> <span m="4321180">intentionally,</span> <span m="4321485">use</span> <span m="4322050">dynamic</span> <span m="4322490">DNS</span> <span m="4322960">and do things like</span> <span m="4323420">load</span> <span m="4323680">balancing and</span> <span m="4324170">stuff</span> <span m="4324400">like</span> <span m="4324560">that.</span> <span m="4325170">So</span> <span m="4325180">the</span> <span m="4325260">first solution</span> <span m="4325740">is</span> <span m="4326020">probably the</span> <span m="4326170">better</span> <span m="4326380">one.</span> <span m="4328230">OK,</span> <span m="4328720">so</span> <span m="4329130">here</span> <span m="4329480">is,</span> <span m="4330840">sort</span> <span m="4331110">of,</span> <span m="4331200">a</span> <span m="4331545">fun</span> <span m="4332070">attack.</span> <span m="4333240">So</span> <span m="4334030">we've</span> <span m="4334160">talked</span> <span m="4334490">about</span> <span m="4334760">a</span> <span m="4334830">lot</span> <span m="4335200">of</span> <span m="4338020">resources</span> <span m="4338680">that</span> <span m="4338810">the</span> <span m="4338930">origin</span> <span m="4339340">protects--</span> <span m="4340060">the</span> <span m="4340385">the same origin policy</span> <span m="4340710">protects.</span> <span m="4340930">So</span> <span m="4341010">what</span> <span m="4341180">about</span> <span m="4341570">pixels?</span> </p>
<p><span m="4345230">So</span> <span m="4345560">how</span> <span m="4345780">does the</span> <span m="4345880">same</span> <span m="4346090">origin</span> <span m="4346260">policy</span> <span m="4346600">protect</span> <span m="4346880">pixels?</span> <span m="4347520">Well as</span> <span m="4347780">it</span> <span m="4347900">turns</span> <span m="4348260">out,</span> <span m="4349120">pixels</span> <span m="4349610">don't</span> <span m="4349900">really</span> <span m="4350330">have an</span> <span m="4350690">origin.</span> <span m="4351350">So</span> <span m="4351620">each</span> <span m="4351910">frame</span> <span m="4352360">gets</span> <span m="4352820">its own</span> <span m="4352900">little</span> <span m="4353210">bounding</span> <span m="4353660">box.</span> <span m="4355040">Just</span> <span m="4355315">a square,</span> <span m="4355590">basically.</span> <span m="4356480">So</span> <span m="4356790">a frame</span> <span m="4357370">can</span> <span m="4357560">draw</span> <span m="4357960">wherever it</span> <span m="4358440">wants</span> <span m="4359040">on</span> <span m="4359230">that</span> <span m="4359440">square.</span> </p>
<p><span m="4360710">So</span> <span m="4360850">this</span> <span m="4361030">is,</span> <span m="4361140">actually,</span> <span m="4361850">a</span> <span m="4361920">problem</span> <span m="4362530">because</span> <span m="4362760">what</span> <span m="4362910">this</span> <span m="4363070">means</span> <span m="4363470">is</span> <span m="4363610">that</span> <span m="4364020">a</span> <span m="4364160">parent</span> <span m="4364710">frame</span> <span m="4365410">can</span> <span m="4365700">draw</span> <span m="4366400">atop</span> <span m="4366990">of</span> <span m="4367070">it's</span> <span m="4367160">child</span> <span m="4367425">frame.</span> <span m="4369030">So</span> <span m="4369180">this</span> <span m="4369350">can</span> <span m="4369470">lead</span> <span m="4369660">to</span> <span m="4369730">some</span> <span m="4369870">very</span> <span m="4370480">insidious</span> <span m="4370860">attacks.</span> <span m="4371250">So</span> <span m="4371360">let's</span> <span m="4371620">say</span> <span m="4372330">that</span> <span m="4372720">the</span> <span m="4372990">attacker</span> <span m="4375200">creates</span> <span m="4376570">some</span> <span m="4376870">page.</span> </p>
<p><span m="4379040">And</span> <span m="4379230">let's</span> <span m="4379550">say,</span> <span m="4380890">inside</span> <span m="4381550">of</span> <span m="4381600">that</span> <span m="4381840">page,</span> <span m="4382620">the</span> <span m="4382770">attacker</span> <span m="4382980">says</span> <span m="4383180">click</span> <span m="4384090">to</span> <span m="4386280">win</span> <span m="4386550">the</span> <span m="4386850">iPad.</span> <span m="4389420">The</span> <span m="4389510">very</span> <span m="4389780">same</span> <span m="4390250">standard</span> <span m="4390500">thing.</span> <span m="4391690">So</span> <span m="4391730">this</span> <span m="4391860">is</span> <span m="4391970">the</span> <span m="4392100">parent</span> <span m="4392480">frame.</span> <span m="4393090">Now</span> <span m="4393370">what</span> <span m="4393530">the</span> <span m="4393630">parent</span> <span m="4393980">frame</span> <span m="4394180">can</span> <span m="4394360">do</span> <span m="4394610">is</span> <span m="4394680">actually</span> <span m="4394960">create</span> <span m="4395320">a</span> <span m="4395370">child</span> <span m="4395635">frame</span> <span m="4397630">that</span> <span m="4397970">is</span> <span m="4398120">actually</span> <span m="4398810">the</span> <span m="4399700">Facebook</span> <span m="4401370">Like</span> <span m="4402160">button</span> <span m="4402840">frame.</span> </p>
<p><span m="4407850">So</span> <span m="4408060">Facebook</span> <span m="4409810">allows</span> <span m="4410350">you</span> <span m="4410730">to</span> <span m="4411330">run</span> <span m="4411510">this</span> <span m="4411620">little</span> <span m="4411790">piece</span> <span m="4412050">of</span> <span m="4412140">Facebook</span> <span m="4412630">code</span> <span m="4413030">you</span> <span m="4413330">can</span> <span m="4413680">put on your</span> <span m="4414000">page.</span> <span m="4414210">You know, if the</span> <span m="4414440">user</span> <span m="4414810">clicks</span> <span m="4415100">Like,</span> <span m="4415730">then</span> <span m="4415870">that</span> <span m="4416030">means</span> <span m="4416340">that</span> <span m="4416470">it'll</span> <span m="4416590">go</span> <span m="4416750">on</span> <span m="4416890">Facebook</span> <span m="4417310">and</span> <span m="4417420">say,</span> <span m="4417720">hey,</span> <span m="4417970">the</span> <span m="4418210">user likes</span> <span m="4418290">the particular</span> <span m="4419180">page.</span> <span m="4420640">So</span> <span m="4420950">we've</span> <span m="4421270">got</span> <span m="4421560">this</span> <span m="4422120">child</span> <span m="4422610">frame</span> <span m="4422800">over</span> <span m="4423000">here.</span> <span m="4426120">That</span> <span m="4426560">actually</span> <span m="4426800">turned</span> <span m="4426890">out</span> <span m="4427110">remarkably</span> <span m="4427470">well.</span> </p>
<p><span m="4427560">Anyway,</span> <span m="4429360">so</span> <span m="4429580">you've</span> <span m="4429880">got this</span> <span m="4430130">Like</span> <span m="4430760">thing</span> <span m="4430960">over</span> <span m="4431130">here.</span> <span m="4431480">Now  what</span> <span m="4431940">the</span> <span m="4432020">attacker</span> <span m="4432410">can</span> <span m="4432630">do</span> <span m="4433390">is</span> <span m="4433570">actually</span> <span m="4435480">overlay</span> <span m="4436600">this</span> <span m="4436880">frame</span> <span m="4438200">on</span> <span m="4438460">top</span> <span m="4438940">of</span> <span m="4439070">the</span> <span m="4439170">click</span> <span m="4440110">to get the</span> <span m="4440510">free</span> <span m="4440790">iPad</span> <span m="4441070">and</span> <span m="4441340">also</span> <span m="4442290">make</span> <span m="4442660">this</span> <span m="4442910">invisible.</span> <span m="4444720">So</span> <span m="4444880">CSS</span> <span m="4444960">let's</span> <span m="4445110">you</span> <span m="4445230">do that.</span> <span m="4446252">So</span> <span m="4446650">what's</span> <span m="4446950">going</span> <span m="4447040">to</span> <span m="4447090">happen?</span> <span m="4447730">As</span> <span m="4447920">we've</span> <span m="4448040">already</span> <span m="4448290">established,</span> <span m="4448830">everybody</span> <span m="4449180">wants</span> <span m="4449370">a free</span> <span m="4449500">iPad.</span> </p>
<p><span m="4450260">So</span> <span m="4450910">the</span> <span m="4451280">user's</span> <span m="4451480">going to go to</span> <span m="4451540">this</span> <span m="4451660">site,</span> <span m="4452370">click</span> <span m="4452730">on</span> <span m="4452930">thing--</span> <span m="4453870">this</span> <span m="4454260">area</span> <span m="4454740">of</span> <span m="4454870">the</span> <span m="4454950">screen--</span> <span m="4456400">thinking</span> <span m="4456780">that</span> <span m="4457090">they're</span> <span m="4457210">going</span> <span m="4457330">to</span> <span m="4457580">click</span> <span m="4457820">here and get the</span> <span m="4458050">free</span> <span m="4458210">iPad.</span> <span m="4458900">But</span> <span m="4459010">in</span> <span m="4459100">reality,</span> <span m="4459650">they're</span> <span m="4459750">clicking</span> <span m="4460110">the</span> <span m="4460230">Like</span> <span m="4460515">button</span> <span m="4461060">that</span> <span m="4461200">they</span> <span m="4461330">can't</span> <span m="4461650">see</span> <span m="4462430">that's</span> <span m="4462810">invisible.</span> <span m="4463130">It's</span> <span m="4463260">like layered</span> <span m="4463610">atop the</span> <span m="4463925">C</span> <span m="4464240">index.</span> </p>
<p><span m="4465560">So</span> <span m="4465660">what</span> <span m="4465770">that</span> <span m="4465930">means</span> <span m="4466230">is that</span> <span m="4466390">now</span> <span m="4467120">maybe</span> <span m="4467540">they</span> <span m="4467640">go</span> <span m="4467750">check</span> <span m="4467960">their</span> <span m="4468070">Facebook</span> <span m="4468420">profile,</span> <span m="4468920">and</span> <span m="4469130">they've</span> <span m="4469470">liked</span> <span m="4469910">attacker.com.</span> <span m="4470310">You know,</span> <span m="4470510">and</span> <span m="4471170">they</span> <span m="4471440">don't</span> <span m="4471790">remember</span> <span m="4471940">how that</span> <span m="4472090">happened.</span> <span m="4473300">So</span> <span m="4473690">this</span> <span m="4473840">is</span> <span m="4473980">actually</span> <span m="4474470">called</span> <span m="4474890">click jacking</span> <span m="4475150">attack</span> <span m="4476050">because</span> <span m="4476950">you</span> <span m="4477110">can</span> <span m="4477190">imagine</span> <span m="4477550">you</span> <span m="4477640">can do</span> <span m="4477810">all</span> <span m="4478060">kinds</span> <span m="4478290">of</span> <span m="4478380">evil</span> <span m="4478640">things</span> <span m="4479060">here.</span> <span m="4479410">So</span> <span m="4479470">you can</span> <span m="4479550">imagine</span> <span m="4481960">you</span> <span m="4482130">could</span> <span m="4482280">steal</span> <span m="4482530">passwords</span> <span m="4483170">this</span> <span m="4483390">way.</span> </p>
<p><span m="4483610">You could get</span> <span m="4484020">raw</span> <span m="4484330">input.</span> <span m="4484770">I mean,</span> <span m="4485380">it's</span> <span m="4485580">madness.</span> <span m="4486270">So</span> <span m="4486480">once</span> <span m="4486580">again,</span> <span m="4486870">this</span> <span m="4487420">happens</span> <span m="4487940">because</span> <span m="4489070">the</span> <span m="4489290">parent,</span> <span m="4489760">essentially,</span> <span m="4490710">gets</span> <span m="4490970">the</span> <span m="4491160">right</span> <span m="4491600">to</span> <span m="4491750">draw</span> <span m="4492650">over</span> <span m="4493200">anything</span> <span m="4493460">that's</span> <span m="4493720">inside</span> <span m="4494150">this</span> <span m="4494310">bounding</span> <span m="4494630">box.</span> <span m="4496140">So</span> <span m="4497225">does</span> <span m="4497680">that</span> <span m="4498030">attack</span> <span m="4498260">make</span> <span m="4498430">sense?</span> <span m="4500084">Yeah.</span> </p>
<p><span m="4501398">AUDIENCE: [INAUDIBLE],</span> <span m="4501840">what do you mean</span> <span m="4502240">the parent</span> <span m="4503040">gets to draw</span> <span m="4503452">over</span> <span m="4503864">anything</span> <span m="4504276">[INAUDIBLE]?</span> </p>
<p><span m="4506400">PROFESSOR: So what</span> <span m="4506580">I'm</span> <span m="4506710">trying</span> <span m="4506930">to</span> <span m="4506970">indicate</span> <span m="4507360">here</span> <span m="4508900">is</span> <span m="4509430">that,</span> <span m="4510050">visually</span> <span m="4510470">speaking,</span> <span m="4511250">what</span> <span m="4511510">the</span> <span m="4512130">user</span> <span m="4512500">just</span> <span m="4512740">sees</span> <span m="4513280">is</span> <span m="4513490">this.</span> </p>
<p><span m="4514576">AUDIENCE: Oh,</span> <span m="4514970">that's the</span> <span m="4515315">parent frames.</span> </p>
<p><span m="4516040">PROFESSOR: Yeah,</span> <span m="4516220">this</span> <span m="4516390">is</span> <span m="4516460">the</span> <span m="4516540">parent</span> <span m="4517030">frame.</span> <span m="4517140">That's right.</span> <span m="4517380">This  is the</span> <span m="4517780">child frame.</span> <span m="4517930">So visually</span> <span m="4518410">speaking,</span> <span m="4518890">the</span> <span m="4519040">user just</span> <span m="4519210">sees</span> <span m="4519530">this.</span> <span m="4520120">But</span> <span m="4520330">using</span> <span m="4521220">the</span> <span m="4521300">miracle</span> <span m="4521575">of</span> <span m="4521850">my</span> <span m="4522040">da Vinci</span> <span m="4522370">style</span> <span m="4522670">drawing</span> <span m="4522970">techniques,</span> <span m="4523790">this</span> <span m="4524000">is</span> <span m="4524120">actually</span> <span m="4524470">overlaid</span> <span m="4524950">atop</span> <span m="4525350">this</span> <span m="4525750">transparently.</span> <span m="4527340">So</span> <span m="4527720">that's</span> <span m="4528030">the child</span> <span m="4528270">frame.</span> <span m="4528720">That's</span> <span m="4529170">the parent frame.</span> </p>
<p><span m="4530970">OK</span> <span m="4531220">so,</span> <span m="4531330">there's</span> <span m="4531520">a</span> <span m="4531570">couple</span> <span m="4531810">different</span> <span m="4532040">solutions--</span> <span m="4532380">you</span> <span m="4532470">can</span> <span m="4532560">imagine--</span> <span m="4533290">for</span> <span m="4533440">solving</span> <span m="4533850">this.</span> <span m="4534575">The</span> <span m="4534910">first</span> <span m="4535200">solution</span> <span m="4536170">is</span> <span m="4536560">to</span> <span m="4539020">use a</span> <span m="4539410">frame</span> <span m="4539870">busting</span> <span m="4540090">code.</span> <span m="4543850">So</span> <span m="4544130">you</span> <span m="4544270">can</span> <span m="4544380">actually</span> <span m="4544840">use</span> <span m="4545830">JavaScript</span> <span m="4546550">expressions</span> <span m="4547200">to</span> <span m="4547280">figure</span> <span m="4547680">out</span> <span m="4548150">if</span> <span m="4548370">you have been</span> <span m="4548780">put</span> <span m="4548950">into</span> <span m="4549470">a frame</span> <span m="4550910">by</span> <span m="4551060">someone</span> <span m="4551430">else.</span> </p>
<p><span m="4551920">So</span> <span m="4552420">like, one of</span> <span m="4552850">these</span> <span m="4552890">tests</span> <span m="4553360">is</span> <span m="4554320">you</span> <span m="4554450">compare</span> <span m="4555560">the</span> <span m="4555670">reference</span> <span m="4556850">self</span> <span m="4559490">to</span> <span m="4560000">top.</span> <span m="4561750">So</span> <span m="4561970">in the</span> <span m="4562120">JavaScript</span> <span m="4562650">world,</span> <span m="4563180">self</span> <span m="4563820">refers</span> <span m="4564330">to</span> <span m="4564440">frame</span> <span m="4564740">that</span> <span m="4565040">you</span> <span m="4565170">yourself</span> <span m="4565690">aren't</span> <span m="4565910">in.</span> <span m="4566800">Top</span> <span m="4567440">refers</span> <span m="4567910">to</span> <span m="4568010">the</span> <span m="4568120">frame</span> <span m="4568510">at</span> <span m="4568590">the</span> <span m="4568710">top</span> <span m="4568990">of the</span> <span m="4569270">frame</span> <span m="4569530">hierarchy.</span> <span m="4570700">So</span> <span m="4570970">if</span> <span m="4571050">you</span> <span m="4571160">do</span> <span m="4571360">this</span> <span m="4571600">test</span> <span m="4572220">and you</span> <span m="4572380">find</span> <span m="4572690">out that self</span> <span m="4573160">is</span> <span m="4573330">not equal to</span> <span m="4573710">top,</span> <span m="4574570">then</span> <span m="4574630">you</span> <span m="4574780">realize</span> <span m="4575200">that you are</span> <span m="4575460">a child</span> <span m="4576100">frame.</span> <span m="4576570">And then you can</span> <span m="4576800">refuse</span> <span m="4577095">to load</span> <span m="4577390">or do</span> <span m="4577700">things</span> <span m="4578130">like</span> <span m="4578320">this.</span> </p>
<p><span m="4579060">So</span> <span m="4579180">this,</span> <span m="4579340">in</span> <span m="4579450">fact,</span> <span m="4579830">is what</span> <span m="4579860">will</span> <span m="4579990">happen</span> <span m="4580580">if</span> <span m="4580720">you</span> <span m="4580840">try</span> <span m="4581050">to</span> <span m="4581170">create</span> <span m="4581390">a</span> <span m="4581460">frame</span> <span m="4581900">for,</span> <span m="4582360">let's say,</span> <span m="4582470">CNN.com.</span> <span m="4583260">You</span> <span m="4583490">can actually</span> <span m="4583720">look</span> <span m="4583950">in</span> <span m="4584000">the</span> <span m="4584090">JavaScript</span> <span m="4584530">source</span> <span m="4584760">and</span> <span m="4584870">see</span> <span m="4585120">that</span> <span m="4585240">it</span> <span m="4585330">does</span> <span m="4585540">this</span> <span m="4585730">test</span> <span m="4586600">because</span> <span m="4586820">CNN.com</span> <span m="4586940">doesn't</span> <span m="4587820">want</span> <span m="4588010">other</span> <span m="4588250">people</span> <span m="4588560">taking</span> <span m="4588760">credit</span> <span m="4589030">for it's</span> <span m="4589250">content.</span> <span m="4589980">So</span> <span m="4590170">it</span> <span m="4590230">only</span> <span m="4590670">wants</span> <span m="4591006">to be</span> <span m="4591342">the</span> <span m="4591680">top most  frame. So</span> <span m="4591780">that's</span> <span m="4591910">one</span> <span m="4592080">solution</span> <span m="4592440">you can use</span> <span m="4592760">here.</span> </p>
<p><span m="4593550">The</span> <span m="4593660">other</span> <span m="4593830">solution</span> <span m="4594125">that you can</span> <span m="4594420">use</span> <span m="4594700">here</span> <span m="4595070">is</span> <span m="4595200">also</span> <span m="4595430">to</span> <span m="4595510">have</span> <span m="4595690">your</span> <span m="4595810">web</span> <span m="4596030">server</span> <span m="4597320">send</span> <span m="4597750">this</span> <span m="4597960">HTTP</span> <span m="4599370">response</span> <span m="4599890">hitter</span> <span m="4600700">called</span> <span m="4601070">x-frame</span> <span m="4601610">options.</span> <span m="4605180">So</span> <span m="4605380">when</span> <span m="4605670">the</span> <span m="4605740">web</span> <span m="4605970">server</span> <span m="4606270">returns</span> <span m="4606660">a</span> <span m="4606690">response,</span> <span m="4607520">it</span> <span m="4607600">can</span> <span m="4607830">set</span> <span m="4608190">this</span> <span m="4608370">header.</span> <span m="4608690">And</span> <span m="4609010">it</span> <span m="4609160">can</span> <span m="4609240">basically</span> <span m="4609630">say,</span> <span m="4609980">hey,</span> <span m="4610450">browser,</span> <span m="4610870">do</span> <span m="4611100">not</span> <span m="4611380">allow</span> <span m="4611670">anyone</span> <span m="4612330">to</span> <span m="4612430">put</span> <span m="4612720">my</span> <span m="4612860">content</span> <span m="4613540">inside</span> <span m="4613930">of a</span> <span m="4614090">frame.</span> <span m="4614740">So that allows</span> <span m="4615170">the</span> <span m="4615250">browser</span> <span m="4615520">to do the</span> <span m="4615740">enforcement.</span> </p>
<p><span m="4616830">So</span> <span m="4616950">that's</span> <span m="4617710">pretty</span> <span m="4617900">straightforward.</span> <span m="4619540">So</span> <span m="4620070">there's</span> <span m="4620230">a</span> <span m="4620280">bunch</span> <span m="4620540">of</span> <span m="4620820">other,</span> <span m="4621700">sort</span> <span m="4621880">of,</span> <span m="4621950">crazy</span> <span m="4622460">attacks</span> <span m="4622870">that you can</span> <span m="4623080">launch.</span> <span m="4624330">Here's</span> <span m="4624590">another</span> <span m="4624920">one</span> <span m="4625090">that's</span> <span m="4625240">actually</span> <span m="4625550">pretty</span> <span m="4625770">funny.</span> <span m="4626150">So</span> <span m="4626180">as</span> <span m="4626260">I was</span> <span m="4626470">mentioning</span> <span m="4626790">before,</span> <span m="4628470">the</span> <span m="4628570">fact</span> <span m="4628860">that</span> <span m="4628950">we're</span> <span m="4629430">now</span> <span m="4629630">living in a</span> <span m="4629680">web that's</span> <span m="4630030">internationalized</span> <span m="4631180">actually</span> <span m="4631540">mean</span> <span m="4632340">that</span> <span m="4633460">there's</span> <span m="4633600">all</span> <span m="4633740">these</span> <span m="4633970">issues</span> <span m="4634290">that come</span> <span m="4634715">up</span> <span m="4635140">involving</span> <span m="4635580">name</span> <span m="4635950">and</span> <span m="4636320">how</span> <span m="4636520">you</span> <span m="4636630">represent</span> <span m="4637050">host names.</span> </p>
<p><span m="4637900">So</span> <span m="4638090">for</span> <span m="4638280">example,</span> <span m="4639140">let's</span> <span m="4639450">say</span> <span m="4640090">that</span> <span m="4640980">you</span> <span m="4641190">see</span> <span m="4641710">this</span> <span m="4641900">letter</span> <span m="4642100">right</span> <span m="4642310">here.</span> <span m="4643600">So</span> <span m="4643800">what</span> <span m="4643950">does</span> <span m="4644120">this</span> <span m="4644230">look like?</span> <span m="4644600">This</span> <span m="4644985">looks</span> <span m="4645370">like a C,</span> <span m="4645610">right?</span> <span m="4646120">What</span> <span m="4646260">is</span> <span m="4646480">this?</span> <span m="4647490">A</span> <span m="4647620">C</span> <span m="4647920">in</span> <span m="4648220">ASCII</span> <span m="4649170">in</span> <span m="4649280">the</span> <span m="4649380">Latin</span> <span m="4649680">alphabet?</span> <span m="4650460">Or</span> <span m="4650690">is</span> <span m="4650910">this</span> <span m="4650990">a</span> <span m="4651265">C in</span> <span m="4651540">Cyrillic?</span> <span m="4653250">Hard</span> <span m="4653500">to say,</span> <span m="4654300">right?</span> <span m="4654870">So</span> <span m="4654960">you</span> <span m="4655080">can</span> <span m="4655250">end</span> <span m="4655490">up</span> <span m="4655610">having</span> <span m="4655940">these</span> <span m="4656080">really</span> <span m="4656340">strange</span> <span m="4656770">attacks</span> <span m="4657490">where</span> <span m="4657890">attackers</span> <span m="4658850">will</span> <span m="4659110">register</span> <span m="4662130">a</span> <span m="4662220">domain</span> <span m="4662545">name,</span> <span m="4662870">like</span> <span m="4663330">cats.com,</span> <span m="4664210">for example.</span> <span m="4665350">But</span> <span m="4665510">this</span> <span m="4665970">is a</span> <span m="4666390">Cyrillic</span> <span m="4666810">C.</span> </p>
<p><span m="4668340">So</span> <span m="4668650">users</span> <span m="4669330">will</span> <span m="4669540">go</span> <span m="4669850">to</span> <span m="4669910">this</span> <span m="4670140">domain.</span> <span m="4671210">They</span> <span m="4671510">might</span> <span m="4671610">click on</span> <span m="4671800">it or</span> <span m="4671860">whatever</span> <span m="4672140">thinking</span> <span m="4672490">they're</span> <span m="4672610">going</span> <span m="4672880">to</span> <span m="4673380">Latin</span> <span m="4673720">alphabet</span> <span m="4674075">C,</span> <span m="4675140">cats.com.</span> <span m="4675840">But</span> <span m="4676020">instead,</span> <span m="4676350">they're</span> <span m="4676430">going</span> <span m="4676640">to an</span> <span m="4676750">attacker</span> <span m="4677310">one.</span> <span m="4678450">And</span> <span m="4678590">then,</span> <span m="4678780">all</span> <span m="4678970">kinds</span> <span m="4679200">of</span> <span m="4679280">madness</span> <span m="4679540">can happen</span> <span m="4680010">from there,</span> <span m="4680660">as</span> <span m="4680800">well.</span> </p>
<p><span m="4681950">So</span> <span m="4682400">you might</span> <span m="4682650">have heard</span> <span m="4682945">of attacks</span> <span m="4683240">like</span> <span m="4683350">this</span> <span m="4683530">are like</span> <span m="4683770">typo</span> <span m="4684130">squatting</span> <span m="4684550">attacks</span> <span m="4685240">where</span> <span m="4685720">people</span> <span m="4686130">register</span> <span m="4686445">for names</span> <span m="4687310">like</span> <span m="4690910">F-C-E</span> <span m="4691560">book.com.</span> <span m="4696440">This</span> <span m="4696590">is</span> <span m="4696700">a</span> <span m="4696760">common</span> <span m="4697280">fumble</span> <span m="4697580">finger</span> <span m="4697950">typing</span> <span m="4698315">for</span> <span m="4698680">Facebook.com.</span> <span m="4700170">So</span> <span m="4700850">if</span> <span m="4701000">you</span> <span m="4701230">control</span> <span m="4701700">this,</span> <span m="4702110">you're</span> <span m="4702320">going</span> <span m="4702600">to get</span> <span m="4702990">a</span> <span m="4703100">ton</span> <span m="4703170">of  traffic</span> <span m="4703745">from</span> <span m="4704000">people</span> <span m="4704220">who</span> <span m="4704360">think</span> <span m="4704560">they're</span> <span m="4704680">going</span> <span m="4704970">to</span> <span m="4705040">Facebook.com.</span> </p>
<p><span m="4706456">So</span> <span m="4706930">there's</span> <span m="4707140">a</span> <span m="4707210">bunch</span> <span m="4707440">of</span> <span m="4707580">different,</span> <span m="4707960">sort</span> <span m="4708170">of,</span> <span m="4708310">wacky</span> <span m="4708770">attacks</span> <span m="4709130">that you can</span> <span m="4709490">launch</span> <span m="4710110">through</span> <span m="4710900">the</span> <span m="4711310">domain</span> <span m="4711710">registry</span> <span m="4712120">system</span> <span m="4713030">that</span> <span m="4713230">are</span> <span m="4713850">tricky</span> <span m="4714130">to defend</span> <span m="4714410">from</span> <span m="4714835">first</span> <span m="4715260">principles</span> <span m="4715685">because</span> <span m="4716110">how are you going to prevent</span> <span m="4716390">users</span> <span m="4716780">from</span> <span m="4717010">mistyping</span> <span m="4717180">things,</span> <span m="4718100">for</span> <span m="4718200">example?</span> <span m="4718540">Or</span> <span m="4718970">how</span> <span m="4719250">would the</span> <span m="4719590">browser</span> <span m="4720110">indicate</span> <span m="4720600">to the</span> <span m="4720730">user,</span> <span m="4721390">hey,</span> <span m="4721700">this</span> <span m="4721880">is</span> <span m="4722220">Cyrillic?</span> <span m="4723110">Is</span> <span m="4723230">the</span> <span m="4723310">browser</span> <span m="4723650">going</span> <span m="4723930">to alert</span> <span m="4724110">the</span> <span m="4724300">user</span> <span m="4724680">every</span> <span m="4724980">time</span> <span m="4725260">Cyrillic</span> <span m="4725700">fonts</span> <span m="4726200">are included?</span> </p>
<p><span m="4726840">That's</span> <span m="4727110">going</span> <span m="4727210">to</span> <span m="4727270">make</span> <span m="4727430">people</span> <span m="4727760">angry</span> <span m="4728160">if</span> <span m="4728280">they</span> <span m="4728380">actually</span> <span m="4728780">use</span> <span m="4729070">Cyrillic</span> <span m="4729450">as</span> <span m="4729830">their</span> <span m="4730010">native font.</span> <span m="4731220">So</span> <span m="4731450">it's</span> <span m="4731560">not</span> <span m="4731830">quite</span> <span m="4732090">clear,</span> <span m="4732690">technologically</span> <span m="4733040">speaking,</span> <span m="4734040">how</span> <span m="4734220">we</span> <span m="4734330">deal</span> <span m="4734540">with</span> <span m="4734630">some</span> <span m="4734800">of</span> <span m="4734860">those</span> <span m="4735050">issues.</span> <span m="4736940">So</span> <span m="4738810">yeah,</span> <span m="4739000">there's</span> <span m="4739170">a</span> <span m="4739220">bunch</span> <span m="4739470">of</span> <span m="4739610">other</span> <span m="4740260">security</span> <span m="4740870">issues</span> <span m="4741430">that</span> <span m="4741570">are very subtle</span> <span m="4741990">here.</span> </p>
<p><span m="4742790">One</span> <span m="4742990">thing that's</span> <span m="4743400">interesting</span> <span m="4743770">is</span> <span m="4744555">if</span> <span m="4745020">you</span> <span m="4745130">look</span> <span m="4745220">at</span> <span m="4745380">plugins.</span> <span m="4747670">So</span> <span m="4747880">how</span> <span m="4748040">do</span> <span m="4748140">plugins</span> <span m="4748480">treat</span> <span m="4748810">the</span> <span m="4748930">same</span> <span m="4749580">origin</span> <span m="4749900">policy?</span> <span m="4750900">Well</span> <span m="4751700">plugins</span> <span m="4751810">often</span> <span m="4752060">have</span> <span m="4753210">very</span> <span m="4753570">subtle</span> <span m="4754280">incompatibilities</span> <span m="4755460">with</span> <span m="4755660">the</span> <span m="4755820">rest</span> <span m="4756120">of the</span> <span m="4756210">browser</span> <span m="4756680">with respect</span> <span m="4757150">to the</span> <span m="4757280">same origin.</span> <span m="4757850">So</span> <span m="4757980">for</span> <span m="4758120">example,</span> <span m="4758580">if you look</span> <span m="4758820">at</span> <span m="4758880">a</span> <span m="4758940">Java</span> <span m="4759380">plug-in,</span> <span m="4760480">Java,</span> <span m="4761370">oftentimes,</span> <span m="4762080">assumes</span> <span m="4763080">that</span> <span m="4764040">different</span> <span m="4764690">host</span> <span m="4765020">names</span> <span m="4765890">that</span> <span m="4766130">have</span> <span m="4766530">the</span> <span m="4766850">same</span> <span m="4767290">IP</span> <span m="4767670">address</span> <span m="4768730">actually</span> <span m="4769210">have the</span> <span m="4769490">same</span> <span m="4769770">origin.</span> </p>
<p><span m="4771420">That's</span> <span m="4771620">actually</span> <span m="4771900">a</span> <span m="4772020">pretty</span> <span m="4772440">big</span> <span m="4772930">deviation</span> <span m="4773960">from</span> <span m="4774090">the</span> <span m="4774180">standard</span> <span m="4774580">interpretation</span> <span m="4775310">of</span> <span m="4775380">the</span> <span m="4775460">same</span> <span m="4775720">origin</span> <span m="4775970">policy</span> <span m="4776970">because</span> <span m="4777220">this</span> <span m="4777450">means</span> <span m="4777770">that if</span> <span m="4778150">you</span> <span m="4778470">have</span> <span m="4778690">something</span> <span m="4779210">like</span> <span m="4781270">x.y.com</span> <span m="4784234">and,</span> <span m="4784730">lets</span> <span m="4785220">say,</span> <span m="4785620">z.y.com,</span> <span m="4787635">if</span> <span m="4788070">they</span> <span m="4788350">map</span> <span m="4788610">onto</span> <span m="4788900">the</span> <span m="4789010">same</span> <span m="4789310">IP</span> <span m="4789650">address,</span> <span m="4790640">then</span> <span m="4790900">Java will</span> <span m="4791130">consider</span> <span m="4791440">these</span> <span m="4791680">to</span> <span m="4791810">be</span> <span m="4792080">in</span> <span m="4792350">the</span> <span m="4792480">same</span> <span m="4792980">origin,</span> <span m="4793940">which</span> <span m="4794090">is</span> <span m="4794180">a</span> <span m="4794240">problem</span> <span m="4794970">if,</span> <span m="4795110">for</span> <span m="4795210">example,</span> <span m="4795580">this</span> <span m="4795830">site</span> <span m="4795910">gets</span> <span m="4796210">[? owned ?]</span> <span m="4796520">but</span> <span m="4796650">this</span> <span m="4796800">one</span> <span m="4796990">doesn't.</span> </p>
<p><span m="4798390">So</span> <span m="4798640">there's</span> <span m="4798790">a</span> <span m="4798820">bunch</span> <span m="4799030">of</span> <span m="4799130">other</span> <span m="4799650">corner</span> <span m="4799970">cases</span> <span m="4800650">involving</span> <span m="4801100">plug-ins.</span> <span m="4801420">You</span> <span m="4801690">can refer</span> <span m="4802120">to the</span> <span m="4803150">tangled</span> <span m="4803460">web</span> <span m="4803750">to</span> <span m="4803770">see</span> <span m="4804010">some</span> <span m="4804170">more</span> <span m="4804450">about</span> <span m="4805050">some</span> <span m="4805190">of</span> <span m="4805240">those</span> <span m="4805430">types</span> <span m="4805670">of</span> <span m="4805780">things.</span> <span m="4807910">So</span> <span m="4808140">the</span> <span m="4808230">final</span> <span m="4808570">thing</span> <span m="4808750">that</span> <span m="4808880">I</span> <span m="4808950">want</span> <span m="4809200">to</span> <span m="4809280">discuss--</span> <span m="4809740">you</span> <span m="4809810">can</span> <span m="4809940">see</span> <span m="4810050">the</span> <span m="4810170">lecture</span> <span m="4810560">notes</span> <span m="4810650">for</span> <span m="4810780">more</span> <span m="4810970">examples</span> <span m="4811480">of</span> <span m="4811920">a</span> <span m="4812080">crazy</span> <span m="4812510">Attacks</span> <span m="4812880">that</span> <span m="4813320">people</span> <span m="4813570">can launch--</span> <span m="4814030">but</span> <span m="4814130">the</span> <span m="4814240">final</span> <span m="4814570">thing</span> <span m="4814760">that I want to</span> <span m="4814940">discuss</span> <span m="4815600">is</span> <span m="4816450">this</span> <span m="4818070">screen</span> <span m="4818440">sharing</span> <span m="4818750">attack.</span> </p>
<p><span m="4819680">So</span> <span m="4819940">HTML</span> <span m="4820200">5</span> <span m="4820560">actually</span> <span m="4820830">define</span> <span m="4821270">this</span> <span m="4821510">NEW</span> <span m="4821730">API</span> <span m="4822680">by</span> <span m="4822900">which</span> <span m="4823340">a</span> <span m="4823420">web</span> <span m="4823520">page</span> <span m="4824060">can</span> <span m="4824220">allow</span> <span m="4825040">all</span> <span m="4825340">the bits</span> <span m="4825420">in</span> <span m="4825740">it's</span> <span m="4826060">screen</span> <span m="4826630">to</span> <span m="4826730">be</span> <span m="4826850">shared</span> <span m="4827460">with</span> <span m="4827620">another</span> <span m="4827710">browser</span> <span m="4828560">or</span> <span m="4828700">shared</span> <span m="4829170">with</span> <span m="4829290">the</span> <span m="4829370">server.</span> <span m="4830630">This</span> <span m="4830820">seems</span> <span m="4831070">like</span> <span m="4831210">a</span> <span m="4831270">really</span> <span m="4831530">cool</span> <span m="4831800">idea</span> <span m="4832230">because</span> <span m="4832485">now</span> <span m="4832740">I  can do</span> <span m="4833010">collaborative</span> <span m="4833500">foo.</span> <span m="4834170">We</span> <span m="4834390">can</span> <span m="4834770">collaborate</span> <span m="4835560">on a</span> <span m="4835740">document</span> <span m="4836210">at</span> <span m="4836300">the</span> <span m="4836380">same</span> <span m="4836680">time. And</span> <span m="4837050">it's</span> <span m="4837220">exciting</span> <span m="4837650">because</span> <span m="4837780">we live in</span> <span m="4838030">the</span> <span m="4838100">future.</span> </p>
<p><span m="4838405">But</span> <span m="4838710">what's</span> <span m="4839020">funny</span> <span m="4839320">about</span> <span m="4839630">this</span> <span m="4840160">is</span> <span m="4840360">that,</span> <span m="4840950">when</span> <span m="4841080">they</span> <span m="4841220">designed</span> <span m="4841700">this</span> <span m="4841850">API,</span> <span m="4843090">and</span> <span m="4843190">it's a</span> <span m="4843320">very</span> <span m="4843580">new</span> <span m="4843840">API,</span> <span m="4844420">they</span> <span m="4844560">apparently</span> <span m="4845140">didn't</span> <span m="4845520">think</span> <span m="4845700">about</span> <span m="4846020">same</span> <span m="4846330">origin</span> <span m="4846710">policies</span> <span m="4847560">at</span> <span m="4847990">all.</span> <span m="4849260">So</span> <span m="4849430">what</span> <span m="4849610">that</span> <span m="4849850">means</span> <span m="4850250">is</span> <span m="4850360">that</span> <span m="4850810">if</span> <span m="4851090">you</span> <span m="4851220">have</span> <span m="4851430">some</span> <span m="4851630">page</span> <span m="4853880">that</span> <span m="4854070">has</span> <span m="4854340">multiple</span> <span m="4854790">frames,</span> <span m="4856560">then any</span> <span m="4857070">one</span> <span m="4857230">of</span> <span m="4857290">these</span> <span m="4857510">frames,</span> <span m="4857775">if</span> <span m="4858040">they</span> <span m="4858200">are</span> <span m="4858320">granted</span> <span m="4858950">permission</span> <span m="4859730">to</span> <span m="4859970">take</span> <span m="4860180">a</span> <span m="4860250">screenshot</span> <span m="4862050">of</span> <span m="4862200">your</span> <span m="4862310">monitor,</span> <span m="4863290">it</span> <span m="4863400">can</span> <span m="4863560">take</span> <span m="4863760">an</span> <span m="4863840">entire</span> <span m="4864540">screen</span> <span m="4864840">shot</span> <span m="4865040">of</span> <span m="4865100">the</span> <span m="4865220">entire</span> <span m="4865860">thing,</span> <span m="4866840">regardless</span> <span m="4867630">of</span> <span m="4867770">what</span> <span m="4868130">origin</span> <span m="4868960">that</span> <span m="4869170">other</span> <span m="4869440">content's</span> <span m="4869910">coming</span> <span m="4870260">from.</span> </p>
<p><span m="4871200">So</span> <span m="4871470">this</span> <span m="4871620">is,</span> <span m="4871720">actually, a</span> <span m="4872080">pretty</span> <span m="4872650">devastating</span> <span m="4873330">flaw</span> <span m="4874340">in</span> <span m="4874760">the</span> <span m="4874860">same</span> <span m="4875190">origin</span> <span m="4875620">policy.</span> <span m="4876890">So</span> <span m="4877050">there's</span> <span m="4877230">some</span> <span m="4877390">pretty</span> <span m="4877750">obvious</span> <span m="4878180">fixes</span> <span m="4878310">you can</span> <span m="4878640">think</span> <span m="4878800">about.</span> <span m="4879250">So</span> <span m="4879310">for</span> <span m="4879490">example,</span> <span m="4880240">if</span> <span m="4880440">this</span> <span m="4880680">person's</span> <span m="4881100">given</span> <span m="4881820">screenshot</span> <span m="4882370">capabilities,</span> <span m="4883500">only</span> <span m="4883660">let it</span> <span m="4883990">take</span> <span m="4884130">a</span> <span m="4884200">screenshot</span> <span m="4884660">of</span> <span m="4884740">this.</span> <span m="4885310">Right?</span> <span m="4885570">Not</span> <span m="4885710">this</span> <span m="4885900">whole</span> <span m="4886070">thing.</span> </p>
<p><span m="4886700">Why</span> <span m="4886990">didn't</span> <span m="4887310">the</span> <span m="4887390">browser</span> <span m="4887730">vendors</span> <span m="4888140">implement</span> <span m="4888420">it like</span> <span m="4888630">this?</span> <span m="4889010">Because</span> <span m="4889220">there's</span> <span m="4889420">such</span> <span m="4890480">pressure</span> <span m="4890980">to</span> <span m="4891280">compete</span> <span m="4891650">on</span> <span m="4891760">features,</span> <span m="4892410">and</span> <span m="4892910">to</span> <span m="4893410">innovate</span> <span m="4893500">on</span> <span m="4893730">features,</span> <span m="4894000">and</span> <span m="4894270">to get</span> <span m="4894630">that</span> <span m="4894830">next</span> <span m="4895200">new thing</span> <span m="4895410">out there.</span> <span m="4896150">So</span> <span m="4896320">for</span> <span m="4896420">example,</span> <span m="4896690">a</span> <span m="4896710">lot</span> <span m="4897010">of the</span> <span m="4897090">questions</span> <span m="4897580">that</span> <span m="4897660">people</span> <span m="4897910">were</span> <span m="4898060">asking</span> <span m="4899130">about</span> <span m="4899330">this</span> <span m="4899460">particular</span> <span m="4899790">lecture</span> <span m="4900200">online</span> <span m="4900360">[INAUDIBLE]</span> <span m="4900940">was</span> <span m="4901190">like,</span> <span m="4901600">well,</span> <span m="4901920">why</span> <span m="4902000">couldn't</span> <span m="4902370">you do</span> <span m="4902440">this?</span> <span m="4902910">Wouldn't</span> <span m="4903130">this</span> <span m="4903340">thing</span> <span m="4903450">make</span> <span m="4903680">more</span> <span m="4903850">sense?</span> </p>
<p><span m="4904210">It</span> <span m="4904350">seems</span> <span m="4904590">like</span> <span m="4904740">this</span> <span m="4904910">current</span> <span m="4905380">scheme</span> <span m="4905530">is brain</span> <span m="4905790">dead.</span> <span m="4906030">Wouldn't</span> <span m="4906170">this other</span> <span m="4906370">one be</span> <span m="4906470">better?</span> <span m="4907460">And</span> <span m="4907550">the answer</span> <span m="4907820">is, yes.</span> <span m="4908210">Everything,</span> <span m="4908710">yes. That's</span> <span m="4909080">exactly</span> <span m="4909360">correct.</span> <span m="4910850">Almost</span> <span m="4911580">anything</span> <span m="4912270">would be</span> <span m="4912490">better</span> <span m="4912730">than</span> <span m="4912960">this.</span> <span m="4913460">I'm ashamed</span> <span m="4913900">to</span> <span m="4913960">be</span> <span m="4914090">associated</span> <span m="4914720">with</span> <span m="4914870">this.</span> </p>
<p><span m="4916030">But</span> <span m="4916180">this</span> <span m="4916340">is</span> <span m="4916420">what</span> <span m="4916600">we</span> <span m="4916700">had.</span> <span m="4917220">So</span> <span m="4917690">what ends up</span> <span m="4917750">happening</span> <span m="4918170">is if</span> <span m="4918340">you</span> <span m="4918470">look</span> <span m="4918710">at</span> <span m="4919040">the</span> <span m="4919170">nuts</span> <span m="4919440">and</span> <span m="4919560">bolts</span> <span m="4919820">of</span> <span m="4919900">how</span> <span m="4920130">web</span> <span m="4920440">browsers</span> <span m="4920730">get</span> <span m="4920940">developed,</span> <span m="4921620">people</span> <span m="4921880">are a</span> <span m="4922120">little</span> <span m="4922260">bit</span> <span m="4922390">better about</span> <span m="4922600">security</span> <span m="4922950">now.</span> <span m="4923590">But  like,</span> <span m="4923820">with</span> <span m="4923940">the</span> <span m="4924010">screen</span> <span m="4924370">sharing</span> <span m="4924650">thing,</span> <span m="4924960">people were</span> <span m="4925250">so</span> <span m="4925920">pumped</span> <span m="4926820">to</span> <span m="4926930">get</span> <span m="4927230">this</span> <span m="4927430">thing</span> <span m="4927660">out</span> <span m="4927870">there,</span> <span m="4928290">they didn't</span> <span m="4928620">realize</span> <span m="4929330">that's it's</span> <span m="4929620">going to leak</span> <span m="4930310">all</span> <span m="4930650">the</span> <span m="4930880">bits</span> <span m="4931130">on</span> <span m="4931230">your</span> <span m="4931370">screen.</span> </p>
<p><span m="4932920">So</span> <span m="4933130">now</span> <span m="4933470">we're</span> <span m="4933910">at his</span> <span m="4934110">point</span> <span m="4934380">with</span> <span m="4934550">the</span> <span m="4934640">web</span> <span m="4935220">where--</span> <span m="4935540">I mean,</span> <span m="4935660">look</span> <span m="4935890">at</span> <span m="4935950">all</span> <span m="4936160">these</span> <span m="4936340">things</span> <span m="4936530">that we've</span> <span m="4936680">discussed</span> <span m="4937130">today.</span> <span m="4938310">So</span> <span m="4938490">if we were</span> <span m="4938760">going</span> <span m="4938860">to</span> <span m="4938930">start</span> <span m="4939280">from</span> <span m="4939410">scratch</span> <span m="4940200">and</span> <span m="4940410">come up</span> <span m="4940600">with</span> <span m="4940720">a</span> <span m="4940790">better</span> <span m="4941130">security</span> <span m="4941620">policy,</span> <span m="4942280">what</span> <span m="4942800">fraction</span> <span m="4943250">of</span> <span m="4943310">websites</span> <span m="4943890">that</span> <span m="4944040">you</span> <span m="4944080">have</span> <span m="4944330">today</span> <span m="4945020">are</span> <span m="4945160">going</span> <span m="4945320">to</span> <span m="4945410">actually</span> <span m="4945740">work?</span> <span m="4946870">Like,</span> <span m="4947020">approximately,</span> <span m="4947385">.2%</span> <span m="4948440">of them.</span> <span m="4949100">Right?</span> </p>
<p><span m="4949440">So</span> <span m="4949530">users</span> <span m="4949840">are</span> <span m="4950020">going to</span> <span m="4950090">complain.</span> <span m="4950440">And</span> <span m="4950790">this is</span> <span m="4950980">another</span> <span m="4951390">constant</span> <span m="4951790">story</span> <span m="4952050">with</span> <span m="4952220">security.</span> <span m="4953090">Once</span> <span m="4953270">you</span> <span m="4953360">give</span> <span m="4953720">users</span> <span m="4954100">a</span> <span m="4954170">feature,</span> <span m="4954830">it's</span> <span m="4955000">often</span> <span m="4955300">very</span> <span m="4955580">difficult</span> <span m="4956040">to</span> <span m="4956120">claw that</span> <span m="4956460">back,</span> <span m="4957060">even</span> <span m="4957505">if</span> <span m="4957950">that</span> <span m="4958180">feature</span> <span m="4958610">is</span> <span m="4958850">insecure.</span> <span m="4960280">So</span> <span m="4961000">today,</span> <span m="4961220">we</span> <span m="4961330">discussed</span> <span m="4961680">a</span> <span m="4961720">lot</span> <span m="4961970">of</span> <span m="4962050">different</span> <span m="4962180">things</span> <span m="4962450">about</span> <span m="4962680">the same</span> <span m="4962870">origin</span> <span m="4963120">policy and</span> <span m="4963480">stuff</span> <span m="4963690">like</span> <span m="4963860">that.</span> <span m="4964120">Next</span> <span m="4964450">lecture,</span> <span m="4964490">we'll</span> <span m="4964760">go into</span> <span m="4965055">some</span> <span m="4965590">more</span> <span m="4965720">depth</span> <span m="4965930">about</span> <span m="4966230">some of</span> <span m="4966530">those things we</span> <span m="4966830">talked about</span> <span m="4967130">[INAUDIBLE].</span> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>iTunes U (<a href="https://itunes.apple.com/us/itunes-u/id1017908130">MP4 - 183MB</a>)</li>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec08_300k.mp4">MP4 - 183MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/video-lectures/lecture-8-web-security-model/eRJ_r8WF1Y0.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","85");googletag.pubads().set("CRS_END","8");googletag.pubads().set("SESSION","F");googletag.pubads().set("YEAR","14");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
