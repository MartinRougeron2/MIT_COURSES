<!DOCTYPE html><html lang="en">
      
      
        
    
    
    
    

      
      
      <head>
        <meta charset="utf-8">
        <meta name="format-detection" content="telephone=no">  
        
        <title>Lecture 9: Securing Web Applications | Lecture Videos | Computer Systems Security | Electrical Engineering and Computer Science | MIT OpenCourseWare</title>
    <!-- Begin Automatic Metadata Insertion -->
    <meta content="6-858-computer-systems-security-fall-2014" name="WT.cg_n">
    <meta content="Lecture 9: Securing Web Applications" name="WT.cg_s">
    <meta content="In this lecture, Professor Mickens continues looking at how to build secure web applications." name="Description">
    <meta content="Zeldovich, Nickolai" name="Author">
    <meta content="6.858,content sanitization,XSS,cross-site scripting,SQL injection,session management,stateless cookie,Django,covert channel,Computer Design and Engineering,Software Design and Engineering" name="keywords">
    <meta content="6.858 Computer Systems Security | Lecture 9: Securing Web Applications" name="Search_Display">
    <meta content="Computer Design and Engineering" itemprop="about">
    <meta content="Software Design and Engineering" itemprop="about">
    <!-- End Automatic Metadata Insertion -->

	<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/grid.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/base.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/menu.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.bubblepopup.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/search.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/courses_new.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/jquery.jscrollpane.css">
<link title="default" rel="stylesheet" type="text/css" href="../../../common/styles/media_tabs.css">
	<link href="../../../common/xml/ocwcc.rdf" type="application/rdf+xml" rel="metadata">
	<link rel="canonical" href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-9-securing-web-applications/">
	<link rel="apple-touch-icon" href="../../../common/images/apple-touch-icon.png">
	
	
      
	
	<script type="text/javascript" src="../../../common/scripts/jquery.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-media-utils-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/ocw-offline.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.bubblepopup.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery-ui.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/jquery.jscrollpane.min.js"></script>
	<script type="text/javascript" src="../../../common/scripts/expandy.js"></script>
	<script type="text/javascript" src="../../../common/scripts/bubble-popup-offline.js"></script>
	
	
	
    <script type="text/javascript">
      $(document).ready(function() {
        $("#tabs").tabs();
        IpadScroller();
      });
    </script>
    
    
    
    
    
    
      
       
		 

        
        
        

        
        
        
        
        
        
        
        
        
      </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        
	

        <header id="top">
			<div id="grid">
				
				
					
<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d686561646572">
<div class="portletStaticText portlet-static-site-header">
<!--googleoff: index-->
<div class="grid_6 alpha" id="banner"><a href="https://ocw.mit.edu/"><img src="../../../common/images/ocw_mast.png" class="logo" alt="MIT OpenCourseWare, Massachusetts Institute of Technology"></a></div>
<div class="grid_6 omega" id="subscribe">
<aside class="module" aria-label="Connect with OCW">
<table class="social">
    <tbody>
        <tr>
            <td class="socialbutton"><a aria-label="Subscribe to the OCW Newsletter" href="https://ocw.mit.edu/subscribe/index.htm?utm_source=header"><img src="../../../common/images/trans.gif" alt="An icon depicting an envelope.">Subscribe to the OCW Newsletter</a></td>
            <td>
<a aria-label="Facebook" href="https://facebook.com/mitocw"><img src="../../../common/images/icon_fb.png" alt="Click to visit our Facebook page."></a>  <a aria-label="Instagram" href="https://www.instagram.com/mitocw/"><img src="https://ocw.mit.edu/images/icon_ig.png" alt="Click to visit our Instagram page."></a> <a aria-label="Twitter" href="https://twitter.com/mitocw"><img src="https://ocw.mit.edu/images/icon_twitter.png" alt="Click to visit our Twitter feed."></a><a aria-label="YouTube" href="https://www.youtube.com/mitocw" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_yt.png" alt="Click to visit our YouTube page."></a><span style="font-size: 12.208px;">   </span><a aria-label="Open Matters blog on WordPress" href="https://www.ocw-openmatters.org/" style="font-size: 12.208px;"><img src="https://ocw.mit.edu/images/icon_wp.png" alt="Click to visit our blog on WordPress."></a>
</td>
        </tr>
    </tbody>
</table>
</aside><nav aria-label="Help Links" class="helplinks">     <a aria-label="OCW Site Help" href="https://ocw.mit.edu/help">Help</a><span aria-hidden="true">|</span>     <a href="../../../common/about/contactus.htm">Contact Us</a>   </nav>
</div>
<div class="clear"> </div>
<!--googleon: index-->
</div>

</div>

<div id="portletwrapper-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75" class="portletWrapper kssattr-portlethash-6f63772e746f70706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a6d6567612d6d656e75">
<div class="portletStaticText portlet-static-mega-menu"><div><nav id="mega" class="grid_8 alpha" aria-label="Site">
<ul id="menu" role="presentation">
    <li id="menu_home">
<a href="https://ocw.mit.edu/" aria-label="Homepage"><img src="../../../common/images/top-nav_home.png" class="home_icon" alt="Click for site home page."></a><!-- Begin Home Item -->
</li>
    <!-- End Home Item -->
    <li id="drop_1" aria-label="Find Courses">
<a href="#" aria-hidden="true">FIND COURSES</a><!-- Begin 5 columns Item -->
    <div class="dropdown_5columns-a mega-courses">
    <div class="col_1a">
    <div class="row_1a">
<nav aria-labelledby="mm-find-courses-by">     <span id="mm-find-courses-by" class="nav" aria-hidden="true">Find courses by:</span>
    <ul class="find_by" role="presentation">
        <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Topic</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-number/">MIT Course Number</a></li>
        <li><a href="https://ocw.mit.edu/courses/find-by-department/">Department</a></li>
    </ul>
    </nav>     <nav aria-labelledby="mm-collections">     <span id="mm-collections" class="nav" aria-hidden="true">Collections</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Lectures</a></li>
        <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
        <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
        <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
        <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    </ul>
    </nav>     <nav class="col_1b" aria-labelledby="mm-translated-courses">     <span id="mm-translated-courses" class="nav" aria-hidden="true" style="line-height: 1.3;">Cross-Disciplinary Topic Lists</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/energy-courses">Energy</a></li>
        <li><a href="https://ocw.mit.edu/courses/entrepreneurship">Entrepreneurship</a></li>
        <li><a href="https://ocw.mit.edu/courses/environment-courses">Environment</a></li>
        <li><a href="https://ocw.mit.edu/courses/intro-programming">Introductory Programming</a></li>
        <li><a href="https://ocw.mit.edu/courses/life-sciences">Life Sciences</a></li>
        <li><a href="https://ocw.mit.edu/courses/transportation-courses">Transportation</a></li>
    </ul>
    </nav>
</div>
    <div class="row_1b"><nav aria-labelledby="mm-cross-disciplinary-topic-lists">     <span id="mm-cross-disciplinary-topic-lists" class="nav" aria-hidden="true">Translated Courses</span>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/translated-courses/traditional-chinese" aria-label="Traditional Chinese">繁體字 / Traditional Chinese</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/turkish" aria-label="Turkish">Türkçe / Turkish</a></li>
        <li><a href="https://ocw.mit.edu/courses/translated-courses/korean" aria-label="Korean">(비디오)한국 / Korean</a></li>
    </ul>
    </nav></div>
    </div>
    </div>
    </li>
    <li id="drop_2">
<a href="#" aria-label="For Educators">For Educators</a>
    <div class="dropdown_1column-a" style="width: 270px;"><nav aria-labelledby="mm-find-courses-by">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/chalk-radio-podcast">Chalk Radio Podcast</a></li>
        <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
        <li><a href="https://openlearning.mit.edu/campus/digital-innovations/">Residential Digital Innovations </a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    </ul>
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_3">
<a href="#" aria-hidden="true">Give Now</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="Donate">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
        <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
        <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
        <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
        <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
    </ul>
    </nav></div>
    </li>
    <li id="drop_4">
<a href="#" aria-hidden="true">About</a>
    <div class="dropdown_1column-a"><nav class="col_1" aria-label="About">
    <ul role="presentation">
        <li><a href="https://ocw.mit.edu/about/">About MIT OpenCourseWare</a></li>
        <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
        <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
        <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
        <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
        <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
    </ul>
    </nav></div>
    </li>
</ul>
</nav></div></div>

</div>





<!--googleoff: index-->
<script>
  (function() {
	var cx = '012626166551961672889:owjdpuboktq';
	var gcse = document.createElement('script');
	gcse.type = 'text/javascript';
	gcse.async = true;
	gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
	var s = document.getElementsByTagName('script')[0];
	s.parentNode.insertBefore(gcse, s);
  })();
  window.onload = function(){
	document.getElementById('gsc-i-id1').placeholder = 'Search';	
  };

$(document).ready(function(){

$('.advanceSearch a').keydown(function(event){showSearchTips($(this),event);})
$('#searchTipsModal').keydown(function(event){showSearchTips($(this),event);})

function showSearchTips(obj,evt) {
// if pressed enter key
	if ( evt.which == 13 || evt.which == 32) {
		showModal();
		ga('send', 'pageview', "AdvanceSearch");
		$(".advanceSearch a").attr('aria-expanded', 'true');
		$('.searchTipsModal').focus();
		evt.preventDefault();
		}
	if ( evt.which == 27 ) {
		hideModal();
		$(".advanceSearch a").attr('aria-expanded', 'false');
		var modal = document.getElementById('searchTipsModal');
		modal.style.display = "none";
		$(".advanceSearch a").focus();
		evt.preventDefault();
		}
}

});
function showModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "block";
	ga('send', 'pageview', "AdvanceSearch");
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", true);
	window.setTimeout(function () {
    document.getElementById('searchTipsModal').focus(); }, 0);
}

function hideModal(){
	var modal = document.getElementById('searchTipsModal');
	modal.style.display = "none";
	document.getElementById("searchTipsBtn").setAttribute("aria-expanded", false);
}
</script>
<div id="search" role="search" class="grid_4 omega">
    	<table class="search">
				<tbody>
					<tr>
						<td><div class="searchboxheader"><searchbox-only resultsurl="/search/ocwsearch.htm"></searchbox-only></div></td>
						<td>
							<div class="advanceSearch">
								<a id="searchTipsBtn" onclick="showModal();" href="#" role="button" aria-label="search tips" aria-expanded="false" aria-describedby="searchtips">Search Tips</a>

								<!-- The Modal -->
								<div id="searchTipsModal" class="modal" tabindex="-1">
								  <!-- Modal content -->
									<div class="modal-content">
										<div class="modal-body">
											<button class="close" onclick="hideModal();" aria-label="close">X</button>
											<span>
												<b>Exclude words from your search</b>
												<br>Put - in front of a word you want to leave out. For example, jaguar speed -car
												<br><br>
												<b>Search for an exact match</b>
												<br>Put a word or phrase inside quotes. For example, "tallest building".
												<br><br>
												<b>Search for wildcards or unknown words</b>
												<br>Put a * in your word or phrase where you want to leave a placeholder. For example, "largest * in the world".
												<br><br>
												<b>Search within a range of numbers</b>
												<br>Put .. between two numbers. For example, camera $50..$100.
												<br><br>
												<b>Combine searches</b>
												<br>Put "OR" between each search query. For example,  marathon OR race.
												<br><br>
											</span>
										</div>
								  </div>
								</div>
							</div>
						</td>
					</tr>
				</tbody>
		</table>
</div>
<div class="clear"></div>
<!--googleon: index-->
<!-- *end header* -->

				
				
			</div>
<!-- top grid end -->
		</header><!-- top end -->
			
		<div id="center_media">
      	<div id="grid">
      		<div id="left">
        		<nav id="breadcrumb_media" aria-label="Breadcrumb">
                	<p>

    <a href="https://ocw.mit.edu/">Home</a>
    
        »
        
    
    
        
            <a href="https://ocw.mit.edu/courses">Courses</a>
            
                »
                
            
            
         
    
    
        
            <a href="https://ocw.mit.edu/courses/electrical-engineering-and-computer-science">Electrical Engineering and Computer Science</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/index.htm">Computer Systems Security</a>
            
                »
                
            
            
         
    
    
        
            <a href="../../../contents/video-lectures/index.htm">Lecture Videos</a>
            
                »
                
            
            
         
    
    
        
            
            
            Lecture 9: Securing Web Applications
         
    
</p>

            	</nav>
            	<div class="clear"></div>
        		<div id="media_title">
        		<h1 class="title" itemprop="name" property="dct:title">
        <span class="" id="parent-fieldname-title">
            Lecture 9: Securing Web Applications
        </span>
    </h1>
        		</div>
           		<div class="clear"></div>
           		<div id="course_wrapper_media">
           			<nav id="course_nav" aria-label="Course">
           				<script language="javascript" type="text/javascript">
function toggleMenu(objID) {
  if (!document.getElementById) return;
  var ob = document.getElementById(objID);
  ob.className = (ob.className == 'selected')?'': 'selected';
}
function toggleClass(id)
{
  var divtoggleClass= document.getElementById(id);
  divtoggleClass.className = (divtoggleClass.className == 'mO')?'mC': 'mO';
  return false;
}
function changeAlt(id)
{
  id.alt = (id.alt == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
  id.title = (id.title == 'Expand Menu')?'Collapse Menu' : 'Expand Menu';
}
</script>
<!--Left Nav Starts -->


	<ul>			  
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/index.htm">
		                  Course Home  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/syllabus/index.htm">
		                  Syllabus  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/calendar/index.htm">
		                  Calendar  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/readings/index.htm">
		                  Readings  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/lecture-notes/index.htm">
		                  Lecture Notes  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="selected">
			   			<a href="../../../contents/video-lectures/index.htm">
		                  Lecture Videos  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/labs/index.htm">
		                  Labs  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/exams/index.htm">
		                  Exams  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/final-project/index.htm">
		                  Final Project  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    <li class="">
			   			<a href="../../../contents/related-resources/index.htm">
		                  Related Resources  			                
	                    </a>
		        </li>
		    
         	
	
	
	    	
	    	    
		    
         	
	<!--second tal block close-->  
	
</ul>


<!--Left Nav Ends -->





           			</nav>
           			<main id="course_inner_media" aria-labelledby="media_title">
      					 
        <div class="" id="parent-fieldname-text">
            
            
        </div>
    
      					     
    
    



<script type="text/javascript">var caption_embed_1 ={'English - US': '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-9-securing-web-applications/WlmKwIe9z1Q.srt'}</script>     
     <div id="media-embed">
         <div class="attention_message" id="embed_1">
<p>Flash and JavaScript are required for this feature.</p>
<p>Download the video from <a href="https://itunes.apple.com/us/itunes-u/id1017908130">iTunes U</a> or the <a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec09_300k.mp4">Internet Archive</a>.</p>
</div>
     </div>
    
     <script type="text/javascript">ocw_embed_chapter_media('embed_1', 'https://www.youtube.com/v/WlmKwIe9z1Q', 'youtube', '/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-9-securing-web-applications', 'https://img.youtube.com/vi/WlmKwIe9z1Q/0.jpg',0,0, 'https://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-858-computer-systems-security-fall-2014/video-lectures/lecture-9-securing-web-applications/WlmKwIe9z1Q.srt')</script>
	 
	 
	 		
	 		<div id="transcript1"></div>
				 <script type="text/javascript">createThreePlayParams(2, 662952, "embed_1", 0, 0)</script>
			 
	

     <div id="media_resource_next_prev_nav" style="margin-top: 1em;">
        <p>
        
            <a href="../../../contents/video-lectures/lecture-8-web-security-model/index.htm">
                <img src="../../../common/images/btn_previous_resource.png" style="margin: 0 30px 0 50px;" alt="Previous track" title="Previous track"></a>
     	
     	
        
            <a href="../../../contents/video-lectures/lecture-10-symbolic-execution/index.htm"> 
                <img src="../../../common/images/btn_next_resource.png" alt="Next track" title="Next track"></a>
       
       </p>
     </div>
 


<script type="text/javascript">
		window.onload=function(){
		init();
		
		}
		var tabLinks = new Array();
		var contentDivs = new Array();
		function init() {
		  // Grab the tab links and content divs from the page
		  var tabListItems = document.getElementById('tabs').childNodes;
		  for ( var i = 0; i < tabListItems.length; i++ ) {
			if ( tabListItems[i].nodeName == "LI" ) {
			  var tabLink = getFirstChildWithTagName( tabListItems[i], 'A' );
			  var id = getHash( tabLink.getAttribute('href') );
			  tabLinks[id] = tabLink;
			  contentDivs[id] = document.getElementById( id );
			}
		  }
		  // Assign onclick events to the tab links, and
		  // highlight the first tab
		  var i = 0;
		  for ( var id in tabLinks ) {
			tabLinks[id].onclick = showTab;
			tabLinks[id].onfocus = function() { this.blur() };
			if ( i == 0 ) tabLinks[id].className = 'selected';
			i++;
		  }
		  // Hide all content divs except the first
		  var i = 0;
		  for ( var id in contentDivs ) {
			if ( i != 0 ) contentDivs[id].className = 'tabContent hide';
			i++;
		  }
		}
		function showTab() {
		  var selectedId = getHash( this.getAttribute('href') );
		  // Highlight the selected tab, and dim all others.
		  // Also show the selected content div, and hide all others.
		  for ( var id in contentDivs ) {
			if ( id == selectedId ) {
			  tabLinks[id].className = 'selected';
			  contentDivs[id].className = 'tabContent';
			} else {
			  tabLinks[id].className = '';
			  contentDivs[id].className = 'tabContent hide';
			}
		  }
		  // Stop the browser following the link
		  return false;
		}
		function getFirstChildWithTagName( element, tagName ) {
		  for ( var i = 0; i < element.childNodes.length; i++ ) {
			if ( element.childNodes[i].nodeName == tagName ) return element.childNodes[i];
		  }
		}
		function getHash( url ) {
		  var hashPos = url.lastIndexOf ( '#' );
		  return url.substring( hashPos + 1 );
		}
 </script>	
 

  <div id="media_tabs">
     
        <ul id="tabs">
            <li class="first">
                <a href="#vid_about" class="selected">About this Video</a>
            </li>
            <li class="">
                <a href="#vid_index" class="">Playlist</a>
            </li>
            <li class="">
                <a href="#vid_playlist" class="">Transcript</a>
            </li>
            <li class="">
                <a href="#vid_related" class="">Download this Video</a>
            </li>
        </ul>
   
        <div id="vid_about" itemprop="description" class="tabContent">
<p><strong>Description:</strong> In this lecture, Professor Mickens continues looking at how to build secure web applications.</p>  <p><strong>Instructor:</strong> James Mickens</p>
</div>
        <div id="vid_index" itemprop="description" class="tabContent hide">
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-1-introduction-threat-models/index.htm">
<img src="https://img.youtube.com/vi/GqmQg-cszw4/default.jpg" title="Lecture 1: Introduction, Threat Models" alt="Lecture 1: Introduction, Threat Models">
<p>Lecture 1: Introduction, Th...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-2-control-hijacking-attacks/index.htm">
<img src="https://img.youtube.com/vi/r4KjHEgg9Wg/default.jpg" title="Lecture 2: Control Hijacking Attacks" alt="Lecture 2: Control Hijacking Attacks">
<p>Lecture 2: Control Hijackin...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-3-buffer-overflow-exploits-and-defenses/index.htm">
<img src="https://img.youtube.com/vi/xSQxaie_h1o/default.jpg" title="Lecture 3: Buffer Overflow Exploits and Defenses" alt="Lecture 3: Buffer Overflow Exploits and Defenses">
<p>Lecture 3: Buffer Overflow ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-4-privilege-separation/index.htm">
<img src="https://img.youtube.com/vi/dNl22h1kW1k/default.jpg" title="Lecture 4: Privilege Separation" alt="Lecture 4: Privilege Separation">
<p>Lecture 4: Privilege Separa...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-6-capabilities/index.htm">
<img src="https://img.youtube.com/vi/TQhmua7Z2cY/default.jpg" title="Lecture 6: Capabilities" alt="Lecture 6: Capabilities">
<p>Lecture 6: Capabilities</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-7-sandboxing-native-code/index.htm">
<img src="https://img.youtube.com/vi/I0Psvvky-44/default.jpg" title="Lecture 7: Sandboxing Native Code	" alt="Lecture 7: Sandboxing Native Code	">
<p>Lecture 7: Sandboxing Nativ...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-8-web-security-model/index.htm">
<img src="https://img.youtube.com/vi/eRJ_r8WF1Y0/default.jpg" title="Lecture 8: Web Security Model" alt="Lecture 8: Web Security Model">
<p>Lecture 8: Web Security Model</p></a>
</div>
<div class="related-media-thumbnail-nolink">
<div class="now-playing-resource">Now Playing</div>
<img src="https://img.youtube.com/vi/WlmKwIe9z1Q/default.jpg" title="Lecture 9: Securing Web Applications" alt="Lecture 9: Securing Web Applications">
<p>Lecture 9: Securing Web App...</p>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-10-symbolic-execution/index.htm">
<img src="https://img.youtube.com/vi/yRVZPvHYHzw/default.jpg" title="Lecture 10: Symbolic Execution" alt="Lecture 10: Symbolic Execution">
<p>Lecture 10: Symbolic Execution</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-11-ur-web/index.htm">
<img src="https://img.youtube.com/vi/XMEFdofERLI/default.jpg" title="Lecture 11: Ur/Web" alt="Lecture 11: Ur/Web">
<p>Lecture 11: Ur/Web</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-12-network-security/index.htm">
<img src="https://img.youtube.com/vi/BZTWXl9QNK8/default.jpg" title="Lecture 12: Network Security" alt="Lecture 12: Network Security">
<p>Lecture 12: Network Security</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-13-network-protocols/index.htm">
<img src="https://img.youtube.com/vi/QOtA76ga_fY/default.jpg" title="Lecture 13: Network Protocols" alt="Lecture 13: Network Protocols">
<p>Lecture 13: Network Protocols</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-14-ssl-and-https/index.htm">
<img src="https://img.youtube.com/vi/q1OF_0ICt9A/default.jpg" title="Lecture 14: SSL and HTTPS" alt="Lecture 14: SSL and HTTPS">
<p>Lecture 14: SSL and HTTPS</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-15-medical-software/index.htm">
<img src="https://img.youtube.com/vi/bA3xCpYLA34/default.jpg" title="Lecture 15: Medical Software" alt="Lecture 15: Medical Software">
<p>Lecture 15: Medical Software</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-16-side-channel-attacks/index.htm">
<img src="https://img.youtube.com/vi/3v5Von-oNUg/default.jpg" title="Lecture 16: Side-Channel Attacks" alt="Lecture 16: Side-Channel Attacks">
<p>Lecture 16: Side-Channel At...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-17-user-authentication/index.htm">
<img src="https://img.youtube.com/vi/MT7X17ZRo1U/default.jpg" title="Lecture 17: User Authentication" alt="Lecture 17: User Authentication">
<p>Lecture 17: User Authentica...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-18-private-browsing/index.htm">
<img src="https://img.youtube.com/vi/YTWXAFJf8bw/default.jpg" title="Lecture 18: Private Browsing" alt="Lecture 18: Private Browsing">
<p>Lecture 18: Private Browsing</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-19-anonymous-communication/index.htm">
<img src="https://img.youtube.com/vi/OgGTJIgNewE/default.jpg" title="Lecture 19: Anonymous Communication" alt="Lecture 19: Anonymous Communication">
<p>Lecture 19: Anonymous Commu...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-20-mobile-phone-security/index.htm">
<img src="https://img.youtube.com/vi/uT7BXusDgDM/default.jpg" title="Lecture 20: Mobile Phone Security" alt="Lecture 20: Mobile Phone Security">
<p>Lecture 20: Mobile Phone Se...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-21-data-tracking/index.htm">
<img src="https://img.youtube.com/vi/WG5UbMrUiLU/default.jpg" title="Lecture 21: Data Tracking" alt="Lecture 21: Data Tracking">
<p>Lecture 21: Data Tracking</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-22-guest-lecture-by-mit-is-t/index.htm">
<img src="https://img.youtube.com/vi/2PO8h1pVW50/default.jpg" title="Lecture 22: Guest Lecture by MIT IS&amp;T" alt="Lecture 22: Guest Lecture by MIT IS&amp;T">
<p>Lecture 22: Guest Lecture b...</p></a>
</div>
<div class="related-media-thumbnail">
<a href="../../../contents/video-lectures/lecture-23-security-economics/index.htm">
<img src="https://img.youtube.com/vi/8PdnOZI7H5E/default.jpg" title="Lecture 23: Security Economics" alt="Lecture 23: Security Economics">
<p>Lecture 23: Security Economics</p></a>
</div>
</div>
        <div id="vid_playlist" itemprop="description" class="tabContent hide">
<ul><li><a class="transcript-link" title="Open in a new window." alt="Open in a new window." style="text-decoration: none; font-size: 1.0em;" target="_blank" text-decoration: none font-size: href="../../../contents/video-lectures/lecture-9-securing-web-applications/WlmKwIe9z1Q.pdf"> Download English-US transcript (PDF)</a></li></ul>
<p><span m="70">The</span> <span m="170">following</span> <span m="610">content</span> <span m="1120">is</span> <span m="1230">provided</span> <span m="1670">under</span> <span m="1940">a</span> <span m="1980">Creative</span> <span m="2430">Commons</span> <span m="2830">license.</span> <span m="3820">Your</span> <span m="3910">support</span> <span m="4420">will</span> <span m="4560">help</span> <span m="4820">MIT</span> <span m="5310">OpenCourseWare</span> <span m="6060">continue</span> <span m="6540">to</span> <span m="6680">offer</span> <span m="7000">high-quality</span> <span m="7720">educational</span> <span m="8370">resources</span> <span m="8940">for</span> <span m="9080">free.</span> <span m="10150">To</span> <span m="10250">make</span> <span m="10350">a</span> <span m="10400">donation</span> <span m="11090">or</span> <span m="11340">to</span> <span m="11450">view</span> <span m="11660">additional</span> <span m="12070">materials</span> <span m="12700">from</span> <span m="12860">hundreds</span> <span m="13190">of</span> <span m="13300">MIT</span> <span m="13680">courses,</span> <span m="15000">visit</span> <span m="15160">MIT</span> <span m="15690">OpenCourseWare</span> <span m="16600">at</span> <span m="16830">ocw.mit.edu.</span> </p>
<p><span m="27790">PROFESSOR: All</span> <span m="27850">right.</span> <span m="28290">So</span> <span m="29290">let's</span> <span m="29600">get</span> <span m="29860">started</span> <span m="30620">with</span> <span m="31820">the</span> <span m="31950">second</span> <span m="32630">lecture</span> <span m="33220">in</span> <span m="33450">our</span> <span m="34140">stunning</span> <span m="34610">series</span> <span m="35090">on</span> <span m="35320">web</span> <span m="35530">security.</span> <span m="36790">So</span> <span m="37310">to</span> <span m="37460">start off the</span> <span m="37780">class</span> <span m="38200">today, I</span> <span m="38370">actually</span> <span m="38740">want</span> <span m="39010">to</span> <span m="39430">go</span> <span m="39550">over</span> <span m="39810">some</span> <span m="40310">quick</span> <span m="40570">demos.</span> <span m="41220">So</span> <span m="41970">as</span> <span m="42180">you know,</span> <span m="42435">demos</span> <span m="42690">almost</span> <span m="43180">never</span> <span m="43420">work.</span> <span m="43960">So</span> <span m="44590">hopefully,</span> <span m="45160">you</span> <span m="45300">won't just</span> <span m="45500">be</span> <span m="45680">seeing my empty</span> <span m="45860">terminal</span> <span m="46270">up here.</span> <span m="46580">But</span> <span m="47000">the</span> <span m="47250">basic</span> <span m="47590">idea</span> <span m="47780">is</span> <span m="47870">that</span> <span m="47960">I</span> <span m="48040">first</span> <span m="48360">wanted</span> <span m="48570">to</span> <span m="48640">show</span> <span m="48890">you</span> <span m="49060">an</span> <span m="49120">example</span> <span m="50210">of</span> <span m="50550">the</span> <span m="50640">Shellshock</span> <span m="51325">bug</span> <span m="52050">that</span> <span m="52220">you</span> <span m="52320">may</span> <span m="52440">have</span> <span m="52600">heard</span> <span m="52790">of.</span> <span m="52940">This</span> <span m="53090">has</span> <span m="53170">been</span> <span m="53380">a pretty</span> <span m="54610">sort</span> <span m="55020">of</span> <span m="55100">popular</span> <span m="55550">topic</span> <span m="55940">in the</span> <span m="56230">security</span> <span m="56520">literature.</span> </p>
<p><span m="57320">And</span> <span m="57870">people</span> <span m="58100">were</span> <span m="58220">saying</span> <span m="58580">that</span> <span m="58710">Heartbleed</span> <span m="59200">was</span> <span m="59350">like</span> <span m="59660">a 10</span> <span m="60070">out of</span> <span m="60190">10</span> <span m="60810">security</span> <span m="61220">[? bug. ?]</span> <span m="61450">But people</span> <span m="61530">were</span> <span m="61720">saying,</span> <span m="61970">like,</span> <span m="62100">we</span> <span m="62190">should</span> <span m="62430">not</span> <span m="62620">have</span> <span m="63140">reserved</span> <span m="63640">10 out of</span> <span m="63990">10</span> <span m="64250">for</span> <span m="64370">Heartbleed.</span> <span m="65050">This</span> <span m="65230">is</span> <span m="65310">potentially</span> <span m="65760">worse.</span> <span m="66055">All</span> <span m="66350">right?</span> <span m="66620">And so</span> <span m="66690">I</span> <span m="66780">thought</span> <span m="66970">that this</span> <span m="67240">would</span> <span m="67310">be a</span> <span m="67440">great</span> <span m="67800">idea for</span> <span m="67970">you</span> <span m="68070">guys</span> <span m="68280">to</span> <span m="68360">see</span> <span m="68740">some</span> <span m="69100">living</span> <span m="69210">history,</span> <span m="69660">and</span> <span m="69940">for you to</span> <span m="70150">tell</span> <span m="70320">your</span> <span m="70440">parents</span> <span m="70790">that,</span> <span m="71010">you know,</span> <span m="71350">they're getting</span> <span m="71740">their</span> <span m="72210">tuition's</span> <span m="72450">worth</span> <span m="72825">out of</span> <span m="73200">MIT.</span> </p>
<p><span m="73710">So</span> <span m="74770">what</span> <span m="75050">is</span> <span m="75110">the</span> <span m="75200">basic</span> <span m="75580">idea</span> <span m="76260">behind</span> <span m="76645">the</span> <span m="77030">Shellshock</span> <span m="77850">bug?</span> <span m="78350">Well,</span> <span m="78640">it's</span> <span m="78760">a</span> <span m="78850">really</span> <span m="79120">great</span> <span m="79420">example</span> <span m="79890">of</span> <span m="80110">why</span> <span m="80360">it's</span> <span m="80530">so</span> <span m="80740">difficult</span> <span m="81410">to</span> <span m="81740">build</span> <span m="82180">secure</span> <span m="82530">web</span> <span m="82760">applications</span> <span m="83690">that</span> <span m="83870">span</span> <span m="84440">multiple</span> <span m="84870">technology</span> <span m="85520">stacks,</span> <span m="85940">multiple</span> <span m="86310">languages,</span> <span m="86880">multiple</span> <span m="87150">OS's,</span> <span m="87510">so</span> <span m="87690">on</span> <span m="87780">and</span> <span m="87880">so</span> <span m="88060">forth.</span> <span m="88740">So</span> <span m="88810">the</span> <span m="88930">basic</span> <span m="89340">idea</span> <span m="89780">is</span> <span m="89940">that</span> <span m="90420">Shellshock</span> <span m="91100">is</span> <span m="91190">going</span> <span m="91290">to</span> <span m="91360">take</span> <span m="91600">advantage</span> <span m="92460">of</span> <span m="92760">the</span> <span m="92850">fact</span> <span m="93620">that</span> <span m="94260">the</span> <span m="94460">attacker</span> <span m="95480">can</span> <span m="95760">craft</span> <span m="96400">a</span> <span m="96460">special</span> <span m="96950">HTTP</span> <span m="97610">request</span> <span m="98060">to</span> <span m="98160">a</span> <span m="98220">server</span> <span m="98910">and</span> <span m="99090">control</span> <span m="99680">the</span> <span m="99740">headers</span> <span m="100560">that</span> <span m="100860">are</span> <span m="101110">in</span> <span m="101320">that</span> <span m="101500">request.</span> <span m="102230">And</span> <span m="102390">so</span> <span m="102490">I've</span> <span m="102690">written</span> <span m="102920">an</span> <span m="103010">example</span> <span m="103315">up</span> <span m="103620">here.</span> <span m="105630">It's</span> <span m="105700">very</span> <span m="105900">simple.</span> </p>
<p><span m="106210">So</span> <span m="106310">let's</span> <span m="106500">say</span> <span m="106640">that the</span> <span m="106890">attacker</span> <span m="107700">wants</span> <span m="107960">to</span> <span m="108060">send</span> <span m="108580">some</span> <span m="108860">GET</span> <span m="109100">query.</span> <span m="109940">They're</span> <span m="110070">going</span> <span m="110350">to</span> <span m="110430">send</span> <span m="110710">that</span> <span m="110970">query</span> <span m="111370">to</span> <span m="111460">some</span> <span m="111880">CGI</span> <span m="112450">interface.</span> <span m="114000">And then</span> <span m="114220">there's</span> <span m="114420">going</span> <span m="114560">to</span> <span m="114620">be</span> <span m="114940">some</span> <span m="115160">question</span> <span m="115530">mark.</span> <span m="115890">The</span> <span m="116100">person</span> <span m="116500">wants to</span> <span m="116650">search for</span> <span m="116990">cats, because</span> <span m="117490">that's all</span> <span m="117690">that</span> <span m="117760">people</span> <span m="117990">search</span> <span m="118220">for.</span> <span m="119165">And then</span> <span m="119640">there's some</span> <span m="119790">standard</span> <span m="120740">headers</span> <span m="121090">here,</span> <span m="121320">like</span> <span m="121400">host,</span> <span m="121820">for</span> <span m="121940">example.</span> <span m="122730">So</span> <span m="122810">this</span> <span m="123130">is</span> <span m="123280">saying</span> <span m="124040">that</span> <span m="124340">this</span> <span m="125570">URL</span> <span m="125950">here</span> <span m="126610">is</span> <span m="126990">hanging</span> <span m="127250">off</span> <span m="127430">of</span> <span m="127550">example.com.</span> </p>
<p><span m="128750">Now,</span> <span m="129180">note</span> <span m="129530">that</span> <span m="129660">the</span> <span m="129780">attacker</span> <span m="130300">can</span> <span m="130520">also</span> <span m="130940">specify</span> <span m="131530">custom</span> <span m="132020">headers.</span> <span m="132490">Right?</span> <span m="132860">So the</span> <span m="133190">attacker</span> <span m="133550">can</span> <span m="133810">just say,</span> <span m="134270">I</span> <span m="134380">want it</span> <span m="134590">to</span> <span m="134660">find</span> <span m="134940">some</span> <span m="135110">application-specific</span> <span m="136080">header</span> <span m="136300">called</span> <span m="136680">Custom-header,</span> <span m="137030">and</span> <span m="137290">I</span> <span m="137420">want</span> <span m="137560">to</span> <span m="137600">specify</span> <span m="138000">some</span> <span m="138220">value</span> <span m="138530">there,</span> <span m="139310">because</span> <span m="139490">you</span> <span m="139600">can</span> <span m="139690">imagine that a web</span> <span m="140100">application</span> <span m="140930">might</span> <span m="141110">define</span> <span m="141580">certain</span> <span m="141820">functionalities</span> <span m="142490">that</span> <span m="142590">can't</span> <span m="142820">be</span> <span m="142900">expressed</span> <span m="143590">using</span> <span m="143850">the</span> <span m="143930">simple,</span> <span m="144210">pre-defined</span> <span m="144430">HTTP</span> <span m="144980">headers.</span> <span m="145970">OK.</span> <span m="146310">So</span> <span m="146490">that</span> <span m="146540">all</span> <span m="146750">seems</span> <span m="147080">fairly</span> <span m="147420">innocuous.</span> </p>
<p><span m="148280">But</span> <span m="148910">what</span> <span m="149090">ends up</span> <span m="149310">happening</span> <span m="149780">is</span> <span m="149850">that</span> <span m="150000">in</span> <span m="150100">a</span> <span m="150180">lot</span> <span m="150420">of</span> <span m="150530">these</span> <span m="151120">CGI</span> <span m="151720">web</span> <span m="152000">servers,</span> <span m="152790">they</span> <span m="152920">will</span> <span m="153090">actually</span> <span m="153470">take</span> <span m="153900">these</span> <span m="154140">custom</span> <span m="154540">header</span> <span m="154810">values</span> <span m="155640">and</span> <span m="155860">use</span> <span m="156240">them</span> <span m="156450">to</span> <span m="156530">set</span> <span m="157080">environment</span> <span m="157710">variables</span> <span m="158130">for</span> <span m="158270">Bash.</span> <span m="159430">OK?</span> <span m="160070">So</span> <span m="160210">they</span> <span m="160350">will</span> <span m="160590">use</span> <span m="160860">this</span> <span m="161020">header</span> <span m="161390">to</span> <span m="161470">create</span> <span m="162200">a</span> <span m="162750">Bash</span> <span m="163070">variable</span> <span m="163390">name</span> <span m="163480">custom</span> <span m="163830">header.</span> <span m="164320">Then</span> <span m="164500">they will</span> <span m="164630">take</span> <span m="164930">this</span> <span m="165150">value</span> <span m="165540">here</span> <span m="165970">that the</span> <span m="166210">attacker</span> <span m="166760">has</span> <span m="166870">supplied,</span> <span m="167850">and</span> <span m="168080">use</span> <span m="168440">that</span> <span m="168970">to</span> <span m="169050">be</span> <span m="169170">the</span> <span m="169250">value</span> <span m="169650">of that</span> <span m="169870">Bash</span> <span m="170140">variable,</span> <span m="171000">right?</span> <span m="171360">And</span> <span m="171550">then</span> <span m="171730">once</span> <span m="171920">that</span> <span m="172120">variable</span> <span m="172580">is set</span> <span m="172840">up,</span> <span m="173290">then</span> <span m="173670">the</span> <span m="174420">CGI</span> <span m="174930">server</span> <span m="175590">will</span> <span m="175890">do</span> <span m="176080">some</span> <span m="176270">processing</span> <span m="177110">in</span> <span m="177230">the</span> <span m="177310">context</span> <span m="177870">of</span> <span m="177940">that</span> <span m="178100">environment.</span> <span m="179080">Right?</span> <span m="179440">So</span> <span m="179600">this</span> <span m="179790">is</span> <span m="179920">clearly</span> <span m="180280">bad.</span> <span m="180550">You can</span> <span m="180900">probably see</span> <span m="181165">where this is</span> <span m="181430">going.</span> <span m="182440">Web</span> <span m="182620">servers</span> <span m="182910">should</span> <span m="183060">not be</span> <span m="183330">taking</span> <span m="183650">these</span> <span m="183840">arbitrary</span> <span m="184290">values</span> <span m="185020">from</span> <span m="185170">arbitrary</span> <span m="185940">unwashed</span> <span m="186370">masses.</span> </p>
<p><span m="187000">So</span> <span m="187250">in the</span> <span m="187380">particular</span> <span m="187900">example</span> <span m="188470">of the</span> <span m="188640">Shellshock</span> <span m="189340">bug,</span> <span m="189780">what</span> <span m="189990">ended</span> <span m="190130">up</span> <span m="190240">happening</span> <span m="190630">is</span> <span m="190710">that</span> <span m="191080">if you</span> <span m="191470">set</span> <span m="192030">your</span> <span m="192620">Bash</span> <span m="193020">variable</span> <span m="193470">to</span> <span m="193600">this,</span> <span m="194700">this</span> <span m="194840">kind</span> <span m="195000">of</span> <span m="195120">malformed,</span> <span m="195900">evil-looking</span> <span m="196470">thing,</span> <span m="196930">then</span> <span m="197280">there's</span> <span m="197490">going</span> <span m="197600">to</span> <span m="197660">be</span> <span m="197860">insanity</span> <span m="198320">that</span> <span m="198440">happens.</span> <span m="199070">Basically,</span> <span m="199510">this</span> <span m="199680">is</span> <span m="199790">a</span> <span m="199850">malformed</span> <span m="201100">[? Select ?]</span> <span m="201410">function</span> <span m="201730">definition</span> <span m="202250">in</span> <span m="202330">the</span> <span m="202400">Bash</span> <span m="203680">scripting</span> <span m="204010">language.</span> <span m="204690">You</span> <span m="204770">don't have to</span> <span m="205080">worry</span> <span m="205360">about</span> <span m="205610">the</span> <span m="205680">specifics</span> <span m="206210">of</span> <span m="206340">it.</span> <span m="206680">But what</span> <span m="206950">was</span> <span m="207100">intended</span> <span m="207610">to</span> <span m="207670">happen,</span> <span m="208550">if</span> <span m="208740">Bash</span> <span m="209080">were</span> <span m="209300">correct,</span> <span m="210020">is</span> <span m="210230">that</span> <span m="210660">this</span> <span m="210890">part</span> <span m="211190">over</span> <span m="211410">here</span> <span m="212060">wouldn't</span> <span m="212270">be</span> <span m="212390">executed.</span> <span m="212650">So</span> <span m="213000">basically,</span> <span m="213450">you just</span> <span m="213640">defined</span> <span m="214140">some</span> <span m="214430">stupid</span> <span m="214760">function</span> <span m="215220">here that</span> <span m="215450">doesn't do</span> <span m="215580">anything.</span> <span m="215910">And</span> <span m="216240">in</span> <span m="216510">the</span> <span m="216765">[INAUDIBLE]</span> <span m="217100">terminate</span> <span m="217520">here.</span> </p>
<p><span m="218330">But</span> <span m="218600">this</span> <span m="218860">sequence</span> <span m="219360">of</span> <span m="219560">characters</span> <span m="220030">actually</span> <span m="220370">confuses</span> <span m="221050">the</span> <span m="221170">Bash</span> <span m="221540">parser.</span> <span m="222340">And</span> <span m="222450">so</span> <span m="222530">what</span> <span m="222650">ends up</span> <span m="222870">happening</span> <span m="223250">is</span> <span m="223350">that it</span> <span m="223560">sort</span> <span m="223720">of</span> <span m="223800">stumbles</span> <span m="224380">through</span> <span m="225020">this</span> <span m="225310">nonsense</span> <span m="225920">here.</span> <span m="226180">And</span> <span m="226440">then it</span> <span m="226760">says,</span> <span m="227090">oh,</span> <span m="227440">I</span> <span m="227520">might</span> <span m="227880">as well</span> <span m="228070">keep on</span> <span m="228190">parsing and</span> <span m="228670">execute</span> <span m="229060">some</span> <span m="229190">commands</span> <span m="229600">here,</span> <span m="230240">right?</span> <span m="230680">And</span> <span m="230830">so</span> <span m="230970">in</span> <span m="231040">this</span> <span m="231250">case,</span> <span m="231570">this</span> <span m="231680">just</span> <span m="231880">does</span> <span m="232050">the</span> <span m="232130">bin/id</span> <span m="233070">command, which</span> <span m="233510">displays</span> <span m="233830">some</span> <span m="233960">information</span> <span m="234380">about</span> <span m="234520">the</span> <span m="234620">user.</span> <span m="235220">But</span> <span m="235360">this</span> <span m="235920">could</span> <span m="236030">be any</span> <span m="236380">code</span> <span m="236670">right</span> <span m="236860">here.</span> <span m="237080">So</span> <span m="237440">that's</span> <span m="237640">the</span> <span m="238010">heart</span> <span m="238220">of the</span> <span m="238300">vulnerability.</span> </p>
<p><span m="239610">So</span> <span m="239710">I'll</span> <span m="239780">give</span> <span m="239920">you</span> <span m="240010">a</span> <span m="240030">very</span> <span m="240250">simple</span> <span m="240540">example</span> <span m="240870">here,</span> <span m="241100">so</span> <span m="241340">you</span> <span m="241490">see</span> <span m="241670">up</span> <span m="241800">on</span> <span m="241880">the</span> <span m="241960">screen.</span> <span m="242650">So</span> <span m="243620">basically,</span> <span m="244120">we've got</span> <span m="244280">a</span> <span m="244300">very</span> <span m="244650">simple</span> <span m="245840">Python</span> <span m="246400">server</span> <span m="246830">here,</span> <span m="247420">just</span> <span m="247650">the</span> <span m="247930">dumbest</span> <span m="248230">one you could</span> <span m="248640">possibly</span> <span m="249010">imagine.</span> <span m="249400">It's</span> <span m="249520">got</span> <span m="249690">this</span> <span m="249900">do</span> <span m="249980">GET</span> <span m="250370">method.</span> <span m="251380">And so</span> <span m="251610">with</span> <span m="251650">the</span> <span m="251900">do GET</span> <span m="252090">method,</span> <span m="252860">it</span> <span m="253200">is</span> <span m="253520">going to</span> <span m="254270">basically</span> <span m="255220">iterate</span> <span m="255910">through</span> <span m="256410">all</span> <span m="256810">of</span> <span m="257040">the</span> <span m="257240">HTTP</span> <span m="257910">headers</span> <span m="258709">in</span> <span m="258890">the</span> <span m="258980">request.</span> <span m="259450">OK?</span> <span m="259709">So</span> <span m="259839">that's</span> <span m="260040">what</span> <span m="260959">this</span> <span m="261230">four</span> <span m="262130">key</span> <span m="262330">value</span> <span m="262690">for</span> <span m="262810">the</span> <span m="262920">header</span> <span m="263270">and</span> <span m="263380">the</span> <span m="263430">value</span> <span m="264720">in</span> <span m="264830">this</span> <span m="264980">request.</span> <span m="265790">And</span> <span m="265950">then</span> <span m="266160">it'll just</span> <span m="266400">print</span> <span m="266610">out</span> <span m="266770">the</span> <span m="266840">headers</span> <span m="267080">that it</span> <span m="267420">finds.</span> <span m="268120">And</span> <span m="268385">then in</span> <span m="268650">this</span> <span m="268740">dirt-simple</span> <span m="269330">example,</span> <span m="269900">it's</span> <span m="270060">going</span> <span m="270160">to</span> <span m="270220">do</span> <span m="270360">something</span> <span m="270610">very</span> <span m="270840">dumb,</span> <span m="271260">which</span> <span m="271450">is</span> <span m="271550">execute</span> <span m="271910">the</span> <span m="271990">system</span> <span m="272400">call</span> <span m="273170">and</span> <span m="273310">just</span> <span m="273520">directly</span> <span m="274060">set</span> <span m="274960">the</span> <span m="275130">environment</span> <span m="275650">value</span> <span m="276962">to</span> <span m="277390">the</span> <span m="277490">value</span> <span m="277900">specified</span> <span m="278720">in the</span> <span m="278890">header.</span> <span m="279730">So</span> <span m="279800">that's</span> <span m="279970">the</span> <span m="280040">whole</span> <span m="280280">root of</span> <span m="280730">vulnerability.</span> </p>
<p><span m="281390">So</span> <span m="281840">if</span> <span m="282030">I</span> <span m="282170">come</span> <span m="282430">over</span> <span m="282640">here</span> <span m="283490">and</span> <span m="283680">I</span> <span m="283760">start</span> <span m="284120">my</span> <span m="284240">victim</span> <span m="284550">web</span> <span m="284740">server--</span> <span m="285465">OK,</span> <span m="285720">so it's</span> <span m="285910">now</span> <span m="286210">ready</span> <span m="286510">to</span> <span m="286640">accept</span> <span m="287050">requests.</span> <span m="288190">And</span> <span m="288320">then</span> <span m="288620">I</span> <span m="288700">can</span> <span m="288880">write</span> <span m="289180">my</span> <span m="289360">special</span> <span m="290410">Shellshock</span> <span m="291050">client</span> <span m="291520">like</span> <span m="291740">so.</span> <span m="292140">And</span> <span m="292340">this</span> <span m="292460">is</span> <span m="292570">actually</span> <span m="292900">pretty</span> <span m="293160">dirt-simple.</span> <span m="294530">So</span> <span m="294790">here,</span> <span m="295530">I</span> <span m="295660">just</span> <span m="295910">define</span> <span m="296600">one</span> <span m="296800">of</span> <span m="296910">these</span> <span m="297490">malformed</span> <span m="298220">strings.</span> <span m="298900">So</span> <span m="298980">I</span> <span m="299070">have</span> <span m="299390">these</span> <span m="299960">kind</span> <span m="300140">of</span> <span m="300520">janky</span> <span m="300930">characters</span> <span m="301340">at</span> <span m="301400">the</span> <span m="301460">beginning.</span> <span m="302130">And</span> <span m="302210">then</span> <span m="302300">I</span> <span m="302380">know</span> <span m="302610">that</span> <span m="302780">everything</span> <span m="303270">after</span> <span m="303600">this</span> <span m="303930">is</span> <span m="304140">essentially</span> <span m="304230">going to</span> <span m="304520">be</span> <span m="304650">executed</span> <span m="305470">on</span> <span m="305650">my</span> <span m="305820">behalf</span> <span m="306220">on</span> <span m="306310">the</span> <span m="306390">server</span> <span m="306700">side.</span> <span m="307250">So</span> <span m="307320">in</span> <span m="307370">this</span> <span m="307610">case,</span> <span m="307910">I</span> <span m="308010">pick</span> <span m="308270">something</span> <span m="308860">that</span> <span m="308970">was</span> <span m="309060">actually</span> <span m="309290">pretty</span> <span m="309510">innocuous.</span> <span m="309970">It just</span> <span m="310350">says,</span> <span m="310520">echo,</span> <span m="310770">I</span> <span m="311160">own</span> <span m="311230">your</span> <span m="311350">machine.</span> <span m="311720">But</span> <span m="312090">this</span> <span m="312270">could</span> <span m="312380">be</span> <span m="312670">anything</span> <span m="313120">here.</span> <span m="313670">You</span> <span m="313750">could</span> <span m="313890">start</span> <span m="314170">another</span> <span m="314360">Bash</span> <span m="314710">shell</span> <span m="315460">kind</span> <span m="315610">of</span> <span m="315710">like</span> <span m="315890">I</span> <span m="315920">do</span> <span m="316150">here.</span> <span m="317170">And</span> <span m="317290">then,</span> <span m="317470">echo</span> <span m="318900">attacker</span> <span m="319310">command,</span> <span m="319860">where</span> <span m="320050">in the</span> <span m="320180">real</span> <span m="320410">world,</span> <span m="320680">that</span> <span m="320720">could</span> <span m="320860">actually</span> <span m="321120">be something</span> <span m="321360">very</span> <span m="321610">dangerous.</span> </p>
<p><span m="322890">So</span> <span m="323420">then I</span> <span m="323920">set</span> <span m="324420">the headers</span> <span m="325522">and</span> <span m="325910">my</span> <span m="326050">custom</span> <span m="326440">request.</span> <span m="327420">And</span> <span m="327520">then</span> <span m="327620">I</span> <span m="327710">just</span> <span m="327940">use</span> <span m="328100">Python</span> <span m="328550">to</span> <span m="328630">create</span> <span m="328860">an</span> <span m="328940">HTTP</span> <span m="329350">connection</span> <span m="329655">and</span> <span m="329960">just send</span> <span m="330170">it</span> <span m="330380">to</span> <span m="330450">server.</span> <span m="331070">So</span> <span m="331310">what</span> <span m="331440">ends up</span> <span m="331500">happening?</span> <span m="332130">So</span> <span m="333140">I</span> <span m="333290">execute</span> <span m="334070">my</span> <span m="334490">Shellshock</span> <span m="334750">client</span> <span m="335250">here.</span> <span m="337190">So it's</span> <span m="337420">saying</span> <span m="337670">that</span> <span m="337800">I</span> <span m="337860">had a</span> <span m="338140">404</span> <span m="338520">here,</span> <span m="338900">because</span> <span m="339180">it</span> <span m="339250">doesn't</span> <span m="339480">matter</span> <span m="339780">what</span> <span m="340010">file I</span> <span m="340320">requested.</span> <span m="341400">So</span> <span m="341550">I</span> <span m="341640">just</span> <span m="342200">put</span> <span m="342530">in some</span> <span m="342630">index,</span> <span m="343000">an HTML that</span> <span m="343430">doesn't</span> <span m="343770">exist.</span> <span m="344760">But</span> <span m="345450">if</span> <span m="345610">we</span> <span m="345690">look</span> <span m="345880">over</span> <span m="346130">here,</span> <span m="346550">this</span> <span m="346640">is</span> <span m="346720">the</span> <span m="346860">output</span> <span m="347250">for</span> <span m="347340">the</span> <span m="347470">server.</span> <span m="348070">And</span> <span m="348360">so</span> <span m="348460">what</span> <span m="348600">you</span> <span m="348740">see</span> <span m="349430">is</span> <span m="349650">that</span> <span m="350520">you</span> <span m="350670">have</span> <span m="350830">this</span> <span m="350980">output,</span> <span m="351450">I</span> <span m="351590">OWN</span> <span m="351830">UR</span> <span m="352070">MACHINE,</span> <span m="352450">and</span> <span m="352550">ATTACKER</span> <span m="352930">CMD.</span> <span m="353690">And</span> <span m="353960">that's</span> <span m="354200">because</span> <span m="354520">as</span> <span m="354870">the</span> <span m="354940">server</span> <span m="355350">got</span> <span m="355570">that</span> <span m="355740">header,</span> <span m="356400">it</span> <span m="356540">set</span> <span m="356750">the</span> <span m="356840">Bash</span> <span m="357130">variable.</span> <span m="358120">It</span> <span m="358280">set</span> <span m="358500">it</span> <span m="358580">with</span> <span m="358730">this</span> <span m="358890">weird</span> <span m="359310">thing</span> <span m="359490">here.</span> <span m="360020">And</span> <span m="360200">as</span> <span m="360320">a</span> <span m="360370">result,</span> <span m="361040">an</span> <span m="361170">ATTACKER-controlled</span> <span m="361900">command</span> <span m="362310">got</span> <span m="362430">the</span> <span m="362530">run.</span> <span m="363800">So</span> <span m="363930">does</span> <span m="363980">that</span> <span m="364210">all</span> <span m="364370">make</span> <span m="364580">sense?</span> </p>
<p><span m="366422">AUDIENCE: So</span> <span m="366906">does this</span> <span m="367390">happen</span> <span m="368358">if</span> <span m="369326">the</span> <span m="369810">program is run under that?</span> <span m="372714">I'm</span> <span m="373198">still unclear</span> <span m="373682">on,</span> <span m="374166">like--</span> </p>
<p><span m="375150">PROFESSOR: Yeah.</span> <span m="375440">So</span> <span m="375600">the</span> <span m="376070">specifics</span> <span m="376620">of</span> <span m="376860">how the</span> <span m="377310">attack</span> <span m="377570">works actually</span> <span m="377840">depends</span> <span m="378135">on</span> <span m="378430">are</span> <span m="378490">you running</span> <span m="378790">Apache,</span> <span m="379680">like what</span> <span m="379950">exactly</span> <span m="380600">your</span> <span m="380790">web</span> <span m="381080">server</span> <span m="381290">looks like.</span> <span m="381900">So</span> <span m="381940">in</span> <span m="382110">this</span> <span m="382290">example,</span> <span m="382750">it's a</span> <span m="382800">little</span> <span m="382990">bit</span> <span m="383160">contrived,</span> <span m="383455">because</span> <span m="383750">I actually</span> <span m="384200">called</span> <span m="384640">[INAUDIBLE]</span> <span m="385490">explicitly</span> <span m="386350">spawned</span> <span m="386890">off</span> <span m="387060">another</span> <span m="387270">Bash</span> <span m="387560">shell,</span> <span m="388330">set</span> <span m="388590">the</span> <span m="388690">environment</span> <span m="389080">variable</span> <span m="389440">in</span> <span m="389510">there,</span> <span m="390000">and</span> <span m="390130">then we were</span> <span m="390500">ready to</span> <span m="390560">go.</span> </p>
<p><span m="391140">But</span> <span m="391150">you</span> <span m="391260">could</span> <span m="391380">imagine</span> <span m="391920">that</span> <span m="392530">if</span> <span m="392680">you</span> <span m="392790">were</span> <span m="393200">spawning off</span> <span m="393440">a</span> <span m="393570">different</span> <span m="393820">process</span> <span m="394125">for</span> <span m="394430">each</span> <span m="395000">incoming</span> <span m="395320">connection,</span> <span m="395980">you</span> <span m="396060">could</span> <span m="396180">set</span> <span m="396430">the</span> <span m="396690">environment</span> <span m="397040">variable</span> <span m="397380">for that</span> <span m="397570">directly</span> <span m="398160">if</span> <span m="398360">that</span> <span m="398590">guy</span> <span m="398780">was</span> <span m="398930">using--</span> <span m="399620">was</span> <span m="399940">living</span> <span m="400260">inside</span> <span m="400660">of a</span> <span m="401055">Bash</span> <span m="401450">environment.</span> </p>
<p><span m="401905">AUDIENCE: So</span> <span m="402360">if you</span> <span m="402831">go back to</span> <span m="403302">your  web</span> <span m="403773">server code,</span> <span m="404244">it</span> <span m="404715">seems</span> <span m="405186">that</span> <span m="405657">you</span> <span m="406130">have</span> <span m="406450">a</span> <span m="406740">much worse</span> <span m="407200">vulnerability</span> <span m="407600">than</span> <span m="408000">the</span> <span m="408481">Shellshock,</span> <span m="408962">because you're</span> <span m="409443">calling</span> <span m="409924">[? though ?]</span> <span m="410405">a system.</span> <span m="410886">And</span> <span m="411367">I</span> <span m="411848">can execute</span> <span m="412329">a command</span> <span m="413300">just</span> <span m="413610">by</span> <span m="414150">setting the</span> <span m="414610">custom</span> <span m="415080">header to</span> <span m="415600">something</span> <span m="415900">[? that I ?].</span> <span m="416200">I</span> <span m="416647">wouldn't have</span> <span m="417094">to use</span> <span m="417541">the</span> <span m="417988">Shellshock</span> <span m="418435">bug</span> <span m="418882">in this</span> <span m="419329">example.</span> </p>
<p><span m="419776">PROFESSOR:  That's correct. Yeah.</span> <span m="420230">So in</span> <span m="420440">this</span> <span m="420660">particular</span> <span m="421120">web</span> <span m="421340">server,</span> <span m="422050">which</span> <span m="422120">is</span> <span m="422210">something</span> <span m="422480">I</span> <span m="422550">wrote just for</span> <span m="423050">sort</span> <span m="423270">of</span> <span m="423520">teaching</span> <span m="423835">value,</span> <span m="424150">yeah,</span> <span m="424440">this thing</span> <span m="424780">you shouldn't</span> <span m="425120">trust</span> <span m="425370">for anything.</span> </p>
<p><span m="425720">AUDIENCE: But</span> <span m="425930">the</span> <span m="426185">Shellshock</span> <span m="426440">exploit</span> <span m="427790">was</span> <span m="428100">on</span> <span m="428540">assigning</span> <span m="428950">something</span> <span m="429330">malicious</span> <span m="429790">to an</span> <span m="430285">environment</span> <span m="430780">variable</span> <span m="431275">using</span> <span m="431770">[? set N ?]</span> <span m="432265">or something like that,</span> <span m="432760">which is something</span> <span m="433260">[INAUDIBLE].</span> </p>
<p><span m="433420">PROFESSOR: Oh, yeah, yeah. So</span> <span m="433800">that</span> <span m="433970">gets</span> <span m="434265">back to</span> <span m="434560">his question.</span> <span m="434840">That's</span> <span m="434900">right.</span> <span m="435410">So</span> <span m="435670">if you</span> <span m="435780">had,</span> <span m="436080">like,</span> <span m="436120">let's</span> <span m="436320">say,</span> <span m="436610">Apache</span> <span m="437010">up here,</span> <span m="438000">Apache's</span> <span m="438310">a little</span> <span m="438760">bit</span> <span m="438970">tricky</span> <span m="439320">to sort of</span> <span m="439740">configure</span> <span m="439995">in a</span> <span m="440250">way</span> <span m="440450">that's</span> <span m="440590">obviously</span> <span m="440910">what's</span> <span m="441080">going</span> <span m="441240">on.</span> <span m="441350">But</span> <span m="441450">you're</span> <span m="441550">exactly</span> <span m="441890">right.</span> <span m="442380">So</span> <span m="442500">Apache would</span> <span m="442940">call</span> <span m="443130">Set</span> <span m="443410">nth,</span> <span m="444440">which</span> <span m="444580">is</span> <span m="444640">another</span> <span m="444910">way</span> <span m="445160">that you can</span> <span m="445310">directly</span> <span m="445920">set</span> <span m="446215">the</span> <span m="446510">environment</span> <span m="446970">value</span> <span m="447270">for</span> <span m="447460">whatever</span> <span m="447930">particular</span> <span m="448290">service</span> <span m="448570">[? I ?]</span> <span m="448680">process</span> <span m="448935">you have.</span> </p>
<p><span m="449900">But</span> <span m="450010">you</span> <span m="450120">also</span> <span m="450400">actually</span> <span m="450650">have</span> <span m="450840">some</span> <span m="451040">servers</span> <span m="451370">like</span> <span m="451580">this</span> <span m="451810">that</span> <span m="452050">you</span> <span m="452220">can</span> <span m="452310">imagine</span> <span m="452780">that</span> <span m="452930">they</span> <span m="453000">actually</span> <span m="453690">do</span> <span m="453850">a</span> <span m="454030">spawn of a</span> <span m="454370">separate</span> <span m="454660">process</span> <span m="454965">and</span> <span m="455270">do</span> <span m="455510">something</span> <span m="455800">very</span> <span m="456030">morally</span> <span m="456370">equivalent</span> <span m="456800">to</span> <span m="456900">this.</span> <span m="457220">But</span> <span m="457650">you're exactly</span> <span m="457930">right,</span> <span m="458210">that the</span> <span m="458380">way</span> <span m="458540">that a</span> <span m="458780">patch</span> <span m="459035">in particular</span> <span m="460180">was</span> <span m="460625">violated</span> <span m="461070">was</span> <span m="461220">the</span> <span m="461290">way</span> <span m="461460">that</span> <span m="461770">you</span> <span m="462140">described.</span> <span m="464580">So does it</span> <span m="464790">all</span> <span m="464970">make</span> <span m="465560">sense?</span> <span m="468730">OK.</span> <span m="469240">So</span> <span m="470380">that's</span> <span m="470650">sort of</span> <span m="470720">a</span> <span m="471740">quick</span> <span m="472020">and</span> <span m="472140">dirty</span> <span m="472410">example</span> <span m="472725">of</span> <span m="473720">Shellshock</span> <span m="474380">stuff.</span> </p>
<p><span m="475310">And</span> <span m="475540">so</span> <span m="475970">another</span> <span m="476330">example</span> <span m="476720">I wanted to give</span> <span m="477210">you</span> <span m="477950">was</span> <span m="478310">an</span> <span m="478400">example</span> <span m="478900">of</span> <span m="479220">a</span> <span m="479320">cross-site</span> <span m="479860">scripting.</span> <span m="481460">And so</span> <span m="481860">the</span> <span m="482040">Shellshock</span> <span m="482650">bug</span> <span m="482905">was sort of an</span> <span m="483160">example</span> <span m="484440">of</span> <span m="484510">how</span> <span m="484860">content</span> <span m="485310">sanitization</span> <span m="485860">is</span> <span m="485990">very</span> <span m="486180">important.</span> <span m="487270">So</span> <span m="487460">as we'd</span> <span m="487740">just</span> <span m="487900">been</span> <span m="488020">discussing,</span> <span m="488420">you</span> <span m="488500">shouldn't</span> <span m="488780">just</span> <span m="489010">take</span> <span m="489280">inputs</span> <span m="489720">from</span> <span m="489850">an</span> <span m="489920">arbitrary</span> <span m="490420">person</span> <span m="490700">and</span> <span m="490980">them use them</span> <span m="491470">directly</span> <span m="492430">in</span> <span m="492560">commands</span> <span m="492890">of any</span> <span m="493220">type.</span> <span m="494000">So</span> <span m="494240">cross-site</span> <span m="494620">scripting</span> <span m="494860">attacks</span> <span m="494880">are</span> <span m="495390">another</span> <span m="495680">example</span> <span m="496490">of</span> <span m="496930">how</span> <span m="497090">something</span> <span m="497540">can go</span> <span m="497710">wrong.</span> </p>
<p><span m="498550">So</span> <span m="499020">in</span> <span m="499090">this</span> <span m="499290">example,</span> <span m="499910">I have</span> <span m="500205">another</span> <span m="501420">sort</span> <span m="501670">of</span> <span m="502123">dumb</span> <span m="502810">CGI</span> <span m="503350">server</span> <span m="503700">here.</span> <span m="504950">And</span> <span m="505320">if we look at</span> <span m="505900">this</span> <span m="507020">CGI</span> <span m="507610">server,</span> <span m="508000">so</span> <span m="508120">what</span> <span m="508340">is it</span> <span m="508410">going to</span> <span m="508640">do?</span> <span m="509450">So</span> <span m="509930">once</span> <span m="510180">again,</span> <span m="510540">I've written</span> <span m="510750">something</span> <span m="511120">very</span> <span m="511360">simple in</span> <span m="511800">Python.</span> <span m="512780">This</span> <span m="513010">is</span> <span m="513120">going</span> <span m="513240">to</span> <span m="513289">be</span> <span m="513409">the</span> <span m="513679">handle</span> <span m="513950">that</span> <span m="513990">executes</span> <span m="514840">when</span> <span m="515240">a</span> <span m="515299">request</span> <span m="515710">comes</span> <span m="515929">in</span> <span m="516230">from the</span> <span m="516559">client.</span> <span m="517000">And</span> <span m="517110">so</span> <span m="517270">essentially,</span> <span m="517580">what</span> <span m="517730">happens</span> <span m="518110">is</span> <span m="518250">that</span> <span m="520169">up</span> <span m="520350">here,</span> <span m="520809">I'm going to</span> <span m="520960">print</span> <span m="521215">some</span> <span m="521470">headers</span> <span m="522110">for</span> <span m="522320">the</span> <span m="522460">response.</span> <span m="523049">So I'm</span> <span m="523250">going to say, my</span> <span m="523679">response</span> <span m="524070">is</span> <span m="524159">going</span> <span m="524270">to</span> <span m="524330">be</span> <span m="524460">of</span> <span m="524540">type</span> <span m="524770">text</span> <span m="525050">HTML.</span> <span m="526250">This</span> <span m="526540">line</span> <span m="526810">here</span> <span m="527060">we'll</span> <span m="527260">actually</span> <span m="527590">explain</span> <span m="528060">in</span> <span m="528140">a</span> <span m="528210">second.</span> <span m="529000">So as</span> <span m="529110">it</span> <span m="529220">turns</span> <span m="529470">out,</span> <span m="529660">browsers</span> <span m="530130">have</span> <span m="530320">some</span> <span m="530510">security</span> <span m="530930">mechanisms</span> <span m="531350">to</span> <span m="531410">try</span> <span m="531610">to</span> <span m="531680">prevent</span> <span m="532320">the</span> <span m="532430">attack</span> <span m="532790">that I'm</span> <span m="533020">about</span> <span m="533260">to</span> <span m="533330">show</span> <span m="533620">you.</span> <span m="534250">So</span> <span m="534320">I</span> <span m="534400">put</span> <span m="534610">this</span> <span m="534750">example--</span> <span m="535140">I</span> <span m="535230">put</span> <span m="535410">that</span> <span m="535580">header</span> <span m="535900">line in</span> <span m="536320">there</span> <span m="536560">to turn some</span> <span m="536850">of the</span> <span m="537010">protections</span> <span m="537550">off.</span> </p>
<p><span m="539060">And</span> <span m="539260">then</span> <span m="539840">what</span> <span m="540560">the</span> <span m="540720">CGI</span> <span m="540840">script</span> <span m="541330">does</span> <span m="541640">is</span> <span m="541950">it</span> <span m="542390">gets</span> <span m="542640">access</span> <span m="543610">to</span> <span m="544210">all</span> <span m="544475">of</span> <span m="544740">the</span> <span m="545270">fields</span> <span m="545710">and</span> <span m="545880">the CGI</span> <span m="546280">requests.</span> <span m="546625">So</span> <span m="546970">imagine</span> <span m="547420">that</span> <span m="547540">everything</span> <span m="547925">in a</span> <span m="548310">query</span> <span m="548660">string</span> <span m="549180">after</span> <span m="549460">this</span> <span m="549640">question</span> <span m="550030">mark--</span> <span m="550580">like</span> <span m="552080">these</span> <span m="552250">header and</span> <span m="552600">value</span> <span m="552930">things,</span> <span m="553140">that's</span> <span m="553480">what goes</span> <span m="553700">into</span> <span m="553830">that</span> <span m="554080">form</span> <span m="554300">example</span> <span m="554680">there.</span> <span m="555740">And</span> <span m="555910">so</span> <span m="556100">what the</span> <span m="556200">CGI</span> <span m="556540">script</span> <span m="556790">does</span> <span m="557160">is</span> <span m="557380">something</span> <span m="557680">very</span> <span m="557890">simple.</span> <span m="558510">It</span> <span m="558520">just</span> <span m="558690">directly</span> <span m="559570">prints</span> <span m="559940">the</span> <span m="560310">value</span> <span m="561566">of</span> <span m="562360">something</span> <span m="562580">that</span> <span m="562960">was</span> <span m="563365">passed</span> <span m="563770">from</span> <span m="564000">the</span> <span m="564120">attacker.</span> <span m="565280">So</span> <span m="565450">same</span> <span m="565700">basic idea.</span> <span m="566150">This</span> <span m="566310">is</span> <span m="566410">a</span> <span m="566550">bad</span> <span m="566740">idea,</span> <span m="567080">because</span> <span m="567640">this</span> <span m="567830">Print</span> <span m="568320">statement,</span> <span m="568600">it's</span> <span m="568760">printing</span> <span m="569190">directly</span> <span m="569830">into</span> <span m="570050">the</span> <span m="570200">HTML</span> <span m="570750">itself.</span> </p>
<p><span m="572200">So</span> <span m="572790">what</span> <span m="573040">can</span> <span m="573200">happen</span> <span m="574230">is</span> <span m="575130">as</span> <span m="575320">follows.</span> <span m="575840">So</span> <span m="576010">let's</span> <span m="576340">say</span> <span m="577130">that</span> <span m="577340">I</span> <span m="577460">have</span> <span m="577700">a</span> <span m="577740">bunch</span> <span m="578070">of</span> <span m="579190">queries</span> <span m="579660">I want to</span> <span m="579850">run.</span> <span m="580740">So</span> <span m="580980">in this</span> <span m="581160">first</span> <span m="581440">query</span> <span m="581690">here,</span> <span m="581955">I'm</span> <span m="582220">just</span> <span m="582330">setting</span> <span m="583370">the</span> <span m="583440">message</span> <span m="584020">value</span> <span m="584760">to</span> <span m="584970">Hello.</span> <span m="586350">So</span> <span m="586900">if</span> <span m="587020">I</span> <span m="587080">go</span> <span m="587260">over</span> <span m="587490">here</span> <span m="590010">and</span> <span m="590170">I</span> <span m="590210">run</span> <span m="590500">that</span> <span m="590740">page,</span> <span m="591170">well,</span> <span m="591350">then you're</span> <span m="591550">going to see</span> <span m="591910">that this</span> <span m="592010">Hello</span> <span m="592190">shows</span> <span m="592500">up,</span> <span m="592900">because</span> <span m="593260">once</span> <span m="593510">again,</span> <span m="593860">the server was</span> <span m="594330">taking</span> <span m="594580">directly</span> <span m="594940">what</span> <span m="595080">I</span> <span m="595210">pass to</span> <span m="595475">it.</span> <span m="595740">And</span> <span m="595940">it</span> <span m="596180">prints</span> <span m="596400">Hello.</span> <span m="597140">So</span> <span m="597210">no big</span> <span m="597480">surprises</span> <span m="598010">there.</span> </p>
<p><span m="599150">Now</span> <span m="599430">let's</span> <span m="599810">say</span> <span m="600580">I</span> <span m="600730">realize</span> <span m="601200">that</span> <span m="601300">I</span> <span m="601360">can</span> <span m="601490">actually</span> <span m="601890">pass</span> <span m="602210">arbitrary</span> <span m="602780">HTML</span> <span m="603120">in there.</span> <span m="603950">So</span> <span m="604400">now</span> <span m="604890">I</span> <span m="605010">actually</span> <span m="605350">try</span> <span m="605790">to</span> <span m="606620">embed</span> <span m="608170">some</span> <span m="608560">styling</span> <span m="608945">in there.</span> <span m="609930">So</span> <span m="610010">I</span> <span m="610110">say,</span> <span m="610410">h1</span> <span m="611025">and</span> <span m="611410">then</span> <span m="611510">Hello</span> <span m="611690">again</span> <span m="612120">/h1.</span> <span m="612550">So</span> <span m="612660">that</span> <span m="612870">worked,</span> <span m="613210">right?</span> <span m="613550">So once</span> <span m="613820">again, we're printing</span> <span m="614090">directly</span> <span m="614740">into</span> <span m="615020">the</span> <span m="615180">[? pake. ?]</span> <span m="616310">So</span> <span m="616530">now</span> <span m="616770">you</span> <span m="616850">might</span> <span m="617060">think,</span> <span m="617250">OK,</span> <span m="617550">we're in</span> <span m="617730">business</span> <span m="618130">now.</span> <span m="618410">This is</span> <span m="618500">cool.</span> <span m="618930">So</span> <span m="619060">let's</span> <span m="619240">just</span> <span m="619470">directly</span> <span m="620360">embed</span> <span m="621220">some</span> <span m="621500">JavaScript</span> <span m="622170">code</span> <span m="622390">in there.</span> <span m="623620">All right.</span> <span m="624030">And</span> <span m="624230">so</span> <span m="624540">I</span> <span m="624630">do</span> <span m="624970">this.</span> <span m="626150">And</span> <span m="626270">here,</span> <span m="626570">I've</span> <span m="626670">actually</span> <span m="626950">just</span> <span m="627140">put</span> <span m="627290">in--</span> <span m="627470">for</span> <span m="627590">the</span> <span m="627690">message,</span> <span m="628010">I put</span> <span m="628270">script.</span> <span m="629050">And then</span> <span m="629290">I want it to</span> <span m="629560">just</span> <span m="629660">alert</span> <span m="631400">XSS</span> <span m="631850">and then</span> <span m="632300">script.</span> <span m="634140">So</span> <span m="634300">now that's</span> <span m="634640">interesting.</span> </p>
<p><span m="635150">So</span> <span m="635280">it</span> <span m="635370">seems</span> <span m="635660">like</span> <span m="635890">something</span> <span m="636380">didn't</span> <span m="636680">quite</span> <span m="636970">work.</span> <span m="637220">So</span> <span m="637290">I</span> <span m="637350">don't</span> <span m="637560">see</span> <span m="637760">any</span> <span m="637980">output.</span> <span m="638320">I didn't</span> <span m="638580">see</span> <span m="638750">the alert</span> <span m="639140">either.</span> <span m="639240">And</span> <span m="639645">if I</span> <span m="640050">actually</span> <span m="640390">look</span> <span m="640630">at</span> <span m="640710">the</span> <span m="640850">output</span> <span m="641310">for</span> <span m="641390">the</span> <span m="641490">web</span> <span m="641740">server--</span> <span m="643840">and</span> <span m="643850">what</span> <span m="643980">I</span> <span m="644080">see</span> <span m="644630">is</span> <span m="644760">that</span> <span m="645010">here,</span> <span m="646340">the</span> <span m="646440">web</span> <span m="646700">server</span> <span m="646980">itself</span> <span m="647400">didn't</span> <span m="647620">actually</span> <span m="648040">get</span> <span m="648250">that</span> <span m="648430">trailing</span> <span m="648750">script</span> <span m="649070">tag.</span> <span m="649950">So</span> <span m="650140">it</span> <span m="650230">seems</span> <span m="650550">like</span> <span m="650720">the</span> <span m="650810">browser</span> <span m="651350">itself</span> <span m="651770">has</span> <span m="651880">somehow</span> <span m="652190">detected</span> <span m="652680">something</span> <span m="653010">evil</span> <span m="653760">even</span> <span m="654040">though</span> <span m="654130">I</span> <span m="654240">tried</span> <span m="654470">to</span> <span m="654610">disable</span> <span m="655160">the</span> <span m="655420">XSS</span> <span m="657080">filter.</span> <span m="658420">So</span> <span m="658570">that's</span> <span m="658730">interesting.</span> </p>
<p><span m="659160">We're</span> <span m="659270">going</span> <span m="659370">to</span> <span m="659450">come</span> <span m="660100">to</span> <span m="660220">this</span> <span m="661870">defense</span> <span m="662180">mechanism</span> <span m="662680">a</span> <span m="662740">bit</span> <span m="662980">in</span> <span m="663060">the</span> <span m="663150">lecture.</span> <span m="663430">But</span> <span m="663710">suffice</span> <span m="663850">it to</span> <span m="663910">say,</span> <span m="664380">it</span> <span m="664610">seems</span> <span m="664830">like</span> <span m="664970">the</span> <span m="665050">browser</span> <span m="665355">is trying</span> <span m="665660">to</span> <span m="665800">resist</span> <span m="665960">this</span> <span m="666570">cross-site</span> <span m="666950">scripting</span> <span m="667320">attack.</span> <span m="668030">But</span> <span m="668160">of</span> <span m="668260">course,</span> <span m="668570">what we</span> <span m="668780">can</span> <span m="668910">take</span> <span m="669100">advantage</span> <span m="669530">of</span> <span m="670040">is</span> <span m="670260">the</span> <span m="670360">fact</span> <span m="670850">that</span> <span m="671400">HTML,</span> <span m="672172">and</span> <span m="672560">CSS,</span> <span m="672915">and</span> <span m="673270">JavaScript,</span> <span m="673730">they're</span> <span m="673920">extremely</span> <span m="674480">complex</span> <span m="675070">languages.</span> <span m="675910">And</span> <span m="676030">they</span> <span m="676160">compose</span> <span m="676720">in these</span> <span m="676960">very</span> <span m="677200">difficult</span> <span m="677650">to</span> <span m="677840">understand</span> <span m="678170">ways.</span> </p>
<p><span m="678910">So</span> <span m="679160">here,</span> <span m="679470">this is</span> <span m="679780">what</span> <span m="680280">I've been</span> <span m="680310">setting my</span> <span m="680600">attack</span> <span m="681000">string</span> <span m="681255">here.</span> <span m="681510">This</span> <span m="681680">is</span> <span m="681810">malform</span> <span m="682740">URL.</span> <span m="683380">I'm saying,</span> <span m="683740">image,</span> <span m="684025">and</span> <span m="684310">then</span> <span m="684570">three</span> <span m="684770">quotation</span> <span m="685350">marks</span> <span m="685620">in</span> <span m="685700">a</span> <span m="685800">row,</span> <span m="686390">and</span> <span m="686600">then a</span> <span m="686660">script</span> <span m="687040">tag.</span> <span m="687340">Like,</span> <span m="687640">this</span> <span m="687740">shouldn't</span> <span m="688310">actually</span> <span m="688710">parse.</span> <span m="689330">But</span> <span m="689540">what's</span> <span m="689780">going</span> <span m="689880">to end up</span> <span m="690230">happening</span> <span m="690900">is</span> <span m="691030">that</span> <span m="691270">the</span> <span m="691620">browser's</span> <span m="692330">going to</span> <span m="692410">get</span> <span m="692590">confused</span> <span m="692960">here.</span> <span m="694740">So</span> <span m="694940">it's</span> <span m="694990">built-in</span> <span m="696220">cross-site</span> <span m="696850">scripting</span> <span m="697850">detection</span> <span m="698560">actually</span> <span m="698880">fails</span> <span m="699270">here.</span> </p>
<p><span m="700330">And so</span> <span m="700430">what</span> <span m="700520">ends up</span> <span m="700730">happening</span> <span m="701030">is</span> <span m="701230">that</span> <span m="701380">now</span> <span m="701550">you</span> <span m="701680">see the</span> <span m="702070">alert.</span> <span m="702710">OK?</span> <span m="703230">And</span> <span m="703400">what's</span> <span m="703550">interesting</span> <span m="704010">is</span> <span m="704090">that</span> <span m="704260">if</span> <span m="704370">you</span> <span m="704470">actually</span> <span m="704860">look</span> <span m="705260">at</span> <span m="705570">the</span> <span m="705660">contents</span> <span m="706090">of</span> <span m="706180">the</span> <span m="706260">page</span> <span m="706640">now,</span> <span m="707090">it's</span> <span m="707270">kind</span> <span m="707500">of</span> <span m="707560">messed</span> <span m="707890">up.</span> <span m="708130">Like,</span> <span m="708480">where</span> <span m="708690">did</span> <span m="708790">this</span> <span m="709680">quotation</span> <span m="710220">mark</span> <span m="710540">and brace</span> <span m="710970">come</span> <span m="711160">in?</span> <span m="711520">If we</span> <span m="711800">do a</span> <span m="712090">Control,</span> <span m="712560">U,</span> <span m="713000">we</span> <span m="713240">can</span> <span m="713400">see</span> <span m="713690">that</span> <span m="714530">this</span> <span m="714820">does</span> <span m="714960">not</span> <span m="715300">make</span> <span m="715510">the</span> <span m="715590">browser</span> <span m="715990">happy</span> <span m="716500">in</span> <span m="716610">some</span> <span m="716860">way.</span> <span m="717620">That's</span> <span m="717790">a</span> <span m="717830">little</span> <span m="718030">bit</span> <span m="718200">unclear.</span> <span m="718740">But</span> <span m="719182">it doesn't</span> <span m="719624">matter</span> <span m="720066">if</span> <span m="720510">we're their</span> <span m="720820">attacker.</span> <span m="721430">We</span> <span m="721750">saw</span> <span m="721990">that</span> <span m="722260">alert.</span> <span m="723090">That</span> <span m="723270">means</span> <span m="723400">that</span> <span m="723480">[? our code ?]</span> <span m="723700">got the</span> <span m="723900">run.</span> <span m="724800">And</span> <span m="725010">from the</span> <span m="725170">perspective</span> <span m="725480">of</span> <span m="725600">the</span> <span m="725700">attacker,</span> <span m="726070">who</span> <span m="726410">cares</span> <span m="726750">that the</span> <span m="726780">page</span> <span m="727030">is</span> <span m="727110">messed</span> <span m="727230">up</span> <span m="727440">now?</span> <span m="728000">Because</span> <span m="728300">I</span> <span m="728370">could</span> <span m="728630">have used</span> <span m="729000">that</span> <span m="729360">code</span> <span m="729660">to</span> <span m="729960">steal</span> <span m="730180">the</span> <span m="730280">cookie</span> <span m="730720">or</span> <span m="730790">things</span> <span m="731070">like</span> <span m="731270">that.</span> <span m="732080">So</span> <span m="732355">does that all make--</span> <span m="732630">yeah?</span> </p>
<p><span m="733140">AUDIENCE: What's</span> <span m="733390">the cross-site</span> <span m="733600">aspect?</span> </p>
<p><span m="735270">PROFESSOR:  Ah.</span> <span m="735720">So</span> <span m="736230">the</span> <span m="736330">cross-site</span> <span m="736760">aspect</span> <span m="737270">is</span> <span m="737500">that</span> <span m="738410">if</span> <span m="738820">the</span> <span m="739710">attacker</span> <span m="740570">can</span> <span m="740760">convince</span> <span m="741200">the</span> <span m="741290">user</span> <span m="741640">to</span> <span m="741750">go</span> <span m="741930">to a</span> <span m="742200">URL</span> <span m="742750">like</span> <span m="742940">this,</span> <span m="744220">then</span> <span m="744510">the</span> <span m="744650">attacker's</span> <span m="744945">the</span> <span m="745240">one</span> <span m="745440">who's</span> <span m="745540">specifying</span> <span m="746270">that</span> <span m="746450">stuff</span> <span m="746750">in the</span> <span m="746900">message.</span> <span m="747820">It's</span> <span m="748100">the</span> <span m="748210">attacker</span> <span m="748670">who's</span> <span m="748780">specifying</span> <span m="749055">the</span> <span m="749330">alert</span> <span m="749645">XSS</span> <span m="750610">or</span> <span m="750670">something</span> <span m="750960">like</span> <span m="751170">that.</span> <span m="752030">And</span> <span m="752140">so</span> <span m="752280">essentially,</span> <span m="752630">what's</span> <span m="752800">happening</span> <span m="753160">is</span> <span m="753230">that</span> <span m="753460">the</span> <span m="753910">victim</span> <span m="754270">page</span> <span m="754620">is</span> <span m="754810">executing</span> <span m="755480">code</span> <span m="755890">on</span> <span m="756040">behalf</span> <span m="756470">of</span> <span m="756560">someone</span> <span m="757050">that</span> <span m="757210">is</span> <span m="757340">not</span> <span m="757550">that</span> <span m="757740">page.</span> </p>
<p><span m="760110">AUDIENCE: Can</span> <span m="760595">you explain</span> <span m="761080">exactly</span> <span m="761565">what the</span> <span m="762050">browser roles</span> <span m="762535">are for</span> <span m="763020">sanitizing</span> <span m="763505">[? games ?]</span> <span m="763990">for</span> <span m="764475">[? play? ?]</span> </p>
<p><span m="764970">PROFESSOR: Yeah, yeah.</span> <span m="765470">So we'll</span> <span m="765790">get to that</span> <span m="766090">in a second.</span> <span m="766550">So we'll</span> <span m="766850">get to that</span> <span m="767300">in a</span> <span m="767790">second.</span> <span m="769750">OK.</span> <span m="770300">So</span> <span m="770920">that</span> <span m="771390">is</span> <span m="771830">all</span> <span m="772230">for</span> <span m="773020">story time.</span> <span m="775745">And</span> <span m="776210">let's</span> <span m="776460">see</span> <span m="776760">here.</span> <span m="777110">So I</span> <span m="777395">guess I</span> <span m="777680">can turn</span> <span m="778171">this</span> <span m="778662">guy on.</span> <span m="779644">And</span> <span m="780626">maybe</span> <span m="781608">he</span> <span m="782099">will</span> <span m="784554">[INAUDIBLE]</span> <span m="785045">guy</span> <span m="785536">here.</span> <span m="787991">This guy</span> <span m="788482">here.</span> </p>
<p><span m="788973">AUDIENCE: Front wall.</span> </p>
<p><span m="789464">PROFESSOR:  Ah, OK.</span> <span m="789955">There you</span> <span m="790446">go.</span> <span m="791919">All right. Eighth</span> <span m="792410">time's</span> <span m="792901">the charm. OK,</span> <span m="793392">thanks.</span> <span m="794374">OK.</span> <span m="794865">So yeah,</span> <span m="795356">so those</span> <span m="795847">are just two</span> <span m="796338">quick demos</span> <span m="796829">to sort of show</span> <span m="797320">you the</span> <span m="797811">filthy</span> <span m="798302">and dirty world</span> <span m="798793">that we</span> <span m="799284">live in right now.</span> <span m="799810">So</span> <span m="800100">why</span> <span m="800610">is</span> <span m="800915">cross-site</span> <span m="801520">scripting</span> <span m="802400">so</span> <span m="802630">prevalent?</span> <span m="803090">Why are</span> <span m="803300">these</span> <span m="803796">problems</span> <span m="804292">such</span> <span m="804788">a big</span> <span m="805284">deal?</span> <span m="805780">Well,</span> <span m="805900">the</span> <span m="806030">reason</span> <span m="806460">is</span> <span m="806580">that</span> <span m="807460">websites</span> <span m="807745">are</span> <span m="808030">increasingly</span> <span m="808335">more and</span> <span m="808640">more</span> <span m="809090">dynamic,</span> <span m="809740">and</span> <span m="809860">they</span> <span m="809970">want</span> <span m="810230">to</span> <span m="810270">incorporate</span> <span m="811220">a</span> <span m="811310">user</span> <span m="811690">content</span> <span m="811995">a</span> <span m="812300">lot of</span> <span m="812630">times,</span> <span m="812940">or they</span> <span m="813080">want</span> <span m="813300">to</span> <span m="813340">incorporate</span> <span m="813840">content</span> <span m="814350">from</span> <span m="814610">other</span> <span m="814850">domains.</span> <span m="815610">So</span> <span m="815740">think</span> <span m="815880">about</span> <span m="816060">the</span> <span m="816160">Comment</span> <span m="816630">section</span> <span m="817410">on</span> <span m="817490">a</span> <span m="817740">news</span> <span m="817840">article.</span> </p>
<p><span m="818810">Those</span> <span m="819000">comments</span> <span m="819380">come</span> <span m="819775">from</span> <span m="820170">untrusted</span> <span m="820420">folks,</span> <span m="820900">from the</span> <span m="821350">users. So</span> <span m="821690">somehow,</span> <span m="822650">these</span> <span m="822800">sites</span> <span m="823160">have</span> <span m="823280">to</span> <span m="823370">figure</span> <span m="823710">out,</span> <span m="823950">what</span> <span m="824100">are</span> <span m="824120">the</span> <span m="824310">rules</span> <span m="824570">for</span> <span m="824690">composing</span> <span m="825150">those</span> <span m="825340">types</span> <span m="825580">of</span> <span m="825700">things?</span> <span m="826710">And</span> <span m="826840">also,</span> <span m="827310">the</span> <span m="827720">websites</span> <span m="828190">might</span> <span m="828450">host</span> <span m="829370">user-submitted</span> <span m="829860">documents,</span> <span m="830410">a</span> <span m="830490">thing</span> <span m="830680">like</span> <span m="830850">Google</span> <span m="831130">Docs</span> <span m="831470">or Office</span> <span m="831830">365,</span> <span m="832520">for</span> <span m="832630">example.</span> <span m="833280">Those</span> <span m="834330">documents</span> <span m="834730">all</span> <span m="834960">come from</span> <span m="835210">untrusted</span> <span m="835730">folks,</span> <span m="836010">but</span> <span m="836180">somehow,</span> <span m="836840">they</span> <span m="836930">have</span> <span m="837140">to</span> <span m="837250">live</span> <span m="838010">with</span> <span m="838280">each</span> <span m="838460">other</span> <span m="838950">and</span> <span m="839320">with the</span> <span m="839370">large</span> <span m="839740">infrastructure</span> <span m="840320">from</span> <span m="840530">Google</span> <span m="840910">or from</span> <span m="841020">Microsoft</span> <span m="841300">or</span> <span m="841580">whatnot.</span> </p>
<p><span m="843530">So</span> <span m="844030">what</span> <span m="844250">are</span> <span m="844310">some</span> <span m="844490">of</span> <span m="844590">the</span> <span m="845160">cross-site</span> <span m="846240">scripting</span> <span m="846320">defenses</span> <span m="846800">we</span> <span m="846920">can</span> <span m="847040">use?</span> <span m="847240">This</span> <span m="847350">kind</span> <span m="847490">of</span> <span m="847560">gets</span> <span m="847750">to</span> <span m="847830">your</span> <span m="847980">question.</span> <span m="848830">So we'll</span> <span m="849020">actually</span> <span m="849730">look</span> <span m="849920">at</span> <span m="850000">some</span> <span m="850150">of</span> <span m="850200">those</span> <span m="850400">now.</span> <span m="856140">So</span> <span m="856610">one</span> <span m="856890">type of</span> <span m="857372">defense</span> <span m="859300">is</span> <span m="859830">to</span> <span m="859920">basically</span> <span m="861120">have</span> <span m="862140">cross-site</span> <span m="862880">scripting</span> <span m="863640">filters</span> <span m="865300">in</span> <span m="865510">the</span> <span m="865610">browser</span> <span m="866150">itself.</span> <span m="870210">And</span> <span m="870340">so</span> <span m="870500">these</span> <span m="870830">filters</span> <span m="871750">will</span> <span m="872060">essentially</span> <span m="872730">try</span> <span m="873080">to</span> <span m="874030">detect</span> <span m="875580">when</span> <span m="875890">there's</span> <span m="876240">a</span> <span m="876300">potential</span> <span m="877150">cross-site</span> <span m="877700">scripting</span> <span m="878090">attack.</span> <span m="879360">And</span> <span m="879490">so</span> <span m="879640">we</span> <span m="879740">actually</span> <span m="880100">saw</span> <span m="880480">one</span> <span m="880710">of</span> <span m="880810">those</span> <span m="881060">filters</span> <span m="881500">in</span> <span m="881620">action.</span> <span m="882490">And</span> <span m="882820">I think that</span> <span m="883110">was</span> <span m="883250">the</span> <span m="883350">third</span> <span m="883680">example</span> <span m="884080">that we</span> <span m="884190">looked</span> <span m="884520">at.</span> </p>
<p><span m="885560">If you</span> <span m="885690">have</span> <span m="886000">some</span> <span m="886860">website--</span> <span m="887780">or</span> <span m="887890">some</span> <span m="888380">URL--</span> <span m="888710">excuse</span> <span m="888810">me--</span> <span m="889140">that</span> <span m="889230">looks</span> <span m="889460">like</span> <span m="889680">this--</span> <span m="893370">so</span> <span m="893540">foo.com.</span> <span m="893850">And</span> <span m="894280">then you</span> <span m="894710">have</span> <span m="895570">some</span> <span m="896270">question</span> <span m="896730">mark</span> <span m="898000">and</span> <span m="898120">then</span> <span m="898270">some</span> <span m="898580">query</span> <span m="898890">string</span> <span m="899280">you're going</span> <span m="899620">to submit.</span> <span m="901300">This</span> <span m="901470">is</span> <span m="901600">very</span> <span m="901870">similar</span> <span m="902370">to</span> <span m="902880">the</span> <span m="903060">example</span> <span m="904160">that</span> <span m="904270">I</span> <span m="904410">tried</span> <span m="906130">third.</span> <span m="906830">So</span> <span m="906930">I just</span> <span m="906960">set</span> <span m="907250">this</span> <span m="907340">source</span> <span m="907810">to</span> <span m="908140">something</span> <span m="908440">like</span> <span m="909660">evil.com/cookiestealer.js.</span> <span m="922150">And</span> <span m="922300">so</span> <span m="923050">what</span> <span m="923335">ended up</span> <span m="923620">happening</span> <span m="923690">was</span> <span m="923900">that when</span> <span m="924040">I</span> <span m="924280">tried</span> <span m="924770">an</span> <span m="924890">example</span> <span m="925300">similar</span> <span m="925640">to this,</span> <span m="925940">the</span> <span m="926020">browser</span> <span m="926460">actually</span> <span m="926760">rejected</span> <span m="927260">it</span> <span m="927520">out of hand.</span> <span m="928460">So</span> <span m="928580">we</span> <span m="928660">saw</span> <span m="928880">that</span> <span m="929240">it</span> <span m="929310">didn't</span> <span m="929540">even</span> <span m="929710">work.</span> </p>
<p><span m="930380">And</span> <span m="930410">the</span> <span m="930510">reason</span> <span m="930800">why it</span> <span m="930950">didn't</span> <span m="931230">work</span> <span m="931820">is</span> <span m="932020">because</span> <span m="932640">the</span> <span m="932740">browser</span> <span m="933230">looked</span> <span m="933510">and</span> <span m="933630">said,</span> <span m="934330">is</span> <span m="934560">there</span> <span m="935760">an</span> <span m="936120">embedded</span> <span m="936760">script</span> <span m="937420">tag</span> <span m="938490">in</span> <span m="939020">a</span> <span m="939090">URL?</span> <span m="940590">So</span> <span m="940690">basically,</span> <span m="940910">it's</span> <span m="941070">a</span> <span m="941120">very</span> <span m="941380">simple</span> <span m="941730">heuristic</span> <span m="942200">for figuring</span> <span m="942510">out if</span> <span m="942770">something</span> <span m="943290">evil's</span> <span m="943670">probably</span> <span m="944020">going</span> <span m="944410">on,</span> <span m="944860">because</span> <span m="945660">no</span> <span m="945970">legitimate</span> <span m="946480">developer--</span> <span m="946840">or</span> <span m="947040">no</span> <span m="947190">developer</span> <span m="947570">that's</span> <span m="947660">sane--</span> <span m="948100">should</span> <span m="948290">be</span> <span m="948400">doing</span> <span m="948670">stuff</span> <span m="948940">like</span> <span m="949130">this.</span> <span m="950100">So</span> <span m="950220">there's</span> <span m="950380">actually these</span> <span m="950870">configuration</span> <span m="951510">options in</span> <span m="951910">your</span> <span m="952280">browser</span> <span m="952650">you can use to</span> <span m="952790">turn</span> <span m="953040">these</span> <span m="953240">things</span> <span m="953470">on</span> <span m="953740">and off.</span> <span m="954200">Occasionally,</span> <span m="954585">this</span> <span m="954970">is</span> <span m="955040">useful</span> <span m="955320">for</span> <span m="955520">testing</span> <span m="955900">if you</span> <span m="956280">just want</span> <span m="956540">to</span> <span m="956710">inject some</span> <span m="957190">JavaScript</span> <span m="957690">really</span> <span m="957910">quick</span> <span m="958140">and</span> <span m="958230">dirty.</span> <span m="958940">But</span> <span m="959150">this</span> <span m="959340">is</span> <span m="959450">almost</span> <span m="959830">always</span> <span m="960220">assigned</span> <span m="960550">[INAUDIBLE].</span> </p>
<p><span m="961530">So</span> <span m="961860">for</span> <span m="961960">example,</span> <span m="962310">Chrome</span> <span m="962570">and</span> <span m="962830">IE</span> <span m="962980">have</span> <span m="963080">a</span> <span m="963140">built-in</span> <span m="963530">filter</span> <span m="963810">that will</span> <span m="964040">look</span> <span m="964260">at</span> <span m="964330">your</span> <span m="964460">URL</span> <span m="964910">value</span> <span m="965280">in</span> <span m="965360">the</span> <span m="965450">address</span> <span m="965740">bar,</span> <span m="966290">look</span> <span m="966520">for</span> <span m="967250">things</span> <span m="967510">like</span> <span m="967740">this.</span> <span m="968240">And</span> <span m="968420">if</span> <span m="968530">it's</span> <span m="968750">there,</span> <span m="969480">they</span> <span m="969650">will</span> <span m="969840">do</span> <span m="970030">things</span> <span m="970330">like</span> <span m="970500">maybe</span> <span m="971080">delete</span> <span m="971530">this</span> <span m="971690">whole</span> <span m="971880">thing</span> <span m="972060">completely.</span> <span m="972910">They</span> <span m="973030">will</span> <span m="973180">maybe</span> <span m="973930">change</span> <span m="974250">the</span> <span m="974350">source</span> <span m="974680">to</span> <span m="974760">be</span> <span m="974910">empty,</span> <span m="975420">stuff</span> <span m="975700">like</span> <span m="975890">that.</span> <span m="976480">And</span> <span m="976640">so</span> <span m="976800">essentially,</span> <span m="977160">to get to</span> <span m="977520">your</span> <span m="977650">question,</span> <span m="978190">there's</span> <span m="978370">a</span> <span m="978430">bunch</span> <span m="978720">of</span> <span m="978810">heuristics</span> <span m="979920">that</span> <span m="980230">the</span> <span m="980340">browsers</span> <span m="980760">have</span> <span m="981310">to</span> <span m="981430">identify</span> <span m="982060">things</span> <span m="982430">like</span> <span m="982650">this.</span> <span m="982940">And if</span> <span m="983140">you</span> <span m="983390">look</span> <span m="983540">at</span> <span m="983700">the</span> <span m="983820">OWASP</span> <span m="984240">site,</span> <span m="984750">they</span> <span m="984830">actually</span> <span m="985180">collect</span> <span m="986020">examples</span> <span m="986930">of</span> <span m="987030">heuristics</span> <span m="987560">you</span> <span m="987660">can</span> <span m="988030">use to detect</span> <span m="988380">cross-site</span> <span m="988740">scripting,</span> <span m="989300">as</span> <span m="989530">well</span> <span m="989970">as</span> <span m="990970">tricks</span> <span m="991300">you</span> <span m="991390">can</span> <span m="991540">use</span> <span m="991880">to</span> <span m="992190">bypass</span> <span m="992850">those</span> <span m="993070">filters.</span> </p>
<p><span m="993980">So</span> <span m="994100">it was</span> <span m="994190">very</span> <span m="994420">funny.</span> <span m="994780">So</span> <span m="994880">the</span> <span m="994980">first</span> <span m="995160">thing</span> <span m="995310">I</span> <span m="995360">wanted</span> <span m="995590">to</span> <span m="995650">do</span> <span m="995810">for the</span> <span m="995990">demo</span> <span m="996360">is do</span> <span m="996460">something</span> <span m="996690">like</span> <span m="996900">this,</span> <span m="997330">and it</span> <span m="997510">didn't</span> <span m="997720">work.</span> <span m="998320">So</span> <span m="998460">then I</span> <span m="998570">went to</span> <span m="999040">the OWASP</span> <span m="999370">cheat</span> <span m="999610">sheet.</span> <span m="1000060">I</span> <span m="1000220">looked</span> <span m="1000350">at,</span> <span m="1000490">like,</span> <span m="1000680">the</span> <span m="1000770">third</span> <span m="1001180">thing</span> <span m="1001340">they</span> <span m="1001460">suggested,</span> <span m="1002170">and</span> <span m="1002290">the</span> <span m="1002410">third</span> <span m="1002750">thing</span> <span m="1002830">they</span> <span m="1002920">suggested</span> <span m="1003360">worked,</span> <span m="1004130">which</span> <span m="1004330">was</span> <span m="1004460">that</span> <span m="1004640">sort</span> <span m="1004800">of</span> <span m="1004900">broken</span> <span m="1005350">image</span> <span m="1005700">syntax</span> <span m="1006210">type</span> <span m="1006380">stuff.</span> </p>
<p><span m="1007460">So</span> <span m="1008010">the</span> <span m="1008340">basic</span> <span m="1008700">problem</span> <span m="1009170">with</span> <span m="1009580">just</span> <span m="1009890">relying</span> <span m="1010380">on this</span> <span m="1010720">is</span> <span m="1010820">that,</span> <span m="1010940">like I</span> <span m="1011160">said,</span> <span m="1011410">there's</span> <span m="1011540">a</span> <span m="1011610">lot</span> <span m="1012010">of</span> <span m="1012110">different</span> <span m="1012480">ways</span> <span m="1012910">to</span> <span m="1013140">force</span> <span m="1013380">the</span> <span m="1013450">CSS</span> <span m="1013920">and HTML</span> <span m="1014400">parsers</span> <span m="1014880">to</span> <span m="1015160">mal-parse</span> <span m="1016030">something.</span> <span m="1016710">So</span> <span m="1016780">these</span> <span m="1016970">things</span> <span m="1017170">are</span> <span m="1017600">not</span> <span m="1018040">complete</span> <span m="1018630">solutions.</span> <span m="1019080">They don't have the</span> <span m="1019400">perfect</span> <span m="1019730">coverage.</span> </p>
<p><span m="1020980">AUDIENCE: Shouldn't</span> <span m="1021480">this just</span> <span m="1021620">be</span> <span m="1021760">like the</span> <span m="1021880">lead-in</span> <span m="1022630">from the</span> <span m="1022730">browsers?</span> <span m="1023290">Because</span> <span m="1023680">it</span> <span m="1023750">seems</span> <span m="1023990">like</span> <span m="1025089">not</span> <span m="1025440">the</span> <span m="1025705">browser's</span> <span m="1025970">job</span> <span m="1026290">to</span> <span m="1026753">do this.</span> </p>
<p><span m="1028060">PROFESSOR: You mean</span> <span m="1028370">it's</span> <span m="1028680">not</span> <span m="1028859">the browser's</span> <span m="1029170">job to</span> <span m="1029760">sanitize</span> <span m="1030089">this kind of</span> <span m="1030450">stuff?</span> </p>
<p><span m="1030810">AUDIENCE: Yeah.</span> </p>
<p><span m="1031420">PROFESSOR: I</span> <span m="1031480">mean,</span> <span m="1031619">you</span> <span m="1031740">could</span> <span m="1031859">imagine</span> <span m="1032280">sort</span> <span m="1032470">of</span> <span m="1032560">having</span> <span m="1032869">a</span> <span m="1032920">browser</span> <span m="1033310">sit</span> <span m="1033460">atop</span> <span m="1033720">a</span> <span m="1033790">proxy,</span> <span m="1034260">for</span> <span m="1034400">example.</span> <span m="1035119">And</span> <span m="1035240">maybe</span> <span m="1035420">the</span> <span m="1035520">proxy</span> <span m="1035960">did</span> <span m="1036210">sort</span> <span m="1036390">of</span> <span m="1036440">cleaning</span> <span m="1036750">like</span> <span m="1036980">this.</span> <span m="1037290">I</span> <span m="1037520">mean,</span> <span m="1038700">intuitive</span> <span m="1039060">reason</span> <span m="1039300">why</span> <span m="1039650">it</span> <span m="1039829">might</span> <span m="1040099">make</span> <span m="1040290">sense</span> <span m="1040500">to</span> <span m="1040589">do</span> <span m="1040750">it inside</span> <span m="1041030">the</span> <span m="1041109">browser</span> <span m="1041394">is because</span> <span m="1041680">so many</span> <span m="1041945">of</span> <span m="1042210">the</span> <span m="1043060">legitimate</span> <span m="1043650">parsing</span> <span m="1044010">engines</span> <span m="1044300">are</span> <span m="1044480">inside</span> <span m="1044829">the</span> <span m="1044890">browser.</span> <span m="1046040">So</span> <span m="1046160">presumably,</span> <span m="1046440">if you're</span> <span m="1046839">closer</span> <span m="1047210">to where the</span> <span m="1047430">actual</span> <span m="1047680">parsing's</span> <span m="1048060">being</span> <span m="1048250">done,</span> <span m="1048460">it's</span> <span m="1048610">better.</span> <span m="1049070">But</span> <span m="1049270">you're</span> <span m="1049450">right.</span> <span m="1049700">In</span> <span m="1049850">practice,</span> <span m="1050250">you</span> <span m="1050340">can</span> <span m="1050440">imagine</span> <span m="1050920">there</span> <span m="1051030">being</span> <span m="1051270">sort</span> <span m="1051460">of</span> <span m="1052180">defense</span> <span m="1052520">in</span> <span m="1052640">layers,</span> <span m="1052960">basically.</span> </p>
<p><span m="1053190">AUDIENCE:</span> <span m="1053608">I think what he</span> <span m="1054026">might be saying</span> <span m="1054444">is that</span> <span m="1054862">it's the</span> <span m="1055740">web</span> <span m="1056226">developer's</span> <span m="1056712">job,</span> <span m="1057198">not</span> <span m="1057684">the</span> <span m="1058170">client's</span> <span m="1058660">job</span> <span m="1058880">to sanitize</span> <span m="1059600">this.</span> </p>
<p><span m="1059960">PROFESSOR: But,</span> <span m="1060220">I mean,</span> <span m="1060740">that's</span> <span m="1060900">kind</span> <span m="1061040">of</span> <span m="1061150">like</span> <span m="1061360">saying--</span> <span m="1062285">so in</span> <span m="1062730">a certain</span> <span m="1063020">sense,</span> <span m="1063345">we</span> <span m="1063670">could</span> <span m="1063800">say that</span> <span m="1063960">about</span> <span m="1064180">processes,</span> <span m="1064730">too, in</span> <span m="1065220">Unix</span> <span m="1065720">or Windows.</span> <span m="1066360">So</span> <span m="1066600">we</span> <span m="1066710">could</span> <span m="1066830">say</span> <span m="1066980">it's</span> <span m="1068200">sort</span> <span m="1068500">of</span> <span m="1068660">developers'</span> <span m="1069190">jobs</span> <span m="1069460">to</span> <span m="1069620">make</span> <span m="1069800">sure</span> <span m="1069920">those</span> <span m="1070240">things stay</span> <span m="1070590">isolated.</span> <span m="1071150">But</span> <span m="1071480">in</span> <span m="1071520">fact,</span> <span m="1071870">the</span> <span m="1071980">OS</span> <span m="1072460">and</span> <span m="1072590">the</span> <span m="1072660">hardware</span> <span m="1073090">as</span> <span m="1073170">well</span> <span m="1073700">has</span> <span m="1073860">an</span> <span m="1073920">important</span> <span m="1074270">role</span> <span m="1074470">to</span> <span m="1074540">play,</span> <span m="1074840">because</span> <span m="1075090">[INAUDIBLE]</span> <span m="1075510">trusted</span> <span m="1076000">whereas</span> <span m="1076255">any</span> <span m="1076510">two</span> <span m="1076900">arbitrary</span> <span m="1077390">programs</span> <span m="1077660">developed</span> <span m="1077930">by any two</span> <span m="1078370">arbitrary</span> <span m="1078720">developers</span> <span m="1079170">may or</span> <span m="1079640">may not be</span> <span m="1079750">trusted</span> <span m="1080520">to</span> <span m="1080680">sort</span> <span m="1080910">of</span> <span m="1081150">implement</span> <span m="1081410">security</span> <span m="1081670">correctly.</span> <span m="1082180">But</span> <span m="1082370">you're</span> <span m="1082490">correct.</span> <span m="1082900">And in</span> <span m="1083030">fact,</span> <span m="1083330">frameworks</span> <span m="1083680">like</span> <span m="1084030">Django</span> <span m="1084170">or</span> <span m="1084750">whatnot,</span> <span m="1085100">they</span> <span m="1085170">actually</span> <span m="1085420">try</span> <span m="1085520">to</span> <span m="1085600">help</span> <span m="1085880">you</span> <span m="1086000">to get</span> <span m="1086200">around</span> <span m="1086510">some of</span> <span m="1086820">these problems.</span> </p>
<p><span m="1088860">So</span> <span m="1089230">anyways,</span> <span m="1089500">so</span> <span m="1089730">yeah,</span> <span m="1090010">so filters</span> <span m="1090160">are not</span> <span m="1090340">a</span> <span m="1090400">perfect</span> <span m="1090720">solution.</span> <span m="1091350">And</span> <span m="1091630">also,</span> <span m="1093640">filters</span> <span m="1094970">can't</span> <span m="1095610">prevent</span> <span m="1098200">what's</span> <span m="1098460">known</span> <span m="1098970">as</span> <span m="1099610">a</span> <span m="1100600">persistent--</span> <span m="1104560">persistent--</span> <span m="1106640">cross-site</span> <span m="1107120">scripting</span> <span m="1107490">attacks.</span> <span m="1109590">This</span> <span m="1109770">is</span> <span m="1109900">known</span> <span m="1110590">as</span> <span m="1110820">sort</span> <span m="1111000">of a</span> <span m="1111100">reflected</span> <span m="1111690">or</span> <span m="1111750">transient</span> <span m="1112210">one,</span> <span m="1112430">because</span> <span m="1113090">this</span> <span m="1113170">script</span> <span m="1113550">code</span> <span m="1114160">just</span> <span m="1114290">sort</span> <span m="1114470">of</span> <span m="1114590">lives</span> <span m="1114900">in the</span> <span m="1114980">URL.</span> <span m="1115290">Then</span> <span m="1115600">once</span> <span m="1115900">the</span> <span m="1115990">user's</span> <span m="1116250">closed</span> <span m="1116510">that</span> <span m="1116710">URL,</span> <span m="1117460">basically,</span> <span m="1117795">the</span> <span m="1118130">attack's</span> <span m="1118490">gone.</span> </p>
<p><span m="1119130">But you could</span> <span m="1119480">imagine</span> <span m="1119750">that</span> <span m="1120180">you</span> <span m="1120290">could</span> <span m="1120440">have</span> <span m="1120780">someone</span> <span m="1121230">who--</span> <span m="1123590">user</span> <span m="1125150">puts</span> <span m="1125390">malicious</span> <span m="1127480">HTML</span> <span m="1130530">in</span> <span m="1130810">the</span> <span m="1131160">Comment</span> <span m="1131510">section</span> <span m="1132780">for a</span> <span m="1132990">website.</span> <span m="1136370">And</span> <span m="1136870">if</span> <span m="1137150">the</span> <span m="1138100">web</span> <span m="1138360">server</span> <span m="1139960">actually</span> <span m="1140410">accepts</span> <span m="1140970">that</span> <span m="1142200">comment</span> <span m="1142650">is</span> <span m="1142790">valid,</span> <span m="1143570">then</span> <span m="1143660">that</span> <span m="1144160">comment,</span> <span m="1144860">with this</span> <span m="1145120">malicious</span> <span m="1145540">payload,</span> <span m="1145950">can essentially</span> <span m="1146330">live</span> <span m="1146580">there</span> <span m="1146730">forever.</span> <span m="1147580">So</span> <span m="1147660">whenever</span> <span m="1147990">any</span> <span m="1148160">user</span> <span m="1148520">goes</span> <span m="1148780">there,</span> <span m="1149070">they</span> <span m="1149330">would</span> <span m="1149430">be</span> <span m="1149520">exposed</span> <span m="1149990">to</span> <span m="1150040">that</span> <span m="1150210">malicious</span> <span m="1150540">content.</span> </p>
<p><span m="1151280">Another</span> <span m="1151580">example,</span> <span m="1153080">which</span> <span m="1153320">is</span> <span m="1153610">sort</span> <span m="1153850">of</span> <span m="1154000">funny</span> <span m="1154320">and</span> <span m="1154470">sad,</span> <span m="1154725">as</span> <span m="1154980">all</span> <span m="1155200">these</span> <span m="1155400">things,</span> <span m="1155750">is</span> <span m="1156230">if</span> <span m="1156350">you</span> <span m="1156690">look</span> <span m="1156970">at</span> <span m="1157300">dating</span> <span m="1157650">websites.</span> <span m="1161090">So</span> <span m="1161560">some</span> <span m="1162540">dating</span> <span m="1162890">websites</span> <span m="1163620">actually</span> <span m="1164040">allow</span> <span m="1164790">users</span> <span m="1165660">to</span> <span m="1166190">put</span> <span m="1166640">full-blown</span> <span m="1167190">HTML</span> <span m="1168160">in</span> <span m="1168300">their</span> <span m="1168440">profile.</span> <span m="1169600">So</span> <span m="1169720">what</span> <span m="1169850">does</span> <span m="1169950">that</span> <span m="1170150">mean?</span> <span m="1170740">So</span> <span m="1170800">when</span> <span m="1170940">someone</span> <span m="1171280">else</span> <span m="1171760">is</span> <span m="1171930">lonely,</span> <span m="1172450">presumably,</span> <span m="1172720">or</span> <span m="1172990">looking</span> <span m="1173860">to</span> <span m="1174440">find</span> <span m="1174710">their</span> <span m="1175490">one</span> <span m="1175670">true</span> <span m="1176030">soul</span> <span m="1176340">match,</span> <span m="1176650">they</span> <span m="1176770">go</span> <span m="1177000">to</span> <span m="1177050">your</span> <span m="1177190">website.</span> <span m="1178200">They're</span> <span m="1178420">going</span> <span m="1178660">to</span> <span m="1178800">run</span> <span m="1179360">HTML</span> <span m="1179850">that</span> <span m="1180040">you've</span> <span m="1180210">crafted</span> <span m="1181200">in</span> <span m="1181320">the</span> <span m="1181440">context</span> <span m="1182030">of</span> <span m="1182330">their</span> <span m="1182520">session.</span> <span m="1183450">And so</span> <span m="1183770">that</span> <span m="1183960">can</span> <span m="1184070">also</span> <span m="1184320">be a</span> <span m="1184440">very</span> <span m="1184710">damaging</span> <span m="1185160">attack</span> <span m="1185480">as</span> <span m="1185600">well.</span> <span m="1186390">So</span> <span m="1186640">just</span> <span m="1186890">doing</span> <span m="1187160">these</span> <span m="1187350">kinds</span> <span m="1187560">of</span> <span m="1187650">filters</span> <span m="1188040">don't</span> <span m="1188170">protect</span> <span m="1188530">against</span> <span m="1188800">things</span> <span m="1189030">like</span> <span m="1189210">that.</span> </p>
<p><span m="1189901">AUDIENCE: So</span> <span m="1190382">[INAUDIBLE]</span> <span m="1191344">in the</span> <span m="1191825">Comments section</span> <span m="1192306">presumably</span> <span m="1192787">does</span> <span m="1193268">that</span> <span m="1193749">by</span> <span m="1194711">setting</span> <span m="1195192">a post--</span> <span m="1195673">the</span> <span m="1196154">information</span> <span m="1196635">goes</span> <span m="1197116">to the</span> <span m="1197597">server</span> <span m="1198078">in a</span> <span m="1198559">post variable or</span> <span m="1199040">something</span> <span m="1199521">like that?</span> </p>
<p><span m="1200290">PROFESSOR: So</span> <span m="1200360">there's</span> <span m="1200570">a</span> <span m="1200610">bunch</span> <span m="1200810">of</span> <span m="1200950">different</span> <span m="1201040">ways</span> <span m="1201220">you</span> <span m="1201320">could</span> <span m="1201390">imagine</span> <span m="1201720">doing it.</span> <span m="1202210">Yeah.</span> <span m="1202495">So one</span> <span m="1202780">way you</span> <span m="1203050">could</span> <span m="1203320">imagine doing</span> <span m="1203680">it</span> <span m="1204040">is a post.</span> <span m="1204490">Another</span> <span m="1204710">way</span> <span m="1204810">you</span> <span m="1204860">could</span> <span m="1204940">imagine</span> <span m="1205230">doing</span> <span m="1205500">it is</span> <span m="1205750">a</span> <span m="1206130">dynamic</span> <span m="1206540">XML</span> <span m="1206795">HTTP</span> <span m="1207050">request.</span> </p>
<p><span m="1207516">AUDIENCE: OK.</span> <span m="1208450">But if</span> <span m="1208948">it's like a</span> <span m="1209446">post,</span> <span m="1209944">why can't you</span> <span m="1210442">just</span> <span m="1210940">scan</span> <span m="1211438">through it and do the</span> <span m="1211936">same thing that</span> <span m="1212434">you have in the--</span> </p>
<p><span m="1213430">PROFESSOR: Yes.</span> <span m="1213830">So you're</span> <span m="1214265">exactly</span> <span m="1214700">correct about</span> <span m="1214870">that,</span> <span m="1215040">and we'll</span> <span m="1215190">discuss</span> <span m="1215580">some</span> <span m="1215720">of</span> <span m="1215770">that</span> <span m="1216030">in a second.</span> <span m="1216360">But</span> <span m="1216570">you're</span> <span m="1216830">exactly</span> <span m="1217210">correct</span> <span m="1217630">that</span> <span m="1218420">the</span> <span m="1218630">server</span> <span m="1219100">side of the</span> <span m="1219430">application</span> <span m="1219990">should</span> <span m="1220170">be</span> <span m="1220290">very</span> <span m="1220560">defensive</span> <span m="1221020">and</span> <span m="1221160">mistrustful</span> <span m="1221250">of</span> <span m="1221565">this</span> <span m="1221880">stuff.</span> <span m="1222580">So you're</span> <span m="1222720">exactly</span> <span m="1223130">right. So</span> <span m="1223360">you could</span> <span m="1223640">imagine</span> <span m="1224010">that</span> <span m="1224480">when</span> <span m="1224780">the</span> <span m="1224860">server</span> <span m="1225650">maybe</span> <span m="1225860">saw</span> <span m="1226080">something</span> <span m="1226440">like</span> <span m="1226640">this,</span> <span m="1227040">[INAUDIBLE]</span> <span m="1228560">even</span> <span m="1228990">if</span> <span m="1229270">the</span> <span m="1229340">browser</span> <span m="1229620">did</span> <span m="1229760">not.</span> <span m="1230315">You're</span> <span m="1230670">correct</span> <span m="1230920">about that.</span> <span m="1232640">All</span> <span m="1232710">right.</span> <span m="1232900">So</span> <span m="1232980">that's</span> <span m="1233130">basically a</span> <span m="1233600">survey</span> <span m="1233885">of</span> <span m="1234480">these</span> <span m="1235700">cross-site</span> <span m="1236060">filters</span> <span m="1236740">in</span> <span m="1236840">the</span> <span m="1236910">browser.</span> </p>
<p><span m="1237410">So</span> <span m="1237820">another</span> <span m="1240320">defense</span> <span m="1241310">against</span> <span m="1242160">cross-site</span> <span m="1242700">scripting</span> <span m="1243510">is</span> <span m="1243630">something</span> <span m="1244160">known</span> <span m="1244640">as</span> <span m="1245750">HTTP-only</span> <span m="1248990">cookies.</span> <span m="1252100">And</span> <span m="1252310">so</span> <span m="1252630">the</span> <span m="1252740">basic</span> <span m="1253170">idea</span> <span m="1253700">behind</span> <span m="1254110">this</span> <span m="1254430">is</span> <span m="1254590">that</span> <span m="1254900">a</span> <span m="1254980">server</span> <span m="1255890">can</span> <span m="1256060">actually</span> <span m="1256530">tell</span> <span m="1257400">the</span> <span m="1257590">browser</span> <span m="1258550">that</span> <span m="1258740">client-side</span> <span m="1259390">JavaScript</span> <span m="1259970">should</span> <span m="1260120">not</span> <span m="1260380">be</span> <span m="1260510">able</span> <span m="1261070">to</span> <span m="1261780">access</span> <span m="1262180">a</span> <span m="1262350">particular</span> <span m="1262756">cookie.</span> <span m="1263970">And</span> <span m="1264130">so</span> <span m="1264260">basically,</span> <span m="1264610">the</span> <span m="1264700">server</span> <span m="1265030">can</span> <span m="1265170">just</span> <span m="1266000">send</span> <span m="1266570">a</span> <span m="1266760">header</span> <span m="1267030">value in</span> <span m="1267410">response</span> <span m="1268670">in</span> <span m="1268790">the</span> <span m="1268970">set</span> <span m="1269160">Cookie</span> <span m="1269880">field.</span> <span m="1270210">It can</span> <span m="1270400">say,</span> <span m="1270680">hey,</span> <span m="1270860">don't</span> <span m="1270960">let</span> <span m="1271090">clients</span> <span m="1271390">like</span> <span m="1271550">JavaScript</span> <span m="1272270">manipulate</span> <span m="1272440">this</span> <span m="1272750">cookie.</span> <span m="1273070">So</span> <span m="1273260">only the</span> <span m="1273410">server</span> <span m="1273740">could do</span> <span m="1274155">this.</span> </p>
<p><span m="1274570">And</span> <span m="1274860">so</span> <span m="1275000">this</span> <span m="1275170">is</span> <span m="1275290">only</span> <span m="1275590">a</span> <span m="1275650">partial</span> <span m="1276020">defense,</span> <span m="1276460">though,</span> <span m="1277020">because</span> <span m="1277640">the</span> <span m="1277930">attacker</span> <span m="1279160">can</span> <span m="1279330">still</span> <span m="1279880">issue</span> <span m="1280180">requests</span> <span m="1281180">that</span> <span m="1281820">contain</span> <span m="1283245">the</span> <span m="1283700">user's</span> <span m="1284090">cookies.</span> <span m="1284310">So</span> <span m="1284450">this</span> <span m="1284630">was</span> <span m="1284790">the</span> <span m="1285010">cross-site</span> <span m="1285670">request</span> <span m="1286080">forgery</span> <span m="1286450">that we</span> <span m="1286660">looked</span> <span m="1287000">at</span> <span m="1289070">in</span> <span m="1289220">last</span> <span m="1289570">lecture.</span> <span m="1290130">So</span> <span m="1290450">even</span> <span m="1290970">if</span> <span m="1291700">JavaScript</span> <span m="1292230">code</span> <span m="1292500">can't</span> <span m="1292740">manipulate</span> <span m="1293190">cookies,</span> <span m="1294050">the</span> <span m="1294160">attacker</span> <span m="1294530">can</span> <span m="1294670">still</span> <span m="1294920">do</span> <span m="1295120">things</span> <span m="1295430">like</span> <span m="1295600">conjure up a</span> <span m="1296100">URL</span> <span m="1296370">to</span> <span m="1296640">some</span> <span m="1297110">e-commerce</span> <span m="1297410">site,</span> <span m="1297710">let's</span> <span m="1297810">say</span> <span m="1298150">buy.com.</span> <span m="1299700">The</span> <span m="1300140">attacker</span> <span m="1300580">can</span> <span m="1300800">put</span> <span m="1301220">whatever</span> <span m="1301650">item</span> <span m="1302790">the</span> <span m="1302910">attacker</span> <span m="1303400">wants</span> <span m="1303650">to</span> <span m="1303740">buy.</span> <span m="1304150">So</span> <span m="1305040">puts</span> <span m="1305170">a</span> <span m="1305210">Ferrari,</span> <span m="1305720">for</span> <span m="1305860">example.</span> <span m="1306710">And</span> <span m="1307020">then</span> <span m="1308280">the</span> <span m="1308410">attacker</span> <span m="1308740">can then</span> <span m="1309230">say,</span> <span m="1309860">who</span> <span m="1310180">should</span> <span m="1310500">this</span> <span m="1310710">go to?</span> <span m="1312040">This</span> <span m="1312130">should</span> <span m="1312280">go</span> <span m="1312460">to</span> <span m="1313200">the</span> <span m="1313270">attacker.</span> </p>
<p><span m="1315470">And</span> <span m="1315880">so</span> <span m="1315970">even</span> <span m="1316150">though</span> <span m="1316320">clients like</span> <span m="1316640">JavaScript</span> <span m="1317030">can't</span> <span m="1317240">access</span> <span m="1317530">the</span> <span m="1317620">cookie,</span> <span m="1318860">there's</span> <span m="1319130">nothing</span> <span m="1319460">that prevents</span> <span m="1319855">the attacker</span> <span m="1320250">from just</span> <span m="1320420">conjuring</span> <span m="1320780">up a</span> <span m="1320880">URL</span> <span m="1321300">like</span> <span m="1321420">this.</span> <span m="1322130">This is</span> <span m="1322170">what</span> <span m="1322340">some</span> <span m="1322490">of</span> <span m="1322560">the</span> <span m="1322650">CSRF</span> <span m="1323860">tokens</span> <span m="1324880">help</span> <span m="1325050">to</span> <span m="1325120">prevent</span> <span m="1325550">against,</span> <span m="1325690">which</span> <span m="1326070">we'll talk</span> <span m="1326270">about</span> <span m="1326420">a</span> <span m="1326460">little</span> <span m="1326590">bit</span> <span m="1326720">later.</span> </p>
<p><span m="1329230">So</span> <span m="1329270">another</span> <span m="1329570">thing</span> <span m="1330160">that</span> <span m="1331730">you</span> <span m="1331970">can</span> <span m="1332090">try</span> <span m="1332330">to</span> <span m="1332500">do</span> <span m="1333720">to</span> <span m="1333960">prevent</span> <span m="1334380">these</span> <span m="1334600">cross-site</span> <span m="1335090">scripting</span> <span m="1335490">attacks</span> <span m="1336090">is</span> <span m="1336570">privilege</span> <span m="1338440">separation.</span> <span m="1342220">And</span> <span m="1342450">so</span> <span m="1342830">the</span> <span m="1343020">idea</span> <span m="1343450">here</span> <span m="1345370">is</span> <span m="1345870">basically</span> <span m="1346670">that</span> <span m="1347200">you</span> <span m="1347350">want</span> <span m="1347580">to</span> <span m="1347870">use</span> <span m="1349380">a</span> <span m="1349680">separate</span> <span m="1350120">domain</span> <span m="1354280">for</span> <span m="1355250">all</span> <span m="1355470">the</span> <span m="1355610">content</span> <span m="1356370">that</span> <span m="1356630">is</span> <span m="1356870">untrusted.</span> <span m="1361370">And</span> <span m="1361620">so</span> <span m="1362100">for</span> <span m="1362260">example,</span> <span m="1363900">a</span> <span m="1364000">lot</span> <span m="1364750">of</span> <span m="1364880">the</span> <span m="1365350">online</span> <span m="1365690">server</span> <span m="1365960">providers</span> <span m="1366400">were</span> <span m="1366460">things</span> <span m="1366860">like</span> <span m="1367360">email</span> <span m="1367795">or</span> <span m="1368230">online</span> <span m="1368370">productivity</span> <span m="1368930">suites.</span> <span m="1369200">So</span> <span m="1369340">think</span> <span m="1369870">Google</span> <span m="1370120">Docs,</span> <span m="1370930">Office</span> <span m="1371300">365,</span> <span m="1371500">so on</span> <span m="1371790">and</span> <span m="1372020">so</span> <span m="1372180">forth.</span> <span m="1372620">They</span> <span m="1372740">actually</span> <span m="1373220">use</span> <span m="1373500">a</span> <span m="1373580">separate</span> <span m="1374100">domain</span> <span m="1374790">to</span> <span m="1375300">host</span> <span m="1375790">user-submitted</span> <span m="1376510">content.</span> </p>
<p><span m="1377570">So</span> <span m="1377750">Google,</span> <span m="1379890">I</span> <span m="1379970">think</span> <span m="1380130">they</span> <span m="1380250">still</span> <span m="1380570">use</span> <span m="1380810">this.</span> <span m="1380990">They</span> <span m="1381310">used</span> <span m="1381550">to</span> <span m="1381640">put</span> <span m="1381850">all</span> <span m="1382120">the</span> <span m="1382210">stuff</span> <span m="1382460">that</span> <span m="1382610">users</span> <span m="1382940">submitted</span> <span m="1383610">into</span> <span m="1383800">some</span> <span m="1384040">special</span> <span m="1384550">domain</span> <span m="1385070">called</span> <span m="1385670">googleusercontent.com.</span> <span m="1391492">And</span> <span m="1391910">so</span> <span m="1392120">here,</span> <span m="1392510">they</span> <span m="1392710">would put</span> <span m="1392980">things</span> <span m="1393270">like</span> <span m="1393450">cached</span> <span m="1393800">copies</span> <span m="1394110">of</span> <span m="1394210">pages,</span> <span m="1395040">your</span> <span m="1395090">Gmail</span> <span m="1395620">[INAUDIBLE],</span> <span m="1395880">and</span> <span m="1396135">things</span> <span m="1396390">like</span> <span m="1396580">this.</span> <span m="1397320">And</span> <span m="1397600">at least</span> <span m="1397940">as of</span> <span m="1398455">a</span> <span m="1398810">year or</span> <span m="1399190">two ago,</span> <span m="1399430">this</span> <span m="1399610">is</span> <span m="1399740">like</span> <span m="1400170">one</span> <span m="1400390">of</span> <span m="1400450">the</span> <span m="1400550">top</span> <span m="1400850">25</span> <span m="1401310">[? Alexa-visited ?]</span> <span m="1401960">domains,</span> <span m="1402990">because</span> <span m="1403300">Google</span> <span m="1403420">services</span> <span m="1403740">were</span> <span m="1403900">so</span> <span m="1404080">popular.</span> </p>
<p><span m="1404970">And so</span> <span m="1405080">what's</span> <span m="1405270">the</span> <span m="1405380">advantage</span> <span m="1406320">of</span> <span m="1407190">putting</span> <span m="1407550">stuff</span> <span m="1407860">in</span> <span m="1407970">here?</span> <span m="1408670">Well,</span> <span m="1408950">the</span> <span m="1409050">hope,</span> <span m="1409760">at</span> <span m="1410090">least, is</span> <span m="1410320">that</span> <span m="1411040">if</span> <span m="1411470">there</span> <span m="1411740">is</span> <span m="1412560">some</span> <span m="1412830">type</span> <span m="1413040">of</span> <span m="1413210">cross-site</span> <span m="1413690">scripting</span> <span m="1414070">vulnerability</span> <span m="1414700">or</span> <span m="1414790">something</span> <span m="1415060">like</span> <span m="1415270">this</span> <span m="1416310">in a</span> <span m="1416590">user-submitted</span> <span m="1417110">content,</span> <span m="1417810">then</span> <span m="1418230">hopefully,</span> <span m="1419340">the</span> <span m="1419670">daemons</span> <span m="1419980">would just</span> <span m="1420240">be</span> <span m="1420370">limited</span> <span m="1421170">to</span> <span m="1421710">that</span> <span m="1422000">domain.</span> <span m="1422700">It</span> <span m="1422840">wouldn't</span> <span m="1423100">actually</span> <span m="1423450">affect</span> <span m="1424375">the</span> <span m="1424760">full-blown</span> <span m="1425310">google.com.</span> <span m="1426122">This</span> <span m="1426530">isn't</span> <span m="1426920">a</span> <span m="1427230">perfect</span> <span m="1427580">defense,</span> <span m="1427930">though,</span> <span m="1428185">because</span> <span m="1428640">user-submitted</span> <span m="1429270">content</span> <span m="1429640">may</span> <span m="1429740">have</span> <span m="1429960">references</span> <span m="1430590">to</span> <span m="1430690">things</span> <span m="1430980">from</span> <span m="1431340">google.com.</span> <span m="1431695">And</span> <span m="1432050">so</span> <span m="1432550">once</span> <span m="1432710">again,</span> <span m="1432960">this is</span> <span m="1433040">only</span> <span m="1433290">sort</span> <span m="1433480">of</span> <span m="1433570">a</span> <span m="1433740">partial</span> <span m="1434170">fix</span> <span m="1435050">for</span> <span m="1435300">a</span> <span m="1435590">much</span> <span m="1435790">more</span> <span m="1435940">pervasive</span> <span m="1436420">problem.</span> </p>
<p><span m="1438630">Now,</span> <span m="1438810">another</span> <span m="1439050">thing</span> <span m="1439330">you could</span> <span m="1439620">do-- and this</span> <span m="1439860">gets</span> <span m="1440110">back</span> <span m="1440480">to</span> <span m="1441950">the</span> <span m="1442290">gentleman's</span> <span m="1442990">suggestion</span> <span m="1443430">over</span> <span m="1443630">here</span> <span m="1444160">is</span> <span m="1444570">that</span> <span m="1445030">we</span> <span m="1445160">can</span> <span m="1445290">actually</span> <span m="1445740">do</span> <span m="1446540">content</span> <span m="1448260">sanitization.</span> <span m="1454270">And</span> <span m="1454690">so</span> <span m="1456120">the</span> <span m="1456290">idea</span> <span m="1456790">here</span> <span m="1458900">is</span> <span m="1459110">that,</span> <span m="1459330">essentially,</span> <span m="1459910">whenever</span> <span m="1460660">you--</span> <span m="1461570">where</span> <span m="1461950">you</span> <span m="1462190">can</span> <span m="1462400">be</span> <span m="1462780">the browser,</span> <span m="1463280">where</span> <span m="1463420">you can</span> <span m="1463720">be the</span> <span m="1463930">web</span> <span m="1464170">server, or</span> <span m="1464620">whatever--</span> <span m="1465180">whenever</span> <span m="1465550">you</span> <span m="1465920">receive</span> <span m="1466490">untrusted</span> <span m="1467000">content,</span> <span m="1467730">you</span> <span m="1467860">don't</span> <span m="1468100">trust</span> <span m="1468400">it</span> <span m="1468530">at</span> <span m="1468630">all.</span> <span m="1468930">And</span> <span m="1469360">so</span> <span m="1469380">you</span> <span m="1469570">go</span> <span m="1469810">through</span> <span m="1470110">it,</span> <span m="1470300">and</span> <span m="1470500">you</span> <span m="1470760">do</span> <span m="1471040">things</span> <span m="1471380">to</span> <span m="1471440">sort</span> <span m="1471690">of</span> <span m="1471860">render</span> <span m="1472230">it</span> <span m="1472560">sort</span> <span m="1472800">of</span> <span m="1472970">neutral</span> <span m="1474140">such</span> <span m="1474220">that it</span> <span m="1474490">can't</span> <span m="1474840">actually</span> <span m="1475210">execute</span> <span m="1475640">code</span> <span m="1476065">or</span> <span m="1476490">subvert</span> <span m="1476650">your</span> <span m="1477050">system in</span> <span m="1477410">any way.</span> </p>
<p><span m="1478530">And</span> <span m="1478780">so</span> <span m="1479340">an</span> <span m="1479440">example</span> <span m="1479950">of</span> <span m="1480090">this</span> <span m="1481750">is</span> <span m="1482350">the</span> <span m="1482990">Django</span> <span m="1484580">template</span> <span m="1485330">system.</span> <span m="1490740">And</span> <span m="1490990">so</span> <span m="1491930">Django</span> <span m="1492680">is</span> <span m="1492850">an</span> <span m="1492920">example</span> <span m="1493175">of a</span> <span m="1493430">web</span> <span m="1493685">framework.</span> <span m="1493940">So</span> <span m="1494210">basically,</span> <span m="1494630">the</span> <span m="1494880">high-level</span> <span m="1495170">web</span> <span m="1495370">framework</span> <span m="1495645">is</span> <span m="1495920">something</span> <span m="1496550">that</span> <span m="1496840">helps</span> <span m="1497180">to</span> <span m="1497540">automate</span> <span m="1498450">and</span> <span m="1498960">secure</span> <span m="1499560">some</span> <span m="1499840">of</span> <span m="1500020">the</span> <span m="1500700">sort</span> <span m="1500930">of</span> <span m="1501020">tedious</span> <span m="1501410">tasks</span> <span m="1501760">of</span> <span m="1501850">developing</span> <span m="1502190">a</span> <span m="1502240">website.</span> <span m="1502700">So</span> <span m="1504050">it</span> <span m="1504120">will</span> <span m="1504270">help</span> <span m="1504460">you</span> <span m="1504590">with</span> <span m="1504910">making</span> <span m="1505140">database</span> <span m="1505590">access</span> <span m="1505970">easier.</span> <span m="1506740">It'll</span> <span m="1506910">help</span> <span m="1507250">you</span> <span m="1507860">with</span> <span m="1508120">doing things</span> <span m="1508430">like</span> <span m="1508800">session</span> <span m="1509130">management.</span> <span m="1510380">And</span> <span m="1510530">it</span> <span m="1510570">will</span> <span m="1510710">also</span> <span m="1511050">help</span> <span m="1511300">you</span> <span m="1511820">with</span> <span m="1512190">maintaining</span> <span m="1512730">a</span> <span m="1512820">consistent</span> <span m="1513310">look</span> <span m="1513520">and</span> <span m="1513620">feel</span> <span m="1514630">across</span> <span m="1514940">your</span> <span m="1515050">website.</span> </p>
<p><span m="1515900">And</span> <span m="1515940">so</span> <span m="1516070">one</span> <span m="1516290">way</span> <span m="1516480">to</span> <span m="1516590">maintain</span> <span m="1516990">that</span> <span m="1517060">consistent</span> <span m="1517530">look</span> <span m="1517690">and</span> <span m="1517810">feel</span> <span m="1518180">is</span> <span m="1518510">to use this</span> <span m="1518720">notion</span> <span m="1518990">of</span> <span m="1519070">templates.</span> <span m="1520040">So</span> <span m="1520170">all</span> <span m="1520420">of your</span> <span m="1520570">pages</span> <span m="1520960">automatically</span> <span m="1521490">start</span> <span m="1521730">out</span> <span m="1521950">with the</span> <span m="1522110">same</span> <span m="1522400">CSS</span> <span m="1523130">and</span> <span m="1523290">things</span> <span m="1523510">like</span> <span m="1523710">that,</span> <span m="1524540">the</span> <span m="1524660">same</span> <span m="1524910">styles.</span> <span m="1525700">But</span> <span m="1525820">then</span> <span m="1525980">there's</span> <span m="1526290">these</span> <span m="1527070">portions</span> <span m="1527330">in</span> <span m="1527590">the</span> <span m="1527680">web</span> <span m="1527890">page</span> <span m="1528420">where</span> <span m="1528810">you</span> <span m="1528940">can</span> <span m="1529070">specialize</span> <span m="1529760">it</span> <span m="1530020">with the</span> <span m="1530110">particular</span> <span m="1530560">news</span> <span m="1530840">article</span> <span m="1531310">that's at</span> <span m="1531420">the</span> <span m="1531530">top</span> <span m="1531780">of</span> <span m="1533350">everybody's</span> <span m="1533620">mind</span> <span m="1534140">that</span> <span m="1534300">day, or</span> <span m="1534540">something</span> <span m="1534710">like</span> <span m="1534840">that,</span> <span m="1535060">or</span> <span m="1535190">user-specific</span> <span m="1536040">content.</span> </p>
<p><span m="1536630">So</span> <span m="1536690">for</span> <span m="1536780">example,</span> <span m="1537230">in</span> <span m="1537880">Django,</span> <span m="1538440">you</span> <span m="1538610">can</span> <span m="1538780">look</span> <span m="1539080">at</span> <span m="1539855">a</span> <span m="1540240">template,</span> <span m="1540780">and</span> <span m="1540910">it</span> <span m="1540980">might</span> <span m="1541680">look</span> <span m="1541860">like</span> <span m="1542080">something</span> <span m="1542420">like</span> <span m="1542640">this.</span> <span m="1542950">So</span> <span m="1543415">you have</span> <span m="1543880">a</span> <span m="1544270">bold</span> <span m="1544460">tag.</span> <span m="1544790">It</span> <span m="1545520">says,</span> <span m="1546420">Hello.</span> <span m="1548350">And</span> <span m="1548420">then</span> <span m="1548570">you</span> <span m="1548700">have</span> <span m="1550000">these</span> <span m="1550200">braces</span> <span m="1550770">here,</span> <span m="1551380">these</span> <span m="1551460">double</span> <span m="1551540">braces.</span> <span m="1551850">And it</span> <span m="1552195">says,</span> <span m="1552540">name.</span> <span m="1555640">And</span> <span m="1555850">so</span> <span m="1556180">essentially,</span> <span m="1556650">what</span> <span m="1556870">this</span> <span m="1557050">means</span> <span m="1557360">is</span> <span m="1557490">that</span> <span m="1558780">this</span> <span m="1558940">is</span> <span m="1559020">like</span> <span m="1559160">a</span> <span m="1559230">placeholder</span> <span m="1559640">variable.</span> <span m="1561000">So</span> <span m="1561200">essentially,</span> <span m="1561570">these</span> <span m="1561770">pages</span> <span m="1562200">get</span> <span m="1563040">dynamically</span> <span m="1563570">generated.</span> <span m="1564410">So</span> <span m="1565030">when</span> <span m="1565100">the</span> <span m="1565200">user</span> <span m="1565490">goes</span> <span m="1565680">to</span> <span m="1565810">a Django</span> <span m="1566130">site,</span> <span m="1566780">the</span> <span m="1566870">Django</span> <span m="1567280">server</span> <span m="1567650">says,</span> <span m="1568140">OK,</span> <span m="1568530">well,</span> <span m="1568690">this</span> <span m="1568890">name</span> <span m="1569310">is</span> <span m="1569410">going</span> <span m="1569510">to</span> <span m="1569570">be</span> <span m="1569780">somewhere,</span> <span m="1570770">who</span> <span m="1571110">knows, in</span> <span m="1571420">the cookie.</span> </p>
<p><span m="1571850">Maybe it's</span> <span m="1572180">going to be</span> <span m="1572480">in a</span> <span m="1572780">CGI</span> <span m="1573210">string,</span> <span m="1573460">whatever.</span> <span m="1574120">And</span> <span m="1574290">so</span> <span m="1574580">as</span> <span m="1574830">the</span> <span m="1574890">Django</span> <span m="1575270">server</span> <span m="1575530">dynamically</span> <span m="1576100">generates</span> <span m="1576520">the</span> <span m="1576610">page</span> <span m="1577040">[? to return ?]</span> <span m="1577240">to</span> <span m="1577340">user,</span> <span m="1577990">it</span> <span m="1578140">replaces</span> <span m="1578840">this</span> <span m="1578940">special</span> <span m="1579420">reference</span> <span m="1579860">here</span> <span m="1580470">with</span> <span m="1580930">whatever</span> <span m="1581250">the</span> <span m="1581350">value</span> <span m="1581610">of this</span> <span m="1581870">variable</span> <span m="1582290">is.</span> <span m="1583540">So</span> <span m="1583670">it's</span> <span m="1583770">pretty</span> <span m="1583980">straightforward.</span> <span m="1584630">This</span> <span m="1584760">is</span> <span m="1584880">kind</span> <span m="1585070">of</span> <span m="1585190">like</span> <span m="1585400">that</span> <span m="1585590">dinky</span> <span m="1585880">CGI</span> <span m="1586320">server</span> <span m="1586625">I showed you.</span> <span m="1587630">So</span> <span m="1587750">just</span> <span m="1587920">reflecting</span> <span m="1588590">user-submitted</span> <span m="1589080">content</span> <span m="1589480">right</span> <span m="1589650">here.</span> </p>
<p><span m="1590320">But</span> <span m="1590820">Django</span> <span m="1591220">actually</span> <span m="1591440">does</span> <span m="1591590">it</span> <span m="1591740">better</span> <span m="1592340">than</span> <span m="1592520">the</span> <span m="1592840">silly</span> <span m="1593640">CGI</span> <span m="1593930">server</span> <span m="1594220">that I</span> <span m="1594320">showed</span> <span m="1594650">you,</span> <span m="1594760">because</span> <span m="1595060">it</span> <span m="1595170">uses</span> <span m="1595500">this</span> <span m="1595670">notion</span> <span m="1596260">of</span> <span m="1596420">content</span> <span m="1597570">sanitization.</span> <span m="1598620">So</span> <span m="1598810">Django</span> <span m="1599290">expects</span> <span m="1599770">that</span> <span m="1600050">users</span> <span m="1600330">may be</span> <span m="1600660">adversarial.</span> <span m="1601630">So</span> <span m="1601660">it's</span> <span m="1601780">not</span> <span m="1602070">just going</span> <span m="1602170">to</span> <span m="1602360">directly</span> <span m="1602665">put</span> <span m="1602970">the</span> <span m="1603040">value</span> <span m="1603480">of</span> <span m="1603550">the name</span> <span m="1603900">variable</span> <span m="1604230">here.</span> <span m="1604680">Instead,</span> <span m="1605150">it is</span> <span m="1605390">going</span> <span m="1605640">to</span> <span m="1605850">encode</span> <span m="1606105">it</span> <span m="1606360">in</span> <span m="1606530">such</span> <span m="1606770">a</span> <span m="1606850">way</span> <span m="1607460">that</span> <span m="1608360">this</span> <span m="1608680">content</span> <span m="1609240">will</span> <span m="1609420">never</span> <span m="1609670">be</span> <span m="1609810">able</span> <span m="1609980">to</span> <span m="1610100">escape</span> <span m="1610490">out of the</span> <span m="1610770">HTML</span> <span m="1611330">context</span> <span m="1612100">and</span> <span m="1612630">execute</span> <span m="1612980">JavaScript</span> <span m="1613430">or</span> <span m="1613490">something</span> <span m="1613650">like</span> <span m="1613820">this.</span> </p>
<p><span m="1614250">So</span> <span m="1614450">for</span> <span m="1614560">example,</span> <span m="1614980">one</span> <span m="1615180">thing it'll</span> <span m="1615430">do</span> <span m="1615650">is</span> <span m="1615910">it'll</span> <span m="1616240">take</span> <span m="1618500">the</span> <span m="1618650">angle</span> <span m="1618960">brackets,</span> <span m="1620180">and</span> <span m="1620370">it</span> <span m="1620410">will</span> <span m="1620560">translate</span> <span m="1621150">them</span> <span m="1621390">into</span> <span m="1622970">these</span> <span m="1623340">HTML</span> <span m="1624500">entities.</span> <span m="1625350">So</span> <span m="1625700">the</span> <span m="1625840">less</span> <span m="1626130">than</span> <span m="1626350">character</span> <span m="1626800">gets</span> <span m="1626990">transformed</span> <span m="1627255">into</span> <span m="1627720">this.</span> <span m="1629380">The</span> <span m="1629640">greater</span> <span m="1629980">than</span> <span m="1630260">character</span> <span m="1631450">gets</span> <span m="1631690">translated</span> <span m="1633320">into</span> <span m="1633480">this.</span> <span m="1636060">Double</span> <span m="1636480">quotations</span> <span m="1637920">get</span> <span m="1638130">translated</span> <span m="1639060">into</span> <span m="1640650">ampersand</span> <span m="1642330">quote,</span> <span m="1644720">and</span> <span m="1644850">so</span> <span m="1645030">on</span> <span m="1645190">and</span> <span m="1645290">so</span> <span m="1645350">forth.</span> <span m="1645950">And</span> <span m="1646080">so</span> <span m="1646180">what</span> <span m="1646330">this</span> <span m="1646510">ensures</span> <span m="1647160">is</span> <span m="1647350">that</span> <span m="1647840">if</span> <span m="1649010">the</span> <span m="1649120">content</span> <span m="1649580">the</span> <span m="1649710">user</span> <span m="1650020">put</span> <span m="1650200">in</span> <span m="1650230">name</span> <span m="1650710">actually</span> <span m="1651050">tries</span> <span m="1651250">to</span> <span m="1651370">contain</span> <span m="1651920">angle</span> <span m="1652190">brackets</span> <span m="1652520">or</span> <span m="1652640">things</span> <span m="1652790">like</span> <span m="1652960">this,</span> <span m="1653520">then</span> <span m="1653980">it'll</span> <span m="1654230">basically</span> <span m="1654580">be</span> <span m="1654710">neutered.</span> <span m="1655450">And</span> <span m="1655600">it'll be</span> <span m="1655710">translated</span> <span m="1656180">into</span> <span m="1656310">something</span> <span m="1656950">that</span> <span m="1657070">would</span> <span m="1657160">not</span> <span m="1657420">be</span> <span m="1657530">interpreted</span> <span m="1657940">as</span> <span m="1658030">HTML</span> <span m="1658890">on</span> <span m="1659020">the</span> <span m="1659110">client-side</span> <span m="1659600">browser.</span> <span m="1661540">So</span> <span m="1661710">does</span> <span m="1661830">that</span> <span m="1662120">make</span> <span m="1662240">sense?</span> </p>
<p><span m="1663740">So</span> <span m="1663860">now</span> <span m="1663970">I</span> <span m="1664010">know that</span> <span m="1664310">this</span> <span m="1664510">is</span> <span m="1664660">not</span> <span m="1666350">a</span> <span m="1666470">completely</span> <span m="1667140">foolproof</span> <span m="1668110">defense</span> <span m="1668770">against</span> <span m="1669020">some of</span> <span m="1669150">this</span> <span m="1669300">cross-site</span> <span m="1669740">scripting</span> <span m="1670090">stuff.</span> <span m="1670360">And</span> <span m="1670630">the</span> <span m="1670850">reason,</span> <span m="1671390">as</span> <span m="1671560">we</span> <span m="1671650">showed</span> <span m="1671960">in the</span> <span m="1672020">example,</span> <span m="1672610">is</span> <span m="1672750">that</span> <span m="1673210">these</span> <span m="1673640">grammars</span> <span m="1673850">for</span> <span m="1674090">HTML,</span> <span m="1674380">and</span> <span m="1674670">CSS,</span> <span m="1675060">and</span> <span m="1675170">JavaScript</span> <span m="1675800">are</span> <span m="1676050">so</span> <span m="1676310">complicated</span> <span m="1677420">that</span> <span m="1678010">it's</span> <span m="1678220">very</span> <span m="1679220">easy</span> <span m="1679590">to</span> <span m="1679990">confuse</span> <span m="1680320">the</span> <span m="1680410">browser's</span> <span m="1681060">parser.</span> </p>
<p><span m="1681490">So</span> <span m="1681670">for</span> <span m="1681830">example,</span> <span m="1682670">let's</span> <span m="1682920">say</span> <span m="1683280">that</span> <span m="1685050">you</span> <span m="1685230">had</span> <span m="1685550">something</span> <span m="1685940">like</span> <span m="1686210">this.</span> <span m="1687020">And</span> <span m="1687510">this</span> <span m="1687630">is</span> <span m="1687720">a</span> <span m="1687770">very</span> <span m="1688090">common</span> <span m="1688400">thing</span> <span m="1688680">to do</span> <span m="1690880">in</span> <span m="1691550">frameworks</span> <span m="1691930">like</span> <span m="1692110">Django.</span> <span m="1692510">So</span> <span m="1692680">you</span> <span m="1692860">have</span> <span m="1693730">some</span> <span m="1694070">div.</span> <span m="1695350">And</span> <span m="1695730">then</span> <span m="1696150">you</span> <span m="1696570">want to</span> <span m="1696980">set</span> <span m="1697280">its</span> <span m="1697470">class</span> <span m="1698920">dynamically.</span> <span m="1700380">So</span> <span m="1700530">you</span> <span m="1700680">set</span> <span m="1700910">its</span> <span m="1701060">class</span> <span m="1701885">to</span> <span m="1702240">some</span> <span m="1702576">var,</span> <span m="1705060">so</span> <span m="1705190">on</span> <span m="1705290">and</span> <span m="1705360">so</span> <span m="1705520">forth.</span> <span m="1706750">So</span> <span m="1706780">the</span> <span m="1706870">idea</span> <span m="1707150">is that</span> <span m="1707330">when</span> <span m="1707420">Django</span> <span m="1707830">processes</span> <span m="1708240">this,</span> <span m="1708650">it should</span> <span m="1708780">figure</span> <span m="1709030">out</span> <span m="1709110">what</span> <span m="1709240">the</span> <span m="1709340">current</span> <span m="1709640">styling</span> <span m="1710110">is and then</span> <span m="1710380">put</span> <span m="1710540">it in</span> <span m="1710680">here.</span> <span m="1711360">Well,</span> <span m="1711620">one</span> <span m="1711800">thing</span> <span m="1712010">you can</span> <span m="1712080">do</span> <span m="1712960">is</span> <span m="1713560">maybe</span> <span m="1713850">the</span> <span m="1714010">attacker</span> <span m="1714540">supplies</span> <span m="1714930">something</span> <span m="1715350">like</span> <span m="1717000">a</span> <span m="1717220">string</span> <span m="1717540">like</span> <span m="1717760">this.</span> <span m="1718740">So</span> <span m="1719540">attacker</span> <span m="1719710">will</span> <span m="1719850">say,</span> <span m="1720910">class</span> <span m="1721380">1.</span> <span m="1721690">OK,</span> <span m="1721960">so</span> <span m="1722200">far</span> <span m="1722400">so</span> <span m="1722580">good,</span> <span m="1723320">because</span> <span m="1723570">that</span> <span m="1724010">seems</span> <span m="1724060">like a</span> <span m="1724220">valid</span> <span m="1725020">CSS</span> <span m="1725400">expression.</span> <span m="1726130">But</span> <span m="1726330">then</span> <span m="1726660">the</span> <span m="1726850">attacker</span> <span m="1727290">will then</span> <span m="1727460">try to</span> <span m="1727560">put</span> <span m="1728730">some</span> <span m="1729990">JavaScript</span> <span m="1730330">here.</span> </p>
<p><span m="1731210">So it</span> <span m="1731440">might</span> <span m="1731680">say,</span> <span m="1732050">onclick</span> <span m="1733180">equals--</span> <span m="1735010">and</span> <span m="1735160">then</span> <span m="1735310">put</span> <span m="1737980">JavaScript</span> <span m="1738560">URL.</span> <span m="1740400">And</span> <span m="1740650">then</span> <span m="1741880">put</span> <span m="1742200">some</span> <span m="1744040">function</span> <span m="1744330">call</span> <span m="1744620">here.</span> <span m="1746740">So</span> <span m="1747060">this</span> <span m="1747210">is</span> <span m="1747620">malformed.</span> <span m="1749650">The</span> <span m="1749730">browser</span> <span m="1750720">should</span> <span m="1750910">probably</span> <span m="1751360">just</span> <span m="1751540">do</span> <span m="1751710">a fail-stop</span> <span m="1752390">here.</span> <span m="1753180">But</span> <span m="1753350">the</span> <span m="1753430">problem</span> <span m="1753880">is that</span> <span m="1753990">if</span> <span m="1754140">you've ever</span> <span m="1754370">looked</span> <span m="1754620">at</span> <span m="1754680">the</span> <span m="1754760">HTML</span> <span m="1755085">for</span> <span m="1755410">a real</span> <span m="1755830">web</span> <span m="1756120">page,</span> <span m="1756950">all</span> <span m="1757370">of it's</span> <span m="1757550">broken,</span> <span m="1757940">even for</span> <span m="1758330">like</span> <span m="1758860">legitimate,</span> <span m="1759400">benevolent</span> <span m="1759890">sites.</span> <span m="1760250">People</span> <span m="1760450">just</span> <span m="1760620">can't</span> <span m="1760870">hack</span> <span m="1761220">HTML.</span> <span m="1761960">So</span> <span m="1762320">if</span> <span m="1762490">the</span> <span m="1762560">browser</span> <span m="1762940">were</span> <span m="1763200">to be</span> <span m="1763460">fail-stop,</span> <span m="1764500">literally,</span> <span m="1765050">no</span> <span m="1765340">site</span> <span m="1765610">that</span> <span m="1765880">you</span> <span m="1766040">enjoy</span> <span m="1766410">would ever</span> <span m="1766780">work</span> <span m="1767380">ever.</span> </p>
<p><span m="1767910">If</span> <span m="1768070">you</span> <span m="1768250">ever</span> <span m="1768550">want</span> <span m="1768670">to</span> <span m="1768720">be</span> <span m="1768810">disappointed</span> <span m="1769280">by</span> <span m="1769400">the</span> <span m="1769500">world</span> <span m="1769990">if I</span> <span m="1770270">haven't</span> <span m="1770480">helped you</span> <span m="1770650">do</span> <span m="1770760">that</span> <span m="1770980">enough,</span> <span m="1772120">open</span> <span m="1772370">up</span> <span m="1772460">your</span> <span m="1772590">JavaScript</span> <span m="1773110">console</span> <span m="1773790">when</span> <span m="1773910">you</span> <span m="1774460">browse</span> <span m="1774770">a</span> <span m="1774840">website</span> <span m="1775620">and</span> <span m="1775750">see</span> <span m="1776070">how</span> <span m="1776200">many</span> <span m="1776480">errors</span> <span m="1776770">get</span> <span m="1776950">spit</span> <span m="1777180">out.</span> <span m="1777710">Like,</span> <span m="1778180">go</span> <span m="1778400">to</span> <span m="1778480">CNN</span> <span m="1778810">and</span> <span m="1779170">just</span> <span m="1779290">see</span> <span m="1779700">how</span> <span m="1779820">many</span> <span m="1780060">errors</span> <span m="1780330">get</span> <span m="1780510">spit</span> <span m="1780710">out.</span> <span m="1781400">CNN</span> <span m="1781770">basically</span> <span m="1782270">kind</span> <span m="1782660">of</span> <span m="1782740">works,</span> <span m="1783340">but</span> <span m="1783460">it's</span> <span m="1783700">very</span> <span m="1784040">disturbing,</span> <span m="1784930">because</span> <span m="1785150">if</span> <span m="1785250">you</span> <span m="1785410">were to</span> <span m="1785820">open up</span> <span m="1786090">Acrobat</span> <span m="1786140">reader</span> <span m="1786600">and</span> <span m="1786850">you're</span> <span m="1786950">just</span> <span m="1787140">constantly</span> <span m="1787395">throwing</span> <span m="1787650">null</span> <span m="1787830">pointer</span> <span m="1788260">exceptions,</span> <span m="1788810">you would</span> <span m="1789220">feel</span> <span m="1789300">a</span> <span m="1789450">bit</span> <span m="1789560">cheated</span> <span m="1789850">by</span> <span m="1789960">life.</span> <span m="1790390">But</span> <span m="1790520">in</span> <span m="1790700">the web,</span> <span m="1790970">apparently,</span> <span m="1791448">we've learned</span> <span m="1791926">to accept</span> <span m="1792404">this.</span> </p>
<p><span m="1793360">So</span> <span m="1793550">because</span> <span m="1793920">browsers have to be so</span> <span m="1794090">tolerant</span> <span m="1794550">of</span> <span m="1794620">these</span> <span m="1794820">things,</span> <span m="1795530">they</span> <span m="1795650">will</span> <span m="1795830">actually</span> <span m="1796180">try</span> <span m="1796390">to</span> <span m="1796490">massage</span> <span m="1797360">malformed</span> <span m="1797650">code</span> <span m="1797940">into</span> <span m="1798280">something that</span> <span m="1798740">seems</span> <span m="1799040">reasonable.</span> <span m="1799490">And</span> <span m="1799710">therein</span> <span m="1799980">lies a</span> <span m="1800380">security</span> <span m="1800830">vulnerability.</span> </p>
<p><span m="1805060">So</span> <span m="1805320">I</span> <span m="1805410">guess</span> <span m="1805590">the</span> <span m="1805740">take-home</span> <span m="1806060">point</span> <span m="1806380">for</span> <span m="1806510">this</span> <span m="1807120">is</span> <span m="1807450">that</span> <span m="1809200">content</span> <span m="1809906">sanitization</span> <span m="1810770">kind</span> <span m="1811330">of</span> <span m="1811470">works.</span> <span m="1812730">So</span> <span m="1812980">it</span> <span m="1813080">is</span> <span m="1813200">literally</span> <span m="1813540">better</span> <span m="1813760">than</span> <span m="1813950">nothing.</span> <span m="1814290">It</span> <span m="1814440">can</span> <span m="1814740">actually</span> <span m="1815470">catch</span> <span m="1815700">a</span> <span m="1815770">lot</span> <span m="1815990">of</span> <span m="1816080">cases.</span> <span m="1817240">But</span> <span m="1817270">in</span> <span m="1817380">many</span> <span m="1817620">cases,</span> <span m="1817980">it</span> <span m="1818340">is</span> <span m="1818620">not</span> <span m="1819360">a</span> <span m="1820030">full</span> <span m="1820400">defense.</span> </p>
<p><span m="1821140">And</span> <span m="1821350">so</span> <span m="1821850">one</span> <span m="1822040">thing</span> <span m="1822360">you might</span> <span m="1822450">actually</span> <span m="1822760">think</span> <span m="1822930">about</span> <span m="1823220">doing</span> <span m="1823970">is--</span> <span m="1825015">actually,</span> <span m="1825480">let's</span> <span m="1825840">put this</span> <span m="1826312">over</span> <span m="1826784">here.</span> <span m="1828200">You</span> <span m="1828690">might</span> <span m="1829030">think</span> <span m="1829180">about</span> <span m="1830190">sort</span> <span m="1830430">of</span> <span m="1830620">using</span> <span m="1832710">a</span> <span m="1833200">less</span> <span m="1833600">expressive</span> <span m="1835874">markup</span> <span m="1836830">language.</span> <span m="1841140">So</span> <span m="1841210">what</span> <span m="1841360">do I</span> <span m="1841430">mean</span> <span m="1841640">by</span> <span m="1841790">that?</span> <span m="1842540">So</span> <span m="1844360">HTML</span> <span m="1844790">and</span> <span m="1845220">CSS</span> <span m="1845840">and</span> <span m="1845940">JavaScript</span> <span m="1846210">are</span> <span m="1846480">[? touring ?]</span> <span m="1846840">complete.</span> <span m="1847200">They</span> <span m="1847410">allow</span> <span m="1847960">you</span> <span m="1848030">to do</span> <span m="1848200">all</span> <span m="1848400">kinds</span> <span m="1848630">of</span> <span m="1848730">fun</span> <span m="1848980">things,</span> <span m="1849370">but--</span> <span m="1849770">yeah?</span> </p>
<p><span m="1850170">AUDIENCE:  Sorry to bother you.</span> <span m="1850970">When does</span> <span m="1851230">content</span> <span m="1851711">sanitization</span> <span m="1852673">not</span> <span m="1853154">work?</span> </p>
<p><span m="1854600">PROFESSOR: When</span> <span m="1854910">does</span> <span m="1855130">content--</span> </p>
<p><span m="1855400">AUDIENCE:  In</span> <span m="1855670">many cases,</span> <span m="1856160">it doesn't</span> <span m="1856650">work.</span> </p>
<p><span m="1857140">PROFESSOR: Oh,</span> <span m="1857280">yeah.</span> <span m="1857610">So</span> <span m="1857710">like</span> <span m="1857940">in</span> <span m="1858130">this</span> <span m="1858330">case,</span> <span m="1858650">for</span> <span m="1858750">example,</span> <span m="1859200">Django</span> <span m="1859740">will</span> <span m="1859910">probably</span> <span m="1860220">not</span> <span m="1860400">be</span> <span m="1860550">able</span> <span m="1860720">to</span> <span m="1860790">statically</span> <span m="1861210">determine</span> <span m="1861630">this</span> <span m="1861780">is</span> <span m="1861910">a</span> <span m="1861960">bad</span> <span m="1862260">thing.</span> <span m="1863820">Like,</span> <span m="1863990">in</span> <span m="1864060">this</span> <span m="1864230">particular</span> <span m="1864600">case.</span> <span m="1864980">But in</span> <span m="1865220">the</span> <span m="1865450">case</span> <span m="1865790">where</span> <span m="1866020">I</span> <span m="1866730">inserted</span> <span m="1867110">that</span> <span m="1867320">malformed</span> <span m="1868390">image</span> <span m="1868610">tag--</span> <span m="1869450">I</span> <span m="1869720">basically</span> <span m="1870080">said--</span> </p>
<p><span m="1870920">AUDIENCE:  In</span> <span m="1871340">that particular</span> <span m="1871410">case,</span> <span m="1871790">I</span> <span m="1872050">would</span> <span m="1872390">expect</span> <span m="1872790">the</span> <span m="1873080">class=assignment</span> <span m="1873720">to be</span> <span m="1874100">in</span> <span m="1874480">quotes</span> <span m="1874780">and</span> <span m="1875080">then for</span> <span m="1875528">that</span> <span m="1875976">thing to not</span> <span m="1876424">have</span> <span m="1876872">any effect.</span> <span m="1877600">So</span> <span m="1877880">Django</span> <span m="1878360">could</span> <span m="1878670">enforce</span> <span m="1878980">codes</span> <span m="1879460">that</span> <span m="1879842">[INAUDIBLE].</span> </p>
<p><span m="1880990">PROFESSOR: Well,</span> <span m="1881220">see,</span> <span m="1881570">there's</span> <span m="1881990">a</span> <span m="1882120">little</span> <span m="1882290">bit</span> <span m="1882450">trickiness</span> <span m="1882710">there,</span> <span m="1883330">because</span> <span m="1884950">if</span> <span m="1885170">we</span> <span m="1885380">assumed</span> <span m="1886010">that</span> <span m="1886260">all</span> <span m="1886550">pages were</span> <span m="1886940">written--</span> <span m="1887540">well,</span> <span m="1888000">pull me</span> <span m="1888350">back</span> <span m="1888560">up</span> <span m="1888670">a little</span> <span m="1889025">bit.</span> <span m="1889380">If</span> <span m="1889630">we</span> <span m="1889790">assume</span> <span m="1890190">the</span> <span m="1890380">HTML</span> <span m="1890990">grammar</span> <span m="1891320">was</span> <span m="1891500">well</span> <span m="1891680">specified</span> <span m="1892010">and</span> <span m="1892340">the</span> <span m="1892840">CSS</span> <span m="1893440">grammar was</span> <span m="1893800">well</span> <span m="1893980">specified</span> <span m="1895080">and</span> <span m="1895160">so</span> <span m="1895340">on</span> <span m="1895440">and</span> <span m="1895480">so</span> <span m="1895660">forth,</span> <span m="1896470">then</span> <span m="1896650">you</span> <span m="1896780">could</span> <span m="1896920">imagine</span> <span m="1897330">a</span> <span m="1897400">world</span> <span m="1897900">in</span> <span m="1898020">which</span> <span m="1898560">perfect</span> <span m="1899070">parsers</span> <span m="1899490">would</span> <span m="1899620">be</span> <span m="1899820">able</span> <span m="1900050">to</span> <span m="1900620">sort</span> <span m="1900850">of</span> <span m="1900930">catch</span> <span m="1901240">these</span> <span m="1901460">problems</span> <span m="1902060">or</span> <span m="1902230">somehow</span> <span m="1902730">convert</span> <span m="1903090">them</span> <span m="1903200">to</span> <span m="1903300">normal</span> <span m="1903630">things.</span> <span m="1904490">But</span> <span m="1904590">in</span> <span m="1904690">fact,</span> <span m="1904990">the</span> <span m="1905160">HTML</span> <span m="1905570">grammars</span> <span m="1905840">and</span> <span m="1906110">the</span> <span m="1906280">CSS</span> <span m="1906420">grammars</span> <span m="1906940">are</span> <span m="1907040">not</span> <span m="1907370">well</span> <span m="1907540">specified.</span> </p>
<p><span m="1908860">And</span> <span m="1908980">then</span> <span m="1909100">on</span> <span m="1909220">top</span> <span m="1909590">of</span> <span m="1909730">that,</span> <span m="1910250">browsers</span> <span m="1910790">don't</span> <span m="1911080">implement</span> <span m="1911500">specs.</span> <span m="1912930">So</span> <span m="1913170">it's</span> <span m="1913270">like</span> <span m="1913440">Babushka</span> <span m="1913780">dolls</span> <span m="1913900">of</span> <span m="1914170">terror.</span> <span m="1915010">So</span> <span m="1915250">I</span> <span m="1915340">mean,</span> <span m="1915520">this,</span> <span m="1915760">in</span> <span m="1915990">fact,</span> <span m="1916410">gets into</span> <span m="1916530">this</span> <span m="1916810">notion</span> <span m="1917090">here.</span> <span m="1917860">Because I think</span> <span m="1918130">essentially</span> <span m="1918470">what</span> <span m="1918600">you're</span> <span m="1918730">saying</span> <span m="1919100">is,</span> <span m="1919440">well,</span> <span m="1919840">look, if we</span> <span m="1919940">have</span> <span m="1920220">the</span> <span m="1920300">grammar</span> <span m="1920680">for</span> <span m="1920840">something,</span> <span m="1921650">that</span> <span m="1921780">should</span> <span m="1921910">mean</span> <span m="1922250">something.</span> <span m="1923420">And</span> <span m="1923580">as</span> <span m="1923660">it</span> <span m="1923770">turns</span> <span m="1924060">out,</span> <span m="1924270">if</span> <span m="1924760">you</span> <span m="1924880">stick</span> <span m="1925220">to</span> <span m="1925430">a</span> <span m="1926000">less</span> <span m="1926260">expressive</span> <span m="1926950">grammar,</span> <span m="1927790">then it</span> <span m="1928080">is</span> <span m="1928370">actually</span> <span m="1928700">much</span> <span m="1929060">easier</span> <span m="1929420">to do</span> <span m="1929670">content</span> <span m="1930110">sanitization.</span> </p>
<p><span m="1933720">There's</span> <span m="1933940">some</span> <span m="1934210">language.</span> <span m="1934620">It's</span> <span m="1934780">called</span> <span m="1936230">Markdown</span> <span m="1938480">instead</span> <span m="1939080">of</span> <span m="1939770">markup.</span> <span m="1940740">[? Wall, ?]</span> <span m="1941140">right?</span> <span m="1941550">And</span> <span m="1941770">so</span> <span m="1942720">with</span> <span m="1942800">Markdown,</span> <span m="1943470">the</span> <span m="1943530">basic</span> <span m="1943890">idea</span> <span m="1944310">is</span> <span m="1944410">that it's</span> <span m="1944660">designed</span> <span m="1945330">to</span> <span m="1945430">be</span> <span m="1946150">a</span> <span m="1946230">language</span> <span m="1947000">that</span> <span m="1947100">allows,</span> <span m="1947530">for</span> <span m="1947620">example,</span> <span m="1947940">users</span> <span m="1948330">to</span> <span m="1948410">submit</span> <span m="1948750">comments,</span> <span m="1949750">but</span> <span m="1949840">it</span> <span m="1949930">doesn't</span> <span m="1950230">actually</span> <span m="1950920">have</span> <span m="1951250">things</span> <span m="1951480">like</span> <span m="1951610">the</span> <span m="1951720">blank</span> <span m="1952020">tag,</span> <span m="1952415">and</span> <span m="1952810">applet</span> <span m="1953270">support, and</span> <span m="1953640">stuff</span> <span m="1953880">like</span> <span m="1954080">that.</span> <span m="1954530">And</span> <span m="1954760">so</span> <span m="1955010">in</span> <span m="1955040">Markdown,</span> <span m="1955630">it's</span> <span m="1955750">actually</span> <span m="1956060">much</span> <span m="1956380">easier</span> <span m="1956700">to</span> <span m="1956830">do</span> <span m="1957000">what</span> <span m="1957150">you</span> <span m="1957260">suggested,</span> <span m="1957940">which</span> <span m="1958150">seems</span> <span m="1958430">like</span> <span m="1958580">a</span> <span m="1958660">reasonable</span> <span m="1959070">thing</span> <span m="1959360">at</span> <span m="1959480">first</span> <span m="1960650">glance.</span> <span m="1960910">Just</span> <span m="1961380">define</span> <span m="1961860">the</span> <span m="1961930">grammar</span> <span m="1962200">unambiguously</span> <span m="1962595">and</span> <span m="1962990">then</span> <span m="1963330">just</span> <span m="1963580">enforce that</span> <span m="1963830">grammar.</span> </p>
<p><span m="1965880">So</span> <span m="1966330">it's</span> <span m="1966410">much</span> <span m="1966610">easier</span> <span m="1966970">to do</span> <span m="1967090">sanitization</span> <span m="1967930">in a</span> <span m="1967990">simple</span> <span m="1968360">language</span> <span m="1968930">than in the</span> <span m="1969300">full-blown</span> <span m="1971390">HTML,</span> <span m="1971880">CSS,</span> <span m="1972560">and</span> <span m="1972710">JavaScript.</span> <span m="1973035">And</span> <span m="1973360">in</span> <span m="1973550">a</span> <span m="1973630">certain</span> <span m="1974070">sense,</span> <span m="1974320">think about</span> <span m="1974540">it</span> <span m="1974630">like</span> <span m="1974830">the</span> <span m="1974900">difference</span> <span m="1975120">between</span> <span m="1975430">understanding</span> <span m="1976710">gnarly</span> <span m="1977390">C</span> <span m="1977680">code</span> <span m="1978060">versus</span> <span m="1978540">gnarly</span> <span m="1978940">Python</span> <span m="1979420">code.</span> <span m="1980110">There's</span> <span m="1980290">actually</span> <span m="1980750">a</span> <span m="1980800">big</span> <span m="1981220">difference</span> <span m="1981710">in</span> <span m="1981790">trying</span> <span m="1981960">to</span> <span m="1982000">understand</span> <span m="1983040">that</span> <span m="1983240">much</span> <span m="1983550">more</span> <span m="1983790">expressive</span> <span m="1984330">language.</span> <span m="1984820">Because</span> <span m="1984870">it</span> <span m="1984960">can</span> <span m="1985070">do</span> <span m="1985340">many</span> <span m="1985630">more</span> <span m="1985850">things.</span> <span m="1986670">By</span> <span m="1986830">constraining</span> <span m="1987860">expressivity,</span> <span m="1988586">you</span> <span m="1988950">oftentimes</span> <span m="1989470">improve</span> <span m="1989880">security.</span> <span m="1993020">Does that all</span> <span m="1993260">make</span> <span m="1993460">sense?</span> <span m="1997500">All</span> <span m="1997630">right.</span> </p>
<p><span m="1997940">So</span> <span m="1998140">another</span> <span m="1998530">thing</span> <span m="1999030">that you</span> <span m="1999220">can</span> <span m="1999360">imagine</span> <span m="1999900">doing</span> <span m="2000320">to</span> <span m="2000790">protect</span> <span m="2001350">against</span> <span m="2002200">cross-site</span> <span m="2002770">scripting</span> <span m="2003160">attacks</span> <span m="2004270">is</span> <span m="2004570">to</span> <span m="2004800">use</span> <span m="2005860">something</span> <span m="2006240">called</span> <span m="2006920">CSP,</span> <span m="2008670">Content</span> <span m="2010140">Security</span> <span m="2010650">Policy.</span> <span m="2016750">And</span> <span m="2017140">so</span> <span m="2017310">the</span> <span m="2017460">idea</span> <span m="2017860">behind</span> <span m="2018670">CSP</span> <span m="2019610">is</span> <span m="2019720">that</span> <span m="2020210">it's</span> <span m="2020370">going</span> <span m="2020560">to</span> <span m="2020670">allow</span> <span m="2021420">a</span> <span m="2021550">web</span> <span m="2021810">server to--</span> <span m="2022546">oh.</span> </p>
<p><span m="2023498">AUDIENCE:  Yeah, I'm just</span> <span m="2023974">curious</span> <span m="2024450">about this</span> <span m="2024926">Markdown language.</span> <span m="2025878">So</span> <span m="2026830">all</span> <span m="2027306">browsers</span> <span m="2027782">know</span> <span m="2028258">how</span> <span m="2028734">to</span> <span m="2029210">parse</span> <span m="2029686">this</span> <span m="2030162">language?</span> </p>
<p><span m="2031120">PROFESSOR: No,</span> <span m="2031370">no, no.</span> <span m="2031780">So</span> <span m="2031960">what</span> <span m="2032040">happens</span> <span m="2032360">with a</span> <span m="2032400">lot</span> <span m="2032650">of</span> <span m="2032740">these</span> <span m="2032850">types</span> <span m="2033060">of</span> <span m="2033170">languages</span> <span m="2033520">is</span> <span m="2033700">that</span> <span m="2033890">you</span> <span m="2034010">essentially--</span> <span m="2035340">you</span> <span m="2035490">can</span> <span m="2035670">convert</span> <span m="2036180">them.</span> <span m="2036640">You can</span> <span m="2036990">pile</span> <span m="2037415">them</span> <span m="2037840">down to</span> <span m="2038110">HTML,</span> <span m="2039230">but</span> <span m="2039350">they're</span> <span m="2039520">not</span> <span m="2039730">natively</span> <span m="2040080">understood</span> <span m="2040470">by</span> <span m="2040560">the</span> <span m="2040660">browser,</span> <span m="2041390">typically.</span> <span m="2042700">So</span> <span m="2042800">in</span> <span m="2042860">other</span> <span m="2043000">words,</span> <span m="2044660">you've</span> <span m="2044850">got</span> <span m="2045160">some</span> <span m="2045500">comment</span> <span m="2048050">submission</span> <span m="2048540">system.</span> <span m="2049120">It</span> <span m="2049520">internally</span> <span m="2050199">expresses</span> <span m="2050650">stuff</span> <span m="2050929">in</span> <span m="2051060">Markdown.</span> <span m="2051840">But</span> <span m="2051920">then</span> <span m="2052370">before</span> <span m="2052690">it</span> <span m="2052730">can</span> <span m="2052850">be</span> <span m="2052980">rendered</span> <span m="2053310">to</span> <span m="2053380">the</span> <span m="2053500">page,</span> <span m="2053819">it</span> <span m="2054139">essentially</span> <span m="2054489">goes</span> <span m="2054679">to</span> <span m="2054739">the</span> <span m="2054810">Markdown</span> <span m="2055210">compiler.</span> <span m="2056469">The</span> <span m="2056540">Markdown</span> <span m="2056900">compiler</span> <span m="2057184">then</span> <span m="2057469">translates</span> <span m="2057920">it to</span> <span m="2058010">HTML.</span> </p>
<p><span m="2058265">AUDIENCE:  I</span> <span m="2058520">see.</span> <span m="2059017">Thanks.</span> <span m="2060508">[INAUDIBLE]</span> <span m="2063000">Markdown</span> <span m="2063360">might not</span> <span m="2063500">be the</span> <span m="2063950">best</span> <span m="2064400">trick</span> <span m="2064850">[? to use Markdown ?]</span> <span m="2065300">[INAUDIBLE].</span> </p>
<p><span m="2067100">PROFESSOR: So</span> <span m="2067280">Markdown</span> <span m="2067520">does</span> <span m="2067630">allow</span> <span m="2068070">inline</span> <span m="2068230">HTML.</span> <span m="2068850">As</span> <span m="2068989">far</span> <span m="2069190">as</span> <span m="2069290">I</span> <span m="2069380">know,</span> <span m="2069790">there's</span> <span m="2069980">a</span> <span m="2070030">way</span> <span m="2070139">to</span> <span m="2070250">disable</span> <span m="2070750">that</span> <span m="2071190">in</span> <span m="2071320">the</span> <span m="2071409">compiler.</span> <span m="2072010">I</span> <span m="2072080">could</span> <span m="2072230">be</span> <span m="2072330">wrong</span> <span m="2072540">about</span> <span m="2072719">that.</span> <span m="2073010">But</span> <span m="2073110">I</span> <span m="2073210">believe that</span> <span m="2073389">there's</span> <span m="2074239">a</span> <span m="2074320">flag</span> <span m="2074595">you can</span> <span m="2074870">pass</span> <span m="2075580">to</span> <span m="2075670">get</span> <span m="2075790">rid</span> <span m="2075920">of</span> <span m="2076030">it.</span> <span m="2076790">But</span> <span m="2076909">you're</span> <span m="2077030">correct.</span> <span m="2077770">If</span> <span m="2078040">you</span> <span m="2078110">use</span> <span m="2078590">a</span> <span m="2078800">constrained</span> <span m="2079270">language</span> <span m="2079565">but</span> <span m="2079860">then</span> <span m="2080110">you</span> <span m="2080250">embed</span> <span m="2081020">an</span> <span m="2081270">unconstrained</span> <span m="2081710">language,</span> <span m="2082380">then</span> <span m="2082580">that--</span> <span m="2082994">I mean,</span> <span m="2083409">the</span> <span m="2083630">terrorists</span> <span m="2083920">have won.</span> <span m="2084219">So</span> <span m="2084360">you're</span> <span m="2084790">right about</span> <span m="2085214">that.</span> <span m="2087360">OK.</span> <span m="2088110">Yeah.</span> </p>
<p><span m="2088400">So</span> <span m="2088500">another</span> <span m="2088795">thing you</span> <span m="2089090">can</span> <span m="2089460">do</span> <span m="2089750">to</span> <span m="2090040">improve</span> <span m="2091219">security</span> <span m="2091480">is</span> <span m="2091570">this thing called</span> <span m="2092090">Content</span> <span m="2092610">Security</span> <span m="2092909">Policy.</span> <span m="2093550">So</span> <span m="2093679">like I</span> <span m="2093830">was</span> <span m="2093969">saying,</span> <span m="2094239">what</span> <span m="2094360">this</span> <span m="2094489">allows</span> <span m="2095150">the</span> <span m="2095960">server</span> <span m="2096389">to</span> <span m="2096489">do</span> <span m="2097230">is</span> <span m="2097490">to</span> <span m="2097640">tell</span> <span m="2098000">a</span> <span m="2098090">web</span> <span m="2098310">browser</span> <span m="2098980">what</span> <span m="2099390">types</span> <span m="2100130">of</span> <span m="2100530">content</span> <span m="2101140">can</span> <span m="2101320">be</span> <span m="2101460">loaded</span> <span m="2101990">in</span> <span m="2102100">the</span> <span m="2102190">page</span> <span m="2102510">it's</span> <span m="2102660">sending</span> <span m="2102840">back,</span> <span m="2103470">and</span> <span m="2103630">also</span> <span m="2104310">where</span> <span m="2104510">that</span> <span m="2104740">content</span> <span m="2105150">should</span> <span m="2105330">come</span> <span m="2105680">from.</span> <span m="2106510">So</span> <span m="2107500">for</span> <span m="2107690">example,</span> <span m="2108880">in</span> <span m="2109100">an</span> <span m="2109210">HTTP</span> <span m="2109710">response,</span> <span m="2110270">the</span> <span m="2110350">server</span> <span m="2110710">might</span> <span m="2110920">be</span> <span m="2111030">able</span> <span m="2111830">to</span> <span m="2111910">say</span> <span m="2112110">something</span> <span m="2112460">like</span> <span m="2112730">this.</span> <span m="2114060">It'd</span> <span m="2114530">include</span> <span m="2114800">the</span> <span m="2115110">Content</span> <span m="2116450">Security</span> <span m="2117340">Policy</span> <span m="2117910">header.</span> <span m="2120640">And</span> <span m="2120860">then</span> <span m="2121070">it</span> <span m="2121180">might</span> <span m="2121450">say</span> <span m="2121720">something</span> <span m="2122500">like</span> <span m="2124890">the</span> <span m="2124980">default</span> <span m="2126390">source</span> <span m="2129320">is</span> <span m="2129680">going</span> <span m="2130030">to</span> <span m="2130380">equal</span> <span m="2130800">self.</span> <span m="2134811">And</span> <span m="2135270">it</span> <span m="2135380">will</span> <span m="2135510">also</span> <span m="2135910">accept</span> <span m="2136310">things</span> <span m="2136820">from</span> <span m="2137320">asterisk</span> <span m="2138915">mydomain.com.</span> </p>
<p><span m="2143270">So</span> <span m="2143450">what</span> <span m="2143570">does</span> <span m="2143670">this</span> <span m="2143820">mean?</span> <span m="2145860">So</span> <span m="2146200">essentially,</span> <span m="2147380">the</span> <span m="2147530">server</span> <span m="2147790">is</span> <span m="2148050">saying</span> <span m="2149660">the</span> <span m="2149750">content</span> <span m="2150300">from</span> <span m="2150440">this</span> <span m="2150570">site</span> <span m="2151320">should</span> <span m="2151500">only</span> <span m="2151770">come</span> <span m="2152000">from</span> <span m="2152360">whatever</span> <span m="2152680">it</span> <span m="2152730">is</span> <span m="2152990">that</span> <span m="2153250">the</span> <span m="2153560">domain</span> <span m="2153930">is</span> <span m="2154050">for</span> <span m="2154140">the</span> <span m="2154260">particular</span> <span m="2154600">page.</span> <span m="2156250">And</span> <span m="2156680">any</span> <span m="2157070">other</span> <span m="2157280">subdomain</span> <span m="2158440">from</span> <span m="2159610">mydomain.com.</span> <span m="2161210">So</span> <span m="2161410">what</span> <span m="2161530">that</span> <span m="2161740">means,</span> <span m="2162020">basically,</span> <span m="2162520">is</span> <span m="2162640">that</span> <span m="2163220">let's</span> <span m="2163580">say</span> <span m="2163760">if</span> <span m="2164030">self</span> <span m="2164300">was</span> <span m="2164790">bound</span> <span m="2165230">to</span> <span m="2167250">foo.com,</span> <span m="2167745">let's</span> <span m="2168240">say,</span> <span m="2169040">that's</span> <span m="2169290">the</span> <span m="2169750">origin</span> <span m="2170320">of</span> <span m="2170440">the</span> <span m="2170490">server</span> <span m="2170760">that's</span> <span m="2171030">sending this thing</span> <span m="2171180">back</span> <span m="2171360">to</span> <span m="2171440">the</span> <span m="2171520">browser.</span> </p>
<p><span m="2172330">So</span> <span m="2172840">if,</span> <span m="2173000">somehow,</span> <span m="2173430">there</span> <span m="2173570">is</span> <span m="2173660">a</span> <span m="2173710">cross-site</span> <span m="2174160">scripting</span> <span m="2174540">attack</span> <span m="2175230">and</span> <span m="2175400">the</span> <span m="2175490">page</span> <span m="2175920">tried</span> <span m="2176100">to</span> <span m="2176600">generate</span> <span m="2176700">a reference</span> <span m="2177130">to, let's</span> <span m="2177520">say,</span> <span m="2177750">bar.com,</span> <span m="2178610">the browser</span> <span m="2179040">would</span> <span m="2179180">say,</span> <span m="2179490">OK,</span> <span m="2179890">bar.com</span> <span m="2180470">is</span> <span m="2180610">not</span> <span m="2180860">self.</span> <span m="2181960">Bar.com</span> <span m="2182880">is</span> <span m="2183040">also</span> <span m="2183430">not</span> <span m="2183890">in</span> <span m="2184070">this</span> <span m="2184550">sort</span> <span m="2184760">of</span> <span m="2184830">set of</span> <span m="2185120">domains.</span> <span m="2185830">So</span> <span m="2185950">therefore,</span> <span m="2186210">the</span> <span m="2186310">browser</span> <span m="2186810">can just</span> <span m="2186930">say,</span> <span m="2187320">I</span> <span m="2187450">will</span> <span m="2187630">not</span> <span m="2188020">allow</span> <span m="2188920">that</span> <span m="2189320">request</span> <span m="2189890">to</span> <span m="2190080">go</span> <span m="2190240">forward.</span> <span m="2191390">So</span> <span m="2191830">this</span> <span m="2191890">is</span> <span m="2192060">actually</span> <span m="2192340">a</span> <span m="2192450">pretty</span> <span m="2192740">powerful</span> <span m="2193160">mechanism.</span> <span m="2193960">And</span> <span m="2194140">you</span> <span m="2194230">can</span> <span m="2194360">actually</span> <span m="2194640">specify</span> <span m="2195020">more</span> <span m="2195250">fine-grained</span> <span m="2196120">controls</span> <span m="2196580">here.</span> <span m="2196950">You</span> <span m="2197050">can</span> <span m="2197180">say,</span> <span m="2198030">my</span> <span m="2198240">images</span> <span m="2198630">should</span> <span m="2198800">come from</span> <span m="2199180">here.</span> <span m="2199880">My</span> <span m="2200220">scripts</span> <span m="2200515">should</span> <span m="2200810">come</span> <span m="2201060">from</span> <span m="2201220">here,</span> <span m="2201720">so</span> <span m="2202050">on</span> <span m="2202150">and</span> <span m="2202200">so</span> <span m="2202370">forth.</span> <span m="2202700">This is</span> <span m="2202860">actually</span> <span m="2203150">pretty</span> <span m="2203360">nice.</span> </p>
<p><span m="2205150">And</span> <span m="2205400">one</span> <span m="2205620">nice</span> <span m="2205850">thing</span> <span m="2205980">about</span> <span m="2206190">this,</span> <span m="2206390">too,</span> <span m="2206610">is</span> <span m="2206680">that it</span> <span m="2206870">actually</span> <span m="2207240">prevents</span> <span m="2208700">inline</span> <span m="2209160">JavaScript.</span> <span m="2210440">So</span> <span m="2210520">you</span> <span m="2210620">can't</span> <span m="2210850">have</span> <span m="2211470">script</span> <span m="2211830">tag</span> <span m="2212180">and</span> <span m="2212270">then</span> <span m="2212700">some</span> <span m="2213020">literal</span> <span m="2213430">JavaScript</span> <span m="2213940">and</span> <span m="2214050">close</span> <span m="2214360">script tag.</span> <span m="2214730">Everything</span> <span m="2215010">has</span> <span m="2215180">to</span> <span m="2215260">come</span> <span m="2215480">from</span> <span m="2216080">a</span> <span m="2216180">script</span> <span m="2216430">tag</span> <span m="2216710">with a</span> <span m="2216800">source.</span> <span m="2217350">So it</span> <span m="2217590">can be</span> <span m="2217910">validated</span> <span m="2218450">through</span> <span m="2218600">this.</span> <span m="2219850">And</span> <span m="2220010">also,</span> <span m="2220840">a</span> <span m="2221100">Content</span> <span m="2221430">Security</span> <span m="2221750">Policy</span> <span m="2222150">prevents</span> <span m="2222680">these</span> <span m="2223160">danger</span> <span m="2223520">statements</span> <span m="2224040">like</span> <span m="2224330">eval.</span> <span m="2225230">So</span> <span m="2225400">eval</span> <span m="2225790">basically</span> <span m="2226180">allows</span> <span m="2226470">a</span> <span m="2226530">web</span> <span m="2226700">page to</span> <span m="2226980">check</span> <span m="2227330">dynamically</span> <span m="2227840">generated</span> <span m="2228250">JavaScript</span> <span m="2228670">code.</span> <span m="2229200">And</span> <span m="2229360">so</span> <span m="2230590">if</span> <span m="2230740">the</span> <span m="2230950">CSP</span> <span m="2231350">header</span> <span m="2231770">is</span> <span m="2232150">specified,</span> <span m="2233070">the</span> <span m="2233220">browser</span> <span m="2233780">does</span> <span m="2233960">not</span> <span m="2234940">execute</span> <span m="2235360">evals.</span> <span m="2237720">So</span> <span m="2238110">does that all</span> <span m="2238370">make</span> <span m="2238570">sense?</span> </p>
<p><span m="2239358">AUDIENCE: So</span> <span m="2239856">since it's a kind of</span> <span m="2240354">ad-hoc</span> <span m="2240852">set of</span> <span m="2241350">things,</span> <span m="2241848">is that</span> <span m="2242346">like a complete</span> <span m="2242844">set</span> <span m="2243342">of</span> <span m="2243840">things that</span> <span m="2244338">it</span> <span m="2244836">[INAUDIBLE]?</span> </p>
<p><span m="2246330">PROFESSOR:  No.</span> <span m="2246830">So</span> <span m="2247000">there's</span> <span m="2247240">a</span> <span m="2247330">whole</span> <span m="2247820">list</span> <span m="2248200">of</span> <span m="2248550">resources</span> <span m="2249490">that</span> <span m="2249880">it</span> <span m="2250030">actually</span> <span m="2250390">protects.</span> <span m="2251100">So</span> <span m="2251240">this</span> <span m="2251440">is</span> <span m="2251570">sort</span> <span m="2251760">of</span> <span m="2251880">like</span> <span m="2252090">the</span> <span m="2252170">most</span> <span m="2252670">blanket</span> <span m="2253540">type</span> <span m="2253740">protection</span> <span m="2254120">you</span> <span m="2254210">could</span> <span m="2254370">get.</span> <span m="2254640">But</span> <span m="2254940">like</span> <span m="2255130">I</span> <span m="2255160">said,</span> <span m="2255350">it</span> <span m="2255440">actually</span> <span m="2255750">allows</span> <span m="2256000">you to</span> <span m="2256110">specify,</span> <span m="2256490">I think,</span> <span m="2256700">like, where</span> <span m="2256840">CSS</span> <span m="2257100">can</span> <span m="2257550">come</span> <span m="2257770">from,</span> <span m="2258230">like</span> <span m="2258530">a</span> <span m="2258570">bunch</span> <span m="2258780">of</span> <span m="2258840">different</span> <span m="2259090">things.</span> </p>
<p><span m="2259586">AUDIENCE:  But</span> <span m="2260082">on preventing</span> <span m="2260578">evals,</span> <span m="2261074">that seems like</span> <span m="2261570">the system's</span> <span m="2262066">[INAUDIBLE].</span> <span m="2262562">Are</span> <span m="2263058">there are</span> <span m="2263554">other</span> <span m="2264050">things</span> <span m="2264546">[INAUDIBLE]?</span> </p>
<p><span m="2265050">PROFESSOR: So</span> <span m="2265305">yeah,</span> <span m="2265560">there</span> <span m="2265740">are.</span> <span m="2266540">So</span> <span m="2266630">there's</span> <span m="2266800">always</span> <span m="2267110">this</span> <span m="2267260">question of</span> <span m="2267760">completeness.</span> <span m="2271580">So</span> <span m="2271920">for</span> <span m="2272050">example,</span> <span m="2272390">eval</span> <span m="2272530">is</span> <span m="2272990">not</span> <span m="2273170">the</span> <span m="2273240">only</span> <span m="2273480">way</span> <span m="2273610">JavaScript</span> <span m="2274170">can</span> <span m="2274290">actually</span> <span m="2274940">generate</span> <span m="2275300">code</span> <span m="2275520">dynamically.</span> <span m="2276240">There's</span> <span m="2276400">the</span> <span m="2276490">function</span> <span m="2276880">constructor,</span> <span m="2277390">for</span> <span m="2277500">example.</span> <span m="2278250">There's</span> <span m="2278470">certain</span> <span m="2278880">ways you can</span> <span m="2279140">call a</span> <span m="2279370">set</span> <span m="2279640">timeout.</span> <span m="2279930">You</span> <span m="2280220">pass in</span> <span m="2280480">a</span> <span m="2280740">string.</span> <span m="2281270">You</span> <span m="2281390">can</span> <span m="2281510">evaluate</span> <span m="2281950">code</span> <span m="2282210">that</span> <span m="2282420">way.</span> <span m="2283000">So</span> <span m="2283380">I</span> <span m="2283480">believe</span> <span m="2283790">that</span> <span m="2283990">CSP</span> <span m="2284360">actually</span> <span m="2284570">shuts</span> <span m="2284840">down</span> <span m="2285040">those</span> <span m="2285260">vectors</span> <span m="2285590">as</span> <span m="2285690">well.</span> <span m="2286410">But</span> <span m="2286530">if</span> <span m="2286630">you're</span> <span m="2286770">asking,</span> <span m="2287390">is</span> <span m="2287590">this</span> <span m="2288450">provably</span> <span m="2288980">complete</span> <span m="2289280">in terms</span> <span m="2289580">of</span> <span m="2289910">what it</span> <span m="2290150">isolates,</span> <span m="2290970">no.</span> <span m="2291780">And</span> <span m="2291950">I</span> <span m="2292010">don't</span> <span m="2292160">think</span> <span m="2292410">that</span> <span m="2292850">any of</span> <span m="2292920">these</span> <span m="2293170">solutions</span> <span m="2293620">are</span> <span m="2293680">provably</span> <span m="2294100">complete.</span> </p>
<p><span m="2296910">AUDIENCE:  One</span> <span m="2297390">really interesting</span> <span m="2297870">thing about</span> <span m="2298350">CSP</span> <span m="2298830">is</span> <span m="2299310">the fact that</span> <span m="2299790">you</span> <span m="2299990">can</span> <span m="2300305">set it to</span> <span m="2300620">disallow</span> <span m="2300830">all</span> <span m="2301180">inline</span> <span m="2301860">[? dom ?]</span> <span m="2302250">script</span> <span m="2303030">on a</span> <span m="2303335">page.</span> </p>
<p><span m="2303640">PROFESSOR:  Yeah.</span> <span m="2303860">That's right.</span> <span m="2304360">Yeah, yeah.</span> </p>
<p><span m="2304930">AUDIENCE: Which</span> <span m="2305350">[? helps ?]</span> <span m="2305580">[INAUDIBLE]</span> <span m="2306046">to be sanitized.</span> </p>
<p><span m="2306978">PROFESSOR:  Yeah.</span> </p>
<p><span m="2307910">AUDIENCE:</span> <span m="2308380">[INAUDIBLE]</span> <span m="2310220">prevents</span> <span m="2310580">an</span> <span m="2310955">attacker</span> <span m="2311330">from--</span> </p>
<p><span m="2312660">PROFESSOR: So</span> <span m="2312990">that</span> <span m="2313150">helps</span> <span m="2313370">with some</span> <span m="2313765">things.</span> <span m="2314160">But</span> <span m="2314490">that</span> <span m="2314800">still</span> <span m="2314930">would</span> <span m="2315000">allow,</span> <span m="2315300">like,</span> <span m="2316195">[INAUDIBLE]</span> <span m="2316620">to use</span> <span m="2316900">eval.</span> <span m="2318400">So</span> <span m="2318560">that's</span> <span m="2318990">why it's</span> <span m="2319310">important</span> <span m="2319490">to</span> <span m="2319830">try</span> <span m="2320090">to</span> <span m="2320350">get rid of</span> <span m="2320620">all of</span> <span m="2320900">those</span> <span m="2321080">dynamically.</span> <span m="2322340">All</span> <span m="2322580">of</span> <span m="2322860">those</span> <span m="2323210">interfaces</span> <span m="2323656">[? use dynamic ?]</span> <span m="2324102">code</span> <span m="2324548">generation.</span> </p>
<p><span m="2324994">AUDIENCE:</span> <span m="2325440">If you list your tag with</span> <span m="2325610">a</span> <span m="2326040">source</span> <span m="2326860">but</span> <span m="2326930">then also</span> <span m="2327245">inline</span> <span m="2327560">code,</span> <span m="2327850">is</span> <span m="2328320">there</span> <span m="2328790">like</span> <span m="2329080">standardized</span> <span m="2329660">[INAUDIBLE]</span> <span m="2329960">that</span> <span m="2330260">all</span> <span m="2330330">browsers</span> <span m="2330890">do</span> <span m="2331520">with--</span> </p>
<p><span m="2332970">PROFESSOR: Yeah.</span> <span m="2333430">So</span> <span m="2333740">what</span> <span m="2334040">should</span> <span m="2334490">happen</span> <span m="2335340">is</span> <span m="2336140">that</span> <span m="2336540">the</span> <span m="2337030">inline</span> <span m="2337620">code</span> <span m="2337960">should</span> <span m="2338240">be</span> <span m="2338470">ignored.</span> <span m="2340320">The</span> <span m="2340390">browser</span> <span m="2340790">should always</span> <span m="2341040">get</span> <span m="2342280">the</span> <span m="2342400">code</span> <span m="2342660">from the</span> <span m="2342920">source</span> <span m="2343210">attribute.</span> <span m="2343940">I</span> <span m="2344070">actually</span> <span m="2344310">don't</span> <span m="2344530">know</span> <span m="2344730">if all</span> <span m="2344890">browsers</span> <span m="2345370">do that.</span> <span m="2346290">I've</span> <span m="2346530">actually</span> <span m="2347030">personally</span> <span m="2347420">experienced</span> <span m="2347850">browsers</span> <span m="2348670">exhibit</span> <span m="2349110">different</span> <span m="2349350">behavior</span> <span m="2349830">[? in that. ?]</span> <span m="2350490">This</span> <span m="2350670">was</span> <span m="2350780">a</span> <span m="2350820">couple</span> <span m="2351030">years</span> <span m="2351250">ago,</span> <span m="2351480">so I'm</span> <span m="2351820">not sure.</span> <span m="2354420">And so</span> <span m="2354570">yeah.</span> <span m="2354780">So</span> <span m="2355030">one thing</span> <span m="2355190">to keep in</span> <span m="2355500">mind</span> <span m="2355780">about</span> <span m="2357310">doing</span> <span m="2357640">work</span> <span m="2357840">in</span> <span m="2357990">web</span> <span m="2358170">security</span> <span m="2358720">is</span> <span m="2358870">that in</span> <span m="2359030">a</span> <span m="2359100">sense,</span> <span m="2359780">it's</span> <span m="2359840">almost</span> <span m="2360040">like</span> <span m="2360130">a</span> <span m="2360200">natural</span> <span m="2360620">science.</span> <span m="2361450">So</span> <span m="2362210">it's</span> <span m="2362310">like</span> <span m="2362650">people</span> <span m="2362990">actually</span> <span m="2363210">propose</span> <span m="2363870">theories</span> <span m="2364180">about</span> <span m="2364380">how</span> <span m="2364520">browsers</span> <span m="2364960">work.</span> <span m="2365390">And then</span> <span m="2365842">you go</span> <span m="2366294">seeing</span> <span m="2366746">them do</span> <span m="2367198">that.</span> <span m="2367650">And</span> <span m="2367810">so</span> <span m="2367940">that</span> <span m="2368090">can</span> <span m="2368180">be</span> <span m="2368310">a little</span> <span m="2368540">bit disappointing,</span> <span m="2368830">because</span> <span m="2369155">we're</span> <span m="2369480">taught,</span> <span m="2369720">yay,</span> <span m="2370660">algorithms,</span> <span m="2370975">and</span> <span m="2371290">proofs,</span> <span m="2371790">and</span> <span m="2371860">stuff</span> <span m="2372110">like</span> <span m="2372290">that.</span> </p>
<p><span m="2372660">But</span> <span m="2372990">these</span> <span m="2373160">browsers</span> <span m="2373920">are</span> <span m="2374175">so</span> <span m="2374430">ill-behaved</span> <span m="2374870">that</span> <span m="2375540">a</span> <span m="2375600">lot</span> <span m="2375940">of times,</span> <span m="2376360">the</span> <span m="2376490">answer is</span> <span m="2377300">maybe</span> <span m="2378380">or</span> <span m="2378830">maybe</span> <span m="2379080">not.</span> <span m="2379440">And then</span> <span m="2379730">[? you go ?]</span> <span m="2380020">see,</span> <span m="2381560">as</span> <span m="2381760">we'll</span> <span m="2381890">see.</span> <span m="2382140">They</span> <span m="2382230">keep on</span> <span m="2382550">adding</span> <span m="2382850">features.</span> <span m="2383390">It</span> <span m="2383550">gets back to</span> <span m="2383780">your</span> <span m="2384040">question</span> <span m="2384340">about,</span> <span m="2384620">are</span> <span m="2384960">these</span> <span m="2385200">things</span> <span m="2385770">provably</span> <span m="2386650">complete?</span> <span m="2387530">I</span> <span m="2387660">think</span> <span m="2388630">web</span> <span m="2389730">vendors</span> <span m="2390250">have</span> <span m="2390970">punted on this</span> <span m="2391180">notion</span> <span m="2391570">of</span> <span m="2391680">creating</span> <span m="2392260">a</span> <span m="2392370">browser</span> <span m="2392710">that</span> <span m="2392850">is</span> <span m="2393370">provably</span> <span m="2393706">[INAUDIBLE].</span> <span m="2394840">Basically,</span> <span m="2395270">what they try</span> <span m="2395760">to do</span> <span m="2396230">is just</span> <span m="2396460">try to keep</span> <span m="2396710">one step</span> <span m="2397160">ahead of</span> <span m="2397610">the</span> <span m="2397810">attackers.</span> <span m="2397950">And we'll see some</span> <span m="2398100">examples</span> <span m="2398560">of that</span> <span m="2399232">further in</span> <span m="2399570">the</span> <span m="2399660">lecture.</span> <span m="2400944">So</span> <span m="2401386">yeah.</span> <span m="2401828">So</span> <span m="2402390">CSP is actually</span> <span m="2402650">pretty</span> <span m="2403490">cool.</span> </p>
<p><span m="2404310">Another</span> <span m="2404610">thing</span> <span m="2405030">that's</span> <span m="2405750">useful</span> <span m="2406220">is</span> <span m="2406290">that</span> <span m="2406480">the</span> <span m="2406560">server</span> <span m="2406835">can</span> <span m="2408080">set</span> <span m="2408400">this</span> <span m="2409920">HTTP</span> <span m="2410195">header</span> <span m="2410470">called</span> <span m="2411400">X-Content-Type-Options,</span> <span m="2416500">and</span> <span m="2416875">then</span> <span m="2417250">can say,</span> <span m="2417920">nosniff.</span> <span m="2419266">And</span> <span m="2419750">so</span> <span m="2420320">what</span> <span m="2420550">this</span> <span m="2420760">means</span> <span m="2421210">is</span> <span m="2421430">that</span> <span m="2421880">this</span> <span m="2422520">prevents</span> <span m="2422950">the</span> <span m="2423040">browser</span> <span m="2423395">from</span> <span m="2423750">doing</span> <span m="2424110">some</span> <span m="2424330">of</span> <span m="2424470">those,</span> <span m="2425140">quote,</span> <span m="2425380">unquote,</span> <span m="2425680">helpful</span> <span m="2426120">optimizations,</span> <span m="2426570">like</span> <span m="2427020">we</span> <span m="2427140">discussed</span> <span m="2427540">last</span> <span m="2427860">lecture,</span> <span m="2428260">where</span> <span m="2428585">it</span> <span m="2428910">will</span> <span m="2428950">say,</span> <span m="2429260">a-ha,</span> <span m="2429595">there's a</span> <span m="2429930">mismatch</span> <span m="2430410">between</span> <span m="2430760">the</span> <span m="2430870">file</span> <span m="2431130">extension</span> <span m="2432070">and</span> <span m="2432560">the</span> <span m="2432630">actual</span> <span m="2432960">[? bytes ?]</span> <span m="2433255">that I</span> <span m="2433550">have</span> <span m="2433680">sniffed in</span> <span m="2433880">the</span> <span m="2434370">contents.</span> </p>
<p><span m="2434560">So let me</span> <span m="2434670">somehow</span> <span m="2434960">massage</span> <span m="2435250">this</span> <span m="2435540">content</span> <span m="2435660">to</span> <span m="2436140">some</span> <span m="2436340">different</span> <span m="2436670">thing.</span> <span m="2437120">And then</span> <span m="2437660">all of</span> <span m="2437820">a sudden,</span> <span m="2438110">you've</span> <span m="2438770">given</span> <span m="2439520">the</span> <span m="2439710">barbarians the</span> <span m="2439950">keys to the</span> <span m="2440340">kingdom.</span> <span m="2440620">So</span> <span m="2440820">you</span> <span m="2440940">can</span> <span m="2441080">set</span> <span m="2441320">this</span> <span m="2441500">header</span> <span m="2441780">to basically</span> <span m="2442140">say,</span> <span m="2442210">browser,</span> <span m="2442590">do not</span> <span m="2443053">do that.</span> <span m="2443980">And so</span> <span m="2444245">that can be</span> <span m="2444510">useful in</span> <span m="2444700">mitigating</span> <span m="2445180">some</span> <span m="2445340">types of</span> <span m="2445710">attacks as</span> <span m="2446080">well.</span> <span m="2448580">All</span> <span m="2448700">right.</span> <span m="2448930">So</span> <span m="2448980">that's</span> <span m="2449300">kind of</span> <span m="2450286">a</span> <span m="2450670">quick</span> <span m="2450980">survey</span> <span m="2451580">of</span> <span m="2451640">some</span> <span m="2451850">of</span> <span m="2451940">these</span> <span m="2452320">cross-site</span> <span m="2453670">scripting</span> <span m="2454110">vulnerabilities.</span> </p>
<p><span m="2455352">So</span> <span m="2455824">now</span> <span m="2457240">let's</span> <span m="2457490">look</span> <span m="2457930">at</span> <span m="2458580">another</span> <span m="2459160">popular</span> <span m="2459760">vector</span> <span m="2461190">for</span> <span m="2461470">attacks.</span> <span m="2463030">And</span> <span m="2463370">that</span> <span m="2463650">vector</span> <span m="2464240">is</span> <span m="2464500">going</span> <span m="2464840">to</span> <span m="2464950">be</span> <span m="2466060">SQL.</span> <span m="2468524">And</span> <span m="2469010">so</span> <span m="2469260">you've</span> <span m="2469400">probably</span> <span m="2469750">heard</span> <span m="2470525">of</span> <span m="2470970">these</span> <span m="2471710">SQL</span> <span m="2472320">injection</span> <span m="2472800">attacks.</span> <span m="2475440">And</span> <span m="2475650">so</span> <span m="2475860">what</span> <span m="2476100">these</span> <span m="2476340">attacks</span> <span m="2476870">do</span> <span m="2477230">is</span> <span m="2477430">they</span> <span m="2477800">take</span> <span m="2478230">advantage of</span> <span m="2478640">the</span> <span m="2478730">fact</span> <span m="2479910">that</span> <span m="2480870">on</span> <span m="2481100">the</span> <span m="2481180">back</span> <span m="2481560">end,</span> <span m="2481880">for a</span> <span m="2481920">lot</span> <span m="2482100">of</span> <span m="2482210">websites,</span> <span m="2482720">there's</span> <span m="2483070">some</span> <span m="2483250">type</span> <span m="2483390">of</span> <span m="2483470">database.</span> <span m="2484450">And</span> <span m="2484620">so</span> <span m="2484920">to</span> <span m="2485300">dynamically</span> <span m="2485410">construct a page</span> <span m="2485710">that's</span> <span m="2486170">shown to the</span> <span m="2486660">user,</span> <span m="2486920">there</span> <span m="2487180">have</span> <span m="2487450">to be</span> <span m="2487720">some</span> <span m="2488250">database</span> <span m="2488720">queries</span> <span m="2488920">that</span> <span m="2489230">are</span> <span m="2489540">issued to</span> <span m="2489790">that</span> <span m="2490000">back-end</span> <span m="2490410">server.</span> </p>
<p><span m="2491190">So</span> <span m="2492010">imagine</span> <span m="2492480">that</span> <span m="2492590">you have</span> <span m="2493654">some</span> <span m="2494450">query</span> <span m="2496030">that</span> <span m="2496190">looked</span> <span m="2496420">like</span> <span m="2496690">this.</span> <span m="2497370">So</span> <span m="2497850">you</span> <span m="2497920">do</span> <span m="2498140">a</span> <span m="2499970">SELECT</span> <span m="2500430">asterisk.</span> <span m="2501850">So</span> <span m="2502470">give</span> <span m="2502660">me</span> <span m="2502860">all</span> <span m="2503190">the</span> <span m="2503600">values</span> <span m="2504150">from this</span> <span m="2504490">query</span> <span m="2505040">FROM</span> <span m="2505600">some</span> <span m="2506830">particular</span> <span m="2507650">table,</span> <span m="2511500">WHERE</span> <span m="2514480">the</span> <span m="2514920">User</span> <span m="2515290">ID</span> <span m="2515730">field</span> <span m="2518970">is</span> <span m="2519410">equal</span> <span m="2519870">to</span> <span m="2522980">something</span> <span m="2523630">that</span> <span m="2524000">is</span> <span m="2525020">specified</span> <span m="2527820">over</span> <span m="2528090">the</span> <span m="2528180">web</span> <span m="2528650">from some</span> <span m="2528850">potentially</span> <span m="2531430">untrusted</span> <span m="2532490">source.</span> </p>
<p><span m="2533986">So at</span> <span m="2534450">this</span> <span m="2534640">point,</span> <span m="2534910">I</span> <span m="2534950">may</span> <span m="2535160">think</span> <span m="2535330">we</span> <span m="2535430">all</span> <span m="2535570">know</span> <span m="2535720">how</span> <span m="2535830">this</span> <span m="2535950">story</span> <span m="2536350">ends.</span> <span m="2536780">It ends very</span> <span m="2536960">badly</span> <span m="2537260">There are</span> <span m="2537330">no</span> <span m="2537660">survivors.</span> <span m="2538430">So</span> <span m="2538550">basically,</span> <span m="2539450">if</span> <span m="2539630">this</span> <span m="2539830">comes</span> <span m="2539960">from</span> <span m="2540110">someone</span> <span m="2540390">untrusted,</span> <span m="2540990">then</span> <span m="2541200">you</span> <span m="2541410">can</span> <span m="2541580">do</span> <span m="2541820">all</span> <span m="2542060">kinds</span> <span m="2542340">of</span> <span m="2542595">[? chicaner ?]</span> <span m="2542850">stuff</span> <span m="2543190">here.</span> <span m="2543780">So</span> <span m="2543950">one thing</span> <span m="2544220">you</span> <span m="2544470">could do</span> <span m="2545250">is</span> <span m="2546100">if</span> <span m="2546170">you</span> <span m="2546270">want</span> <span m="2546410">to</span> <span m="2546460">be</span> <span m="2546730">a jerk,</span> <span m="2547380">you</span> <span m="2547540">could</span> <span m="2547710">just</span> <span m="2548290">set</span> <span m="2548730">this</span> <span m="2549190">to</span> <span m="2550770">the</span> <span m="2550880">string,</span> <span m="2551310">0</span> <span m="2552520">and</span> <span m="2552780">then</span> <span m="2553160">something</span> <span m="2553550">like</span> <span m="2555190">DELETE</span> <span m="2555620">TABLE.</span> <span m="2561330">So</span> <span m="2561450">what</span> <span m="2561610">happens</span> <span m="2561940">here?</span> </p>
<p><span m="2562270">So</span> <span m="2562300">basically,</span> <span m="2562870">the</span> <span m="2563270">database</span> <span m="2563660">server's</span> <span m="2564050">going to</span> <span m="2564330">say, OK,</span> <span m="2565070">I'll</span> <span m="2565280">set</span> <span m="2565650">the</span> <span m="2566030">user ID</span> <span m="2566210">to</span> <span m="2566410">0;.</span> <span m="2568340">Here's</span> <span m="2568450">a</span> <span m="2568750">sort of a</span> <span m="2568790">new</span> <span m="2568960">command.</span> <span m="2569540">DELETE</span> <span m="2569680">TABLE.</span> <span m="2570320">OK,</span> <span m="2570550">cheers,</span> <span m="2571000">there</span> <span m="2571140">goes</span> <span m="2571290">your</span> <span m="2571400">table.</span> <span m="2572190">And you're</span> <span m="2572470">done.</span> <span m="2572780">And in</span> <span m="2573000">fact,</span> <span m="2573300">there</span> <span m="2573460">was</span> <span m="2573570">a</span> <span m="2573620">viral</span> <span m="2574100">image</span> <span m="2574280">that went</span> <span m="2574500">around</span> <span m="2574960">a couple</span> <span m="2575020">years</span> <span m="2575230">ago.</span> <span m="2575410">It's</span> <span m="2575520">unclear</span> <span m="2575910">if it</span> <span m="2576130">was true,</span> <span m="2576320">like many</span> <span m="2576600">of</span> <span m="2576640">these</span> <span m="2576850">viral</span> <span m="2577140">images.</span> <span m="2577930">But</span> <span m="2578040">it was</span> <span m="2578150">that</span> <span m="2578360">people</span> <span m="2579120">in</span> <span m="2579260">Germany</span> <span m="2579750">had</span> <span m="2580020">license</span> <span m="2580500">plates</span> <span m="2581300">that</span> <span m="2581430">actually</span> <span m="2581800">said</span> <span m="2582080">0;</span> <span m="2583100">DELETE</span> <span m="2583410">TABLE.</span> </p>
<p><span m="2583830">[LAUGHTER]</span> </p>
<p><span m="2585000">Because</span> <span m="2585430">the</span> <span m="2585530">idea</span> <span m="2585950">is</span> <span m="2586020">that</span> <span m="2586170">the</span> <span m="2586240">security</span> <span m="2586760">cameras,</span> <span m="2587460">they</span> <span m="2587660">would</span> <span m="2588040">use</span> <span m="2588520">OCR,</span> <span m="2589150">Optical</span> <span m="2590020">Character</span> <span m="2590690">Recognition,</span> <span m="2591160">to</span> <span m="2591270">figure</span> <span m="2591660">out</span> <span m="2591880">what</span> <span m="2592050">your</span> <span m="2592190">license</span> <span m="2592590">plate</span> <span m="2592790">was,</span> <span m="2593560">and then</span> <span m="2593950">put</span> <span m="2594180">it in</span> <span m="2594360">a</span> <span m="2594420">SQL</span> <span m="2594730">database.</span> <span m="2595505">And</span> <span m="2595970">there were</span> <span m="2596435">images floating</span> <span m="2596900">around.</span> <span m="2597365">These</span> <span m="2597830">Volkswagens,</span> <span m="2598430">people</span> <span m="2598560">would</span> <span m="2598770">have</span> <span m="2599250">this as</span> <span m="2599380">their</span> <span m="2599420">license</span> <span m="2599850">plate.</span> <span m="2601620">I</span> <span m="2601780">don't know if</span> <span m="2602120">that</span> <span m="2602310">works.</span> <span m="2602710">It's</span> <span m="2602770">funny.</span> <span m="2603070">So I like</span> <span m="2603340">to</span> <span m="2603400">believe</span> <span m="2603750">that it's</span> <span m="2603930">true.</span> <span m="2604300">But</span> <span m="2605250">who</span> <span m="2605655">knows.</span> <span m="2606060">But</span> <span m="2606220">you</span> <span m="2606400">get</span> <span m="2606540">the</span> <span m="2606620">basic</span> <span m="2606950">idea</span> <span m="2607210">behind</span> <span m="2607510">that.</span> <span m="2607660">So</span> <span m="2607760">once</span> <span m="2607980">again,</span> <span m="2608700">the</span> <span m="2608800">idea</span> <span m="2609070">is</span> <span m="2609360">you</span> <span m="2609520">want</span> <span m="2609860">to</span> <span m="2610130">be</span> <span m="2610310">sure</span> <span m="2610680">to</span> <span m="2610770">sanitize</span> <span m="2611450">this</span> <span m="2611610">content</span> <span m="2612530">that</span> <span m="2612730">you're</span> <span m="2612810">getting</span> <span m="2613210">from</span> <span m="2613860">these</span> <span m="2614050">untrusted</span> <span m="2614470">sources.</span> </p>
<p><span m="2615880">And</span> <span m="2616070">so</span> <span m="2616370">note</span> <span m="2616740">that</span> <span m="2616920">there</span> <span m="2617210">may</span> <span m="2617420">be</span> <span m="2617570">some</span> <span m="2617850">sort</span> <span m="2618040">of</span> <span m="2618090">straightforward</span> <span m="2618770">things</span> <span m="2619340">that</span> <span m="2619500">don't</span> <span m="2619690">quite</span> <span m="2619920">work.</span> <span m="2620210">So</span> <span m="2620280">you</span> <span m="2620340">might</span> <span m="2620540">think,</span> <span m="2620720">OK,</span> <span m="2621040">well</span> <span m="2621280">then</span> <span m="2621560">why can't I</span> <span m="2621690">just</span> <span m="2623360">put</span> <span m="2623660">another</span> <span m="2624030">quote</span> <span m="2624400">here</span> <span m="2625670">and</span> <span m="2625900">then</span> <span m="2626720">put</span> <span m="2627380">another</span> <span m="2627710">quote</span> <span m="2628050">here</span> <span m="2628530">such</span> <span m="2628740">that</span> <span m="2628860">whatever</span> <span m="2629650">it</span> <span m="2629760">is</span> <span m="2630080">that</span> <span m="2630280">the</span> <span m="2630410">attacker</span> <span m="2630780">submits,</span> <span m="2632210">it's</span> <span m="2632360">going</span> <span m="2632490">to be</span> <span m="2632620">enclosed in</span> <span m="2632900">a</span> <span m="2633050">string?</span> <span m="2634160">So</span> <span m="2634330">this</span> <span m="2634450">doesn't</span> <span m="2634770">work,</span> <span m="2635140">because</span> <span m="2635470">then the</span> <span m="2635670">attacker</span> <span m="2636090">can</span> <span m="2636350">always just</span> <span m="2636510">put</span> <span m="2636640">a</span> <span m="2636710">quote</span> <span m="2637070">inside</span> <span m="2637440">his</span> <span m="2637610">or</span> <span m="2637710">her</span> <span m="2637910">attack</span> <span m="2638290">string.</span> <span m="2639080">So</span> <span m="2639620">a</span> <span m="2639690">lot</span> <span m="2639890">of</span> <span m="2639960">times,</span> <span m="2640330">these</span> <span m="2640600">sort</span> <span m="2640850">of</span> <span m="2641230">half-hearted</span> <span m="2641680">hacks</span> <span m="2642150">don't</span> <span m="2642350">really</span> <span m="2642560">get</span> <span m="2642710">you</span> <span m="2642820">the</span> <span m="2642880">security</span> <span m="2643180">you</span> <span m="2643310">think</span> <span m="2643550">they</span> <span m="2643660">might.</span> </p>
<p><span m="2644680">So</span> <span m="2644870">the</span> <span m="2645000">solution</span> <span m="2645570">here</span> <span m="2646250">is</span> <span m="2646620">that</span> <span m="2649800">you</span> <span m="2650150">need</span> <span m="2650470">to</span> <span m="2651910">rigorously</span> <span m="2653570">encode</span> <span m="2653910">your</span> <span m="2654030">data.</span> <span m="2659420">And</span> <span m="2659540">once</span> <span m="2659710">again,</span> <span m="2660030">that</span> <span m="2660090">just</span> <span m="2660280">means</span> <span m="2660640">that</span> <span m="2661430">when</span> <span m="2661880">you</span> <span m="2662010">get</span> <span m="2663000">information</span> <span m="2663640">from an</span> <span m="2663890">untrusted</span> <span m="2664350">source,</span> <span m="2665050">don't</span> <span m="2665300">just</span> <span m="2665490">stick</span> <span m="2665860">it</span> <span m="2666360">in</span> <span m="2666720">the</span> <span m="2666800">system</span> <span m="2667720">sort</span> <span m="2668320">of</span> <span m="2668410">as</span> <span m="2668660">it</span> <span m="2668750">is.</span> <span m="2669420">Make</span> <span m="2669660">sure</span> <span m="2670260">that,</span> <span m="2670770">for</span> <span m="2670850">example,</span> <span m="2671430">it</span> <span m="2671620">can</span> <span m="2671900">actually</span> <span m="2672300">escape</span> <span m="2672570">from</span> <span m="2672840">whatever</span> <span m="2673610">sandbox</span> <span m="2674240">or</span> <span m="2674340">whatnot</span> <span m="2674510">you</span> <span m="2674690">think</span> <span m="2674880">you're</span> <span m="2674980">actually</span> <span m="2675220">putting</span> <span m="2675510">into.</span> <span m="2676390">So</span> <span m="2676440">for</span> <span m="2676570">example,</span> <span m="2677300">you</span> <span m="2677330">want</span> <span m="2677620">to</span> <span m="2678300">put</span> <span m="2678540">in</span> <span m="2678620">an</span> <span m="2678790">Escape</span> <span m="2679110">function</span> <span m="2680450">that</span> <span m="2680750">would</span> <span m="2680860">prevent</span> <span m="2681300">maybe</span> <span m="2681720">the</span> <span m="2681790">semicolon</span> <span m="2682360">operator</span> <span m="2682760">from</span> <span m="2682890">showing</span> <span m="2683190">up</span> <span m="2683290">in a</span> <span m="2683370">raw</span> <span m="2683580">form</span> <span m="2684010">and</span> <span m="2684070">things</span> <span m="2684380">like</span> <span m="2684610">this.</span> <span m="2685850">And</span> <span m="2686090">so</span> <span m="2686190">a</span> <span m="2686250">lot</span> <span m="2686520">of these</span> <span m="2686680">web</span> <span m="2686910">frameworks</span> <span m="2687350">like</span> <span m="2687590">Django will</span> <span m="2688010">actually</span> <span m="2688370">have</span> <span m="2691000">built-in</span> <span m="2691430">libraries</span> <span m="2691910">to</span> <span m="2692020">do</span> <span m="2692200">things</span> <span m="2692850">like</span> <span m="2693120">character</span> <span m="2693580">escaping</span> <span m="2694030">for</span> <span m="2694210">SQL</span> <span m="2694510">queries</span> <span m="2694770">to</span> <span m="2695070">try to</span> <span m="2695370">prevent some</span> <span m="2695530">of</span> <span m="2695590">this</span> <span m="2695750">stuff.</span> </p>
<p><span m="2696600">And</span> <span m="2696750">a</span> <span m="2696810">lot</span> <span m="2697120">of</span> <span m="2697220">these</span> <span m="2697410">frameworks</span> <span m="2697830">actually</span> <span m="2698210">encourage</span> <span m="2698520">developers</span> <span m="2699340">not</span> <span m="2699610">to</span> <span m="2699710">ever</span> <span m="2699970">directly</span> <span m="2700360">interface</span> <span m="2700740">with</span> <span m="2700840">the</span> <span m="2700900">database.</span> <span m="2701670">So it's like</span> <span m="2701860">Django</span> <span m="2702380">itself</span> <span m="2702665">would</span> <span m="2702950">provide</span> <span m="2703330">some</span> <span m="2703460">high-level</span> <span m="2704030">interface</span> <span m="2704680">which</span> <span m="2704900">does</span> <span m="2705100">sanitization</span> <span m="2705820">for</span> <span m="2706120">you.</span> <span m="2706280">It</span> <span m="2706380">takes</span> <span m="2706610">care</span> <span m="2706870">of</span> <span m="2706970">some</span> <span m="2707100">of</span> <span m="2707180">these</span> <span m="2707930">icky</span> <span m="2708180">corner</span> <span m="2708490">cases.</span> <span m="2710160">But</span> <span m="2710520">performance,</span> <span m="2711070">performance,</span> <span m="2711870">performance.</span> <span m="2712450">Sometimes</span> <span m="2712630">people</span> <span m="2712890">think</span> <span m="2713210">that</span> <span m="2713690">these</span> <span m="2713800">web</span> <span m="2713990">frameworks are</span> <span m="2714030">too</span> <span m="2714170">slow.</span> <span m="2714720">So</span> <span m="2714840">you</span> <span m="2715000">will</span> <span m="2715220">still</span> <span m="2715460">see,</span> <span m="2715710">on</span> <span m="2715790">the</span> <span m="2715850">back</span> <span m="2716130">end a</span> <span m="2716260">lot of</span> <span m="2716450">time,</span> <span m="2716710">people</span> <span m="2717040">will still</span> <span m="2717280">make</span> <span m="2717480">these</span> <span m="2717670">raw</span> <span m="2718630">SQL</span> <span m="2720040">queries.</span> <span m="2720590">And</span> <span m="2720710">that</span> <span m="2720850">can</span> <span m="2720970">lead</span> <span m="2721140">to</span> <span m="2721210">problems.</span> </p>
<p><span m="2723330">So</span> <span m="2723450">you</span> <span m="2723550">can</span> <span m="2723680">also</span> <span m="2723970">imagine</span> <span m="2724450">that</span> <span m="2724900">there</span> <span m="2725050">are</span> <span m="2725180">problems</span> <span m="2726060">if</span> <span m="2726490">the</span> <span m="2728200">web</span> <span m="2728440">server</span> <span m="2729360">takes</span> <span m="2729770">in</span> <span m="2730830">path</span> <span m="2731150">names</span> <span m="2733280">from</span> <span m="2733690">untrusted</span> <span m="2734240">images.</span> <span m="2734840">So</span> <span m="2735080">imagine</span> <span m="2735660">that</span> <span m="2736630">somewhere</span> <span m="2737330">in</span> <span m="2737460">your</span> <span m="2737610">server,</span> <span m="2738430">you</span> <span m="2738520">do</span> <span m="2738710">something</span> <span m="2738990">like</span> <span m="2739190">this.</span> <span m="2739640">You</span> <span m="2739850">have</span> <span m="2739980">an</span> <span m="2740100">open</span> <span m="2740440">call.</span> <span m="2740970">And</span> <span m="2741395">then you say that</span> <span m="2741820">you're</span> <span m="2741930">going</span> <span m="2742060">to</span> <span m="2742520">read</span> <span m="2742820">from</span> <span m="2743060">the</span> <span m="2743170">WWW</span> <span m="2743930">directory.</span> <span m="2744355">You're</span> <span m="2744780">going to read</span> <span m="2745260">from</span> <span m="2745940">the</span> <span m="2746100">images</span> <span m="2746620">subdirectory</span> <span m="2747400">in</span> <span m="2747500">there.</span> <span m="2749500">And</span> <span m="2749680">then</span> <span m="2749800">you're</span> <span m="2749940">going</span> <span m="2750250">to</span> <span m="2750560">read</span> <span m="2750830">from</span> <span m="2751940">some</span> <span m="2752230">file</span> <span m="2752620">name</span> <span m="2753650">that,</span> <span m="2753810">once</span> <span m="2754020">again,</span> <span m="2754190">is</span> <span m="2754260">supplied</span> <span m="2754620">by the</span> <span m="2755116">user.</span> </p>
<p><span m="2756110">So</span> <span m="2756310">as</span> <span m="2756400">we</span> <span m="2756510">saw in</span> <span m="2756860">some</span> <span m="2757120">of</span> <span m="2757280">the</span> <span m="2757720">discussion</span> <span m="2758500">of</span> <span m="2758650">[? Troot ?]</span> <span m="2759700">and</span> <span m="2759760">things</span> <span m="2759970">like</span> <span m="2760190">this,</span> <span m="2761030">what</span> <span m="2761150">if</span> <span m="2761270">this</span> <span m="2761510">file</span> <span m="2761840">name</span> <span m="2762880">maps</span> <span m="2763270">to</span> <span m="2763400">something</span> <span m="2764070">like</span> <span m="2765500">a</span> <span m="2766860">bunch</span> <span m="2767150">of</span> <span m="2767270">instances</span> <span m="2767890">of</span> <span m="2768030">the</span> <span m="2768130">dot</span> <span m="2768420">dot</span> <span m="2768690">character?</span> <span m="2773830">So</span> <span m="2774310">if</span> <span m="2774460">you're</span> <span m="2774540">not</span> <span m="2774830">careful,</span> <span m="2775980">then</span> <span m="2776860">the</span> <span m="2777145">untrusted</span> <span m="2777430">entity</span> <span m="2777610">can</span> <span m="2777710">specify</span> <span m="2778940">basically</span> <span m="2779510">glub,</span> <span m="2779815">glub,</span> <span m="2780120">glub,</span> <span m="2780615">glub,</span> <span m="2781110">and</span> <span m="2781410">go down</span> <span m="2781700">to</span> <span m="2782160">etc</span> <span m="2782220">password</span> <span m="2782310">and may be</span> <span m="2782510">able</span> <span m="2782680">to</span> <span m="2782740">do</span> <span m="2782860">some</span> <span m="2783020">evil</span> <span m="2783470">here.</span> <span m="2784180">So</span> <span m="2784260">once</span> <span m="2784390">again, if</span> <span m="2784470">you want to</span> <span m="2784850">be</span> <span m="2785020">able</span> <span m="2785220">to</span> <span m="2786340">use</span> <span m="2786660">the</span> <span m="2786740">web</span> <span m="2786950">server</span> <span m="2787670">or</span> <span m="2787870">the</span> <span m="2788210">web</span> <span m="2788400">framework,</span> <span m="2788675">you</span> <span m="2788950">need</span> <span m="2789140">to</span> <span m="2789190">be</span> <span m="2789310">able</span> <span m="2789530">to</span> <span m="2790740">detect</span> <span m="2791210">these</span> <span m="2791430">dangerous</span> <span m="2791640">characters,</span> <span m="2792320">escape</span> <span m="2792770">them in</span> <span m="2792990">some</span> <span m="2793240">way</span> <span m="2793980">to</span> <span m="2794090">prevent</span> <span m="2794470">sort of those</span> <span m="2794810">raw</span> <span m="2795170">commands</span> <span m="2795490">from</span> <span m="2795810">executing.</span> <span m="2798150">So</span> <span m="2798310">yeah, it's</span> <span m="2798530">all</span> <span m="2798760">pretty</span> <span m="2799100">straightforward.</span> <span m="2800540">OK.</span> </p>
<p><span m="2800800">So</span> <span m="2800880">let's</span> <span m="2801000">move</span> <span m="2801260">on</span> <span m="2801660">from</span> <span m="2803670">the</span> <span m="2803770">discussion</span> <span m="2805070">of</span> <span m="2805550">content</span> <span m="2805760">sanitization,</span> <span m="2806050">and now</span> <span m="2806270">let's</span> <span m="2806470">talk</span> <span m="2806700">a</span> <span m="2806740">little</span> <span m="2806960">bit</span> <span m="2807390">about</span> <span m="2808830">cookies.</span> <span m="2812670">So</span> <span m="2812960">cookies</span> <span m="2814230">are a</span> <span m="2814570">very</span> <span m="2814870">popular</span> <span m="2815820">way</span> <span m="2816290">to</span> <span m="2816470">do</span> <span m="2817890">session</span> <span m="2818340">management,</span> <span m="2821970">to</span> <span m="2822160">bind</span> <span m="2822620">the</span> <span m="2822750">user</span> <span m="2823400">to</span> <span m="2823800">some</span> <span m="2824140">set</span> <span m="2824820">of</span> <span m="2825410">resources</span> <span m="2827920">that</span> <span m="2828150">exist</span> <span m="2828770">on</span> <span m="2828970">the</span> <span m="2829040">server</span> <span m="2829410">side.</span> <span m="2830090">And</span> <span m="2830290">so</span> <span m="2830510">a</span> <span m="2830540">lot</span> <span m="2830750">of</span> <span m="2830820">frameworks</span> <span m="2831380">like</span> <span m="2831570">Django,</span> <span m="2832180">like</span> <span m="2832340">[? zoobar ?]</span> <span m="2832460">that</span> <span m="2832780">you</span> <span m="2833100">see</span> <span m="2833960">in</span> <span m="2834080">this</span> <span m="2834240">class,</span> <span m="2834890">they</span> <span m="2834980">actually</span> <span m="2835300">put a</span> <span m="2835430">random</span> <span m="2835790">session</span> <span m="2836140">ID</span> <span m="2836710">inside</span> <span m="2837070">the</span> <span m="2837160">cookie.</span> <span m="2837520">And</span> <span m="2837990">so</span> <span m="2838090">the</span> <span m="2838190">idea is</span> <span m="2838510">that</span> <span m="2839210">this</span> <span m="2840230">session</span> <span m="2840640">ID</span> <span m="2841510">is</span> <span m="2842230">the</span> <span m="2842590">index</span> <span m="2843630">into</span> <span m="2843780">some</span> <span m="2844780">server-side</span> <span m="2845490">table.</span> <span m="2847770">So</span> <span m="2848190">you just</span> <span m="2848710">supply</span> <span m="2849170">the</span> <span m="2849430">session</span> <span m="2849690">ID</span> <span m="2849880">there.</span> <span m="2850410">And</span> <span m="2850620">this</span> <span m="2850790">is</span> <span m="2850930">where</span> <span m="2851200">your</span> <span m="2851740">user</span> <span m="2852100">info</span> <span m="2852460">lives.</span> </p>
<p><span m="2855120">And</span> <span m="2855290">so</span> <span m="2855570">as</span> <span m="2855760">a</span> <span m="2855810">result,</span> <span m="2857500">this</span> <span m="2857810">session</span> <span m="2858160">ID</span> <span m="2858820">and</span> <span m="2858970">cookies,</span> <span m="2859330">by</span> <span m="2859490">extension,</span> <span m="2860690">are</span> <span m="2860940">very</span> <span m="2861860">sensitive</span> <span m="2862660">entities.</span> <span m="2863440">And so</span> <span m="2863580">that's why</span> <span m="2863840">a</span> <span m="2864020">lot of</span> <span m="2864110">attacks</span> <span m="2864450">involve</span> <span m="2865470">stealing</span> <span m="2866010">of the</span> <span m="2866190">cookie</span> <span m="2866540">in</span> <span m="2866710">order</span> <span m="2866860">to</span> <span m="2867060">get</span> <span m="2867230">that</span> <span m="2867430">session</span> <span m="2867760">ID.</span> <span m="2868480">And</span> <span m="2868710">so</span> <span m="2869350">as</span> <span m="2869520">we</span> <span m="2869600">discussed in the</span> <span m="2870060">last</span> <span m="2870500">lecture,</span> <span m="2870760">the</span> <span m="2870870">same</span> <span m="2871220">origin</span> <span m="2871530">policy</span> <span m="2871940">can</span> <span m="2872060">help</span> <span m="2872290">you,</span> <span m="2872390">to</span> <span m="2872520">a certain extent,</span> <span m="2872975">against</span> <span m="2873350">some</span> <span m="2873730">of these</span> <span m="2873800">cookie-stealing</span> <span m="2874210">attacks,</span> <span m="2875190">because</span> <span m="2875440">there</span> <span m="2875590">are</span> <span m="2875740">origin-based</span> <span m="2876225">rules</span> <span m="2876710">that</span> <span m="2876810">prevent</span> <span m="2877600">arbitrary</span> <span m="2878120">tampering</span> <span m="2878570">with</span> <span m="2879010">cookies.</span> </p>
<p><span m="2880050">But</span> <span m="2880340">one</span> <span m="2880790">thing</span> <span m="2881020">that's</span> <span m="2881390">a</span> <span m="2881440">little</span> <span m="2881600">bit</span> <span m="2881760">subtle</span> <span m="2882180">is</span> <span m="2882270">that</span> <span m="2882520">you</span> <span m="2882590">shouldn't</span> <span m="2883220">share</span> <span m="2884170">a</span> <span m="2884280">domain</span> <span m="2885730">or a</span> <span m="2885910">subdomain</span> <span m="2887000">with</span> <span m="2887210">someone</span> <span m="2887870">that</span> <span m="2888020">you</span> <span m="2888100">don't</span> <span m="2888310">trust.</span> <span m="2889510">Because</span> <span m="2889930">as</span> <span m="2890050">we</span> <span m="2890190">discussed in</span> <span m="2890670">last</span> <span m="2891080">lecture,</span> <span m="2891460">there are these</span> <span m="2891650">sort</span> <span m="2891840">of</span> <span m="2892250">very</span> <span m="2892460">subtle</span> <span m="2892900">rules</span> <span m="2893500">in</span> <span m="2893660">which</span> <span m="2894880">two</span> <span m="2895060">origins</span> <span m="2895460">with the</span> <span m="2895670">same</span> <span m="2896000">domain</span> <span m="2896820">or</span> <span m="2896930">possibly</span> <span m="2897950">some</span> <span m="2898180">subdomain</span> <span m="2898780">relationship,</span> <span m="2899610">they</span> <span m="2899730">can</span> <span m="2899890">actually</span> <span m="2900500">access</span> <span m="2900970">each</span> <span m="2901130">other's</span> <span m="2901370">cookies.</span> <span m="2902540">And</span> <span m="2902690">so</span> <span m="2902950">if</span> <span m="2903090">you</span> <span m="2903510">trust</span> <span m="2903775">a</span> <span m="2904040">domain</span> <span m="2904180">that you</span> <span m="2904450">shouldn't,</span> <span m="2905130">then</span> <span m="2905500">that</span> <span m="2905870">domain</span> <span m="2905950">may</span> <span m="2906400">be</span> <span m="2906520">able</span> <span m="2906680">to</span> <span m="2906760">do</span> <span m="2907000">things</span> <span m="2907300">like</span> <span m="2907470">directly</span> <span m="2908020">set</span> <span m="2909270">the</span> <span m="2909360">session</span> <span m="2909850">ID</span> <span m="2910390">in</span> <span m="2910560">that</span> <span m="2910770">cookie</span> <span m="2911540">that</span> <span m="2911650">both</span> <span m="2912100">of</span> <span m="2912230">you</span> <span m="2912390">can</span> <span m="2912560">access.</span> <span m="2913680">And</span> <span m="2913800">that</span> <span m="2913840">can</span> <span m="2914040">do</span> <span m="2914200">things</span> <span m="2914460">like</span> <span m="2914570">allow</span> <span m="2914870">the</span> <span m="2915010">attacker</span> <span m="2915680">to</span> <span m="2915870">force</span> <span m="2916250">the</span> <span m="2916330">user</span> <span m="2916690">to use</span> <span m="2916820">a</span> <span m="2917110">session</span> <span m="2917520">ID</span> <span m="2917830">of</span> <span m="2917960">the</span> <span m="2918130">attacker's</span> <span m="2918330">choosing.</span> </p>
<p><span m="2919540">And</span> <span m="2919740">then,</span> <span m="2919920">for</span> <span m="2920080">example--</span> <span m="2921140">let's</span> <span m="2921360">say</span> <span m="2921500">the</span> <span m="2921620">attacker</span> <span m="2922060">sets</span> <span m="2922720">the</span> <span m="2922850">user's</span> <span m="2924390">Gmail</span> <span m="2925030">cookie,</span> <span m="2925310">let's</span> <span m="2925590">say.</span> <span m="2926310">The</span> <span m="2926440">user</span> <span m="2926710">goes</span> <span m="2926960">to</span> <span m="2927030">Gmail,</span> <span m="2927460">types</span> <span m="2927730">some</span> <span m="2927810">emails.</span> <span m="2928680">The</span> <span m="2928820">attacker,</span> <span m="2929125">later</span> <span m="2929430">on,</span> <span m="2929775">can</span> <span m="2930120">then use</span> <span m="2930190">that</span> <span m="2930610">cookie</span> <span m="2931030">or</span> <span m="2931400">specifically</span> <span m="2931650">use</span> <span m="2932200">that</span> <span m="2932360">session</span> <span m="2932720">ID,</span> <span m="2933780">load</span> <span m="2934040">up</span> <span m="2934280">Gmail,</span> <span m="2934660">and then</span> <span m="2935040">access</span> <span m="2935520">Gmail</span> <span m="2935870">as</span> <span m="2936000">if</span> <span m="2936460">he or</span> <span m="2936640">she</span> <span m="2937080">were the</span> <span m="2937490">user</span> <span m="2937920">who was</span> <span m="2938260">victimized.</span> <span m="2939040">So</span> <span m="2939270">there's</span> <span m="2939630">a</span> <span m="2939660">lot</span> <span m="2939780">of</span> <span m="2939840">subtleties</span> <span m="2940330">with</span> <span m="2940430">using</span> <span m="2941060">these</span> <span m="2941250">cookies</span> <span m="2942070">for</span> <span m="2942200">session</span> <span m="2942490">management.</span> <span m="2943720">So</span> <span m="2945020">there's</span> <span m="2945230">a</span> <span m="2945290">lot</span> <span m="2945490">more</span> <span m="2945660">we could</span> <span m="2945830">talk</span> <span m="2946020">about</span> <span m="2946230">cookies.</span> <span m="2946490">We'll</span> <span m="2946600">discuss</span> <span m="2946960">some of</span> <span m="2947420">it</span> <span m="2947685">today and</span> <span m="2947950">last</span> <span m="2948210">lecture.</span> </p>
<p><span m="2948850">So you</span> <span m="2949230">might be</span> <span m="2949610">thinking, well,</span> <span m="2949900">can we just</span> <span m="2950220">get</span> <span m="2950400">rid</span> <span m="2950610">of</span> <span m="2950760">cookies?</span> <span m="2951250">Cookies</span> <span m="2951500">just seem</span> <span m="2951800">more</span> <span m="2952020">trouble</span> <span m="2952090">than</span> <span m="2952230">they're</span> <span m="2952700">worth, just</span> <span m="2952830">like</span> <span m="2952960">[? dribbels. ?]</span> <span m="2953430">So can we</span> <span m="2953670">just not have</span> <span m="2953990">these</span> <span m="2954370">cookies?</span> <span m="2954470">So</span> <span m="2954970">one</span> <span m="2955000">thing you</span> <span m="2955440">could</span> <span m="2955910">imagine is you</span> <span m="2956380">could</span> <span m="2956480">imagine</span> <span m="2958340">basically</span> <span m="2958920">having</span> <span m="2960600">some</span> <span m="2960940">notion</span> <span m="2961750">of</span> <span m="2961930">stateless</span> <span m="2962710">cookies,</span> <span m="2965570">of</span> <span m="2966700">somehow</span> <span m="2967125">getting</span> <span m="2967550">rid</span> <span m="2967850">of</span> <span m="2968150">the</span> <span m="2968190">notion</span> <span m="2968550">of</span> <span m="2968630">sessions</span> <span m="2969040">altogether</span> <span m="2969445">and</span> <span m="2969850">preventing</span> <span m="2970570">this</span> <span m="2970800">nasty</span> <span m="2971270">attack</span> <span m="2971670">vector</span> <span m="2972670">that</span> <span m="2972800">seems</span> <span m="2973090">to</span> <span m="2973160">be</span> <span m="2973350">sort of</span> <span m="2973620">prevalent</span> <span m="2973890">in</span> <span m="2974090">all</span> <span m="2974160">these</span> <span m="2974380">discussions</span> <span m="2974880">that</span> <span m="2974990">we</span> <span m="2975090">have.</span> </p>
<p><span m="2975750">So</span> <span m="2976110">the</span> <span m="2976300">basic</span> <span m="2976710">idea</span> <span m="2977160">here is</span> <span m="2977350">if you want to</span> <span m="2977420">go</span> <span m="2978330">sort</span> <span m="2978520">of</span> <span m="2978680">stateless,</span> <span m="2980210">then</span> <span m="2980400">this</span> <span m="2980530">essentially</span> <span m="2980980">means</span> <span m="2981340">you</span> <span m="2981440">have</span> <span m="2981780">to</span> <span m="2983280">authenticate</span> <span m="2985620">every</span> <span m="2985930">request.</span> <span m="2991150">Because</span> <span m="2991380">the</span> <span m="2991520">nice</span> <span m="2991630">thing</span> <span m="2991890">about</span> <span m="2992350">cookies</span> <span m="2992560">is</span> <span m="2992700">that</span> <span m="2993160">they</span> <span m="2993330">basically</span> <span m="2993480">follow</span> <span m="2993610">you</span> <span m="2994000">wherever</span> <span m="2994380">you go.</span> <span m="2994820">So</span> <span m="2994960">you</span> <span m="2995280">authenticate</span> <span m="2995730">once,</span> <span m="2996200">and then every</span> <span m="2996430">subsequent</span> <span m="2996830">request</span> <span m="2997280">you</span> <span m="2997410">make has</span> <span m="2997560">this little</span> <span m="2997870">token</span> <span m="2998220">in it.</span> <span m="2998570">But if you</span> <span m="2998720">want</span> <span m="2998890">to</span> <span m="2998950">get</span> <span m="2999080">rid</span> <span m="2999230">of</span> <span m="2999350">those</span> <span m="2999600">things,</span> <span m="3000180">well</span> <span m="3000450">then</span> <span m="3000735">now</span> <span m="3001020">you</span> <span m="3001080">essentially</span> <span m="3001430">have to have</span> <span m="3001780">some</span> <span m="3002165">proof of</span> <span m="3002550">your</span> <span m="3003040">authority</span> <span m="3003260">in</span> <span m="3003635">every</span> <span m="3004470">request</span> <span m="3004770">that you</span> <span m="3005070">make.</span> </p>
<p><span m="3005820">And</span> <span m="3006000">so</span> <span m="3006230">one way</span> <span m="3006330">you could</span> <span m="3006580">imagine</span> <span m="3007060">doing</span> <span m="3007330">this</span> <span m="3007990">is</span> <span m="3008330">by</span> <span m="3008570">using</span> <span m="3010340">something</span> <span m="3010710">called</span> <span m="3011040">MAX,</span> <span m="3012000">or</span> <span m="3012300">Message</span> <span m="3013580">Authentication</span> <span m="3014340">Codes.</span> <span m="3018550">And</span> <span m="3018670">so the</span> <span m="3019020">basic</span> <span m="3019340">way</span> <span m="3019660">to</span> <span m="3019800">think</span> <span m="3020430">about</span> <span m="3020780">one</span> <span m="3020960">of</span> <span m="3021160">these</span> <span m="3022680">MAX,</span> <span m="3023020">it's</span> <span m="3023330">like</span> <span m="3023520">a</span> <span m="3023910">hash</span> <span m="3024275">that</span> <span m="3024640">takes in</span> <span m="3025190">a</span> <span m="3025330">key</span> <span m="3025690">as</span> <span m="3025800">well.</span> <span m="3026410">So</span> <span m="3026640">the</span> <span m="3026940">method</span> <span m="3027240">authentication</span> <span m="3028080">code</span> <span m="3028440">is</span> <span m="3029050">the</span> <span m="3029130">hash</span> <span m="3029980">of</span> <span m="3030400">some</span> <span m="3030760">key</span> <span m="3031640">and</span> <span m="3031870">then</span> <span m="3032910">some</span> <span m="3033190">message.</span> <span m="3034290">And</span> <span m="3034430">so</span> <span m="3034560">the</span> <span m="3034660">basic</span> <span m="3035060">idea</span> <span m="3035460">is</span> <span m="3035620">that</span> <span m="3036200">the</span> <span m="3036430">client,</span> <span m="3037160">the</span> <span m="3037730">user,</span> <span m="3039410">and</span> <span m="3039650">the</span> <span m="3039910">server are</span> <span m="3040090">going</span> <span m="3040210">to</span> <span m="3040260">share</span> <span m="3041070">some</span> <span m="3041370">secret</span> <span m="3041790">key,</span> <span m="3042262">k.</span> <span m="3043206">And</span> <span m="3043680">so</span> <span m="3044190">the</span> <span m="3044320">client</span> <span m="3045120">uses</span> <span m="3045590">that</span> <span m="3045860">key</span> <span m="3046400">to</span> <span m="3046540">produce</span> <span m="3047260">a</span> <span m="3047350">signature</span> <span m="3048060">over</span> <span m="3048220">the</span> <span m="3048300">message</span> <span m="3048730">that it</span> <span m="3048950">sends to</span> <span m="3049190">the</span> <span m="3049260">server.</span> <span m="3050550">And</span> <span m="3050730">then</span> <span m="3050880">the</span> <span m="3050990">server,</span> <span m="3051630">who</span> <span m="3051750">also</span> <span m="3052020">knows</span> <span m="3052370">the key,</span> <span m="3052960">can</span> <span m="3053120">then</span> <span m="3053340">use</span> <span m="3053770">this</span> <span m="3054760">same</span> <span m="3055140">function</span> <span m="3055470">here</span> <span m="3055710">to</span> <span m="3055820">validate</span> <span m="3056235">if</span> <span m="3056650">a</span> <span m="3056740">signature</span> <span m="3057280">is</span> <span m="3057410">correct.</span> <span m="3058300">OK.</span> </p>
<p><span m="3058590">So</span> <span m="3059320">let's</span> <span m="3059940">look</span> <span m="3060170">at</span> <span m="3060220">a</span> <span m="3060290">very</span> <span m="3060480">specific</span> <span m="3060930">example</span> <span m="3061340">of</span> <span m="3061400">how</span> <span m="3061570">this</span> <span m="3061760">works.</span> <span m="3063650">So</span> <span m="3063790">one</span> <span m="3064110">real</span> <span m="3064370">service</span> <span m="3064840">that</span> <span m="3065100">uses</span> <span m="3065530">these</span> <span m="3065710">types</span> <span m="3065950">of</span> <span m="3066040">stateless</span> <span m="3066480">cookies</span> <span m="3067700">is</span> <span m="3068660">Amazon</span> <span m="3069000">Web</span> <span m="3069140">Services.</span> <span m="3069740">So like</span> <span m="3070235">x3,</span> <span m="3070730">for</span> <span m="3070840">example.</span> <span m="3071280">And</span> <span m="3071400">so</span> <span m="3072030">basically,</span> <span m="3072840">Amazon,</span> <span m="3074900">AWS,</span> <span m="3076990">gives</span> <span m="3078660">each</span> <span m="3078910">user</span> <span m="3079220">two</span> <span m="3079510">things--</span> <span m="3081950">gives</span> <span m="3082310">that</span> <span m="3082540">user</span> <span m="3084420">a</span> <span m="3084740">secret</span> <span m="3085170">key.</span> <span m="3088950">And</span> <span m="3089180">so</span> <span m="3089390">this</span> <span m="3089580">is</span> <span m="3089720">equivalent</span> <span m="3090370">to</span> <span m="3091420">the</span> <span m="3091560">k</span> <span m="3091890">that we were</span> <span m="3092170">discussing</span> <span m="3092620">over</span> <span m="3092800">there.</span> <span m="3093420">And it</span> <span m="3093640">also</span> <span m="3093980">gives</span> <span m="3094340">them</span> <span m="3095023">a--</span> <span m="3096870">just</span> <span m="3097050">think of it</span> <span m="3097320">like</span> <span m="3097670">an</span> <span m="3098020">AWS</span> <span m="3099530">user</span> <span m="3099830">ID.</span> <span m="3102840">So</span> <span m="3102940">this</span> <span m="3103450">part</span> <span m="3103650">is</span> <span m="3103760">not</span> <span m="3103950">secret,</span> <span m="3104390">but</span> <span m="3104520">this</span> <span m="3104880">part is.</span> </p>
<p><span m="3105700">And</span> <span m="3105970">so</span> <span m="3106400">every</span> <span m="3106720">time</span> <span m="3107000">you</span> <span m="3107100">want</span> <span m="3107320">to</span> <span m="3107510">send</span> <span m="3107860">a</span> <span m="3107930">request</span> <span m="3108340">to</span> <span m="3108680">AWS</span> <span m="3108950">via</span> <span m="3109260">HTTP,</span> <span m="3109570">you</span> <span m="3110390">have</span> <span m="3110520">to send it</span> <span m="3110600">in a</span> <span m="3110885">special</span> <span m="3111500">format.</span> <span m="3111970">So</span> <span m="3112410">you'll</span> <span m="3112830">have</span> <span m="3113270">the</span> <span m="3114900">first</span> <span m="3115210">line</span> <span m="3115510">of</span> <span m="3115620">the</span> <span m="3115680">GET</span> <span m="3115930">request.</span> <span m="3117040">So</span> <span m="3119220">you</span> <span m="3119370">want</span> <span m="3119520">to</span> <span m="3119580">access</span> <span m="3120850">some</span> <span m="3122186">photos.</span> <span m="3124680">No</span> <span m="3124800">surprises</span> <span m="3125390">here.</span> <span m="3127800">And</span> <span m="3128080">then</span> <span m="3129730">you will</span> <span m="3130110">put</span> <span m="3133690">the</span> <span m="3133770">host</span> <span m="3134180">from which</span> <span m="3134370">you</span> <span m="3134460">expect</span> <span m="3134790">to get</span> <span m="3135085">it.</span> <span m="3135710">That's</span> <span m="3135810">not</span> <span m="3136030">super</span> <span m="3136250">important.</span> <span m="3136710">So</span> <span m="3136800">this</span> <span m="3136980">is</span> <span m="3137060">just</span> <span m="3137280">some</span> <span m="3137460">AWS</span> <span m="3138260">server</span> <span m="3138810">that's</span> <span m="3139140">there.</span> <span m="3139800">You'll</span> <span m="3139980">have</span> <span m="3140210">the</span> <span m="3140240">date.</span> <span m="3143160">So</span> <span m="3143500">maybe</span> <span m="3143770">this</span> <span m="3143980">is</span> <span m="3144310">Monday,</span> <span m="3147630">June</span> <span m="3148090">4.</span> <span m="3148830">Whatever.</span> </p>
<p><span m="3150470">And</span> <span m="3150700">then</span> <span m="3150860">you</span> <span m="3150950">have</span> <span m="3151180">this</span> <span m="3151420">thing</span> <span m="3152190">that's</span> <span m="3153980">essentially the</span> <span m="3154450">Authorization</span> <span m="3154920">field.</span> <span m="3158300">And</span> <span m="3158510">this</span> <span m="3158750">is</span> <span m="3158900">where</span> <span m="3159330">the</span> <span m="3159490">message</span> <span m="3159800">authentication</span> <span m="3160190">code</span> <span m="3160700">comes</span> <span m="3161010">in.</span> <span m="3161620">So</span> <span m="3161950">essentially,</span> <span m="3162490">what</span> <span m="3162680">this</span> <span m="3162870">looks</span> <span m="3163160">like</span> <span m="3163980">is</span> <span m="3167520">you've</span> <span m="3167700">got</span> <span m="3167980">some</span> <span m="3168230">string</span> <span m="3168820">here.</span> <span m="3171660">This</span> <span m="3171880">represents</span> <span m="3172880">your</span> <span m="3173930">access</span> <span m="3174460">ID,</span> <span m="3175410">the</span> <span m="3175620">user</span> <span m="3175920">ID.</span> <span m="3179510">And</span> <span m="3179720">then</span> <span m="3180810">you've</span> <span m="3181130">got</span> <span m="3181530">something</span> <span m="3182050">here,</span> <span m="3183530">some</span> <span m="3183760">other</span> <span m="3184040">seemingly</span> <span m="3184620">random</span> <span m="3185050">letters.</span> <span m="3187470">And</span> <span m="3187540">then</span> <span m="3187700">these</span> <span m="3188030">things</span> <span m="3188630">are</span> <span m="3189060">a</span> <span m="3189740">signature</span> <span m="3193350">that</span> <span m="3193530">use</span> <span m="3193955">this</span> <span m="3194380">Message</span> <span m="3195030">Authentication</span> <span m="3195530">Code</span> <span m="3195750">here.</span> </p>
<p><span m="3196240">So</span> <span m="3196330">what</span> <span m="3196480">does</span> <span m="3196610">that</span> <span m="3196810">signature</span> <span m="3197630">look</span> <span m="3198130">like?</span> <span m="3200730">So</span> <span m="3200995">the</span> <span m="3201260">details</span> <span m="3201715">are</span> <span m="3202170">a</span> <span m="3203080">little</span> <span m="3203240">bit</span> <span m="3203430">complicated.</span> <span m="3204250">But</span> <span m="3204530">basically,</span> <span m="3205410">this</span> <span m="3205690">signature</span> <span m="3206015">is</span> <span m="3206340">over</span> <span m="3206980">a</span> <span m="3207070">string</span> <span m="3207630">that</span> <span m="3207920">encapsulates</span> <span m="3208330">a</span> <span m="3208370">bunch</span> <span m="3208560">of</span> <span m="3208640">details</span> <span m="3209140">of this</span> <span m="3209625">request.</span> <span m="3210110">So</span> <span m="3210550">essentially,</span> <span m="3211400">the</span> <span m="3211850">string</span> <span m="3212790">assigned</span> <span m="3216500">looks</span> <span m="3216770">something</span> <span m="3217180">like</span> <span m="3217470">this.</span> <span m="3217950">So</span> <span m="3218270">you</span> <span m="3219540">put</span> <span m="3219700">the</span> <span m="3219910">HTTP</span> <span m="3221646">verb</span> <span m="3221990">in</span> <span m="3222150">there.</span> <span m="3223360">So</span> <span m="3223510">in</span> <span m="3223590">this</span> <span m="3223800">case,</span> <span m="3224090">that</span> <span m="3224350">verb</span> <span m="3224680">is</span> <span m="3225380">GET.</span> <span m="3227280">And</span> <span m="3227490">then</span> <span m="3227700">you</span> <span m="3227890">put</span> <span m="3230320">[? indy5 ?]</span> <span m="3231730">checksum</span> <span m="3233376">of</span> <span m="3233860">the</span> <span m="3234240">message</span> <span m="3234760">content.</span> <span m="3237612">And then</span> <span m="3238070">you</span> <span m="3238310">also</span> <span m="3239240">put</span> <span m="3239710">the content</span> <span m="3239880">type.</span> <span m="3241335">So it's</span> <span m="3241820">html</span> <span m="3242305">or image</span> <span m="3242790">or whatever.</span> <span m="3243760">And</span> <span m="3244250">put</span> <span m="3244430">in the</span> <span m="3244520">date.</span> <span m="3247575">And</span> <span m="3248060">then the</span> <span m="3248545">resource</span> <span m="3249030">name,</span> <span m="3251940">which</span> <span m="3252200">is</span> <span m="3252340">essentially</span> <span m="3254430">the</span> <span m="3254560">path</span> <span m="3254915">that you see</span> <span m="3255270">over</span> <span m="3255430">here.</span> </p>
<p><span m="3256180">So</span> <span m="3256450">in</span> <span m="3256840">other</span> <span m="3257230">words,</span> <span m="3257605">this</span> <span m="3257980">string</span> <span m="3258520">here</span> <span m="3259650">is</span> <span m="3260420">the</span> <span m="3260480">message</span> <span m="3262530">that</span> <span m="3262990">you</span> <span m="3263210">pass</span> <span m="3264010">into</span> <span m="3264200">the</span> <span m="3264300">H</span> <span m="3264555">MAC</span> <span m="3264810">over</span> <span m="3265020">here.</span> <span m="3266620">And</span> <span m="3266800">so</span> <span m="3267020">note</span> <span m="3267400">that</span> <span m="3268280">the</span> <span m="3268770">server</span> <span m="3270690">can</span> <span m="3271130">see</span> <span m="3271510">all</span> <span m="3271810">this</span> <span m="3272010">stuff</span> <span m="3272230">in</span> <span m="3272350">clear</span> <span m="3272620">text</span> <span m="3273020">in</span> <span m="3273290">the</span> <span m="3273680">request.</span> <span m="3274920">And</span> <span m="3274940">so</span> <span m="3275010">that's</span> <span m="3275230">what</span> <span m="3275310">allows</span> <span m="3275650">the</span> <span m="3275730">server</span> <span m="3276000">to</span> <span m="3276090">validate</span> <span m="3276415">that</span> <span m="3276740">that</span> <span m="3276960">message</span> <span m="3277680">authentication</span> <span m="3278270">code</span> <span m="3278630">was correct.</span> <span m="3279850">Because</span> <span m="3280010">note</span> <span m="3280160">that</span> <span m="3280330">the</span> <span m="3281720">server</span> <span m="3282120">shares</span> <span m="3282530">that</span> <span m="3282750">key</span> <span m="3283780">with</span> <span m="3283980">the</span> <span m="3284120">user.</span> <span m="3284420">So</span> <span m="3284720">that</span> <span m="3284820">allows</span> <span m="3285150">the server</span> <span m="3285490">to validate</span> <span m="3285890">that kind of</span> <span m="3286290">stuff. So does</span> <span m="3286440">that</span> <span m="3286670">all</span> <span m="3287070">make</span> <span m="3287260">sense?</span> </p>
<p><span m="3289065">AUDIENCE:</span> <span m="3289550">[INAUDIBLE]?</span> </p>
<p><span m="3291010">PROFESSOR: Oh.</span> <span m="3291770">So</span> <span m="3292100">in</span> <span m="3292250">this</span> <span m="3292510">case,</span> <span m="3292790">for</span> <span m="3292950">the</span> <span m="3293120">content,</span> <span m="3293740">that's</span> <span m="3293980">probably</span> <span m="3294410">going to</span> <span m="3294620">be nothing,</span> <span m="3294730">like the</span> <span m="3294980">empty</span> <span m="3295170">string.</span> <span m="3295495">But</span> <span m="3295820">you</span> <span m="3295980">can</span> <span m="3296060">imagine</span> <span m="3296400">there's</span> <span m="3296490">like</span> <span m="3296800">a</span> <span m="3296920">post</span> <span m="3297470">or</span> <span m="3297550">something</span> <span m="3297820">like</span> <span m="3298030">that.</span> <span m="3298670">You'd</span> <span m="3298920">actually have</span> <span m="3299090">the</span> <span m="3299510">data</span> <span m="3299930">of</span> <span m="3300230">the</span> <span m="3300420">HTTP.</span> </p>
<p><span m="3300900">AUDIENCE:</span> <span m="3301270">[INAUDIBLE]</span> <span m="3302250">which is</span> <span m="3302730">kind of</span> <span m="3303210">an unfortunate</span> <span m="3304170">choice nowadays.</span> </p>
<p><span m="3305130">PROFESSOR: So</span> <span m="3305730">I</span> <span m="3305910">believe</span> <span m="3306215">that</span> <span m="3306520">they</span> <span m="3306680">do.</span> <span m="3307060">So</span> <span m="3307200">I</span> <span m="3307330">checked</span> <span m="3307690">the</span> <span m="3307790">Amazon</span> <span m="3308870">documentation</span> <span m="3309570">yesterday.</span> <span m="3310400">So</span> <span m="3310540">I</span> <span m="3310720">believe</span> <span m="3310940">they do use</span> <span m="3311110">it.</span> <span m="3311360">But</span> <span m="3311730">I</span> <span m="3311860">think--</span> <span m="3312360">I</span> <span m="3312410">could</span> <span m="3312610">be</span> <span m="3312710">wrong,</span> <span m="3312880">but</span> <span m="3312970">I</span> <span m="3313030">think</span> <span m="3313300">they</span> <span m="3313440">actually</span> <span m="3313670">use</span> <span m="3313880">a</span> <span m="3313940">stronger</span> <span m="3314700">hash</span> <span m="3314970">here.</span> <span m="3316170">So</span> <span m="3316350">that</span> <span m="3316490">helps</span> <span m="3316700">a</span> <span m="3316740">little</span> <span m="3316970">bit.</span> <span m="3317180">But</span> <span m="3317210">you're</span> <span m="3317300">right.</span> <span m="3317630">[? Indy5 ?]</span> <span m="3318270">is</span> <span m="3318590">not the</span> <span m="3319087">best.</span> </p>
<p><span m="3319584">AUDIENCE:</span> <span m="3320081">[INAUDIBLE]</span> <span m="3322070">this works.</span> </p>
<p><span m="3322686">PROFESSOR:  OK.</span> <span m="3323380">So</span> <span m="3323650">allow</span> <span m="3323920">me</span> <span m="3324300">to help</span> <span m="3324400">you,</span> <span m="3324600">hopefully,</span> <span m="3326060">even</span> <span m="3326315">though</span> <span m="3326570">I'm</span> <span m="3326880">the guy</span> <span m="3327325">who confused</span> <span m="3327770">you in the</span> <span m="3328250">first place.</span> <span m="3328615">So</span> <span m="3328980">the</span> <span m="3329100">basic</span> <span m="3329470">idea</span> <span m="3329890">is</span> <span m="3330230">that</span> <span m="3331900">we</span> <span m="3331980">want</span> <span m="3332180">to</span> <span m="3332250">get</span> <span m="3332410">rid</span> <span m="3332540">of</span> <span m="3332590">this</span> <span m="3332850">notion</span> <span m="3333240">of</span> <span m="3333340">this</span> <span m="3333910">persistent</span> <span m="3334370">cookie</span> <span m="3334770">that's</span> <span m="3334830">always</span> <span m="3335220">following</span> <span m="3335480">the user</span> <span m="3335885">around.</span> <span m="3337100">Now,</span> <span m="3337240">the</span> <span m="3337330">problem,</span> <span m="3337650">though,</span> <span m="3337970">is</span> <span m="3338050">that</span> <span m="3338610">the</span> <span m="3338740">server</span> <span m="3339125">needs</span> <span m="3339510">some</span> <span m="3339830">way to</span> <span m="3340030">identify</span> <span m="3340440">which</span> <span m="3341120">client</span> <span m="3341525">it's talking</span> <span m="3341930">to.</span> <span m="3343330">So</span> <span m="3343630">what we're</span> <span m="3343890">going</span> <span m="3343980">to</span> <span m="3344070">do</span> <span m="3344670">is</span> <span m="3344830">we're</span> <span m="3344930">going</span> <span m="3345160">to</span> <span m="3345470">ensure</span> <span m="3346020">that</span> <span m="3346720">each</span> <span m="3348000">client</span> <span m="3348620">shares</span> <span m="3349160">a</span> <span m="3349640">unique</span> <span m="3349870">key with</span> <span m="3350230">the server.</span> <span m="3352470">And</span> <span m="3352710">so</span> <span m="3353150">basically,</span> <span m="3353730">whenever</span> <span m="3354290">the</span> <span m="3354580">client</span> <span m="3355200">sends</span> <span m="3355610">a</span> <span m="3355650">message</span> <span m="3356260">to the</span> <span m="3356360">server,</span> <span m="3357660">the</span> <span m="3357780">client</span> <span m="3358190">is</span> <span m="3358310">going</span> <span m="3358500">to</span> <span m="3358580">send</span> <span m="3358830">the</span> <span m="3358860">message</span> <span m="3359340">before</span> <span m="3359655">and</span> <span m="3359970">then</span> <span m="3360160">also</span> <span m="3360650">send</span> <span m="3360965">this</span> <span m="3361280">special</span> <span m="3361720">cryptographic</span> <span m="3362460">operation,</span> <span m="3363340">the</span> <span m="3363430">result</span> <span m="3363760">of</span> <span m="3363800">this</span> <span m="3363940">operation</span> <span m="3364360">here.</span> </p>
<p><span m="3364780">AUDIENCE:  Oh,</span> <span m="3365228">OK.</span> <span m="3365676">[INAUDIBLE]</span> <span m="3367020">and then</span> <span m="3367468">again,</span> <span m="3367916">you hash it.</span> </p>
<p><span m="3368860">PROFESSOR: Yeah.</span> <span m="3369060">So</span> <span m="3369600">basically,</span> <span m="3370310">to</span> <span m="3370450">first</span> <span m="3370630">approximation,</span> <span m="3371280">like</span> <span m="3371360">imagine</span> <span m="3371665">in</span> <span m="3371970">the</span> <span m="3372100">regular</span> <span m="3372440">world,</span> <span m="3373000">like,</span> <span m="3373200">this</span> <span m="3373380">would</span> <span m="3373460">be</span> <span m="3373600">some cookie</span> <span m="3373980">here</span> <span m="3375120">instead</span> <span m="3375240">of the</span> <span m="3375430">authorization.</span> <span m="3376140">But</span> <span m="3376470">now</span> <span m="3376790">we're</span> <span m="3376870">getting</span> <span m="3377150">rid of</span> <span m="3377430">the cookie, and</span> <span m="3377550">we're</span> <span m="3377650">saying,</span> <span m="3378120">here's</span> <span m="3378370">this</span> <span m="3378540">clear</span> <span m="3378830">text</span> <span m="3379130">message.</span> <span m="3380060">And then</span> <span m="3380160">here's</span> <span m="3380480">this</span> <span m="3380700">crypto</span> <span m="3381200">thing,</span> <span m="3381880">which</span> <span m="3382080">basically</span> <span m="3382540">allows</span> <span m="3383140">the</span> <span m="3383230">server</span> <span m="3383555">to figure</span> <span m="3383880">out</span> <span m="3384160">who</span> <span m="3384440">this</span> <span m="3384740">thing</span> <span m="3385015">came from.</span> <span m="3385990">And</span> <span m="3386360">so</span> <span m="3386550">the</span> <span m="3386680">server</span> <span m="3388140">knows</span> <span m="3388760">who</span> <span m="3389380">the</span> <span m="3389510">user</span> <span m="3390050">is,</span> <span m="3390250">because</span> <span m="3390430">that's</span> <span m="3390460">embedded</span> <span m="3390680">in</span> <span m="3391160">the</span> <span m="3391600">clear.</span> <span m="3391760">That's</span> <span m="3391890">not a</span> <span m="3392110">secret,</span> <span m="3392450">right?</span> <span m="3392780">But</span> <span m="3393035">this</span> <span m="3393420">basically</span> <span m="3393820">allows</span> <span m="3393970">the</span> <span m="3394190">server</span> <span m="3394490">to</span> <span m="3394570">say,</span> <span m="3394760">aha,</span> <span m="3395260">I</span> <span m="3395370">know</span> <span m="3395830">which</span> <span m="3396070">secret</span> <span m="3396400">key</span> <span m="3396730">this</span> <span m="3396920">user should</span> <span m="3397090">have</span> <span m="3397385">been</span> <span m="3397680">using</span> <span m="3398360">to</span> <span m="3398450">create</span> <span m="3398790">this</span> <span m="3399380">if</span> <span m="3399560">that is,</span> <span m="3400030">in</span> <span m="3400260">fact, the</span> <span m="3400350">real</span> <span m="3400615">user.</span> </p>
<p><span m="3401345">AUDIENCE:  Nice.</span> <span m="3402740">OK.</span> <span m="3403205">Thanks.</span> </p>
<p><span m="3404135">AUDIENCE:  So</span> <span m="3404600">what prevents</span> <span m="3405065">the attacker</span> <span m="3405530">from finding</span> <span m="3405995">the key?</span> <span m="3406470">Where is</span> <span m="3406760">this secret key?</span> </p>
<p><span m="3407692">PROFESSOR:  Yeah,</span> <span m="3408160">that's a</span> <span m="3408420">good question.</span> <span m="3408910">So</span> <span m="3409190">in a</span> <span m="3409280">lot</span> <span m="3410160">of</span> <span m="3410260">cases,</span> <span m="3411740">the</span> <span m="3412160">client</span> <span m="3413420">for</span> <span m="3413740">AWS</span> <span m="3414770">is</span> <span m="3415180">not</span> <span m="3415410">a</span> <span m="3415450">browser,</span> <span m="3416080">but</span> <span m="3416260">some</span> <span m="3416710">VM</span> <span m="3417240">running in</span> <span m="3417370">the</span> <span m="3417460">cloud,</span> <span m="3418150">for</span> <span m="3418480">example.</span> <span m="3419040">So you'll see</span> <span m="3419530">sort of</span> <span m="3419825">just</span> <span m="3420120">VM</span> <span m="3420390">and VM</span> <span m="3420840">communication.</span> <span m="3422200">You</span> <span m="3422270">can</span> <span m="3422400">also</span> <span m="3422680">imagine,</span> <span m="3423120">too,</span> <span m="3423470">that</span> <span m="3425640">users</span> <span m="3426110">can</span> <span m="3426240">sort</span> <span m="3426400">of</span> <span m="3426540">hand</span> <span m="3426940">out these</span> <span m="3427340">links</span> <span m="3427710">or</span> <span m="3427900">embed</span> <span m="3428285">them</span> <span m="3428670">somehow</span> <span m="3429370">in</span> <span m="3429550">HTML.</span> <span m="3430990">So</span> <span m="3431220">it's like</span> <span m="3431500">you just</span> <span m="3431780">have</span> <span m="3432390">sort</span> <span m="3432590">of</span> <span m="3432830">this--</span> <span m="3436200">inside</span> <span m="3436360">the</span> <span m="3436570">HTML</span> <span m="3436750">or</span> <span m="3436950">JavaScript</span> <span m="3437590">source</span> <span m="3437730">code,</span> <span m="3438090">you'd</span> <span m="3438200">have</span> <span m="3438850">the</span> <span m="3438960">code</span> <span m="3439240">to</span> <span m="3439310">create</span> <span m="3439710">a</span> <span m="3439790">request</span> <span m="3440190">like</span> <span m="3440400">this.</span> <span m="3440665">So</span> <span m="3440930">that's</span> <span m="3441100">almost</span> <span m="3441330">like</span> <span m="3441490">me</span> <span m="3441775">giving you</span> <span m="3442220">a</span> <span m="3442290">capability.</span> <span m="3442590">So</span> <span m="3442890">if I</span> <span m="3443110">give</span> <span m="3443200">you</span> <span m="3443460">one of</span> <span m="3443720">these</span> <span m="3444050">things,</span> <span m="3444250">you</span> <span m="3444330">can</span> <span m="3444500">make</span> <span m="3444720">that</span> <span m="3444870">request</span> <span m="3445230">on my</span> <span m="3445704">behalf,</span> <span m="3446178">basically.</span> </p>
<p><span m="3447126">AUDIENCE:  So would</span> <span m="3447600">it be</span> <span m="3447995">possible to</span> <span m="3448390">use</span> <span m="3448835">MACs</span> <span m="3449731">on the</span> <span m="3450182">normal</span> <span m="3450633">clients</span> <span m="3451084">[INAUDIBLE]?</span> </p>
<p><span m="3452888">PROFESSOR:  For</span> <span m="3453340">a</span> <span m="3453690">normal--</span> <span m="3454040">you mean like</span> <span m="3454510">browsers?</span> </p>
<p><span m="3455000">AUDIENCE:  For normal</span> <span m="3455490">users.</span> </p>
<p><span m="3456470">PROFESSOR: Well,</span> <span m="3456920">I mean, you</span> <span m="3457240">get into</span> <span m="3457540">these</span> <span m="3457710">questions</span> <span m="3458020">like,</span> <span m="3458200">where</span> <span m="3458400">does the</span> <span m="3458740">key live,</span> <span m="3459090">which was</span> <span m="3459270">[? kind of like what ?]</span> <span m="3459590">he was</span> <span m="3459860">asking.</span> <span m="3460900">So</span> <span m="3461020">in a</span> <span m="3461070">certain</span> <span m="3461580">extent,</span> <span m="3462530">the</span> <span m="3462990">issue</span> <span m="3463230">of</span> <span m="3463490">where the</span> <span m="3463650">key lives</span> <span m="3463740">is actually</span> <span m="3464200">super,</span> <span m="3464455">super</span> <span m="3464710">important.</span> <span m="3465170">Because if</span> <span m="3465643">the key can</span> <span m="3466116">be stolen</span> <span m="3466589">just as</span> <span m="3467062">easily as the</span> <span m="3467535">cookie,</span> <span m="3468010">well</span> <span m="3468270">then</span> <span m="3468535">we're</span> <span m="3469070">sort of</span> <span m="3469180">back to square</span> <span m="3469670">one.</span> <span m="3470650">So</span> <span m="3470860">in</span> <span m="3470960">many</span> <span m="3471210">cases,</span> <span m="3471630">this</span> <span m="3471970">stuff is</span> <span m="3472070">actually</span> <span m="3472310">just,</span> <span m="3472460">as I</span> <span m="3472530">said,</span> <span m="3473290">sort of</span> <span m="3473610">server</span> <span m="3473930">to server,</span> <span m="3474200">like a</span> <span m="3474290">VM</span> <span m="3474640">to VM</span> <span m="3475220">somewhere</span> <span m="3475450">in</span> <span m="3475500">the</span> <span m="3475580">cloud.</span> <span m="3476270">So</span> <span m="3476910">the</span> <span m="3477050">application</span> <span m="3477540">developer</span> <span m="3477920">runs</span> <span m="3478185">a VM</span> <span m="3478630">that</span> <span m="3478980">sort</span> <span m="3479180">of</span> <span m="3479430">outsources</span> <span m="3480010">a</span> <span m="3480050">bunch</span> <span m="3480260">of</span> <span m="3480320">stored</span> <span m="3480750">stuff</span> <span m="3481190">to</span> <span m="3481350">AWS.</span> </p>
<p><span m="3483518">AUDIENCE:  So</span> <span m="3484015">do you</span> <span m="3484512">think</span> <span m="3485009">[INAUDIBLE]</span> <span m="3486500">but isn't</span> <span m="3486997">that  kind of</span> <span m="3487494">like a bad</span> <span m="3487991">way</span> <span m="3488488">of preventing--</span> <span m="3489979">I mean,</span> <span m="3490476">they have</span> <span m="3490973">network latency,</span> <span m="3491470">so it</span> <span m="3491967">can't be</span> <span m="3492464">like too</span> <span m="3492961">fine-grained of a</span> <span m="3493458">constraint that they're</span> <span m="3493955">putting on.</span> <span m="3494880">If an</span> <span m="3495080">attacker</span> <span m="3495360">sends the</span> <span m="3495640">same</span> <span m="3495820">request</span> <span m="3496297">again</span> <span m="3496774">really quickly</span> <span m="3497251">after the</span> <span m="3497728">user, wouldn't they</span> <span m="3498205">be able to</span> <span m="3499159">[INAUDIBLE]?</span> </p>
<p><span m="3500120">PROFESSOR: Yeah,</span> <span m="3500400">yeah, yeah.</span> <span m="3501640">So</span> <span m="3501850">suffice</span> <span m="3502280">it to</span> <span m="3502350">say</span> <span m="3502590">that</span> <span m="3502980">secure</span> <span m="3503530">timestamping</span> <span m="3504670">is</span> <span m="3504850">like</span> <span m="3505970">several</span> <span m="3506290">people's</span> <span m="3506930">PhD theses.</span> <span m="3507540">But</span> <span m="3507730">you're</span> <span m="3507860">exactly</span> <span m="3508170">right</span> <span m="3508290">that</span> <span m="3509720">if</span> <span m="3509950">this--</span> <span m="3510190">just</span> <span m="3510440">as</span> <span m="3510570">a</span> <span m="3510640">crude</span> <span m="3510940">example.</span> <span m="3511650">So</span> <span m="3511740">imagine</span> <span m="3512030">this</span> <span m="3512240">just</span> <span m="3512690">said,</span> <span m="3513400">Monday,</span> <span m="3513770">June</span> <span m="3514080">4.</span> <span m="3515370">Then</span> <span m="3515620">if,</span> <span m="3515730">somehow,</span> <span m="3516970">the</span> <span m="3517160">attacker</span> <span m="3517490">could</span> <span m="3517570">get</span> <span m="3517910">access</span> <span m="3518470">to</span> <span m="3518560">this</span> <span m="3518740">entire</span> <span m="3519130">thing</span> <span m="3519700">and</span> <span m="3519770">there was</span> <span m="3520040">nothing</span> <span m="3520355">that</span> <span m="3520670">was</span> <span m="3520870">different</span> <span m="3521200">about</span> <span m="3521540">it--</span> <span m="3521860">so</span> <span m="3522080">there was</span> <span m="3522320">no</span> <span m="3522540">[? knocks, ?]</span> <span m="3522885">no</span> <span m="3523230">random</span> <span m="3523770">stuff</span> <span m="3524010">like</span> <span m="3524170">that,</span> <span m="3524430">then</span> <span m="3524690">that's</span> <span m="3524870">right.</span> <span m="3525120">Then</span> <span m="3525588">that</span> <span m="3527460">request</span> <span m="3527860">could</span> <span m="3528110">be</span> <span m="3528220">[INAUDIBLE].</span> </p>
<p><span m="3528770">Now,</span> <span m="3528980">one</span> <span m="3529200">thing</span> <span m="3529340">that</span> <span m="3529450">AWS</span> <span m="3530030">actually</span> <span m="3530520">does</span> <span m="3531270">is</span> <span m="3531640">you can</span> <span m="3531870">actually</span> <span m="3532260">include</span> <span m="3532520">an</span> <span m="3532780">expiration</span> <span m="3533145">date</span> <span m="3533960">in</span> <span m="3534410">these</span> <span m="3534730">things.</span> <span m="3535610">So</span> <span m="3535750">one</span> <span m="3535930">thing you</span> <span m="3536020">can</span> <span m="3536240">actually</span> <span m="3536490">do</span> <span m="3536890">is</span> <span m="3538820">add</span> <span m="3539300">sort</span> <span m="3539490">of</span> <span m="3541336">an</span> <span m="3541760">Expires</span> <span m="3542185">field,</span> <span m="3544620">essentially,</span> <span m="3545670">have</span> <span m="3545910">that</span> <span m="3546360">thing</span> <span m="3546680">be</span> <span m="3547000">assigned.</span> <span m="3547310">Then I can hand</span> <span m="3547620">that</span> <span m="3547910">reference</span> <span m="3548510">to</span> <span m="3548650">a</span> <span m="3548670">bunch</span> <span m="3548980">of different</span> <span m="3549160">people.</span> <span m="3549680">Kind</span> <span m="3549870">of</span> <span m="3550000">like I was</span> <span m="3550320">saying in</span> <span m="3550480">response</span> <span m="3550790">to his</span> <span m="3550980">question,</span> <span m="3551340">it</span> <span m="3551710">acts as a</span> <span m="3552090">capability.</span> <span m="3553730">The</span> <span m="3554100">server</span> <span m="3554430">can then</span> <span m="3554700">check</span> <span m="3554940">that</span> <span m="3555020">expiration</span> <span m="3555580">date</span> <span m="3555770">from when it</span> <span m="3556020">actually</span> <span m="3556310">sees</span> <span m="3556560">it</span> <span m="3557110">and</span> <span m="3557290">then</span> <span m="3557410">not</span> <span m="3557580">actually--</span> </p>
<p><span m="3558200">AUDIENCE:  But</span> <span m="3558686">even if the</span> <span m="3559172">expiration date</span> <span m="3559658">is</span> <span m="3560144">like 200 milliseconds</span> <span m="3560630">in the future or</span> <span m="3561116">something,</span> <span m="3561602">as long</span> <span m="3562088">as the attacker</span> <span m="3563060">has</span> <span m="3563546">[INAUDIBLE]</span> <span m="3564032">latency,</span> <span m="3564518">then they</span> <span m="3565004">might send</span> <span m="3565976">two</span> <span m="3566462">[INAUDIBLE]</span> <span m="3567920">two</span> <span m="3568406">copies</span> <span m="3568892">instead of</span> <span m="3569378">one.</span> </p>
<p><span m="3569864">PROFESSOR:  Yeah.</span> <span m="3570350">That's</span> <span m="3570520">exactly</span> <span m="3570720">right.</span> <span m="3571010">That's</span> <span m="3571150">exactly</span> <span m="3571190">right.</span> <span m="3571690">So</span> <span m="3571850">yeah,</span> <span m="3572370">if</span> <span m="3572640">the</span> <span m="3572820">attacker</span> <span m="3573590">can</span> <span m="3573780">somehow--</span> <span m="3575090">like</span> <span m="3575210">a</span> <span m="3575320">network</span> <span m="3575640">attacker,</span> <span m="3576120">for example,</span> <span m="3576810">is</span> <span m="3576970">seeing</span> <span m="3577245">these</span> <span m="3577520">things</span> <span m="3577650">go</span> <span m="3578000">over the</span> <span m="3578070">wire--</span> <span m="3578950">and you're</span> <span m="3579210">right.</span> <span m="3579480">If</span> <span m="3579730">there's</span> <span m="3581120">enough</span> <span m="3582450">wiggle</span> <span m="3582580">room in the</span> <span m="3582870">expiration</span> <span m="3583160">date,</span> <span m="3583450">then they can</span> <span m="3583680">exactly</span> <span m="3584170">do that</span> <span m="3584545">attack.</span> <span m="3584920">That's right.</span> <span m="3587810">OK.</span> <span m="3589030">So</span> <span m="3589960">that</span> <span m="3590490">is</span> <span m="3591040">an</span> <span m="3591290">overview</span> <span m="3592040">of</span> <span m="3592120">how</span> <span m="3592400">these</span> <span m="3592820">stateless</span> <span m="3593220">cookies</span> <span m="3593530">work.</span> </p>
<p><span m="3594260">And</span> <span m="3594380">so</span> <span m="3594850">one</span> <span m="3595145">question</span> <span m="3595440">that's interesting</span> <span m="3595900">is</span> <span m="3596240">you might think,</span> <span m="3596290">well,</span> <span m="3596560">what</span> <span m="3596770">does</span> <span m="3596860">it</span> <span m="3597210">mean</span> <span m="3597530">to</span> <span m="3597850">log</span> <span m="3598140">out</span> <span m="3598790">with</span> <span m="3599050">this</span> <span m="3599310">type of</span> <span m="3600042">cookie?</span> <span m="3600670">And</span> <span m="3601150">the</span> <span m="3601420">answer is</span> <span m="3601750">that</span> <span m="3601930">you</span> <span m="3601980">don't</span> <span m="3602580">really</span> <span m="3602810">log</span> <span m="3603160">out.</span> <span m="3603455">I</span> <span m="3603750">mean,</span> <span m="3604090">you have</span> <span m="3604350">this</span> <span m="3604570">key.</span> <span m="3604880">And so</span> <span m="3605010">whenever</span> <span m="3605290">you</span> <span m="3605400">want</span> <span m="3605560">to</span> <span m="3605620">send</span> <span m="3605940">a</span> <span m="3606240">request,</span> <span m="3606500">you just</span> <span m="3607440">send</span> <span m="3607750">it.</span> <span m="3608210">You</span> <span m="3608610">include</span> <span m="3609010">this</span> <span m="3609470">dude</span> <span m="3609810">right</span> <span m="3610020">here,</span> <span m="3610400">and then you're</span> <span m="3610580">ready to</span> <span m="3610810">go.</span> </p>
<p><span m="3611420">Now,</span> <span m="3611750">one</span> <span m="3611960">thing the</span> <span m="3612090">server</span> <span m="3612400">could</span> <span m="3612650">do,</span> <span m="3612920">for example,</span> <span m="3613190">though, is</span> <span m="3613530">revoke</span> <span m="3613995">your key.</span> <span m="3615660">So</span> <span m="3615860">the</span> <span m="3616310">server</span> <span m="3616530">revokes your</span> <span m="3616890">key.</span> <span m="3617100">Then</span> <span m="3617450">you</span> <span m="3617550">can</span> <span m="3617650">generate one of</span> <span m="3618080">these</span> <span m="3618390">things.</span> <span m="3619130">But</span> <span m="3619290">when you</span> <span m="3619420">send</span> <span m="3619640">the</span> <span m="3619830">message</span> <span m="3620200">over there,</span> <span m="3620570">the</span> <span m="3620880">server's</span> <span m="3621260">going to</span> <span m="3621520">say,</span> <span m="3621780">aha,</span> <span m="3621940">I know</span> <span m="3622250">what your</span> <span m="3622540">user ID</span> <span m="3622940">is.</span> <span m="3623320">You've</span> <span m="3623490">been</span> <span m="3623790">revoked,</span> <span m="3624090">so I'm</span> <span m="3624270">not going</span> <span m="3624620">to honor</span> <span m="3624910">your request.</span> <span m="3626310">But</span> <span m="3626420">it's</span> <span m="3626770">a</span> <span m="3626830">little</span> <span m="3627070">bit</span> <span m="3627330">interesting.</span> <span m="3627910">And</span> <span m="3628180">revocation,</span> <span m="3628870">as</span> <span m="3628970">we'll</span> <span m="3629090">talk</span> <span m="3629340">more</span> <span m="3629520">about with</span> <span m="3629890">things</span> <span m="3630060">like</span> <span m="3630150">SSL,</span> <span m="3630900">is</span> <span m="3631040">always a</span> <span m="3631320">tricky</span> <span m="3631740">issue,</span> <span m="3632740">because</span> <span m="3633420">as</span> <span m="3633570">it</span> <span m="3633670">turns</span> <span m="3633940">out,</span> <span m="3634390">taking</span> <span m="3635080">authority</span> <span m="3635380">away</span> <span m="3635640">from</span> <span m="3635900">human</span> <span m="3636170">users</span> <span m="3636540">is often</span> <span m="3636910">much</span> <span m="3637110">more</span> <span m="3637240">difficult</span> <span m="3637530">than giving</span> <span m="3637820">it to them</span> <span m="3638225">in the</span> <span m="3638630">first place.</span> <span m="3640550">So</span> <span m="3640940">that's the</span> <span m="3641040">basic</span> <span m="3641380">idea</span> <span m="3641710">behind</span> <span m="3644190">these</span> <span m="3644390">sort</span> <span m="3644795">of</span> <span m="3645200">stateless</span> <span m="3645690">cookies.</span> </p>
<p><span m="3646971">So</span> <span m="3647400">there's</span> <span m="3647560">also</span> <span m="3647870">a</span> <span m="3647940">couple</span> <span m="3648250">other</span> <span m="3650430">things</span> <span m="3650650">that you</span> <span m="3650990">can</span> <span m="3651280">use if you</span> <span m="3651570">want</span> <span m="3651830">to</span> <span m="3652230">avoid</span> <span m="3654030">traditional</span> <span m="3655090">cookies</span> <span m="3655600">for</span> <span m="3657265">implementing</span> <span m="3657580">authentication.</span> <span m="3658740">So</span> <span m="3658960">one thing</span> <span m="3659390">you can</span> <span m="3659820">imagine</span> <span m="3660196">doing</span> <span m="3660572">is</span> <span m="3666660">actually</span> <span m="3667270">using</span> <span m="3668700">DOM</span> <span m="3669030">storage</span> <span m="3674710">to</span> <span m="3674780">hold</span> <span m="3675960">client-side</span> <span m="3677380">authentication</span> <span m="3677870">information.</span> <span m="3679130">This</span> <span m="3679310">says</span> <span m="3679450">"alternatives"</span> <span m="3679895">in case</span> <span m="3680340">you couldn't</span> <span m="3680690">[? read that. ?]</span> </p>
<p><span m="3680940">So</span> <span m="3681200">one</span> <span m="3681230">thing</span> <span m="3681490">you</span> <span m="3681890">could do</span> <span m="3682020">is</span> <span m="3683350">to use</span> <span m="3683660">DOM</span> <span m="3683860">storage</span> <span m="3684240">to</span> <span m="3684530">hold</span> <span m="3685460">some</span> <span m="3685700">of</span> <span m="3685750">that</span> <span m="3685960">session</span> <span m="3686260">state</span> <span m="3686500">that you</span> <span m="3687000">would</span> <span m="3687500">ordinarily</span> <span m="3687950">put</span> <span m="3688445">inside of</span> <span m="3688940">a</span> <span m="3689230">cookie. So if you</span> <span m="3689520">remember from</span> <span m="3689660">last</span> <span m="3689950">lecture,</span> <span m="3690270">DOM</span> <span m="3690580">storage is</span> <span m="3691060">essentially</span> <span m="3691460">a</span> <span m="3691860">key</span> <span m="3692260">value</span> <span m="3692700">interface</span> <span m="3693255">that</span> <span m="3693580">the</span> <span m="3693690">browser</span> <span m="3694090">provides</span> <span m="3694850">to</span> <span m="3695280">each</span> <span m="3695530">origin.</span> <span m="3696050">So</span> <span m="3696460">you can</span> <span m="3696780">say GET</span> <span m="3697100">and</span> <span m="3697540">PUT</span> <span m="3697890">in both the</span> <span m="3698230">key and</span> <span m="3698690">eval</span> <span m="3699050">[? strings. ?]</span> <span m="3699410">So you</span> <span m="3699903">could</span> <span m="3700396">imagine</span> <span m="3700889">putting</span> <span m="3701382">authentication</span> <span m="3701875">stuff inside</span> <span m="3702370">there. Now,</span> <span m="3702520">the</span> <span m="3702670">nice</span> <span m="3703010">thing</span> <span m="3703180">about</span> <span m="3703560">this</span> <span m="3704290">is</span> <span m="3704610">that</span> <span m="3705110">DOM</span> <span m="3705810">storage</span> <span m="3706590">actually</span> <span m="3707060">has</span> <span m="3707520">much</span> <span m="3707810">less</span> <span m="3708070">wacky</span> <span m="3708510">rules</span> <span m="3709030">with</span> <span m="3709160">respect</span> <span m="3709820">to</span> <span m="3709880">the</span> <span m="3709970">same</span> <span m="3710250">origin</span> <span m="3710570">policy.</span> <span m="3710860">So</span> <span m="3711320">if it</span> <span m="3711780">were</span> <span m="3711970">cookies,</span> <span m="3712380">you can</span> <span m="3712530">do all</span> <span m="3712680">these</span> <span m="3712850">tricks</span> <span m="3713160">with</span> <span m="3713380">subdomains</span> <span m="3713860">and</span> <span m="3714340">stuff</span> <span m="3714590">like</span> <span m="3714780">that.</span> <span m="3715040">It</span> <span m="3715385">got kind</span> <span m="3715730">of</span> <span m="3716070">weird.</span> </p>
<p><span m="3716410">DOM</span> <span m="3716920">storage is</span> <span m="3717410">actually</span> <span m="3717780">strictly</span> <span m="3718650">tied</span> <span m="3719180">to</span> <span m="3719320">a single</span> <span m="3719700">origin.</span> <span m="3720080">You can't</span> <span m="3720405">do any</span> <span m="3720730">of this</span> <span m="3720860">subdomain</span> <span m="3721440">expansion,</span> <span m="3721910">all that</span> <span m="3722335">kind of</span> <span m="3722760">stuff.</span> <span m="3723070">And so</span> <span m="3723570">frameworks</span> <span m="3723910">like</span> <span m="3724280">Meteor</span> <span m="3724480">use</span> <span m="3724780">DOM</span> <span m="3724970">storage</span> <span m="3725610">for this</span> <span m="3725740">very</span> <span m="3726080">reason.</span> <span m="3726770">But</span> <span m="3726980">now,</span> <span m="3727010">note</span> <span m="3727280">that if you</span> <span m="3727500">want</span> <span m="3727700">to</span> <span m="3727750">store</span> <span m="3728220">authentication</span> <span m="3728760">information</span> <span m="3729030">in</span> <span m="3729300">DOM</span> <span m="3729570">storage,</span> <span m="3730030">then</span> <span m="3730270">you</span> <span m="3730450">have</span> <span m="3730630">to</span> <span m="3730740">write</span> <span m="3731150">JavaScript</span> <span m="3731710">code</span> <span m="3731950">yourself</span> <span m="3732580">to</span> <span m="3732740">actually</span> <span m="3733040">pass</span> <span m="3733460">that</span> <span m="3734180">authentication</span> <span m="3734890">information to the</span> <span m="3735370">server</span> <span m="3735660">to do the</span> <span m="3735950">[? encryption ?]</span> <span m="3736250">that's</span> <span m="3736660">necessary</span> <span m="3736970">and so on</span> <span m="3737280">and so</span> <span m="3737565">forth.</span> <span m="3739320">So</span> <span m="3739575">that's</span> <span m="3739830">one</span> <span m="3739940">thing</span> <span m="3740380">you could</span> <span m="3740500">do.</span> </p>
<p><span m="3740700">Another</span> <span m="3741040">thing you</span> <span m="3741250">could</span> <span m="3741310">do</span> <span m="3742130">is</span> <span m="3743660">actually</span> <span m="3744300">use</span> <span m="3744800">client-side</span> <span m="3748060">certificates.</span> <span m="3748360">So</span> <span m="3748560">for</span> <span m="3748860">example,</span> <span m="3749440">like</span> <span m="3749872">an</span> <span m="3750304">x.509</span> <span m="3751600">format.</span> <span m="3754510">And</span> <span m="3754980">so</span> <span m="3755160">what's</span> <span m="3755350">nice</span> <span m="3755580">about</span> <span m="3756140">these</span> <span m="3756780">certificates</span> <span m="3757240">is</span> <span m="3757520">that,</span> <span m="3758410">basically,</span> <span m="3758950">JavaScript</span> <span m="3759500">has</span> <span m="3759680">no</span> <span m="3759870">explicit</span> <span m="3760175">interface</span> <span m="3760480">to access</span> <span m="3761130">these</span> <span m="3761330">things.</span> <span m="3761680">So</span> <span m="3762030">unlike</span> <span m="3762470">cookies,</span> <span m="3762910">where there's</span> <span m="3763140">always</span> <span m="3763530">this</span> <span m="3763800">arms</span> <span m="3764070">race to find</span> <span m="3764560">these</span> <span m="3765050">weird</span> <span m="3765360">same-origin</span> <span m="3766270">bugs,</span> <span m="3767646">there's</span> <span m="3768110">no</span> <span m="3768330">explicit</span> <span m="3768570">JavaScript</span> <span m="3768930">interface</span> <span m="3769405">for that</span> <span m="3769880">stuff.</span> <span m="3770830">So</span> <span m="3770950">that's</span> <span m="3771110">very</span> <span m="3771260">nice</span> <span m="3771470">from a</span> <span m="3771590">security</span> <span m="3771960">perspective.</span> </p>
<p><span m="3773460">One</span> <span m="3773750">problem</span> <span m="3774060">that I</span> <span m="3774370">mentioned very</span> <span m="3774570">briefly</span> <span m="3775020">that we'll  look at</span> <span m="3775280">in</span> <span m="3775530">more</span> <span m="3775650">detail</span> <span m="3776620">in</span> <span m="3776750">later</span> <span m="3776860">lectures</span> <span m="3777145">is</span> <span m="3777430">that</span> <span m="3777810">the</span> <span m="3777900">revocation</span> <span m="3778480">[? store ?]</span> <span m="3778940">is kind</span> <span m="3779190">of</span> <span m="3779460">hard for</span> <span m="3779800">these.</span> <span m="3780140">So</span> <span m="3780580">once</span> <span m="3781020">a</span> <span m="3781260">user</span> <span m="3781900">leaves your</span> <span m="3782000">organization,</span> <span m="3782940">how do you</span> <span m="3783250">take</span> <span m="3783500">back</span> <span m="3783750">their</span> <span m="3784015">certificates?</span> <span m="3784570">And</span> <span m="3784810">it</span> <span m="3785080">becomes a</span> <span m="3785350">little</span> <span m="3785520">bit</span> <span m="3785670">tricky.</span> </p>
<p><span m="3787380">Also,</span> <span m="3787890">these</span> <span m="3788190">things</span> <span m="3788440">don't</span> <span m="3788630">have</span> <span m="3788860">great</span> <span m="3789120">usability,</span> <span m="3790020">because</span> <span m="3790220">who</span> <span m="3790510">wants to</span> <span m="3790850">install</span> <span m="3791105">a</span> <span m="3791360">bunch of</span> <span m="3791620">certificates</span> <span m="3792180">for</span> <span m="3792320">each</span> <span m="3792500">site that</span> <span m="3792700">you go</span> <span m="3793010">to?</span> <span m="3793740">So</span> <span m="3794020">as</span> <span m="3794200">a</span> <span m="3794250">result,</span> <span m="3794670">these</span> <span m="3794750">things</span> <span m="3795040">have a</span> <span m="3795100">lot</span> <span m="3795280">of</span> <span m="3795360">friction,</span> <span m="3795900">and</span> <span m="3796280">these</span> <span m="3796540">are</span> <span m="3796620">not</span> <span m="3796940">super</span> <span m="3797250">popular</span> <span m="3797550">except</span> <span m="3798155">for</span> <span m="3798460">in</span> <span m="3798920">companies</span> <span m="3799500">or</span> <span m="3799680">organizations</span> <span m="3799955">that</span> <span m="3800230">are</span> <span m="3800330">super</span> <span m="3800620">security-conscious.</span> <span m="3804950">All</span> <span m="3805020">right.</span> <span m="3805460">So</span> <span m="3806330">that</span> <span m="3806620">concludes</span> <span m="3807340">our</span> <span m="3807660">discussion</span> <span m="3808630">of</span> <span m="3808910">cookies.</span> </p>
<p><span m="3809860">And</span> <span m="3810170">so</span> <span m="3810510">now</span> <span m="3810990">let's</span> <span m="3811280">talk</span> <span m="3811750">about</span> <span m="3813890">protocol</span> <span m="3814830">vulnerabilities</span> <span m="3818130">in</span> <span m="3818590">the</span> <span m="3818680">web</span> <span m="3818890">stack.</span> <span m="3825489">And</span> <span m="3825970">so</span> <span m="3826260">one</span> <span m="3829030">kind</span> <span m="3829490">of</span> <span m="3830130">interesting</span> <span m="3830620">attack</span> <span m="3831520">is</span> <span m="3832080">that</span> <span m="3832930">there are</span> <span m="3833180">all</span> <span m="3833440">these</span> <span m="3834170">bugs</span> <span m="3834660">in</span> <span m="3834740">the</span> <span m="3834900">way</span> <span m="3835620">that</span> <span m="3835870">different</span> <span m="3836180">browser</span> <span m="3836530">components</span> <span m="3837160">parse</span> <span m="3837430">URLs,</span> <span m="3838222">for</span> <span m="3838620">example.</span> <span m="3839578">So</span> <span m="3841970">how</span> <span m="3842480">can</span> <span m="3842620">URL</span> <span m="3843040">parsing</span> <span m="3843450">get</span> <span m="3843610">us into</span> <span m="3843870">trouble?</span> <span m="3845710">So</span> <span m="3846040">suppose</span> <span m="3846710">that</span> <span m="3847150">we have</span> <span m="3847440">a URL that</span> <span m="3847680">looks</span> <span m="3848100">like</span> <span m="3848330">this.</span> <span m="3850220">HTTP</span> <span m="3851856">comes</span> <span m="3852260">from</span> <span m="3852580">example.com.</span> <span m="3858150">And</span> <span m="3858610">then</span> <span m="3859070">it's</span> <span m="3859390">got</span> <span m="3859510">an explicit</span> <span m="3859570">port</span> <span m="3860000">specifies</span> <span m="3860210">that</span> <span m="3860640">it's</span> <span m="3861670">80.</span> <span m="3862620">And</span> <span m="3862830">then</span> <span m="3863130">for</span> <span m="3863310">some</span> <span m="3863860">unknown</span> <span m="3864260">reason,</span> <span m="3864710">it</span> <span m="3865130">embeds</span> <span m="3866110">this</span> <span m="3867240">@</span> <span m="3867500">character</span> <span m="3867750">here.</span> </p>
<p><span m="3870380">So</span> <span m="3871020">the</span> <span m="3871150">question</span> <span m="3871550">is,</span> <span m="3871840">well, what</span> <span m="3872130">is</span> <span m="3872350">the</span> <span m="3872780">origin</span> <span m="3874090">of</span> <span m="3874520">this</span> <span m="3874700">particular</span> <span m="3876310">URL?</span> <span m="3877230">So</span> <span m="3877550">as</span> <span m="3877710">it</span> <span m="3877820">turns</span> <span m="3878170">out,</span> <span m="3878520">so</span> <span m="3878840">Flash</span> <span m="3881490">would</span> <span m="3881710">say</span> <span m="3882300">that</span> <span m="3883280">the</span> <span m="3884740">host name</span> <span m="3885010">portion</span> <span m="3885386">of this</span> <span m="3886420">was</span> <span m="3887020">example.com.</span> <span m="3889060">However,</span> <span m="3889470">when</span> <span m="3889810">the</span> <span m="3890150">browser</span> <span m="3892532">would</span> <span m="3892940">parse</span> <span m="3893405">this,</span> <span m="3895040">it</span> <span m="3895130">would</span> <span m="3895300">say that</span> <span m="3895735">the</span> <span m="3897920">host name</span> <span m="3898140">part of</span> <span m="3898300">the</span> <span m="3898720">origin</span> <span m="3898980">was</span> <span m="3899140">actually</span> <span m="3899980">foo.com.</span> <span m="3900680">So</span> <span m="3900830">this</span> <span m="3901020">is</span> <span m="3901160">clearly</span> <span m="3901530">a</span> <span m="3901570">bad</span> <span m="3901880">thing,</span> <span m="3902640">because</span> <span m="3902900">once</span> <span m="3903090">you</span> <span m="3903220">have</span> <span m="3903670">two</span> <span m="3903810">different</span> <span m="3904080">entities</span> <span m="3904550">who are</span> <span m="3904770">confused</span> <span m="3905490">about</span> <span m="3905730">the</span> <span m="3905810">origin</span> <span m="3906480">of</span> <span m="3906610">the</span> <span m="3906690">same</span> <span m="3907030">resource,</span> <span m="3907540">then</span> <span m="3907840">you can</span> <span m="3908080">get</span> <span m="3908390">into all</span> <span m="3908610">kinds</span> <span m="3909210">of nasty</span> <span m="3909260">problems.</span> </p>
<p><span m="3910220">So</span> <span m="3910270">for</span> <span m="3910470">example,</span> <span m="3912300">the</span> <span m="3912420">Flash</span> <span m="3914320">code</span> <span m="3914585">can be</span> <span m="3914850">malicious,</span> <span m="3915420">can</span> <span m="3915710">download</span> <span m="3915950">stuff</span> <span m="3916240">from</span> <span m="3916530">example.com.</span> <span m="3917530">If it</span> <span m="3917720">was</span> <span m="3917870">embedded</span> <span m="3917950">in the</span> <span m="3918260">page</span> <span m="3918570">from</span> <span m="3919290">foo.com, it</span> <span m="3919730">could then</span> <span m="3920900">do</span> <span m="3921010">some evil</span> <span m="3921400">things</span> <span m="3921894">there.</span> <span m="3922388">And it takes</span> <span m="3922882">some code from</span> <span m="3923376">example.com</span> <span m="3923870">and  run it with</span> <span m="3924360">the authority of</span> <span m="3924530">foo.com.</span> <span m="3925460">So</span> <span m="3925680">there's a</span> <span m="3925940">lot of</span> <span m="3926080">complex</span> <span m="3926570">parsing</span> <span m="3926880">rules</span> <span m="3927210">like</span> <span m="3927410">that</span> <span m="3928110">that</span> <span m="3928450">make</span> <span m="3928650">life</span> <span m="3928870">very</span> <span m="3929050">difficult.</span> <span m="3929690">This</span> <span m="3929850">is</span> <span m="3929960">a</span> <span m="3930030">continuing</span> <span m="3930700">theme.</span> <span m="3931085">Like,</span> <span m="3931470">as</span> <span m="3931680">we</span> <span m="3931880">just</span> <span m="3932090">saw</span> <span m="3932330">with</span> <span m="3932955">the</span> <span m="3933230">content</span> <span m="3933840">sanitization--</span> <span m="3934650">so</span> <span m="3934790">the</span> <span m="3934880">basic</span> <span m="3935280">idea</span> <span m="3935580">that it's</span> <span m="3935840">oftentimes</span> <span m="3936350">much</span> <span m="3936630">better</span> <span m="3937150">to</span> <span m="3937280">have</span> <span m="3937500">simpler</span> <span m="3937960">parsing</span> <span m="3938285">rules</span> <span m="3938610">for</span> <span m="3938710">this kind of</span> <span m="3939080">stuff.</span> <span m="3939840">It's</span> <span m="3940070">difficult</span> <span m="3940370">to</span> <span m="3940490">do</span> <span m="3940620">that</span> <span m="3940820">in</span> <span m="3940860">retrospect,</span> <span m="3941200">though,</span> <span m="3941540">because</span> <span m="3941945">HTML's</span> <span m="3942350">already</span> <span m="3942630">out</span> <span m="3942850">there.</span> <span m="3943380">So</span> <span m="3943930">all</span> <span m="3944210">aboard</span> <span m="3944665">the</span> <span m="3945120">wam-bulance.</span> </p>
<p><span m="3945790">So</span> <span m="3946450">this</span> <span m="3946900">next</span> <span m="3947280">one,</span> <span m="3948240">this</span> <span m="3948450">is</span> <span m="3948600">actually</span> <span m="3949010">my</span> <span m="3949280">all-time</span> <span m="3950250">favorite</span> <span m="3951250">security</span> <span m="3951940">vulnerability.</span> <span m="3954800">So</span> <span m="3955600">it</span> <span m="3956270">basically</span> <span m="3956650">attacks</span> <span m="3957960">the</span> <span m="3958040">way</span> <span m="3958295">that</span> <span m="3958650">the</span> <span m="3958730">browser</span> <span m="3959730">[? rule 1 ?]</span> <span m="3960320">JAR</span> <span m="3960590">files,</span> <span m="3961120">basically</span> <span m="3961520">Java</span> <span m="3961820">applets.</span> <span m="3963370">So</span> <span m="3963860">in</span> <span m="3964050">2007,</span> <span m="3965030">I</span> <span m="3965365">think--</span> <span m="3965700">yeah,</span> <span m="3965790">2007.</span> <span m="3966500">So</span> <span m="3966670">lifehacker.com--</span> <span m="3967110">great</span> <span m="3967760">website</span> <span m="3968170">if you</span> <span m="3968425">haven't been</span> <span m="3968680">to it.</span> <span m="3969280">Lifehacker.com</span> <span m="3970300">basically</span> <span m="3970790">explains</span> <span m="3971820">how</span> <span m="3972060">you</span> <span m="3972220">can</span> <span m="3972760">embed</span> <span m="3973990">ZIP</span> <span m="3974360">files</span> <span m="3975170">inside</span> <span m="3975780">of</span> <span m="3975940">images.</span> </p>
<p><span m="3978330">Now,</span> <span m="3978710">it's</span> <span m="3978890">not</span> <span m="3979160">quite</span> <span m="3979390">clear</span> <span m="3979860">who you're</span> <span m="3979950">trying</span> <span m="3980190">to</span> <span m="3980230">hide</span> <span m="3980620">from by</span> <span m="3980860">doing</span> <span m="3981240">this.</span> <span m="3981590">But</span> <span m="3981940">Lifehacker</span> <span m="3982180">says</span> <span m="3982520">you</span> <span m="3982760">can</span> <span m="3982920">do it,</span> <span m="3983160">so</span> <span m="3983560">hurray.</span> <span m="3984210">So</span> <span m="3984380">basically,</span> <span m="3985330">what</span> <span m="3985620">they</span> <span m="3985810">take</span> <span m="3986080">advantage</span> <span m="3986580">of</span> <span m="3987280">is</span> <span m="3987490">the</span> <span m="3987580">fact</span> <span m="3988480">that</span> <span m="3990260">if</span> <span m="3990400">you</span> <span m="3990560">look</span> <span m="3990780">at</span> <span m="3990930">image</span> <span m="3991270">formats</span> <span m="3992100">like</span> <span m="3992380">GIF,</span> <span m="3992570">for</span> <span m="3992700">example,</span> <span m="3993200">typically,</span> <span m="3993540">the</span> <span m="3993640">way</span> <span m="3993770">the</span> <span m="3993900">parser</span> <span m="3994280">works</span> <span m="3994900">is</span> <span m="3995040">the</span> <span m="3995120">parser</span> <span m="3995530">works</span> <span m="3995970">from</span> <span m="3996150">the</span> <span m="3996280">top,</span> <span m="3996730">down.</span> <span m="3998050">So</span> <span m="3998180">it finds</span> <span m="3998580">information</span> <span m="3998835">in</span> <span m="3999090">the</span> <span m="3999180">header.</span> <span m="3999390">And then</span> <span m="3999750">it sort of</span> <span m="4000170">computes</span> <span m="4000770">on</span> <span m="4001070">the</span> <span m="4001160">rest</span> <span m="4001460">of</span> <span m="4001570">the</span> <span m="4001760">bits here.</span> </p>
<p><span m="4002710">Now,</span> <span m="4002730">what</span> <span m="4002770">was</span> <span m="4003000">interesting</span> <span m="4003270">is</span> <span m="4003580">that,</span> <span m="4004520">as</span> <span m="4004700">it</span> <span m="4004810">turns</span> <span m="4005130">out,</span> <span m="4008330">programs</span> <span m="4008870">which</span> <span m="4009630">manipulate</span> <span m="4010340">ZIP</span> <span m="4010550">files</span> <span m="4010910">typically</span> <span m="4011270">work</span> <span m="4011740">from</span> <span m="4011910">the</span> <span m="4011990">bottom</span> <span m="4012530">up.</span> <span m="4013215">So</span> <span m="4013540">they</span> <span m="4013950">find</span> <span m="4014320">some</span> <span m="4014460">information</span> <span m="4014835">in the</span> <span m="4015210">footer of</span> <span m="4015430">the</span> <span m="4015590">file.</span> <span m="4016250">Then</span> <span m="4016500">they work</span> <span m="4016910">up to try</span> <span m="4017350">to</span> <span m="4017700">extract</span> <span m="4018010">what's</span> <span m="4018230">inside of</span> <span m="4018660">it.</span> <span m="4019400">So</span> <span m="4019760">what</span> <span m="4020190">Lifehacker</span> <span m="4020270">basically</span> <span m="4020650">said</span> <span m="4021030">is that</span> <span m="4021420">if</span> <span m="4021570">you</span> <span m="4021690">wanted</span> <span m="4021840">to</span> <span m="4022000">hide</span> <span m="4022660">a</span> <span m="4022810">ZIP</span> <span m="4022880">file</span> <span m="4023750">on</span> <span m="4024680">a</span> <span m="4025280">merger</span> <span m="4025600">or</span> <span m="4025700">something</span> <span m="4026010">like</span> <span m="4026240">this,</span> <span m="4026620">then</span> <span m="4026930">you could</span> <span m="4027020">actually</span> <span m="4027440">post</span> <span m="4027830">a</span> <span m="4027910">GIF</span> <span m="4028500">there</span> <span m="4031130">that</span> <span m="4031270">has</span> <span m="4031670">this</span> <span m="4031710">ZIP</span> <span m="4032040">file</span> <span m="4032330">here.</span> </p>
<p><span m="4033290">It</span> <span m="4033400">will</span> <span m="4033580">pass</span> <span m="4034020">all</span> <span m="4034220">the</span> <span m="4034290">validation</span> <span m="4035010">checks</span> <span m="4035860">on</span> <span m="4036250">Flickr or</span> <span m="4036420">whatever</span> <span m="4037170">as</span> <span m="4037500">an</span> <span m="4037830">image.</span> <span m="4038160">It</span> <span m="4038250">will</span> <span m="4038370">actually</span> <span m="4038640">display</span> <span m="4039270">as</span> <span m="4039440">an</span> <span m="4039540">image</span> <span m="4039780">in</span> <span m="4039840">your</span> <span m="4039980">browser.</span> <span m="4040850">Aha,</span> <span m="4040910">but</span> <span m="4041500">only</span> <span m="4041910">you</span> <span m="4042328">know</span> <span m="4042746">the hidden</span> <span m="4043164">truth,</span> <span m="4043582">that if</span> <span m="4044000">you</span> <span m="4044110">take</span> <span m="4044390">this</span> <span m="4045130">file</span> <span m="4045460">here,</span> <span m="4045700">you</span> <span m="4045840">can</span> <span m="4046010">pass it</span> <span m="4046480">to</span> <span m="4046735">unzip,</span> <span m="4047380">and</span> <span m="4047710">it</span> <span m="4048020">will</span> <span m="4048430">unzip</span> <span m="4048560">[INAUDIBLE]</span> <span m="4049550">information</span> <span m="4049830">there.</span> <span m="4050610">OK,</span> <span m="4050850">fine,</span> <span m="4051280">this</span> <span m="4051470">seems</span> <span m="4051870">like</span> <span m="4052070">it's sort of  like a</span> <span m="4052130">cheap</span> <span m="4052410">parlor</span> <span m="4052780">trick.</span> <span m="4053060">OK,</span> <span m="4053315">that's</span> <span m="4053760">nice.</span> </p>
<p><span m="4054460">Now,</span> <span m="4054710">attackers,</span> <span m="4055160">of</span> <span m="4055260">course,</span> <span m="4055510">never</span> <span m="4055820">sleep,</span> <span m="4056080">and</span> <span m="4056140">they</span> <span m="4056230">want</span> <span m="4056480">to ruin</span> <span m="4056890">our life.</span> <span m="4057300">So</span> <span m="4057400">what</span> <span m="4057750">did they</span> <span m="4058090">realize?</span> <span m="4058660">They</span> <span m="4058910">realize</span> <span m="4060420">that</span> <span m="4061850">JAR</span> <span m="4062380">files</span> <span m="4063710">are</span> <span m="4063880">basically</span> <span m="4064400">derivatives</span> <span m="4065140">of the</span> <span m="4065570">.ZIP</span> <span m="4066970">format.</span> <span m="4068700">So</span> <span m="4069120">this</span> <span m="4069330">meant that</span> <span m="4069620">you</span> <span m="4069700">could</span> <span m="4069840">actually</span> <span m="4070830">create</span> <span m="4071790">a</span> <span m="4072060">GIF</span> <span m="4072910">or</span> <span m="4073130">an</span> <span m="4073340">image</span> <span m="4073450">that had</span> <span m="4073910">a</span> <span m="4074010">JAR</span> <span m="4074400">file,</span> <span m="4074720">executable</span> <span m="4075360">JavaScript</span> <span m="4076000">code,</span> <span m="4076850">at</span> <span m="4077000">the</span> <span m="4077090">bottom</span> <span m="4077960">of it.</span> <span m="4078360">So then</span> <span m="4078600">people</span> <span m="4079330">called</span> <span m="4079670">this</span> <span m="4079880">attack--</span> <span m="4082130">they</span> <span m="4082280">called</span> <span m="4082600">it</span> <span m="4083515">the</span> <span m="4084000">GIFAR</span> <span m="4085455">attack.</span> </p>
<p><span m="4085940">[LAUGHTER]</span> </p>
<p><span m="4086910">Half</span> <span m="4087395">GIF,</span> <span m="4088370">half</span> <span m="4088820">JAR,</span> <span m="4089523">all</span> <span m="4089886">evil.</span> <span m="4090620">Because</span> <span m="4091810">this</span> <span m="4092130">was</span> <span m="4092280">amazing.</span> <span m="4092655">And</span> <span m="4092930">so</span> <span m="4093650">what</span> <span m="4093850">did</span> <span m="4093960">this mean that</span> <span m="4094430">you</span> <span m="4094670">could</span> <span m="4094850">do?</span> <span m="4095750">Well, it's</span> <span m="4096149">actually</span> <span m="4096540">quite</span> <span m="4096890">subtle.</span> <span m="4097340">Because</span> <span m="4098020">people</span> <span m="4098250">first</span> <span m="4098450">discovered</span> <span m="4098899">this,</span> <span m="4098979">they</span> <span m="4099069">thought</span> <span m="4099290">it was</span> <span m="4099500">amazing,</span> <span m="4099859">but they</span> <span m="4100240">didn't</span> <span m="4100740">quite know</span> <span m="4101120">how to</span> <span m="4101420">exploit it.</span> <span m="4101720">But</span> <span m="4101920">as it</span> <span m="4102029">turns</span> <span m="4102340">out,</span> <span m="4102960">you</span> <span m="4103090">can</span> <span m="4103590">do things</span> <span m="4103800">like the</span> <span m="4103880">following.</span> <span m="4104310">So</span> <span m="4104439">first</span> <span m="4104590">of</span> <span m="4104630">all,</span> <span m="4104830">how do</span> <span m="4104950">you</span> <span m="4105120">make</span> <span m="4105350">one</span> <span m="4105500">of</span> <span m="4105580">these</span> <span m="4105840">things?</span> <span m="4106729">You</span> <span m="4106819">just</span> <span m="4107069">use</span> <span m="4107260">CAD.</span> <span m="4108170">There is</span> <span m="4108460">literally</span> <span m="4108960">no</span> <span m="4109520">[? trickeration ?]</span> <span m="4109990">that</span> <span m="4110120">you</span> <span m="4110350">have to do.</span> <span m="4110805">Take</span> <span m="4111260">this,</span> <span m="4111569">take</span> <span m="4111850">this,</span> <span m="4112281">you</span> <span m="4112712">CAD it.</span> <span m="4113143">Boom,</span> <span m="4113574">you've got</span> <span m="4114005">a GIF/JAR.</span> </p>
<p><span m="4114870">So</span> <span m="4115430">once you</span> <span m="4115600">have that,</span> <span m="4115720">what</span> <span m="4116029">can you</span> <span m="4116529">do?</span> <span m="4116854">Well,</span> <span m="4117180">there</span> <span m="4117340">are</span> <span m="4117470">some</span> <span m="4117810">sensitive</span> <span m="4118310">sites</span> <span m="4119300">that</span> <span m="4119520">will</span> <span m="4119630">allow</span> <span m="4120069">users</span> <span m="4120430">to</span> <span m="4120529">submit</span> <span m="4121189">data,</span> <span m="4121950">but</span> <span m="4122120">not</span> <span m="4122420">arbitrary</span> <span m="4122899">types of</span> <span m="4123209">data.</span> <span m="4123979">So</span> <span m="4124170">[INAUDIBLE]</span> <span m="4124899">Flickr</span> <span m="4125336">or something like</span> <span m="4125773">that,</span> <span m="4126210">it may</span> <span m="4126649">not allow</span> <span m="4126779">you to submit</span> <span m="4127359">arbitrary</span> <span m="4128120">ActiveX</span> <span m="4128750">or</span> <span m="4128840">whatever,</span> <span m="4129460">arbitrary</span> <span m="4129800">HTML.</span> <span m="4130140">But it</span> <span m="4130450">will</span> <span m="4130760">allow</span> <span m="4131019">you</span> <span m="4131279">to submit</span> <span m="4131330">images.</span> <span m="4133439">So</span> <span m="4133560">what</span> <span m="4133680">you</span> <span m="4133779">could</span> <span m="4133939">do</span> <span m="4134529">is</span> <span m="4134740">construct</span> <span m="4135260">one</span> <span m="4135410">of</span> <span m="4135510">these</span> <span m="4135740">things,</span> <span m="4136470">submit</span> <span m="4136769">it</span> <span m="4137069">to one</span> <span m="4137310">of</span> <span m="4137439">these</span> <span m="4137859">sensitive</span> <span m="4138240">sites</span> <span m="4138580">that does</span> <span m="4138920">allow</span> <span m="4139210">you</span> <span m="4139770">to</span> <span m="4140270">submit</span> <span m="4140649">images.</span> <span m="4141880">And</span> <span m="4142040">then</span> <span m="4142180">what can</span> <span m="4142569">you do?</span> <span m="4143140">Well,</span> <span m="4144380">the</span> <span m="4144500">next</span> <span m="4144750">thing</span> <span m="4144880">you</span> <span m="4145060">need</span> <span m="4145359">to do</span> <span m="4145950">is--</span> <span m="4146255">so</span> <span m="4146560">yes,</span> <span m="4146700">the</span> <span m="4147149">first thing you</span> <span m="4147370">do is</span> <span m="4147729">you</span> <span m="4148609">submit</span> <span m="4148864">one</span> <span m="4149120">of</span> <span m="4149270">these</span> <span m="4149550">things</span> <span m="4150700">to</span> <span m="4151090">the</span> <span m="4151920">sensitive</span> <span m="4152399">[? cycle. ?]</span> </p>
<p><span m="4155150">And</span> <span m="4155580">then the</span> <span m="4155819">next</span> <span m="4156160">thing</span> <span m="4156490">that you</span> <span m="4156620">can</span> <span m="4156770">do</span> <span m="4157130">is</span> <span m="4157660">if</span> <span m="4157890">you</span> <span m="4158310">have</span> <span m="4158870">an</span> <span m="4160040">XSS</span> <span m="4160729">attack,</span> <span m="4160950">if you have</span> <span m="4161060">a</span> <span m="4161260">cross-site</span> <span m="4161850">vulnerability,</span> <span m="4163149">then</span> <span m="4163420">you</span> <span m="4163580">can</span> <span m="4164479">use</span> <span m="4165465">the</span> <span m="4165830">cross-site</span> <span m="4166430">scripting</span> <span m="4168120">to</span> <span m="4168529">inject</span> <span m="4169010">something</span> <span m="4169330">like</span> <span m="4169569">this.</span> <span m="4173100">And</span> <span m="4173240">due to</span> <span m="4173550">poor</span> <span m="4173899">board</span> <span m="4173990">management,</span> <span m="4174770">I will</span> <span m="4175246">draw</span> <span m="4175722">this</span> <span m="4176198">over</span> <span m="4176674">here.</span> <span m="4177630">So</span> <span m="4177930">you</span> <span m="4178189">can</span> <span m="4179584">inject</span> <span m="4180538">an</span> <span m="4181015">applet,</span> <span m="4181492">write</span> <span m="4182446">JavaScript</span> <span m="4182923">code</span> <span m="4187220">that</span> <span m="4187555">has,</span> <span m="4187890">as</span> <span m="4188250">its</span> <span m="4189069">sort</span> <span m="4189350">of</span> <span m="4189430">source,</span> <span m="4190950">you just</span> <span m="4191000">say,</span> <span m="4193510">cats.gif.</span> </p>
<p><span m="4198210">And</span> <span m="4198540">so</span> <span m="4199500">what's</span> <span m="4199810">interesting</span> <span m="4200280">about</span> <span m="4200550">this</span> <span m="4200740">is</span> <span m="4200870">that</span> <span m="4202130">this</span> <span m="4202610">code,</span> <span m="4203040">because</span> <span m="4203290">we're</span> <span m="4203470">using</span> <span m="4203680">a cross-site</span> <span m="4204050">scripting</span> <span m="4204490">vulnerability,</span> <span m="4205040">runs</span> <span m="4205410">in</span> <span m="4205470">the</span> <span m="4205570">context</span> <span m="4206050">of</span> <span m="4206160">the vulnerable</span> <span m="4206470">site.</span> <span m="4207620">This</span> <span m="4207820">has</span> <span m="4208020">been</span> <span m="4208380">uploaded</span> <span m="4208960">to</span> <span m="4209050">the vulnerable</span> <span m="4209440">site's</span> <span m="4209750">origin.</span> <span m="4210600">So</span> <span m="4210740">this</span> <span m="4210940">will</span> <span m="4211090">pass</span> <span m="4211480">the</span> <span m="4211560">same</span> <span m="4211840">origin</span> <span m="4212240">test.</span> <span m="4214220">But</span> <span m="4214350">however,</span> <span m="4214670">this</span> <span m="4214870">code</span> <span m="4215130">was</span> <span m="4215260">specified</span> <span m="4215750">by</span> <span m="4215880">the</span> <span m="4216030">attacker.</span> </p>
<p><span m="4217030">So</span> <span m="4217220">now</span> <span m="4217510">what</span> <span m="4217740">happens</span> <span m="4218180">is that</span> <span m="4218300">the</span> <span m="4218420">attacker</span> <span m="4219130">gets</span> <span m="4219300">to</span> <span m="4219540">run</span> <span m="4219830">that</span> <span m="4220110">Java</span> <span m="4220470">applet</span> <span m="4221260">in</span> <span m="4221400">the</span> <span m="4221500">context</span> <span m="4222140">of</span> <span m="4222220">the</span> <span m="4222680">victim's</span> <span m="4223130">site</span> <span m="4224860">with</span> <span m="4225070">all</span> <span m="4225360">the</span> <span m="4225630">authority of</span> <span m="4226080">that</span> <span m="4226380">origin</span> <span m="4227290">even</span> <span m="4227700">though</span> <span m="4228730">the</span> <span m="4228830">GIFAR</span> <span m="4230105">passed</span> <span m="4230390">the</span> <span m="4230490">vulnerable</span> <span m="4230960">site's</span> <span m="4231880">image</span> <span m="4232440">validation</span> <span m="4232770">code.</span> <span m="4234200">Because</span> <span m="4234470">one</span> <span m="4234660">of</span> <span m="4234740">these</span> <span m="4234960">things</span> <span m="4235180">will</span> <span m="4235370">actually</span> <span m="4235890">parse</span> <span m="4236450">correctly</span> <span m="4237020">as</span> <span m="4237310">a</span> <span m="4237360">GIF.</span> <span m="4238660">But</span> <span m="4238760">it</span> <span m="4238860">has</span> <span m="4239160">this</span> <span m="4239250">hidden</span> <span m="4239530">code</span> <span m="4239830">in here.</span> <span m="4240280">And so</span> <span m="4240380">[INAUDIBLE]</span> <span m="4240420">when the</span> <span m="4240780">browser</span> <span m="4240870">tries</span> <span m="4241190">to</span> <span m="4241490">execute</span> <span m="4242170">the</span> <span m="4242290">JAR</span> <span m="4242570">part of</span> <span m="4242860">it,</span> <span m="4243150">once</span> <span m="4243380">again, it</span> <span m="4243650">starts</span> <span m="4244030">from the</span> <span m="4244130">bottom,</span> <span m="4245000">comes</span> <span m="4245260">up</span> <span m="4245430">here,</span> <span m="4245660">and</span> <span m="4245800">just</span> <span m="4245940">ignores</span> <span m="4246310">that</span> <span m="4246640">part.</span> <span m="4247580">So</span> <span m="4247700">this is</span> <span m="4247860">actually</span> <span m="4248140">pretty</span> <span m="4248600">amazing.</span> </p>
<p><span m="4249720">And</span> <span m="4249995">so</span> <span m="4250270">there's</span> <span m="4250450">some</span> <span m="4250550">fairly</span> <span m="4250750">straightforward</span> <span m="4251070">ways</span> <span m="4251460">you</span> <span m="4251550">can</span> <span m="4251730">fix</span> <span m="4251900">something</span> <span m="4252230">like</span> <span m="4252450">this.</span> <span m="4253520">So</span> <span m="4253580">for</span> <span m="4253770">example,</span> <span m="4255520">you</span> <span m="4255660">can</span> <span m="4255770">actually</span> <span m="4256070">have</span> <span m="4256550">the</span> <span m="4257300">applet</span> <span m="4257770">loader</span> <span m="4258130">actually</span> <span m="4258490">understand</span> <span m="4258975">that</span> <span m="4259460">there</span> <span m="4259680">should</span> <span m="4259890">not</span> <span m="4260150">be</span> <span m="4260360">random</span> <span m="4260740">junk</span> <span m="4261040">up</span> <span m="4261160">here,</span> <span m="4261790">for</span> <span m="4261910">example.</span> <span m="4262690">What was</span> <span m="4262850">happening</span> <span m="4263210">in</span> <span m="4263280">many</span> <span m="4263480">cases</span> <span m="4263930">is that</span> <span m="4264380">there</span> <span m="4264530">was</span> <span m="4265220">information</span> <span m="4266020">in the</span> <span m="4266290">metadata</span> <span m="4266450">saying,</span> <span m="4266670">here's</span> <span m="4266890">the</span> <span m="4266980">length</span> <span m="4267230">of</span> <span m="4267300">this</span> <span m="4267460">resource.</span> <span m="4268390">And</span> <span m="4268510">then</span> <span m="4268680">if it</span> <span m="4269070">said,</span> <span m="4269340">the</span> <span m="4269710">length,</span> <span m="4269940">it</span> <span m="4270220">stops</span> <span m="4270580">here,</span> <span m="4270920">they</span> <span m="4271180">would</span> <span m="4271280">just say,</span> <span m="4271510">who</span> <span m="4271640">cares</span> <span m="4271950">what's</span> <span m="4272160">the</span> <span m="4272260">rest.</span> <span m="4272810">It's</span> <span m="4272990">probably</span> <span m="4273380">zero.</span> <span m="4274010">But</span> <span m="4274110">in</span> <span m="4274180">this</span> <span m="4274350">case,</span> <span m="4274570">it</span> <span m="4274660">wasn't.</span> </p>
<p><span m="4276070">What</span> <span m="4276560">I</span> <span m="4276690">love</span> <span m="4276880">about</span> <span m="4277170">this</span> <span m="4277390">is</span> <span m="4277500">that</span> <span m="4277840">it</span> <span m="4278000">really</span> <span m="4278270">shows</span> <span m="4278730">how</span> <span m="4279580">wide</span> <span m="4280530">the</span> <span m="4280630">software</span> <span m="4281190">stack</span> <span m="4281600">is</span> <span m="4281820">for</span> <span m="4281920">the</span> <span m="4282350">web.</span> <span m="4283150">So</span> <span m="4283250">sort of</span> <span m="4283500">taking</span> <span m="4283890">these</span> <span m="4284100">two</span> <span m="4284330">formats,</span> <span m="4285500">GIF</span> <span m="4286040">and</span> <span m="4286210">then</span> <span m="4286680">JAR,</span> <span m="4287610">we</span> <span m="4287960">can</span> <span m="4288120">actually create</span> <span m="4288350">this</span> <span m="4288500">really</span> <span m="4288710">nasty</span> <span m="4289100">attack.</span> <span m="4289510">You</span> <span m="4289630">can</span> <span m="4289730">actually</span> <span m="4290000">do</span> <span m="4290180">this</span> <span m="4290370">for</span> <span m="4290650">PDFs,</span> <span m="4291050">too.</span> <span m="4291315">You can</span> <span m="4291580">put</span> <span m="4291970">PDFs</span> <span m="4292310">here. I</span> <span m="4292660">think</span> <span m="4292850">that</span> <span m="4292900">was</span> <span m="4293010">called,</span> <span m="4293190">like,</span> <span m="4293380">the</span> <span m="4293630">[? PDFR ?]</span> <span m="4294040">attack</span> <span m="4294470">or something</span> <span m="4294900">like</span> <span m="4295060">this.</span> <span m="4295590">So</span> <span m="4295840">people</span> <span m="4296170">had</span> <span m="4296290">a</span> <span m="4296660">field</span> <span m="4296940">day with</span> <span m="4297100">this</span> <span m="4297210">for a</span> <span m="4297530">day.</span> <span m="4297850">These</span> <span m="4298030">vulnerabilities</span> <span m="4298090">have been</span> <span m="4298460">closed</span> <span m="4298820">now.</span> </p>
<p><span m="4299455">AUDIENCE:  So</span> <span m="4300100">what</span> <span m="4300500">can</span> <span m="4300900">you</span> <span m="4301130">do with</span> <span m="4301566">this</span> <span m="4302002">attack</span> <span m="4302438">that you</span> <span m="4302874">can't do with</span> <span m="4303310">[INAUDIBLE]</span> <span m="4303660">XSS</span> <span m="4304010">or your own</span> <span m="4304270">[INAUDIBLE]?</span> </p>
<p><span m="4304530">PROFESSOR: So</span> <span m="4304720">what's</span> <span m="4304910">nice--</span> <span m="4305220">yeah,</span> <span m="4305360">yeah.</span> <span m="4305780">So</span> <span m="4305930">good question. So</span> <span m="4306240">what's</span> <span m="4306300">nice</span> <span m="4306600">about</span> <span m="4306830">this</span> <span m="4307060">is</span> <span m="4307190">that</span> <span m="4308050">Java</span> <span m="4308630">oftentimes</span> <span m="4309360">can</span> <span m="4309480">be</span> <span m="4309580">more</span> <span m="4309790">powerful</span> <span m="4310590">than just</span> <span m="4310720">running</span> <span m="4311420">regular</span> <span m="4311780">JavaScript,</span> <span m="4312660">because</span> <span m="4312780">it has</span> <span m="4313200">slightly</span> <span m="4313560">different</span> <span m="4313840">rules</span> <span m="4314180">on,</span> <span m="4314460">[? same origin ?]</span> <span m="4315040">policy</span> <span m="4315460">and</span> <span m="4315550">stuff</span> <span m="4315810">like</span> <span m="4316020">that.</span> <span m="4316740">[INAUDIBLE]</span> <span m="4317210">get</span> <span m="4317820">more</span> <span m="4318170">lower-level</span> <span m="4318520">access</span> <span m="4318805">to</span> <span m="4319090">the</span> <span m="4319310">file</span> <span m="4319640">systems</span> <span m="4320150">or</span> <span m="4320280">things</span> <span m="4320580">like</span> <span m="4320790">that.</span> </p>
<p><span m="4322270">But</span> <span m="4322490">you're</span> <span m="4322580">right,</span> <span m="4322900">that</span> <span m="4323725">if you can do</span> <span m="4324060">cross-site</span> <span m="4324520">scripting,</span> <span m="4324960">running</span> <span m="4325170">JavaScript's</span> <span m="4325620">already</span> <span m="4325800">pretty</span> <span m="4326010">damaging.</span> <span m="4327130">But</span> <span m="4327390">the</span> <span m="4327790">main</span> <span m="4327960">advantage</span> <span m="4328050">of this is,</span> <span m="4328270">once again,</span> <span m="4328530">running</span> <span m="4328680">inside</span> <span m="4329120">the</span> <span m="4329270">applet.</span> <span m="4333600">All right.</span> <span m="4334340">Yeah.</span> <span m="4334580">So</span> <span m="4335050">like</span> <span m="4335190">I</span> <span m="4335210">said,</span> <span m="4335430">that's</span> <span m="4335710">my</span> <span m="4336080">favorite</span> <span m="4336180">attack</span> <span m="4336590">of all</span> <span m="4336850">time,</span> <span m="4337235">mainly</span> <span m="4337620">just</span> <span m="4337730">because</span> <span m="4338410">it</span> <span m="4338580">forced</span> <span m="4339150">serious-minded</span> <span m="4339900">security</span> <span m="4340330">individuals</span> <span m="4340920">to</span> <span m="4341160">say</span> <span m="4341380">GIFAR</span> <span m="4341650">all</span> <span m="4341890">the</span> <span m="4341970">time.</span> <span m="4343120">So</span> <span m="4343460">if</span> <span m="4343800">you're</span> <span m="4343970">easily</span> <span m="4344260">amused,</span> <span m="4344550">like</span> <span m="4344750">myself,</span> <span m="4345340">then</span> <span m="4345830">this</span> <span m="4346050">was</span> <span m="4346630">a</span> <span m="4346760">bonanza</span> <span m="4347060">for</span> <span m="4347200">you.</span> </p>
<p><span m="4348570">So</span> <span m="4349750">another</span> <span m="4349810">thing</span> <span m="4350565">that's</span> <span m="4350880">interesting</span> <span m="4351140">is that</span> <span m="4353230">there</span> <span m="4353490">are</span> <span m="4353540">actually</span> <span m="4354300">attacks</span> <span m="4356320">that</span> <span m="4356560">are</span> <span m="4356770">based</span> <span m="4357330">on</span> <span m="4357910">a</span> <span m="4358410">time.</span> <span m="4361230">So</span> <span m="4361380">you</span> <span m="4361500">might</span> <span m="4361740">not</span> <span m="4361960">think</span> <span m="4362170">of</span> <span m="4362300">time</span> <span m="4362750">as a</span> <span m="4363090">resource</span> <span m="4364160">which</span> <span m="4364350">could</span> <span m="4364540">be</span> <span m="4364840">a</span> <span m="4365020">vector</span> <span m="4365550">for</span> <span m="4365740">attacks.</span> <span m="4366390">But</span> <span m="4366725">as</span> <span m="4367060">I was</span> <span m="4367490">discussing</span> <span m="4368110">with</span> <span m="4369720">someone</span> <span m="4369970">a</span> <span m="4370050">few</span> <span m="4370220">minutes</span> <span m="4370530">ago,</span> <span m="4371900">yeah,</span> <span m="4372180">time</span> <span m="4372420">can</span> <span m="4372550">actually</span> <span m="4372850">be</span> <span m="4373020">a way</span> <span m="4373180">that a</span> <span m="4373480">system</span> <span m="4373780">can</span> <span m="4374060">be</span> <span m="4374340">exploited.</span> </p>
<p><span m="4375280">And</span> <span m="4375460">so</span> <span m="4375820">these</span> <span m="4376020">attacks</span> <span m="4376190">are</span> <span m="4376300">called--</span> <span m="4378420">the</span> <span m="4378685">particular</span> <span m="4378950">attack</span> <span m="4379280">I'm going to</span> <span m="4379570">talk</span> <span m="4379840">to you</span> <span m="4380160">about is</span> <span m="4380300">a</span> <span m="4380380">specific</span> <span m="4380820">example</span> <span m="4381460">of</span> <span m="4381720">a</span> <span m="4382220">covert</span> <span m="4383350">channel</span> <span m="4383715">attack.</span> <span m="4387330">And</span> <span m="4387510">so</span> <span m="4387740">the</span> <span m="4388090">idea</span> <span m="4388360">behind</span> <span m="4388680">the</span> <span m="4388780">covert</span> <span m="4389170">channel</span> <span m="4389540">attack</span> <span m="4390390">is</span> <span m="4390790">that,</span> <span m="4390960">essentially,</span> <span m="4392260">the</span> <span m="4392380">attacker</span> <span m="4392860">has</span> <span m="4393070">found</span> <span m="4393440">some</span> <span m="4393760">way</span> <span m="4394190">for</span> <span m="4394330">two</span> <span m="4394400">applications</span> <span m="4394990">to</span> <span m="4395140">exchange</span> <span m="4395630">information.</span> <span m="4397100">And</span> <span m="4397280">that</span> <span m="4398160">exchange</span> <span m="4398650">vector</span> <span m="4398910">is</span> <span m="4399170">not</span> <span m="4399480">an</span> <span m="4399790">officially</span> <span m="4400360">sanctioned</span> <span m="4400900">vector.</span> <span m="4401510">The</span> <span m="4401590">attacker</span> <span m="4401910">is</span> <span m="4402230">somehow</span> <span m="4402540">leveraging</span> <span m="4403010">some</span> <span m="4403210">other</span> <span m="4403650">part</span> <span m="4403980">of</span> <span m="4404050">the</span> <span m="4404130">system</span> <span m="4404980">to</span> <span m="4405230">pass</span> <span m="4405690">bits</span> <span m="4405960">of</span> <span m="4406180">information</span> <span m="4407210">between</span> <span m="4407960">two</span> <span m="4408240">different</span> <span m="4409110">entities.</span> </p>
<p><span m="4409520">So</span> <span m="4410780">a</span> <span m="4410880">good</span> <span m="4411200">example</span> <span m="4412090">of</span> <span m="4412250">some</span> <span m="4412470">of</span> <span m="4412530">this</span> <span m="4412660">stuff</span> <span m="4413250">is</span> <span m="4415410">something</span> <span m="4415665">called</span> <span m="4415920">CSS-based</span> <span m="4418986">sniffing</span> <span m="4419480">attacks.</span> <span m="4424270">So</span> <span m="4425420">what</span> <span m="4425897">is</span> <span m="4426374">this</span> <span m="4426851">attack</span> <span m="4427328">all</span> <span m="4427805">about?</span> <span m="4428282">So</span> <span m="4429236">attacker</span> <span m="4432100">has</span> <span m="4432290">a</span> <span m="4432370">website</span> <span m="4434034">that</span> <span m="4434506">the</span> <span m="4434978">user</span> <span m="4435450">can</span> <span m="4435922">visit.</span> <span m="4437340">And once</span> <span m="4437520">again,</span> <span m="4437710">getting</span> <span m="4438020">a</span> <span m="4438270">user to visit a</span> <span m="4438720">website</span> <span m="4439100">is</span> <span m="4439180">actually</span> <span m="4439510">usually</span> <span m="4439950">pretty</span> <span m="4440220">straightforward.</span> <span m="4440490">You</span> <span m="4440760">create</span> <span m="4441110">ads.</span> <span m="4441560">You</span> <span m="4441660">send them</span> <span m="4442020">a phishing</span> <span m="4442460">email,</span> <span m="4442720">whatever.</span> </p>
<p><span m="4442800">So</span> <span m="4443040">the</span> <span m="4443300">attacker has</span> <span m="4443790">a</span> <span m="4443880">website</span> <span m="4445460">that</span> <span m="4445950">the</span> <span m="4446120">user</span> <span m="4446410">visits.</span> <span m="4450020">And</span> <span m="4450460">the</span> <span m="4450710">goal</span> <span m="4451290">of</span> <span m="4451440">the</span> <span m="4451570">attacker</span> <span m="4453226">is</span> <span m="4453640">to</span> <span m="4453860">learn</span> <span m="4456240">what</span> <span m="4456600">other</span> <span m="4456900">websites</span> <span m="4460740">the</span> <span m="4460850">user</span> <span m="4461290">has</span> <span m="4461770">visited.</span> <span m="4466160">And</span> <span m="4466320">the</span> <span m="4466490">attacker</span> <span m="4467160">might</span> <span m="4467280">want</span> <span m="4467430">to</span> <span m="4467470">know</span> <span m="4467710">this</span> <span m="4467970">for</span> <span m="4468100">several</span> <span m="4468490">reasons.</span> <span m="4469040">Maybe</span> <span m="4469390">they're</span> <span m="4469610">trying</span> <span m="4469820">to</span> <span m="4469970">figure</span> <span m="4470260">out</span> <span m="4471120">what</span> <span m="4471340">kinds</span> <span m="4471600">of</span> <span m="4471960">search</span> <span m="4472350">terms</span> <span m="4472710">the user's</span> <span m="4473160">looking</span> <span m="4473450">for. Maybe</span> <span m="4473740">they're trying</span> <span m="4473900">to</span> <span m="4473970">figure</span> <span m="4474200">out</span> <span m="4474500">where</span> <span m="4474590">that</span> <span m="4474730">person's</span> <span m="4475020">employed,</span> <span m="4475290">or</span> <span m="4475410">maybe</span> <span m="4475800">they</span> <span m="4475900">want</span> <span m="4476100">to know if</span> <span m="4476573">they've</span> <span m="4477520">accessed</span> <span m="4478160">some</span> <span m="4478540">type of</span> <span m="4479430">embarrassing</span> <span m="4479840">material,</span> <span m="4480260">so on</span> <span m="4480690">and so</span> <span m="4481063">forth.</span> </p>
<p><span m="4481810">So</span> <span m="4483000">how</span> <span m="4483310">is the</span> <span m="4483550">attacker</span> <span m="4483770">going</span> <span m="4483890">to</span> <span m="4483950">do</span> <span m="4484220">that</span> <span m="4484880">if</span> <span m="4485220">the</span> <span m="4485475">only thing that the</span> <span m="4485730">attacker</span> <span m="4486130">controls</span> <span m="4486630">is</span> <span m="4486710">a</span> <span m="4486790">website</span> <span m="4487730">that</span> <span m="4487850">he</span> <span m="4488030">or</span> <span m="4488080">she</span> <span m="4488550">can</span> <span m="4488805">convince</span> <span m="4489060">the user to</span> <span m="4489260">visit?</span> <span m="4490130">Well,</span> <span m="4490916">the</span> <span m="4491940">exploit</span> <span m="4494870">is</span> <span m="4495570">to</span> <span m="4496000">leverage</span> <span m="4498170">link</span> <span m="4498580">colors.</span> <span m="4501400">So</span> <span m="4501580">you</span> <span m="4501720">know</span> <span m="4501920">like</span> <span m="4502110">when</span> <span m="4502230">you</span> <span m="4502340">go</span> <span m="4502740">to a</span> <span m="4503110">web</span> <span m="4503480">page and you</span> <span m="4503850">click</span> <span m="4504250">on a link, the</span> <span m="4504360">next</span> <span m="4504640">time</span> <span m="4504830">you</span> <span m="4504920">see</span> <span m="4505080">that</span> <span m="4505310">link,</span> <span m="4505740">it is</span> <span m="4505990">now a</span> <span m="4506200">different</span> <span m="4506500">color.</span> <span m="4508260">So</span> <span m="4508470">zoinks,</span> <span m="4509040">that's</span> <span m="4509260">actually a</span> <span m="4509750">security</span> <span m="4510160">vulnerability.</span> </p>
<p><span m="4511580">Because</span> <span m="4511750">what</span> <span m="4511970">that</span> <span m="4512250">means</span> <span m="4513080">is</span> <span m="4513330">that</span> <span m="4514080">in</span> <span m="4514210">this</span> <span m="4514470">attacker</span> <span m="4514930">website,</span> <span m="4515325">if</span> <span m="4515720">the</span> <span m="4515830">attacker</span> <span m="4516170">can</span> <span m="4516510">trick you</span> <span m="4516775">into</span> <span m="4517040">visiting</span> <span m="4517415">it,</span> <span m="4518810">then</span> <span m="4518940">the</span> <span m="4519050">attacker</span> <span m="4519460">can</span> <span m="4519630">generate</span> <span m="4520130">a</span> <span m="4520190">huge</span> <span m="4520830">list</span> <span m="4521680">of</span> <span m="4521820">candidate</span> <span m="4522180">URLs</span> <span m="4522900">that</span> <span m="4523090">you</span> <span m="4523190">might</span> <span m="4523520">have visited</span> <span m="4524506">and</span> <span m="4525000">then use</span> <span m="4525360">JavaScript</span> <span m="4526310">to</span> <span m="4526600">see</span> <span m="4527010">what</span> <span m="4527320">color</span> <span m="4528200">those</span> <span m="4528340">URLs</span> <span m="4528950">are.</span> <span m="4530530">And</span> <span m="4530920">if</span> <span m="4531200">the</span> <span m="4531290">URL</span> <span m="4531840">color</span> <span m="4532310">is</span> <span m="4532710">purple,</span> <span m="4533690">that</span> <span m="4533870">means,</span> <span m="4534240">aha,</span> <span m="4534710">you have visited</span> <span m="4535210">that</span> <span m="4535450">site.</span> <span m="4537430">So</span> <span m="4537600">this</span> <span m="4537800">was</span> <span m="4538020">very</span> <span m="4538420">subtle.</span> </p>
<p><span m="4539760">And</span> <span m="4539880">what's</span> <span m="4540110">interesting</span> <span m="4540580">about</span> <span m="4540910">this</span> <span m="4541310">is</span> <span m="4541520">that</span> <span m="4541700">you don't even</span> <span m="4542070">have</span> <span m="4542230">to</span> <span m="4542340">display</span> <span m="4542690">the</span> <span m="4543040">URLs</span> <span m="4543380">in many</span> <span m="4543720">cases</span> <span m="4543995">to</span> <span m="4544270">the</span> <span m="4544380">user.</span> <span m="4545070">You can</span> <span m="4545500">just sort of</span> <span m="4545660">conjure</span> <span m="4546170">up</span> <span m="4546570">a</span> <span m="4546700">domino</span> <span m="4547230">that</span> <span m="4547370">has</span> <span m="4547520">a</span> <span m="4547560">particular</span> <span m="4548000">href</span> <span m="4548740">and just</span> <span m="4548870">look at</span> <span m="4549180">its</span> <span m="4549320">style,</span> <span m="4549585">and</span> <span m="4549850">then</span> <span m="4550280">see</span> <span m="4550555">if it</span> <span m="4550830">has</span> <span m="4551050">the</span> <span m="4551160">visited</span> <span m="4551480">color or</span> <span m="4551800">not.</span> <span m="4552970">So this</span> <span m="4553380">is actually</span> <span m="4553750">pretty subtle.</span> </p>
<p><span m="4554200">So you</span> <span m="4554330">might</span> <span m="4554510">be</span> <span m="4554650">thinking,</span> <span m="4554930">well,</span> <span m="4555160">isn't</span> <span m="4555470">it going</span> <span m="4555570">to</span> <span m="4555650">be</span> <span m="4555890">inefficient</span> <span m="4556330">to</span> <span m="4556410">scan</span> <span m="4556900">through</span> <span m="4557230">all</span> <span m="4557600">these</span> <span m="4557940">candidate</span> <span m="4558040">URLs?</span> <span m="4559250">We</span> <span m="4559420">can</span> <span m="4559560">do</span> <span m="4559710">all</span> <span m="4559860">kinds</span> <span m="4560110">of</span> <span m="4560180">clever</span> <span m="4560430">optimizations.</span> <span m="4561340">So</span> <span m="4561380">for</span> <span m="4561530">example,</span> <span m="4562110">you</span> <span m="4562566">can have</span> <span m="4563022">multiple</span> <span m="4563478">passes.</span> <span m="4564850">In</span> <span m="4565180">your first</span> <span m="4565480">pass,</span> <span m="4565880">you</span> <span m="4565950">could</span> <span m="4566150">only</span> <span m="4566480">see</span> <span m="4566710">if</span> <span m="4566810">the</span> <span m="4566910">user</span> <span m="4567260">had</span> <span m="4567350">visited</span> <span m="4567600">top-level</span> <span m="4568220">URLs--</span> <span m="4569050">cnn.com,</span> <span m="4570420">Facebook.com,</span> <span m="4571180">so</span> <span m="4571570">on and</span> <span m="4571960">so forth.</span> <span m="4572340">If the</span> <span m="4572710">answer is</span> <span m="4572900">yes,</span> <span m="4573480">you</span> <span m="4573580">can</span> <span m="4573780">then</span> <span m="4574030">do</span> <span m="4574270">sort of</span> <span m="4574590">a</span> <span m="4574910">depth-first</span> <span m="4575460">search</span> <span m="4576130">on</span> <span m="4576660">those</span> <span m="4576780">hits</span> <span m="4577120">that you</span> <span m="4577350">found at the</span> <span m="4577420">top</span> <span m="4577750">level.</span> <span m="4579060">So</span> <span m="4579180">you</span> <span m="4579260">can</span> <span m="4579350">actually</span> <span m="4579670">really</span> <span m="4579940">constrain</span> <span m="4580205">the</span> <span m="4580470">search</span> <span m="4581250">space</span> <span m="4581690">this way.</span> </p>
<p><span m="4582410">So</span> <span m="4582690">this</span> <span m="4582900">was</span> <span m="4583030">really,</span> <span m="4583310">really</span> <span m="4583550">funny,</span> <span m="4583900">too,</span> <span m="4584440">if you</span> <span m="4584720">have</span> <span m="4584930">a demented</span> <span m="4585130">sense of</span> <span m="4585473">humor,</span> <span m="4586160">because</span> <span m="4586440">it</span> <span m="4586550">showed</span> <span m="4586890">that</span> <span m="4587340">this</span> <span m="4587660">very</span> <span m="4588120">innocuous</span> <span m="4589460">feature</span> <span m="4590660">that</span> <span m="4590860">browsers</span> <span m="4591330">support--</span> <span m="4591680">they're</span> <span m="4591900">just</span> <span m="4592120">trying to</span> <span m="4592200">help</span> <span m="4592550">you</span> <span m="4592640">out.</span> <span m="4592870">They're trying</span> <span m="4593330">to say,</span> <span m="4593786">hey,</span> <span m="4594242">buddy, here's</span> <span m="4594700">where you</span> <span m="4594810">visited. It can</span> <span m="4594900">actually</span> <span m="4595220">reveal</span> <span m="4595330">this</span> <span m="4595600">very</span> <span m="4595870">damaging</span> <span m="4596050">information.</span> </p>
<p><span m="4596800">So</span> <span m="4597240">what</span> <span m="4597430">is</span> <span m="4597560">a</span> <span m="4597640">solution</span> <span m="4598120">for this?</span> <span m="4599350">So</span> <span m="4599750">in</span> <span m="4599890">practice,</span> <span m="4600540">what</span> <span m="4601410">the</span> <span m="4601770">browser</span> <span m="4602115">[? runners ?]</span> <span m="4602460">did is</span> <span m="4602900">that they</span> <span m="4603040">made</span> <span m="4603350">it</span> <span m="4603550">such</span> <span m="4603840">that</span> <span m="4604940">the</span> <span m="4605040">browser</span> <span m="4605690">lies</span> <span m="4606030">to</span> <span m="4606260">JavaScript</span> <span m="4607240">about</span> <span m="4607520">the</span> <span m="4607610">color</span> <span m="4608020">of links.</span> <span m="4609440">So</span> <span m="4609670">basically,</span> <span m="4610230">when</span> <span m="4610390">JavaScript</span> <span m="4610970">tries</span> <span m="4611390">to look</span> <span m="4611810">at the</span> <span m="4612080">link and look at its</span> <span m="4612310">styling,</span> <span m="4613030">the</span> <span m="4613130">browser</span> <span m="4613560">always</span> <span m="4614070">says,</span> <span m="4614650">unvisited.</span> <span m="4616230">OK.</span> <span m="4616840">So</span> <span m="4617400">that</span> <span m="4617730">seems</span> <span m="4619790">somewhat</span> <span m="4620190">unfortunate,</span> <span m="4620830">but</span> <span m="4620970">it prevents</span> <span m="4621300">this</span> <span m="4621630">attack.</span> <span m="4621750">So I</span> <span m="4622190">guess we</span> <span m="4622480">can live</span> <span m="4622770">with it.</span> <span m="4623410">JavaScript</span> <span m="4623810">not being</span> <span m="4624220">able to read link</span> <span m="4624710">colors,</span> <span m="4625370">eh,</span> <span m="4625650">not the</span> <span m="4625930">end of the</span> <span m="4626060">world.</span> <span m="4627080">So</span> <span m="4627750">are</span> <span m="4627940">we</span> <span m="4628090">done,</span> <span m="4628580">though?</span> <span m="4628950">Does</span> <span m="4629430">this</span> <span m="4629640">fix the</span> <span m="4630087">problem</span> <span m="4630534">of</span> <span m="4631430">the</span> <span m="4631540">attacker</span> <span m="4631890">being able</span> <span m="4632240">to</span> <span m="4632330">figure</span> <span m="4632660">out</span> <span m="4632890">where</span> <span m="4633050">you've</span> <span m="4633170">been?</span> <span m="4633480">The</span> <span m="4633820">answer, of course,</span> <span m="4634520">is</span> <span m="4634660">no.</span> </p>
<p><span m="4635280">So</span> <span m="4636530">the</span> <span m="4636680">next</span> <span m="4636970">attack</span> <span m="4637770">that</span> <span m="4638090">the</span> <span m="4638750">attacker</span> <span m="4639190">can</span> <span m="4639515">do</span> <span m="4640300">is</span> <span m="4640760">a</span> <span m="4641220">cache-based</span> <span m="4642140">attack.</span> <span m="4644440">And</span> <span m="4644900">so the</span> <span m="4645370">intuition</span> <span m="4646010">here</span> <span m="4647560">is</span> <span m="4647750">that,</span> <span m="4649530">once</span> <span m="4649720">again,</span> <span m="4649920">the</span> <span m="4650000">goals</span> <span m="4650260">are the</span> <span m="4650420">same.</span> <span m="4650980">Attacker</span> <span m="4651030">wants to know</span> <span m="4651260">what</span> <span m="4651370">sites</span> <span m="4651720">you</span> <span m="4651810">visited.</span> <span m="4652510">The</span> <span m="4652800">exploit</span> <span m="4653360">vector</span> <span m="4653890">is</span> <span m="4654030">that</span> <span m="4654290">information</span> <span m="4654970">that</span> <span m="4655110">has</span> <span m="4655310">been</span> <span m="4655500">cached</span> <span m="4656330">is</span> <span m="4656520">quicker</span> <span m="4656840">to</span> <span m="4656940">access.</span> <span m="4658270">That,</span> <span m="4658630">in</span> <span m="4658760">fact,</span> <span m="4659230">is the</span> <span m="4659300">whole</span> <span m="4659570">reason</span> <span m="4659890">why</span> <span m="4660050">you</span> <span m="4660170">cache it</span> <span m="4660470">in the</span> <span m="4660770">first</span> <span m="4661070">place.</span> </p>
<p><span m="4662170">So</span> <span m="4662330">once</span> <span m="4662630">again,</span> <span m="4662980">the</span> <span m="4663100">attacker</span> <span m="4663630">can</span> <span m="4663760">generate</span> <span m="4664660">a</span> <span m="4664810">list</span> <span m="4665240">of</span> <span m="4665360">candidate</span> <span m="4665910">objects</span> <span m="4667040">that</span> <span m="4667200">the attacker</span> <span m="4667380">thinks</span> <span m="4667650">you might</span> <span m="4667920">have</span> <span m="4668180">visited</span> <span m="4668920">and</span> <span m="4669060">then</span> <span m="4669260">just</span> <span m="4669520">time</span> <span m="4670390">how</span> <span m="4670660">quickly</span> <span m="4671130">those</span> <span m="4671370">objects</span> <span m="4671715">come</span> <span m="4672060">back</span> <span m="4672410">to the</span> <span m="4672870">attacker.</span> <span m="4673660">And</span> <span m="4674010">so if</span> <span m="4674180">the objects</span> <span m="4674620">come</span> <span m="4674770">back</span> <span m="4675000">quickly,</span> <span m="4675855">you know</span> <span m="4676260">[? you need some ?]</span> <span m="4676330">threshold,</span> <span m="4677150">the</span> <span m="4677320">attacker</span> <span m="4677660">can</span> <span m="4677710">guess that</span> <span m="4678090">you,</span> <span m="4678200">in fact,</span> <span m="4678490">have been</span> <span m="4678640">to those</span> <span m="4678990">objects</span> <span m="4679460">before.</span> <span m="4679830">So</span> <span m="4680200">does</span> <span m="4680570">that</span> <span m="4680990">make</span> <span m="4681160">sense?</span> <span m="4682060">Once again,</span> <span m="4682390">the</span> <span m="4682470">browser's</span> <span m="4682930">just</span> <span m="4683030">trying</span> <span m="4683120">to</span> <span m="4683200">help</span> <span m="4683460">you</span> <span m="4683600">out.</span> <span m="4683990">But you</span> <span m="4684090">can</span> <span m="4684270">leverage</span> <span m="4684730">these</span> <span m="4684920">techniques</span> <span m="4685730">to</span> <span m="4685910">figure</span> <span m="4686250">out</span> <span m="4687160">some</span> <span m="4687510">evil</span> <span m="4687775">knowledge.</span> </p>
<p><span m="4689390">And</span> <span m="4689530">what's</span> <span m="4689690">interesting</span> <span m="4690110">about</span> <span m="4690470">this</span> <span m="4690755">is</span> <span m="4691040">that</span> <span m="4691320">this</span> <span m="4691540">attack</span> <span m="4692260">can</span> <span m="4692470">actually</span> <span m="4693470">leverage</span> <span m="4693790">some</span> <span m="4693890">very</span> <span m="4694140">interesting</span> <span m="4695030">geographic</span> <span m="4695700">location</span> <span m="4696470">information.</span> <span m="4697530">So</span> <span m="4697640">imagine</span> <span m="4698130">that</span> <span m="4698460">we're</span> <span m="4698640">doing</span> <span m="4699000">attacks</span> <span m="4699680">on</span> <span m="4700300">Google</span> <span m="4701083">Map</span> <span m="4701426">tiles,</span> <span m="4702090">for</span> <span m="4702200">example.</span> <span m="4702780">So</span> <span m="4703150">if</span> <span m="4703310">I</span> <span m="4703780">detect</span> <span m="4704040">that you've</span> <span m="4704180">actually</span> <span m="4704790">accessed</span> <span m="4705065">a</span> <span m="4705340">series</span> <span m="4705605">of</span> <span m="4705870">Google</span> <span m="4705930">Map</span> <span m="4706330">tiles,</span> <span m="4706980">that</span> <span m="4707260">probably</span> <span m="4707760">means</span> <span m="4708110">you are</span> <span m="4708480">either</span> <span m="4708730">in</span> <span m="4708920">that</span> <span m="4709180">place</span> <span m="4709900">or</span> <span m="4710140">you're</span> <span m="4710410">interested</span> <span m="4710710">in</span> <span m="4711610">other people</span> <span m="4711710">who might be</span> <span m="4712020">in that</span> <span m="4712330">place.</span> <span m="4712650">So it's</span> <span m="4713010">actually</span> <span m="4713310">a</span> <span m="4713360">pretty</span> <span m="4713660">powerful</span> <span m="4714420">attack.</span> <span m="4716080">So</span> <span m="4716330">OK.</span> </p>
<p><span m="4716610">So</span> <span m="4717290">how</span> <span m="4717620">can</span> <span m="4717960">you</span> <span m="4718200">fix</span> <span m="4718560">this</span> <span m="4718780">one?</span> <span m="4719460">Well,</span> <span m="4720040">this</span> <span m="4720300">one is</span> <span m="4720720">not</span> <span m="4721000">quite</span> <span m="4721440">clear.</span> <span m="4723300">You could</span> <span m="4723520">have a</span> <span m="4724010">site that</span> <span m="4724130">doesn't</span> <span m="4724180">cache</span> <span m="4724600">anything</span> <span m="4725020">at all.</span> <span m="4725410">And</span> <span m="4725650">then your</span> <span m="4725810">site's going</span> <span m="4726180">to</span> <span m="4726240">be slow.</span> <span m="4727150">So that</span> <span m="4727580">kind of</span> <span m="4727740">sucks.</span> <span m="4728200">So it's</span> <span m="4728360">not</span> <span m="4728890">quite</span> <span m="4729240">clear</span> <span m="4729570">how you</span> <span m="4729820">get around</span> <span m="4730150">this.</span> <span m="4730480">But</span> <span m="4730750">OK.</span> </p>
<p><span m="4731170">Let's</span> <span m="4731460">suppose</span> <span m="4732210">that</span> <span m="4732390">we</span> <span m="4732480">have</span> <span m="4732740">the</span> <span m="4733030">defense we put in</span> <span m="4733320">place</span> <span m="4733720">here--</span> <span m="4733900">JavaScript</span> <span m="4734370">can't</span> <span m="4734590">read</span> <span m="4734760">link colors.</span> <span m="4735570">Let's</span> <span m="4735790">assume</span> <span m="4736170">that</span> <span m="4736320">the</span> <span m="4736440">site</span> <span m="4736820">is</span> <span m="4736870">super</span> <span m="4737200">paranoid</span> <span m="4737930">it</span> <span m="4738090">caches</span> <span m="4738630">nothing.</span> <span m="4740010">So</span> <span m="4740550">have</span> <span m="4740890">we</span> <span m="4741320">completely</span> <span m="4741720">defended</span> <span m="4742050">ourselves</span> <span m="4742425">against</span> <span m="4742910">this</span> <span m="4743295">attack?</span> <span m="4743680">One</span> <span m="4743995">second.</span> <span m="4744310">So</span> <span m="4744400">the</span> <span m="4744590">answer</span> <span m="4745080">is</span> <span m="4745330">no.</span> <span m="4746325">Because</span> <span m="4746810">the</span> <span m="4747295">attacker</span> <span m="4747780">can</span> <span m="4748265">actually</span> <span m="4748750">launch</span> <span m="4749720">DNS-based</span> <span m="4750690">attacks.</span> <span m="4754100">So</span> <span m="4754300">the</span> <span m="4754410">intuition</span> <span m="4754755">is</span> <span m="4755100">that</span> <span m="4755720">even</span> <span m="4756220">if</span> <span m="4756390">you</span> <span m="4756490">don't</span> <span m="4756700">cache</span> <span m="4757090">anything,</span> <span m="4758140">when</span> <span m="4758510">you</span> <span m="4758730">access</span> <span m="4759200">a</span> <span m="4759300">resource</span> <span m="4759800">for</span> <span m="4759880">the</span> <span m="4759980">first</span> <span m="4760320">time,</span> <span m="4761220">you have</span> <span m="4761380">to</span> <span m="4761490">generate</span> <span m="4761890">a DNS</span> <span m="4762370">request</span> <span m="4762780">for</span> <span m="4762870">the</span> <span m="4762970">hosting that's</span> <span m="4763450">associated</span> <span m="4764050">with</span> <span m="4764120">that</span> <span m="4764270">resource.</span> </p>
<p><span m="4765410">So</span> <span m="4765550">once</span> <span m="4765790">again,</span> <span m="4766060">the attacker</span> <span m="4766240">can</span> <span m="4766610">look</span> <span m="4766960">in</span> <span m="4767080">time</span> <span m="4767490">and</span> <span m="4767570">see</span> <span m="4767760">how</span> <span m="4767920">long</span> <span m="4768130">it</span> <span m="4768250">takes</span> <span m="4768510">for</span> <span m="4769210">the</span> <span m="4769390">attacker to</span> <span m="4769790">access</span> <span m="4770450">these</span> <span m="4771110">candidate</span> <span m="4771570">objects</span> <span m="4771920">the</span> <span m="4772120">attacker</span> <span m="4772370">thinks you</span> <span m="4772470">may have</span> <span m="4772840">accessed.</span> <span m="4773400">And</span> <span m="4773620">if</span> <span m="4773760">they</span> <span m="4773860">come</span> <span m="4774070">back</span> <span m="4774310">quickly,</span> <span m="4774775">then</span> <span m="4775080">that's</span> <span m="4776360">perhaps</span> <span m="4777130">a</span> <span m="4777730">good</span> <span m="4778130">hint</span> <span m="4778555">that you've</span> <span m="4778980">resulted</span> <span m="4779670">the</span> <span m="4780010">DNS</span> <span m="4780260">name for</span> <span m="4780470">that</span> <span m="4780820">host</span> <span m="4781180">before.</span> <span m="4782290">And</span> <span m="4782560">so</span> <span m="4782730">this</span> <span m="4782910">works</span> <span m="4783240">even</span> <span m="4783550">if</span> <span m="4783850">you</span> <span m="4784105">don't</span> <span m="4784360">cache</span> <span m="4784780">anything,</span> <span m="4786120">because</span> <span m="4786670">the</span> <span m="4786760">DNS</span> <span m="4787170">cache</span> <span m="4787500">lives</span> <span m="4787580">with</span> <span m="4787850">the</span> <span m="4788090">OS,</span> <span m="4788550">not</span> <span m="4788825">with the</span> <span m="4789100">browser.</span> </p>
<p><span m="4789846">AUDIENCE: You've</span> <span m="4790292">mentioned,</span> <span m="4790738">I</span> <span m="4791184">think</span> <span m="4791630">last</span> <span m="4791920">class,</span> <span m="4792300">the</span> <span m="4792680">ability</span> <span m="4793060">to</span> <span m="4793481">get</span> <span m="4793902">JavaScript</span> <span m="4794323">to</span> <span m="4794744">take</span> <span m="4795165">screenshots.</span> </p>
<p><span m="4795590">PROFESSOR: Yeah,</span> <span m="4796070">yeah.</span> </p>
<p><span m="4796420">AUDIENCE: So</span> <span m="4796840">can you</span> <span m="4796990">just</span> <span m="4797470">render</span> <span m="4797850">the</span> <span m="4798215">[? link ?]</span> <span m="4798580">as</span> <span m="4798770">a single</span> <span m="4799045">pixel,</span> <span m="4799320">and then</span> <span m="4799740">take a</span> <span m="4800180">screenshot,</span> <span m="4800620">and</span> <span m="4801060">[INAUDIBLE]</span> <span m="4801500">that pixel?</span> </p>
<p><span m="4802380">PROFESSOR: Yeah.</span> <span m="4802900">Well--</span> <span m="4803550">so</span> <span m="4803680">you</span> <span m="4803850">could.</span> <span m="4804240">So</span> <span m="4804460">rendering</span> <span m="4804930">stuff</span> <span m="4805280">is always</span> <span m="4805390">a</span> <span m="4805450">little</span> <span m="4805720">bit</span> <span m="4805930">tricky,</span> <span m="4806270">because</span> <span m="4806610">you have to</span> <span m="4806710">play</span> <span m="4806950">these</span> <span m="4807180">games.</span> <span m="4807550">If you</span> <span m="4807840">want to</span> <span m="4808105">show</span> <span m="4808370">something to the</span> <span m="4808640">user,</span> <span m="4808910">it has to</span> <span m="4809140">flash</span> <span m="4809750">really</span> <span m="4810120">quickly.</span> <span m="4810435">Or else they</span> <span m="4810750">might</span> <span m="4810980">see</span> <span m="4811480">that someone's</span> <span m="4811680">entering this</span> <span m="4812150">huge</span> <span m="4812400">list of</span> <span m="4812580">URLs.</span> <span m="4812990">But</span> <span m="4813250">you're right.</span> <span m="4813390">If</span> <span m="4813550">you have</span> <span m="4814000">access</span> <span m="4814405">to the</span> <span m="4814810">screen-sharing</span> <span m="4815010">API,</span> <span m="4815540">a</span> <span m="4815600">lot</span> <span m="4815850">of</span> <span m="4815890">this</span> <span m="4816080">becomes</span> <span m="4816440">a</span> <span m="4816530">lot simpler.</span> </p>
<p><span m="4816930">AUDIENCE:  And</span> <span m="4817280">if you</span> <span m="4817630">just have</span> <span m="4817840">some</span> <span m="4818295">kind of</span> <span m="4818750">animated</span> <span m="4819205">image</span> <span m="4820570">that</span> <span m="4821030">looks</span> <span m="4821250">mostly</span> <span m="4821890">random,</span> <span m="4822130">then you</span> <span m="4822607">just</span> <span m="4823084">pay attention</span> <span m="4823561">to</span> <span m="4824038">one pixel</span> <span m="4824515">of it?</span> </p>
<p><span m="4825950">PROFESSOR: You're</span> <span m="4826220">exactly right.</span> <span m="4826470">I mean, in general, I</span> <span m="4826540">think</span> <span m="4826690">the</span> <span m="4826770">screen-sharing</span> <span m="4827100">API</span> <span m="4827430">is a</span> <span m="4827710">bad</span> <span m="4827980">idea.</span> <span m="4828800">I'm not</span> <span m="4829280">the</span> <span m="4829570">president of</span> <span m="4830070">the world,</span> <span m="4830510">so what</span> <span m="4830910">can I</span> <span m="4831310">do?</span> <span m="4832320">So</span> <span m="4832500">anyways,</span> <span m="4833740">so</span> <span m="4833910">DNS-based</span> <span m="4834840">attacks</span> <span m="4835150">work</span> <span m="4835760">even</span> <span m="4836060">if there</span> <span m="4836080">is</span> <span m="4836340">no</span> <span m="4836600">caching</span> <span m="4837070">that takes</span> <span m="4837503">place.</span> <span m="4838370">OK.</span> </p>
<p><span m="4838690">So</span> <span m="4838910">as the</span> <span m="4839060">final</span> <span m="4839430">piece</span> <span m="4839670">de</span> <span m="4839890">resistance,</span> <span m="4840640">so</span> <span m="4840840">you</span> <span m="4840940">might</span> <span m="4841330">think,</span> <span m="4841530">OK,</span> <span m="4841830">what if we</span> <span m="4842150">only</span> <span m="4842620">use</span> <span m="4843590">raw</span> <span m="4844010">IP</span> <span m="4844470">addresses</span> <span m="4844825">for all</span> <span m="4845180">of our</span> <span m="4845653">host</span> <span m="4846126">names?</span> <span m="4846600">We</span> <span m="4846730">don't</span> <span m="4846950">cache</span> <span m="4847245">a</span> <span m="4847540">thing!</span> <span m="4848260">OK?</span> <span m="4849020">And</span> <span m="4849400">we're</span> <span m="4849620">running</span> <span m="4850350">on</span> <span m="4850790">an updated</span> <span m="4851020">browser</span> <span m="4851290">that</span> <span m="4851560">doesn't</span> <span m="4851960">expose</span> <span m="4852700">link</span> <span m="4852980">colors</span> <span m="4853235">to</span> <span m="4853490">JavaScript.</span> <span m="4854340">So</span> <span m="4854530">surely we're</span> <span m="4854850">fine.</span> <span m="4855630">I'm</span> <span m="4855840">here to</span> <span m="4855930">tell you</span> <span m="4856030">you are</span> <span m="4856190">not</span> <span m="4856480">fine.</span> <span m="4858100">Because</span> <span m="4858500">what</span> <span m="4858880">the</span> <span m="4860090">attacker can</span> <span m="4860210">actually</span> <span m="4860620">do</span> <span m="4861390">is</span> <span m="4861820">take</span> <span m="4862240">advantage</span> <span m="4863270">of</span> <span m="4863470">rendering</span> <span m="4863530">attacks.</span> </p>
<p><span m="4867200">So</span> <span m="4867370">the</span> <span m="4867500">basic</span> <span m="4867890">idea</span> <span m="4868170">here</span> <span m="4869120">is</span> <span m="4869400">that</span> <span m="4869920">it</span> <span m="4870400">is</span> <span m="4870600">typically</span> <span m="4871340">faster</span> <span m="4873140">to</span> <span m="4873790">render</span> <span m="4874320">a</span> <span m="4874390">URL</span> <span m="4875550">that</span> <span m="4875740">you</span> <span m="4875830">have</span> <span m="4876000">visited</span> <span m="4876380">before</span> <span m="4877330">for</span> <span m="4877490">various</span> <span m="4877880">wacky</span> <span m="4878140">reasons</span> <span m="4878400">that have</span> <span m="4878630">to deal</span> <span m="4878840">with</span> <span m="4878950">how</span> <span m="4879390">browsers</span> <span m="4879790">[INAUDIBLE]</span> <span m="4880190">rendering</span> <span m="4880612">[INAUDIBLE]</span> <span m="4881034">internal.</span> <span m="4881880">And</span> <span m="4882050">so</span> <span m="4882240">what</span> <span m="4882500">the</span> <span m="4883260">attacker</span> <span m="4883690">can</span> <span m="4883910">do</span> <span m="4884430">is</span> <span m="4884590">actually</span> <span m="4884890">create</span> <span m="4885830">a candidate</span> <span m="4886100">iframe,</span> <span m="4886420">let's</span> <span m="4886740">say,</span> <span m="4888050">puts</span> <span m="4888220">some</span> <span m="4888360">content</span> <span m="4888790">in</span> <span m="4888910">there</span> <span m="4889450">that</span> <span m="4889580">the</span> <span m="4889700">attacker</span> <span m="4890005">thinks you</span> <span m="4890310">may have</span> <span m="4890670">visited,</span> <span m="4891005">and then</span> <span m="4891340">constantly</span> <span m="4891810">see</span> <span m="4892610">if</span> <span m="4892760">the</span> <span m="4892970">attacker</span> <span m="4893275">loses</span> <span m="4893580">access</span> <span m="4894520">to</span> <span m="4894825">that</span> <span m="4895130">iframe.</span> <span m="4895720">Because</span> <span m="4895950">as</span> <span m="4896180">that</span> <span m="4896480">iframe</span> <span m="4896710">is</span> <span m="4896890">loading,</span> <span m="4898150">the</span> <span m="4898240">browser</span> <span m="4898870">typically</span> <span m="4899030">thinks</span> <span m="4899550">that</span> <span m="4899730">iframe</span> <span m="4899840">belongs</span> <span m="4900310">to</span> <span m="4901630">the</span> <span m="4901760">attacker's</span> <span m="4902250">page.</span> <span m="4902720">And then</span> <span m="4903070">as soon</span> <span m="4903360">as that</span> <span m="4903430">different</span> <span m="4903800">origin</span> <span m="4904140">content</span> <span m="4904540">comes</span> <span m="4904800">in,</span> <span m="4905180">then</span> <span m="4905470">you'll start</span> <span m="4905910">getting these</span> <span m="4906360">access</span> <span m="4906850">errors.</span> </p>
<p><span m="4907195">Because</span> <span m="4907540">now</span> <span m="4907820">that</span> <span m="4908080">different</span> <span m="4908340">origin</span> <span m="4908560">[INAUDIBLE].</span> <span m="4909776">So now</span> <span m="4910120">the attacker</span> <span m="4910510">can't touch</span> <span m="4910785">anymore.</span> <span m="4911300">So</span> <span m="4911570">the</span> <span m="4911840">attacker</span> <span m="4912095">can</span> <span m="4912350">do</span> <span m="4912530">things</span> <span m="4912810">like</span> <span m="4913060">this</span> <span m="4913340">still</span> <span m="4913750">to</span> <span m="4913840">see</span> <span m="4914310">if</span> <span m="4914450">there's</span> <span m="4915340">caching,</span> <span m="4915730">rendering</span> <span m="4916040">information</span> <span m="4916350">[INAUDIBLE]</span> <span m="4916730">browser</span> <span m="4917660">for</span> <span m="4918150">these</span> <span m="4918510">candidate</span> <span m="4918720">sites.</span> <span m="4919510">So</span> <span m="4919650">anyways,</span> <span m="4919910">so</span> <span m="4920180">those</span> <span m="4920390">are</span> <span m="4920580">the</span> <span m="4920800">only</span> <span m="4921120">hopes and</span> <span m="4921410">dreams</span> <span m="4921700">I want</span> <span m="4922010">to crush in</span> <span m="4922300">you</span> <span m="4922710">today.</span> <span m="4923230">I</span> <span m="4923670">believe</span> <span m="4923990">we're running out</span> <span m="4924390">of</span> <span m="4924610">time.</span> <span m="4925210">But</span> <span m="4925510">I will</span> <span m="4925810">see</span> <span m="4926110">you next</span> <span m="4926410">time.</span> </p>
</div>
        <div id="vid_related" itemprop="description" class="tabContent hide">
<h2 class="subhead">Free Downloads</h2>
<h3 class="subsubhead">Video</h3>
<ul>
<li>iTunes U (<a href="https://itunes.apple.com/us/itunes-u/id1017908130">MP4 - 182MB</a>)</li>
<li>Internet Archive (<a href="https://archive.org/download/MIT6.858F14/MIT6_858F14_lec09_300k.mp4">MP4 - 182MB</a>)</li>
</ul>
<br>
<h3 class="subsubhead">Caption</h3>
<ul>
<li>English-US (<a href="../../../contents/video-lectures/lecture-9-securing-web-applications/WlmKwIe9z1Q.srt">SRT</a>)</li>
</ul>
</div>
    
   </div>  




      					 
        <div class="" id="parent-fieldname-bottom_html_area">
            
            
        </div>
    
               </main><!--Course_inner_media tag close -->
           		</div>
<!--Course_wrapper tag close -->
            </div>
<!--left tag close -->
            <aside id="right">
                <!--Begin Right Portion -->
                    <div>
    



</div>

                	<div>
    



</div>


        <div class="" id="parent-fieldname-rsi_top_html_area">
            
            
        </div>
    

<!-- RSI google ad space-->



<div id="google_ads">    
    <script async="async" src="https://www.googletagservices.com/tag/js/gpt.js"></script>
    <script type="text/javascript">var googletag = googletag || {}; googletag.cmd = googletag.cmd || [];</script>
    <script type="text/javascript">
googletag.cmd.push(function() {googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_A_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_A_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_B_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_B_DL').addService(googletag.pubads());googletag.defineSlot('/1064917/VIDEO_INDIVIDUAL_SLOT_C_DL', [[300, 250], [300, 300], [180, 200], [180, 150], [160, 600]], 'VIDEO_INDIVIDUAL_SLOT_C_DL').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
 googletag.enableServices();
});</script>
    <script language="javascript" type="text/javascript">
googletag.cmd.push(function() {googletag.pubads().set("TYPE","HOUSE");googletag.pubads().set("DEPARTMENT","6");googletag.pubads().set("CRS_BEG2","85");googletag.pubads().set("CRS_END","8");googletag.pubads().set("SESSION","F");googletag.pubads().set("YEAR","14");})
</script>
    
    <div id="VIDEO_INDIVIDUAL_SLOT_A_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_A_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_B_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_B_DL'); });</script>
    </div>
    <div id="VIDEO_INDIVIDUAL_SLOT_C_DL">
    	<script>googletag.cmd.push(function() { googletag.display('VIDEO_INDIVIDUAL_SLOT_C_DL'); });</script>
    </div>
</div>

<!-- End RSI ads--> 


<div>
    



</div>

            </aside><!--Right div close -->
            <div class="clear"></div>
        </div>
<!--grid tag close -->
      </div>
		
		<footer id="bottom">
			<div id="grid">
				
<div id="portletwrapper-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572" class="portletWrapper kssattr-portlethash-6f63772e626f74746f6d706f72746c65746d616e616765720a636f6e746578740a2f506c6f6e650a736974652d666f6f746572">
<div class="portletStaticText portlet-static-site-footer"><div id="footer">
<nav aria-label="Footer">     <nav id="foot-c1" class="grid_2 alpha" aria-labelledby="f-find-courses">       <span class="footer" id="f-find-courses" aria-hidden="true">Find Courses</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/courses/find-by-topic/">Find by Topic</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-number/">Find by Course Number</a></li>
    <li><a href="https://ocw.mit.edu/courses/find-by-department/">Find by Department</a></li>
    <li><a href="https://ocw.mit.edu/courses/new-courses/">New Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/most-visited-courses/">Most Visited Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/ocw-scholar/">OCW Scholar Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/audio-video-courses/">Audio/Video Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/online-textbooks/">Online Textbooks</a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights</a></li>
    <li><a href="https://ocw.mit.edu/resources/">Supplemental Resources</a></li>
    <li><a href="https://ocw.mit.edu/courses/mitx-related-courseware/">MITx &amp; Related OCW Courses</a></li>
    <li><a href="https://ocw.mit.edu/courses/mit-open-learning-library/">MIT Open Learning Library</a></li>
    <li><a href="https://ocw.mit.edu/courses/translated-courses/">Translated Courses</a></li>
</ul>
</nav>
<div id="foot-c2" class="grid_2"><nav aria-labelledby="f-for-educators">         <span id="f-for-educators" class="footer" aria-hidden="true">For Educators</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://chalk-radio.simplecast.com/">Chalk Radio Podcast</a></li>
    <li><a href="https://ocw.mit.edu/educator/">OCW Educator Portal </a></li>
    <li><a href="https://ocw.mit.edu/courses/instructor-insights/">Instructor Insights by Department</a></li>
    <li><a href="https://openlearning.mit.edu/campus/digital-innovations/" aria-label="External Link: Residential Digital Innovations">Residential Digital Innovations </a></li>
    <li><a href="https://ocw.mit.edu/high-school/">OCW Highlights for High School</a></li>
    <li><a href="https://ocw.mit.edu/educator/additional-resources/">Additional Resources</a></li>
</ul>
</nav></div>
<nav class="grid_2" id="foot-c3" aria-labelledby="f-donate">       <span id="f-donate" class="footer" aria-hidden="true">Give Now</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/give/">Make a Donation</a></li>
    <li><a href="https://ocw.mit.edu/give/why-give/">Why Give?</a></li>
    <li><a href="https://ocw.mit.edu/give/our-supporters/">Our Supporters</a></li>
    <li><a href="https://ocw.mit.edu/give/other-ways-to-contribute/">Other Ways to Contribute</a></li>
    <li><a href="https://ocw.mit.edu/support/">Become a Corporate Sponsor</a></li>
</ul>
</nav>
<div class="grid_2" id="foot-c4">
<nav aria-labelledby="f-about">         <span id="f-about" class="footer" aria-hidden="true">About</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/about/">About OpenCourseWare</a></li>
    <li><a href="https://ocw.mit.edu/about/site-statistics/">Site Statistics</a></li>
    <li><a href="https://ocw.mit.edu/about/ocw-stories/">OCW Stories</a></li>
    <li><a href="https://ocw.mit.edu/about/newsletter/">Newsletter</a></li>
    <li><a href="https://www.ocw-openmatters.org/">Open Matters Blog</a></li>
</ul>
</nav><!--about-->       <nav aria-labelledby="f-tools">         <span id="f-tools" class="footer" aria-hidden="true">Tools</span>
<ul class="foot-bullet" role="presentation">
    <li><a href="https://ocw.mit.edu/help/">Help &amp; FAQs</a></li>
    <li><a href="https://ocw.mit.edu/about/contactus">Contact Us</a></li>
    <li><a href="https://accessibility.mit.edu/" target="_blank">Accessibility</a></li>
    <li><a href="https://ocw.mit.edu/help/site-map/">Site Map</a></li>
    <li><a href="../../../common/terms/index.htm">Privacy &amp; Terms of Use</a></li>
    <li><a href="https://ocw.mit.edu/help/rss/">RSS Feeds</a></li>
</ul>
</nav><!--tools-->
</div>
</nav> <aside style="min-height: 289px;" aria-labelledby="f-our-corporate-supporters" class="grid_4 omega" id="foot-c5">           <span aria-hidden="true" class="footer" id="f-our-corporate-supporters">Our Corporate Supporters</span>           <!-- HOME_CORP_LOGO_1 -->
<div id="div-gpt-ad-1388181177156-0" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-0'); });
            </script></div>
<!-- HOME_CORP_LOGO_2 -->
<div id="div-gpt-ad-1388181177156-1" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-1'); });
            </script></div>
<!-- HOME_CORP_LOGO_3 -->
<div id="div-gpt-ad-1388181177156-2" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-2'); });
            </script></div>
<!-- HOME_CORP_LOGO_4 -->
<div id="div-gpt-ad-1388181177156-3" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-3'); });
            </script></div>
<!-- HOME_CORP_LOGO_5 -->
<div id="div-gpt-ad-1388181177156-4" class="sponsors_google_ads_even"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-4'); });
              </script></div>
<!-- HOME_CORP_LOGO_6 -->
<div id="div-gpt-ad-1388181177156-5" class="sponsors_google_ads_odd"><script type="text/javascript">
              googletag.cmd.push(function() { googletag.display('div-gpt-ad-1388181177156-5'); });
              </script></div>
</aside>
<div class="grid_12 alpha omega" itemprop="publisher" itemscope="" itemtype="http://schema.org/CollegeOrUniversity">
<h4 class="footer" style="border-top: thin solid #d5c9ba; padding-top: 10px; margin-bottom: 10px;">About <span itemprop="name">MIT OpenCourseWare</span>
</h4>
<p style="color: #999; font-size: 1em; line-height: 1.5em; margin-top: 10px;" itemprop="description">MIT OpenCourseWare is an online publication of materials from over 2,500 MIT courses, freely sharing knowledge with learners and educators around the world. <a href="https://ocw.mit.edu/about/">Learn more »</a></p>
</div>
<div id="foot-copy" class="grid_12 alpha omega" style="border-top: none;">
<a href="http://web.mit.edu"><img src="../../../common/images/logo_mit.png" alt="Massachusetts Institute of Technology logo and name." style="width: 195; height: 44;"></a><a href="https://openlearning.mit.edu/"><img src="https://ocw.mit.edu/images/mitol_logo.png" alt="MIT Open Learning logo and name." style="width: 265; height: 50; vertical-align: top; padding-left:30px;"></a><a href="https://www.oeglobal.org/"><img src="https://ocw.mit.edu/images/oeg_logo.gif" alt="Open Education Consortium logo." style="width: 219px; height: 59px; vertical-align: top; padding-left:20px;"></a><a rel="license" itemprop="useRightsUrl" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="../../../common/images/cc_by-nc-sa.png" alt="Creative Commons logo with terms BY-NC-SA." style="width: 126px; height: 44px; margin-right: 0; padding-left: 20px;"></a>
<p class="copyright">© 2001–2018<br>
Massachusetts Institute of Technology</p>
<p style="font-size: 0.9em; margin-bottom: 15px;">Your use of the MIT OpenCourseWare site and materials is subject to our <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="license">Creative Commons License</a> and other <a href="../../../common/terms/index.htm" rel="cc:morePermissions">terms of use</a>.</p>
</div>
</div></div>

</div>





                
			</div> <!-- bottom grid end -->
		</footer><!-- footer bottom end -->


   </body>
 </html>
